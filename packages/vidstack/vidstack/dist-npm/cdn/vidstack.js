import{b as Ks,c as C,d as J,e as nn,f as si,g as oi,h as se,i as st,j as Y,k as ot,l as ni,m as ai,n as li,o as an,p as fe}from"./chunks/vidstack-V4LVW72O.js";import{a as ri,b as xe}from"./chunks/vidstack-IMNMJXWE.js";import{a as R,b as on,c as Ct}from"./chunks/vidstack-KCALJS55.js";import{a as ue}from"./chunks/vidstack-NTONOYHO.js";import{a as G,b as rn,c as rt,d as sn,e as Ke,f as H}from"./chunks/vidstack-VWF6H2DD.js";import{a as $}from"./chunks/vidstack-WJVXB6YB.js";import{a as tt,b as Qs,c as Qe,d as Jo}from"./chunks/vidstack-RLDW4SC4.js";import{b as Te,d as it}from"./chunks/vidstack-4NFGSJSE.js";import{a as Wo,b as ei,c as Uo,e as ti,f as zo,g as Yo,k as jo,l as ii,m as Xo,n as Zo,o as en,p as Mt,q as St,r as tn}from"./chunks/vidstack-BVGUAZHX.js";import{B as b,C as z,D as T,E as U,F as Oo,G as l,H as re,I as N,J as w,K as V,L as Fs,M as Gs,N as No,O as F,P as Fo,Q as Zt,R as Go,S as Bo,T as h,U as X,V as pe,W as Be,X as Qo,_ as Bs,a as m,aa as me,b as Ge,ba as Ko,c as te,e as Ce,f as x,g as _o,h as Os,i as he,j as Ro,l as Ao,m as ie,n as S,o as Vo,q as K,r as A,s as Do,t as v,u as Ns,v as Xt,w as qo,x as Jt,y as Io,z as Ho}from"./chunks/vidstack-E3UITMP3.js";var Ws=s=>s===null?"":s+"",Yn=s=>s===null?null:s+"",jn=s=>s===null?0:Number(s);var Us=s=>s!==null,Xn=()=>null,Jn=s=>s===null?[]:JSON.parse(s),Zn=s=>s===null?{}:JSON.parse(s);function ea(s){if(s===null)return Yn;switch(typeof s){case"undefined":return Ws;case"string":return Ws;case"boolean":return Us;case"number":return jn;case"function":return Xn;case"object":return K(s)?Jn:Zn;default:return Ws}}var Ve=Symbol("ATTRS"),ln=Symbol("SETUP"),We=Symbol("SETUP_STATE"),Pt=Symbol("SETUP_CALLBACKS");function p(s,e){var t,i,r;let n=class n extends s{constructor(...a){if(super(...a),this[i]=0,this[r]=null,this.keepAlive=!1,this.forwardKeepAlive=!0,this.$=Ce(()=>No(e),null),this.$.$$._addHooks(this),e.props){let u=this.$props,c=Object.getOwnPropertyDescriptors(this);for(let f of Object.keys(c))f in e.props&&(u[f].set(this[f]),delete this[f])}}static get observedAttributes(){if(!this[Ve]&&e.props){let a=new Map;for(let u of Object.keys(e.props)){let c=this.attrs?.[u],f=S(c)?c:c&&c?.attr;f!==!1&&(f||(f=Zt(u)),a.set(f,{_prop:u,_converter:c&&!S(c)&&c?.converter||ea(e.props[u])}))}this[Ve]=a}return this[Ve]?Array.from(this[Ve].keys()):[]}get scope(){return this.$.$$._scope}get attachScope(){return this.$.$$._attachScope}get connectScope(){return this.$.$$._connectScope}get $props(){return this.$.$$._props}get $state(){return this.$.$$._$state}get state(){return this.$.state}attributeChangedCallback(a,u,c){let f=this.constructor;if(!f[Ve]){super.attributeChangedCallback?.(a,u,c);return}let y=f[Ve].get(a);y&&(this[y._prop]=y._converter(c))}connectedCallback(){let a=this.$?.$$;if(!a||a._destroyed)return;if(this[We]!==2){ia.call(this);return}if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),a._connect(),K(this[Pt])&&Fo(this[Pt],this),this[Pt]=null;let u=super.connectedCallback;u&&Ce(()=>u.call(this),this.connectScope)}disconnectedCallback(){let a=this.$?.$$;if(!a||a._destroyed)return;a._disconnect();let u=super.disconnectedCallback;u&&u.call(this),!this.keepAlive&&!this.hasAttribute("keep-alive")&&setTimeout(()=>{requestAnimationFrame(()=>{this.isConnected||a._destroy()})},0)}[(t=Ve,i=We,r=Pt,ln)](){let a=this.$.$$,u=this.constructor;if(a._destroyed&&console.warn(`[maverick] attempted attaching to destroyed element \`${this.tagName}\``),a._destroyed)return;let c=u[Ve];if(c)for(let f of this.attributes){let y=c.get(f.name);y&&y._converter&&a._props[y._prop].set(y._converter(this.getAttribute(f.name)))}a._setup(),a._attach(this),this[We]=2,this.connectedCallback()}subscribe(a){return this.$.subscribe(a)}destroy(){this.disconnectedCallback(),this.$.destroy()}};n[t]=null;let o=n;return ta(o,e),o}function ta(s,e){let t=s.prototype,i=e.prototype;if(e.props)for(let r of Object.keys(e.props))Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get(){return this.$props[r]()},set(o){this.$props[r].set(o)}});if(i[Fs])for(let r of i[Fs])Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get(){return this.$[r]},set(o){this.$[r]=o}});if(i[Gs])for(let r of i[Gs])t[r]=function(...o){return this.$[r](...o)}}function ia(){if(this[We]!==0)return;this[We]=1;let s=sa(this),e=s&&window.customElements.get(s.localName),t=s&&s[We]===2;if(s&&(!e||!t)){ra.call(this,s);return}dn.call(this,s)}async function ra(s){await window.customElements.whenDefined(s.localName),s[We]!==2&&await new Promise(e=>(s[Pt]??=[]).push(e)),dn.call(this,s)}function dn(s){if(this.isConnected){if(s){s.keepAlive&&s.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));let e=this.$.$$._scope;e&&s.$.$$._attachScope.append(e)}this[ln]()}}function sa(s){let e=s.parentNode,t=s.localName.split("-",1)[0]+"-";for(;e;){if(e.nodeType===1&&e.localName.startsWith(t))return e;e=e.parentNode}return null}function M(s,e=!1){(e||!window.customElements.get(s.tagName))&&window.customElements.define(s.tagName,s)}var di=Symbol(0),un=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"];var zs=re();function g(){return w(zs)}function oa(s){return s instanceof HTMLAudioElement}function na(s){return s instanceof HTMLVideoElement}function cn(s){return oa(s)||na(s)}var Z=class extends F{};var pn={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},ui=new Set(["Shift","Alt","Meta","Ctrl"]),aa='button, [role="button"]',hn='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]',ci=class extends Z{#e;constructor(e){super(),this.#e=e}onConnect(){l(this.#t.bind(this))}#t(){let{keyDisabled:e,keyTarget:t}=this.$props;if(e())return;let i=t()==="player"?this.el:document,r=T(!1);i===this.el?(this.listen("focusin",()=>r.set(!0)),this.listen("focusout",o=>{this.el.contains(o.target)||r.set(!1)})):(m(r)||r.set(document.querySelector("[data-media-player]")===this.el),v(document,"focusin",o=>{let n=o.composedPath().find(d=>d instanceof Element&&d.localName==="media-player");n!==void 0&&r.set(this.el===n)})),l(()=>{r()&&(v(i,"keyup",this.#i.bind(this)),v(i,"keydown",this.#r.bind(this)),v(i,"keydown",this.#s.bind(this),{capture:!0}))})}#i(e){let t=document.activeElement;if(!e.key||!this.$state.canSeek()||t?.matches(hn))return;let{method:i,value:r}=this.#o(e);if(!S(r)&&!K(r)){r?.onKeyUp?.({event:e,player:this.#e.player,remote:this.#e.remote}),r?.callback?.(e,this.#e.remote);return}i?.startsWith("seek")&&(e.preventDefault(),e.stopPropagation(),this.#l?(this.#u(e,i==="seekForward"),this.#l=null):(this.#e.remote.seek(this.#n,e),this.#n=void 0)),i?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}))}#r(e){if(!e.key||ui.has(e.key))return;let t=document.activeElement;if(t?.matches(hn)||Ho(e)&&t?.matches(aa))return;let{method:i,value:r}=this.#o(e),o=!e.metaKey&&/^[0-9]$/.test(e.key);if(!S(r)&&!K(r)&&!o){r?.onKeyDown?.({event:e,player:this.#e.player,remote:this.#e.remote}),r?.callback?.(e,this.#e.remote);return}if(!i&&o){e.preventDefault(),e.stopPropagation(),this.#e.remote.seek(this.$state.duration()/10*Number(e.key),e);return}if(i){switch(e.preventDefault(),e.stopPropagation(),i){case"seekForward":case"seekBackward":this.#c(e,i,i==="seekForward");break;case"volumeUp":case"volumeDown":let n=this.el.querySelector("[data-media-volume-slider]");if(n)n.dispatchEvent(new KeyboardEvent("keydown",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}));else{let a=e.shiftKey?.1:.05;this.#e.remote.changeVolume(this.$state.volume()+(i==="volumeUp"?+a:-a),e)}break;case"toggleFullscreen":this.#e.remote.toggleFullscreen("prefer-media",e);break;case"speedUp":case"slowDown":let d=this.$state.playbackRate();this.#e.remote.changePlaybackRate(Math.max(.25,Math.min(2,d+(i==="speedUp"?.25:-.25))),e);break;default:this.#e.remote[i]?.(e)}this.$state.lastKeyboardAction.set({action:i,event:e})}}#s(e){cn(e.target)&&this.#o(e).method&&e.preventDefault()}#o(e){let t={...this.$props.keyShortcuts(),...this.#e.ariaKeys},i=Object.keys(t).find(r=>{let o=t[r],n=K(o)?o.join(" "):S(o)?o:o?.keys;return(K(n)?n:n?.split(" "))?.map(a=>da(a).replace(/Control/g,"Ctrl").split("+"))?.some(a=>{let u=new Set(a.filter(c=>ui.has(c)));for(let c of ui){let f=c.toLowerCase()+"Key";if(!u.has(c)&&e[f])return!1}return a.every(c=>ui.has(c)?e[c.toLowerCase()+"Key"]:e.key===c.replace("Space"," "))})});return{method:i,value:i?t[i]:null}}#n;#a(e,t){let i=e.shiftKey?10:5;return this.#n=Math.max(0,Math.min((this.#n??this.$state.currentTime())+(t==="seekForward"?+i:-i),this.$state.duration()))}#l=null;#u(e,t){this.#l?.dispatchEvent(new KeyboardEvent(e.type,{key:t?"Right":"Left",shiftKey:e.shiftKey,trigger:e}))}#c(e,t,i){this.$state.canSeek()&&(this.#l||(this.#l=this.el.querySelector("[data-media-time-slider]")),this.#l?this.#u(e,i):this.#e.remote.seeking(this.#a(e,t),e))}},la=["!","@","#","$","%","^","&","*","(",")"];function da(s){return s.replace(/Shift\+(\d)/g,(e,t)=>la[t-1])}var mn={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:pn,storage:null};var ce={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},fn=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],gn=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],yn=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],ne=typeof window<"u"&&typeof window.document<"u"?window.document:{},ge="fullscreenEnabled"in ne&&Object.keys(ce)||fn[0]in ne&&fn||gn[0]in ne&&gn||yn[0]in ne&&yn||[],ua={requestFullscreen:function(s){return s[ge[ce.requestFullscreen]]()},requestFullscreenFunction:function(s){return s[ge[ce.requestFullscreen]]},get exitFullscreen(){return ne[ge[ce.exitFullscreen]].bind(ne)},get fullscreenPseudoClass(){return":"+ge[ce.fullscreen]},addEventListener:function(s,e,t){return ne.addEventListener(ge[ce[s]],e,t)},removeEventListener:function(s,e,t){return ne.removeEventListener(ge[ce[s]],e,t)},get fullscreenEnabled(){return!!ne[ge[ce.fullscreenEnabled]]},set fullscreenEnabled(s){},get fullscreenElement(){return ne[ge[ce.fullscreenElement]]},set fullscreenElement(s){},get onfullscreenchange(){return ne[("on"+ge[ce.fullscreenchange]).toLowerCase()]},set onfullscreenchange(s){return ne[("on"+ge[ce.fullscreenchange]).toLowerCase()]=s},get onfullscreenerror(){return ne[("on"+ge[ce.fullscreenerror]).toLowerCase()]},set onfullscreenerror(s){return ne[("on"+ge[ce.fullscreenerror]).toLowerCase()]=s}},Me=ua;var Ys=new X({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new tt,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:ti(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return ei&&this.mediaType==="video"&&(!this.playsInline||!Me.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new tt,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new tt,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(H).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){let s=Qs(this.buffered)??0;return Math.max(0,s-this.clipStartTime)},get bufferedEnd(){let s=Qe(this.buffered)??0;return Math.min(this.duration,Math.max(0,s-this.clipStartTime))},get seekableStart(){let s=Qs(this.seekable)??0;return Math.max(0,s-this.clipStartTime)},get seekableEnd(){let s=this.canPlay?Qe(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,s-this.clipStartTime)):s},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,savedState:null}),vn=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),ca=new Set([...vn,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function js(s,e=!1){let t=e?vn:ca;Ys.reset(s,i=>t.has(i)),te()}var nt=class extends Do{items=[];[$.readonly]=!1;get length(){return this.items.length}get readonly(){return this[$.readonly]}indexOf(e){return this.items.indexOf(e)}getById(e){return e===""?null:this.items.find(t=>t.id===e)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[$.add](e,t){let i=this.items.length;""+i in this||Object.defineProperty(this,i,{get(){return this.items[i]}}),!this.items.includes(e)&&(this.items.push(e),this.dispatchEvent(new A("add",{detail:e,trigger:t})))}[$.remove](e,t){let i=this.items.indexOf(e);i>=0&&(this[$.onRemove]?.(e,t),this.items.splice(i,1),this.dispatchEvent(new A("remove",{detail:e,trigger:t})))}[$.reset](e){for(let t of[...this.items])this[$.remove](t,e);this.items=[],this[$.setReadonly](!1,e),this[$.onReset]?.()}[$.setReadonly](e,t){this[$.readonly]!==e&&(this[$.readonly]=e,this.dispatchEvent(new A("readonly-change",{detail:e,trigger:t})))}};var kt=Symbol(0),at=class extends nt{get selected(){return this.items.find(e=>e.selected)??null}get selectedIndex(){return this.items.findIndex(e=>e.selected)}[$.onRemove](e,t){this[$.select](e,!1,t)}[$.add](e,t){e[kt]=!1,Object.defineProperty(e,"selected",{get(){return this[kt]},set:i=>{this.readonly||(this[$.onUserSelect]?.(),this[$.select](e,i))}}),super[$.add](e,t)}[$.select](e,t,i){if(t===e?.[kt])return;let r=this.selected;e&&(e[kt]=t),(t?r!==e:r===e)&&(r&&(r[kt]=!1),this.dispatchEvent(new A("change",{detail:{prev:r,current:this.selected},trigger:i})))}};var hi=class extends at{#e=!1;switch="current";get auto(){return this.#e||this.readonly}[ue.enableAuto];[$.onUserSelect](){this[ue.setAuto](!1)}[$.onReset](e){this[ue.enableAuto]=void 0,this[ue.setAuto](!1,e)}autoSelect(e){this.readonly||this.#e||!this[ue.enableAuto]||(this[ue.enableAuto]?.(e),this[ue.setAuto](!0,e))}getBySrc(e){return this.items.find(t=>t.src===e)}[ue.setAuto](e,t){this.#e!==e&&(this.#e=e,this.dispatchEvent(new A("auto-change",{detail:e,trigger:t})))}};var wt=class extends Z{#e;#t;constructor(e,t){super(),this.#e=e,this.#t=t}async onAttach(e){let t=this.$props[this.#e]();if(t==="eager")requestAnimationFrame(this.#t);else if(t==="idle")Ko(this.#t);else if(t==="visible"){let i,r=new IntersectionObserver(o=>{this.scope&&o[0].isIntersecting&&(i?.(),i=void 0,this.#t())});r.observe(e),i=x(()=>r.disconnect())}}};var pi=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}notify(e,...t){this.#e(new A(e,{detail:t?.[0],trigger:t?.[1]}))}async ready(e,t){return Ge(async()=>{let{logger:i}=this.#t,{autoPlay:r,canPlay:o,started:n,duration:d,seekable:a,buffered:u,remotePlaybackInfo:c,playsInline:f,savedState:y,source:E}=this.#t.$state;if(o())return;let k={duration:e?.duration??d(),seekable:e?.seekable??a(),buffered:e?.buffered??u(),provider:this.#t.$provider()};this.notify("can-play",k,t),te();let q=this.#t.$provider(),{storage:B,qualities:$e}=this.#t,{muted:He,volume:Oe,clipStartTime:Ne,playbackRate:Je}=this.#t.$props;await B?.onLoad?.(E());let Tt=y()?.currentTime,Ze=y()?.paused,Le=await B?.getTime(),xt=Tt??Le??Ne(),Ot=Ze||Ze!==!1&&!n()&&r();if(q){q.setVolume(await B?.getVolume()??Oe()),q.setMuted(He()||!!await B?.getMuted());let Se=await B?.getAudioGain()??1;Se>1&&q.audioGain?.setGain?.(Se),q.setPlaybackRate?.(await B?.getPlaybackRate()??Je()),q.setPlaysInline?.(f()),xt>0&&q.setCurrentTime(xt)}let _e=await B?.getVideoQuality();if(_e&&$e.length){let Se=null,oe=1/0;for(let j of $e){let et=Math.abs(_e.width-j.width)+Math.abs(_e.height-j.height)+(_e.bitrate?Math.abs(_e.bitrate-(j.bitrate??0)):0);et<oe&&(Se=j,oe=et)}Se&&(Se.selected=!0)}o()&&Ot?await this.#i(t):Le&&Le>0&&this.notify("started",void 0,t),c.set(null)})}async#i(e){let{player:t,$state:{autoPlaying:i,muted:r}}=this.#t;i.set(!0);let o=new A("auto-play-attempt",{trigger:e});try{await t.play(o)}catch{}}};var Js=Me.fullscreenEnabled,mi=class extends F{#e=!1;#t=!1;get active(){return this.#t}get supported(){return Js}onConnect(){v(Me,"fullscreenchange",this.#r.bind(this)),v(Me,"fullscreenerror",this.#s.bind(this)),x(this.#i.bind(this))}async#i(){Js&&await this.exit()}#r(e){let t=Xs(this.el);t!==this.#t&&(t||(this.#e=!1),this.#t=t,this.dispatch("fullscreen-change",{detail:t,trigger:e}))}#s(e){this.#e&&(this.dispatch("fullscreen-error",{detail:null,trigger:e}),this.#e=!1)}async enter(){try{return this.#e=!0,!this.el||Xs(this.el)?void 0:(bn(),Me.requestFullscreen(this.el))}catch(e){throw this.#e=!1,e}}async exit(){if(!(!this.el||!Xs(this.el)))return bn(),Me.exitFullscreen()}};function Xs(s){if(Me.fullscreenElement===s)return!0;try{return s.matches(Me.fullscreenPseudoClass)}catch{return!1}}function bn(){if(!Js)throw Error("[vidstack] no fullscreen API")}var lt=class s extends F{#e=T(this.#n());#t=T(!1);#i;get type(){return this.#e()}get locked(){return this.#t()}get portrait(){return this.#e().startsWith("portrait")}get landscape(){return this.#e().startsWith("landscape")}static supported=ti();get supported(){return s.supported}onConnect(){if(this.supported)v(screen.orientation,"change",this.#s.bind(this));else{let e=window.matchMedia("(orientation: landscape)");e.onchange=this.#s.bind(this),x(()=>e.onchange=null)}x(this.#r.bind(this))}async#r(){this.supported&&this.#t()&&await this.unlock()}#s(e){this.#e.set(this.#n()),this.dispatch("orientation-change",{detail:{orientation:m(this.#e),lock:this.#i},trigger:e})}async lock(e){m(this.#t)||this.#i===e||(this.#o(),await screen.orientation.lock(e),this.#t.set(!0),this.#i=e)}async unlock(){m(this.#t)&&(this.#o(),this.#i=void 0,await screen.orientation.unlock(),this.#t.set(!1))}#o(){if(!this.supported)throw Error("[vidstack] no orientation API")}#n(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};var fi=class{#e=new Map;enqueue(e,t){this.#e.set(e,t)}serve(e){let t=this.peek(e);return this.#e.delete(e),t}peek(e){return this.#e.get(e)}delete(e){this.#e.delete(e)}clear(){this.#e.clear()}};var dt=class{#e=!1;#t=Bs();#i=new Map;get size(){return this.#i.size}get isServing(){return this.#e}async waitForFlush(){this.#e||await this.#t.promise}enqueue(e,t){if(this.#e){t();return}this.#i.delete(e),this.#i.set(e,t)}serve(e){this.#i.get(e)?.(),this.#i.delete(e)}start(){this.#r(),this.#e=!0,this.#i.size>0&&this.#r()}stop(){this.#e=!1}reset(){this.stop(),this.#i.clear(),this.#s()}#r(){for(let e of this.#i.keys())this.serve(e);this.#s()}#s(){this.#t.resolve(),this.#t=Bs()}};var gi=class extends Z{#e=-2;#t=!1;#i=T(!1);#r=T(!1);#s=null;#o=T(!0);defaultDelay=2e3;get canIdle(){return this.#o()}set canIdle(e){this.#o.set(e)}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:e}=this.$props;return this.#i()||e()}set hideOnMouseLeave(e){this.#i.set(e)}get showing(){return this.$state.controlsVisible()}show(e=0,t){this.#p(),this.#t||this.#g(!0,e,t)}hide(e=this.defaultDelay,t){this.#p(),this.#t||this.#g(!1,e,t)}pause(e){this.#t=!0,this.#p(),this.#g(!0,0,e)}resume(e){this.#t=!1,!this.$state.paused()&&this.#g(!1,this.defaultDelay,e)}onConnect(){l(this.#n.bind(this))}#n(){let{viewType:e}=this.$state;if(!this.#o())return;if(e()==="audio"){this.show();return}l(this.#a.bind(this)),l(this.#l.bind(this));let t=this.#u.bind(this),i=this.#c.bind(this);this.listen("can-play",r=>this.show(0,r)),this.listen("play",t),this.listen("pause",i),this.listen("auto-play-fail",i)}#a(){let{started:e,pointer:t,paused:i}=this.$state;if(!e()||t()!=="fine")return;let r=this.hideOnMouseLeave;(!r||!this.#r())&&l(()=>{i()||this.listen("pointermove",this.#m.bind(this))}),r&&(this.listen("mouseenter",this.#h.bind(this)),this.listen("mouseleave",this.#d.bind(this)))}#l(){let{paused:e,started:t,autoPlayError:i}=this.$state;if(e()||i()&&!t())return;let r=this.#m.bind(this);l(()=>{let o=this.$state.pointer(),n=o==="coarse",d=[n?"touchend":"pointerup","keydown"];for(let a of d)this.listen(a,r,{passive:!1})})}#u(e){this.show(0,e),this.hide(void 0,e)}#c(e){this.show(0,e)}#h(e){this.#r.set(!1),this.show(0,e),this.hide(void 0,e)}#d(e){this.#r.set(!0),this.hide(0,e)}#p(){window.clearTimeout(this.#e),this.#e=-1}#m(e){e.MEDIA_GESTURE||this.#t||st(e)||(Jt(e)&&(e.key==="Escape"?(this.el?.focus(),this.#s=null):this.#s&&(e.preventDefault(),requestAnimationFrame(()=>{this.#s?.focus(),this.#s=null}))),this.show(0,e),this.hide(this.defaultDelay,e))}#g(e,t,i){if(t===0){this.#y(e,i);return}this.#e=window.setTimeout(()=>{this.scope&&this.#y(e&&!this.#t,i)},t)}#y(e,t){this.$state.controlsVisible()!==e&&(this.$state.controlsVisible.set(e),!e&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#s=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:e,trigger:t}))}};var yi=class extends Z{#e;#t;#i;controls;#r;#s;#o;#n=new dt;constructor(e,t,i){super(),this.#e=e,this.#t=t,this.#i=i,this.#o=i.$provider,this.controls=new gi,this.#r=new mi,this.#s=new lt}onAttach(){this.listen("fullscreen-change",this.#C.bind(this))}onConnect(){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),t=this.#u.bind(this);for(let i of e)i.startsWith("media-")&&this.listen(i,t);this.#a(),l(this.#l.bind(this)),l(this.#m.bind(this)),l(this.#g.bind(this)),l(this.#y.bind(this)),l(this.#b.bind(this)),l(this.#E.bind(this)),l(this.#T.bind(this))}onDestroy(){try{let e=this.createEvent("destroy"),{pictureInPicture:t,fullscreen:i}=this.$state;i()&&this.exitFullscreen("prefer-media",e),t()&&this.exitPictureInPicture(e)}catch{}this.#n.reset()}#a(){let{load:e}=this.$props,{canLoad:t}=this.$state;if(e()!=="play"||t())return;let i=this.listen("media-play-request",r=>{this.#c(r),i()})}#l(){let e=this.#o(),t=this.$state.canPlay();return e&&t&&this.#n.start(),()=>{this.#n.stop()}}#u(e){e.stopPropagation(),!e.defaultPrevented&&this[e.type]&&(m(this.#o)?this[e.type](e):this.#n.enqueue(e.type,()=>{m(this.#o)&&this[e.type](e)}))}async play(e){let{canPlay:t,paused:i,autoPlaying:r}=this.$state;if(this.#c(e)||!m(i))return;e&&this.#t.queue.enqueue("media-play-request",e);let o=m(r);try{let n=m(this.#o);return Zs(n,m(t)),await n.play()}catch(n){let d=this.createEvent("play-fail",{detail:ri(n),trigger:e});throw d.autoPlay=o,this.#e.handle(d),n}}#c(e){let{load:t}=this.$props,{canLoad:i}=this.$state;if(t()==="play"&&!i()){let r=this.createEvent("media-start-loading",{trigger:e});return this.dispatchEvent(r),this.#n.enqueue("media-play-request",async()=>{try{await this.play(r)}catch{}}),!0}return!1}async pause(e){let{canPlay:t,paused:i}=this.$state;if(!m(i)){e&&this.#t.queue.enqueue("media-pause-request",e);try{let r=m(this.#o);return Zs(r,m(t)),await r.pause()}catch(r){throw this.#t.queue.delete("media-pause-request"),r}}}setAudioGain(e,t){let{audioGain:i,canSetAudioGain:r}=this.$state;if(i()===e)return;let o=this.#o();if(!o?.audioGain||!r())throw Error("[vidstack] audio gain api not available");t&&this.#t.queue.enqueue("media-audio-gain-change-request",t),o.audioGain.setGain(e)}seekToLiveEdge(e){let{canPlay:t,live:i,liveEdge:r,canSeek:o,liveSyncPosition:n,seekableEnd:d,userBehindLiveEdge:a}=this.$state;if(a.set(!1),m(()=>!i()||r()||!o()))return;let u=m(this.#o);Zs(u,m(t)),e&&this.#t.queue.enqueue("media-seek-request",e);let c=d()-2;u.setCurrentTime(Math.min(c,n()??c))}#h=!1;async enterFullscreen(e="prefer-media",t){let i=this.#d(e);if(En(e,i),!i.active)return m(this.$state.pictureInPicture)&&(this.#h=!0,await this.exitPictureInPicture(t)),t&&this.#t.queue.enqueue("media-enter-fullscreen-request",t),i.enter()}async exitFullscreen(e="prefer-media",t){let i=this.#d(e);if(En(e,i),!!i.active){t&&this.#t.queue.enqueue("media-exit-fullscreen-request",t);try{let r=await i.exit();return this.#h&&m(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),r}finally{this.#h=!1}}}#d(e){let t=m(this.#o);return e==="prefer-media"&&this.#r.supported||e==="media"?this.#r:t?.fullscreen}async enterPictureInPicture(e){if(this.#p(),!this.$state.pictureInPicture())return e&&this.#t.queue.enqueue("media-enter-pip-request",e),await this.#o().pictureInPicture.enter()}async exitPictureInPicture(e){if(this.#p(),!!this.$state.pictureInPicture())return e&&this.#t.queue.enqueue("media-exit-pip-request",e),await this.#o().pictureInPicture.exit()}#p(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#m(){this.controls.defaultDelay=this.$props.controlsDelay()}#g(){let{canSetAudioGain:e}=this.$state,t=!!this.#o()?.audioGain?.supported;e.set(t)}#y(){let{canAirPlay:e}=this.$state,t=!!this.#o()?.airPlay?.supported;e.set(t)}#b(){let{canGoogleCast:e,source:t}=this.$state,i=Uo&&!Wo&&tn(t());e.set(i)}#E(){let{canFullscreen:e}=this.$state,t=this.#r.supported||!!this.#o()?.fullscreen?.supported;e.set(t)}#T(){let{canPictureInPicture:e}=this.$state,t=!!this.#o()?.pictureInPicture?.supported;e.set(t)}async"media-airplay-request"(e){try{await this.requestAirPlay(e)}catch{}}async requestAirPlay(e){try{let t=this.#o()?.airPlay;if(!t?.supported)throw Error("No AirPlay adapter.");return e&&this.#t.queue.enqueue("media-airplay-request",e),await t.prompt()}catch(t){throw this.#t.queue.delete("media-airplay-request"),t}}async"media-google-cast-request"(e){try{await this.requestGoogleCast(e)}catch{}}#v;async requestGoogleCast(e){try{let{canGoogleCast:t}=this.$state;if(!m(t)){let r=Error("Cast not available.");throw r.code="CAST_NOT_AVAILABLE",r}if(Te("https://www.gstatic.com"),!this.#v){let r=await import("./chunks/vidstack-WPZCEBXT.js");this.#v=new r.GoogleCastLoader}await this.#v.prompt(this.#i),e&&this.#t.queue.enqueue("media-google-cast-request",e);let i=m(this.$state.remotePlaybackState)!=="disconnected";i&&this.$state.savedState.set({paused:m(this.$state.paused),currentTime:m(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(i?this.#v:null)}catch(t){throw this.#t.queue.delete("media-google-cast-request"),t}}"media-clip-start-change-request"(e){let{clipStartTime:t}=this.$state;t.set(e.detail)}"media-clip-end-change-request"(e){let{clipEndTime:t}=this.$state;t.set(e.detail),this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-duration-change-request"(e){let{providedDuration:t,clipEndTime:i}=this.$state;t.set(e.detail),i()<=0&&this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-audio-track-change-request"(e){let{logger:t,audioTracks:i}=this.#i;if(i.readonly)return;let r=e.detail,o=i[r];if(o){let n=e.type;this.#t.queue.enqueue(n,e),o.selected=!0}}async"media-enter-fullscreen-request"(e){try{await this.enterFullscreen(e.detail,e)}catch(t){this.#f(t,e)}}async"media-exit-fullscreen-request"(e){try{await this.exitFullscreen(e.detail,e)}catch(t){this.#f(t,e)}}async#C(e){let t=m(this.$props.fullscreenOrientation),i=e.detail;if(!(Ro(t)||t==="none"||!this.#s.supported))if(i){if(this.#s.locked)return;this.dispatch("media-orientation-lock-request",{detail:t,trigger:e})}else this.#s.locked&&this.dispatch("media-orientation-unlock-request",{trigger:e})}#f(e,t){this.#e.handle(this.createEvent("fullscreen-error",{detail:ri(e)}))}async"media-orientation-lock-request"(e){let t=e.type;try{this.#t.queue.enqueue(t,e),await this.#s.lock(e.detail)}catch{this.#t.queue.delete(t)}}async"media-orientation-unlock-request"(e){let t=e.type;try{this.#t.queue.enqueue(t,e),await this.#s.unlock()}catch{this.#t.queue.delete(t)}}async"media-enter-pip-request"(e){try{await this.enterPictureInPicture(e)}catch(t){this.#x(t,e)}}async"media-exit-pip-request"(e){try{await this.exitPictureInPicture(e)}catch(t){this.#x(t,e)}}#x(e,t){this.#e.handle(this.createEvent("picture-in-picture-error",{detail:ri(e)}))}"media-live-edge-request"(e){let{live:t,liveEdge:i,canSeek:r}=this.$state;if(!(!t()||i()||!r())){this.#t.queue.enqueue("media-seek-request",e);try{this.seekToLiveEdge()}catch{this.#t.queue.delete("media-seek-request")}}}async"media-loop-request"(e){try{this.#t.looping=!0,this.#t.replaying=!0,await this.play(e)}catch{this.#t.looping=!1}}"media-user-loop-change-request"(e){this.$state.userPrefersLoop.set(e.detail)}async"media-pause-request"(e){if(!this.$state.paused())try{await this.pause(e)}catch{}}async"media-play-request"(e){if(this.$state.paused())try{await this.play(e)}catch{}}"media-rate-change-request"(e){let{playbackRate:t,canSetPlaybackRate:i}=this.$state;if(t()===e.detail||!i())return;let r=this.#o();r?.setPlaybackRate&&(this.#t.queue.enqueue("media-rate-change-request",e),r.setPlaybackRate(e.detail))}"media-audio-gain-change-request"(e){try{this.setAudioGain(e.detail,e)}catch{}}"media-quality-change-request"(e){let{qualities:t,storage:i,logger:r}=this.#i;if(t.readonly)return;this.#t.queue.enqueue("media-quality-change-request",e);let o=e.detail;if(o<0)t.autoSelect(e),e.isOriginTrusted&&i?.setVideoQuality?.(null);else{let n=t[o];n&&(n.selected=!0,e.isOriginTrusted&&i?.setVideoQuality?.({id:n.id,width:n.width,height:n.height,bitrate:n.bitrate}))}}"media-pause-controls-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.controls.pause(e)}"media-resume-controls-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.controls.resume(e)}"media-seek-request"(e){let{seekableStart:t,seekableEnd:i,ended:r,canSeek:o,live:n,userBehindLiveEdge:d,clipStartTime:a}=this.$state,u=e.detail;r()&&(this.#t.replaying=!0);let c=e.type;this.#t.seeking=!1,this.#t.queue.delete(c);let f=u+a(),y=Math.floor(f)===Math.floor(i()),E=y?i():Math.min(Math.max(t()+.1,f),i()-.1);!Number.isFinite(E)||!o()||(this.#t.queue.enqueue(c,e),this.#o().setCurrentTime(E),n()&&e.isOriginTrusted&&Math.abs(i()-E)>=2&&d.set(!0))}"media-seeking-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.$state.seeking.set(!0),this.#t.seeking=!0}"media-start-loading"(e){if(this.$state.canLoad())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#e.handle(this.createEvent("can-load"))}"media-poster-start-loading"(e){if(this.$state.canLoadPoster())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#e.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(e){let{index:t,mode:i}=e.detail,r=this.#i.textTracks[t];if(r){let o=e.type;this.#t.queue.enqueue(o,e),r.setMode(i,e)}}"media-mute-request"(e){if(this.$state.muted())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#o().setMuted(!0)}"media-unmute-request"(e){let{muted:t,volume:i}=this.$state;if(!t())return;let r=e.type;this.#t.queue.enqueue(r,e),this.#i.$provider().setMuted(!1),i()===0&&(this.#t.queue.enqueue(r,e),this.#o().setVolume(.25))}"media-volume-change-request"(e){let{muted:t,volume:i}=this.$state,r=e.detail;if(i()===r)return;let o=e.type;this.#t.queue.enqueue(o,e),this.#o().setVolume(r),r>0&&t()&&(this.#t.queue.enqueue(o,e),this.#o().setMuted(!1))}#M(e,t,i){}};function Zs(s,e){if(!(s&&e))throw Error("[vidstack] media not ready")}function En(s,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}var vi=class{seeking=!1;looping=!1;replaying=!1;queue=new fi};var ut=ha;function ha(s,e,t){var i=null,r=null,o=function(){i&&(clearTimeout(i),r=null,i=null)},n=function(){var a=r;o(),a&&a()},d=function(){if(!e)return s.apply(this,arguments);var a=this,u=arguments,c=t&&!i;if(o(),r=function(){s.apply(a,u)},i=setTimeout(function(){if(i=null,!c){var f=r;return r=null,f()}},e),c)return r()};return d.cancel=o,d.flush=n,d}var ae=pa;function pa(s,e,t){var i=null,r=null,o=t&&t.leading,n=t&&t.trailing;o==null&&(o=!0),n==null&&(n=!o),o==!0&&(n=!1);var d=function(){i&&(clearTimeout(i),i=null)},a=function(){var c=r;d(),c&&c()},u=function(){var c=o&&!i,f=this,y=arguments;if(r=function(){return s.apply(f,y)},i||(i=setTimeout(function(){if(i=null,n)return r()},e)),c)return c=!1,r()};return u.cancel=d,u.flush=a,u}function $t(s){return!S(s)&&"width"in s&&"height"in s&&ie(s.width)&&ie(s.height)}var Tn=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);var bi=class extends Z{#e;#t;#i=new Map;#r=!1;#s=[];#o=[-1,-1];#n=!1;#a;constructor(e,t){super(),this.#e=e,this.#t=t}onAttach(e){e.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(e){l(this.#w.bind(this)),this.#p(),this.#m(),this.#g(),this.#u(),x(this.#c.bind(this))}onDestroy(){let{audioTracks:e,qualities:t,textTracks:i}=this.#t;e[$.reset](),t[$.reset](),i[$.reset](),this.#S()}handle(e){if(!this.scope)return;let t=e.type;Ge(()=>this[e.type]?.(e)),Tn.has(t)&&this.#i.set(t,e),this.dispatch(e)}#l=!1;#u(){this.#l&&(requestAnimationFrame(()=>{this.scope&&this.#t.remote.play(new A("dom-connect"))}),this.#l=!1)}#c(){this.#l||(this.#l=!this.$state.paused(),this.#t.$provider()?.pause())}#h(){this.#D(),this.#r=!1,this.#e.replaying=!1,this.#e.looping=!1,this.#n=!1,this.#a=void 0,this.#i.clear()}#d(e,t){let i=this.#e.queue.serve(e);i&&(t.request=i,t.triggers.add(i))}#p(){this.#y(),this.#b();let e=this.#t.textTracks;v(e,"add",this.#y.bind(this)),v(e,"remove",this.#y.bind(this)),v(e,"mode-change",this.#b.bind(this))}#m(){let e=this.#t.qualities;v(e,"add",this.#v.bind(this)),v(e,"remove",this.#v.bind(this)),v(e,"change",this.#C.bind(this)),v(e,"auto-change",this.#f.bind(this)),v(e,"readonly-change",this.#P.bind(this))}#g(){let e=this.#t.audioTracks;v(e,"add",this.#E.bind(this)),v(e,"remove",this.#E.bind(this)),v(e,"change",this.#T.bind(this))}#y(e){let{textTracks:t}=this.$state;t.set(this.#t.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:t(),trigger:e})}#b(e){e&&this.#d("media-text-track-change-request",e);let t=this.#t.textTracks.selected,{textTrack:i}=this.$state;i()!==t&&(i.set(t),this.dispatch("text-track-change",{detail:t,trigger:e}))}#E(e){let{audioTracks:t}=this.$state;t.set(this.#t.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:t(),trigger:e})}#T(e){let{audioTrack:t}=this.$state;t.set(this.#t.audioTracks.selected),e&&this.#d("media-audio-track-change-request",e),this.dispatch("audio-track-change",{detail:t(),trigger:e})}#v(e){let{qualities:t}=this.$state;t.set(this.#t.qualities.toArray()),this.dispatch("qualities-change",{detail:t(),trigger:e})}#C(e){let{quality:t}=this.$state;t.set(this.#t.qualities.selected),e&&this.#d("media-quality-change-request",e),this.dispatch("quality-change",{detail:t(),trigger:e})}#f(){let{qualities:e}=this.#t,t=e.auto;this.$state.autoQuality.set(t),t||this.#S()}#x=null;#M(){this.#S(),this.#x=l(()=>{let{qualities:e}=this.#t,{mediaWidth:t,mediaHeight:i}=this.$state,r=t(),o=i();if(r===0||o===0)return;let n=null,d=1/0;for(let a of e){let u=Math.abs(a.width-r)+Math.abs(a.height-o);u<d&&(d=u,n=a)}n&&e[$.select](n,!0,new A("resize",{detail:{width:r,height:o}}))})}#S(){this.#x?.(),this.#x=null}#P(){this.$state.canSetQuality.set(!this.#t.qualities.readonly)}#w(){let{canSetVolume:e,isGoogleCastConnected:t}=this.$state;if(t()){e.set(!1);return}jo().then(e.set)}"provider-change"(e){let t=this.#t.$provider(),i=e.detail;t?.type!==i?.type&&(t?.destroy?.(),t?.scope?.dispose(),this.#t.$provider.set(e.detail),t&&e.detail===null&&this.#k(e))}"provider-loader-change"(e){}"auto-play"(e){this.$state.autoPlayError.set(null)}"auto-play-fail"(e){this.$state.autoPlayError.set(e.detail),this.#h()}"can-load"(e){this.$state.canLoad.set(!0),this.#i.set("can-load",e),this.#t.textTracks[G.canLoad](),this.#d("media-start-loading",e)}"can-load-poster"(e){this.$state.canLoadPoster.set(!0),this.#i.set("can-load-poster",e),this.#d("media-poster-start-loading",e)}"media-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.$state.viewType();this.$state.mediaType.set(e.detail);let r=this.$state.providedViewType(),o=r==="unknown"?e.detail:r;i!==o&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(e.detail),this.dispatch("view-type-change",{detail:o,trigger:e}))})},0)}"stream-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let{streamType:i,inferredStreamType:r}=this.$state;r.set(e.detail),e.detail=i()}"rate-change"(e){let{storage:t}=this.#t,{canPlay:i}=this.$state;this.$state.playbackRate.set(e.detail),this.#d("media-rate-change-request",e),i()&&t?.setPlaybackRate?.(e.detail)}"remote-playback-change"(e){let{remotePlaybackState:t,remotePlaybackType:i}=this.$state,{type:r,state:o}=e.detail,n=o==="connected";i.set(r),t.set(o);let d=r==="airplay"?"media-airplay-request":"media-google-cast-request";if(n)this.#d(d,e);else{let a=this.#e.queue.peek(d);a&&(e.request=a,e.triggers.add(a))}}"sources-change"(e){let t=this.$state.sources(),i=e.detail;this.$state.sources.set(i),this.#$(t,i,e)}#$(e,t,i){let{qualities:r}=this.#t,o=!1,n=!1;for(let d of e){if(!$t(d))continue;if(!t.some(u=>u.src===d.src)){let u=r.getBySrc(d.src);u&&(r[$.remove](u,i),n=!0)}}n&&!r.length&&(this.$state.savedState.set(null),r[$.reset](i));for(let d of t){if(!$t(d)||r.getBySrc(d.src))continue;let a={id:d.id??d.height+"p",bitrate:null,codec:null,...d,selected:!1};r[$.add](a,i),o=!0}o&&!r[ue.enableAuto]&&(this.#M(),r[ue.enableAuto]=this.#M.bind(this),r[ue.setAuto](!0,i))}"source-change"(e){e.isQualityChange=e.originEvent?.type==="quality-change";let t=e.detail;this.#k(e,e.isQualityChange),this.#i.set(e.type,e),this.$state.source.set(t),this.el?.setAttribute("aria-busy","true")}#k(e,t=!1){let{audioTracks:i,qualities:r}=this.#t;if(!t){this.#s=[],this.#o=[-1,-1],i[$.reset](e),r[$.reset](e),js(this.$state,t),this.#h();return}js(this.$state,t),this.#h()}abort(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.#i.get("can-load");i&&!e.triggers.hasType("can-load")&&e.triggers.add(i)}"load-start"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t)}error(e){this.$state.error.set(e.detail);let t=this.#i.get("abort");t&&e.triggers.add(t)}"loaded-metadata"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"loaded-data"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"can-play"(e){let t=this.#i.get("loaded-metadata");t&&e.triggers.add(t),this.#L(e.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(e){this.#L(e.detail);let t=this.#i.get("can-play");t&&e.triggers.add(t)}#L(e){let{seekable:t,buffered:i,intrinsicDuration:r,canPlay:o}=this.$state;o.set(!0),i.set(e.buffered),t.set(e.seekable);let n=Qe(e.seekable)??1/0;r.set(n)}"duration-change"(e){let{live:t,intrinsicDuration:i,providedDuration:r,clipEndTime:o,ended:n}=this.$state,d=e.detail;if(!t()){let a=Number.isNaN(d)?0:d;i.set(a),n()&&this.#A(e)}(r()>0||o()>0)&&e.stopImmediatePropagation()}progress(e){let{buffered:t,bufferedEnd:i,seekable:r,seekableEnd:o,live:n,intrinsicDuration:d}=this.$state,{buffered:a,seekable:u}=e.detail,c=Qe(a)??1/0,f=a.length!==t().length,y=c>i(),E=Qe(u)??1/0,k=u.length!==r().length,q=E>o();(f||y)&&t.set(a),(k||q)&&r.set(u),n()&&(d.set(E),this.dispatch("duration-change",{detail:E,trigger:e}))}play(e){let{paused:t,autoPlayError:i,ended:r,autoPlaying:o,playsInline:n,pointer:d,muted:a,viewType:u,live:c,userBehindLiveEdge:f}=this.$state;if(this.#R(),!t()){e.stopImmediatePropagation();return}e.autoPlay=o();let y=this.#i.get("waiting");y&&e.triggers.add(y),this.#d("media-play-request",e),this.#i.set("play",e),t.set(!1),i.set(null),e.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:a()},trigger:e})),o.set(!1)),(r()||this.#e.replaying)&&(this.#e.replaying=!1,r.set(!1),this.handle(this.createEvent("replay",{trigger:e}))),!n()&&u()==="video"&&d()==="coarse"&&this.#t.remote.enterFullscreen("prefer-media",e),c()&&!f()&&this.#t.remote.seekToLiveEdge(e)}#R(e){if(!m(this.#t.$provider))return;let{ended:i,seekableStart:r,clipStartTime:o,clipEndTime:n,realCurrentTime:d,duration:a}=this.$state,u=d()<o()||n()>0&&d()>=n()||Math.abs(d()-a())<.1||i();return u&&this.dispatch("media-seek-request",{detail:(o()>0?0:r())+.1,trigger:e}),u}"play-fail"(e){let{muted:t,autoPlaying:i}=this.$state,r=this.#i.get("play");r&&e.triggers.add(r),this.#d("media-play-request",e);let{paused:o,playing:n}=this.$state;o.set(!0),n.set(!1),this.#h(),this.#i.set("play-fail",e),e.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:t(),error:e.detail},trigger:e})),i.set(!1))}playing(e){let t=this.#i.get("play"),i=this.#i.get("seeked");t?e.triggers.add(t):i&&e.triggers.add(i),setTimeout(()=>this.#h(),0);let{paused:r,playing:o,live:n,liveSyncPosition:d,seekableEnd:a,started:u,currentTime:c,seeking:f,ended:y}=this.$state;if(r.set(!1),o.set(!0),f.set(!1),y.set(!1),this.#e.looping){this.#e.looping=!1;return}if(n()&&!u()&&c()===0){let E=d()??a()-2;Number.isFinite(E)&&this.#t.$provider().setCurrentTime(E)}this.started(e)}started(e){let{started:t}=this.$state;t()||(t.set(!0),this.handle(this.createEvent("started",{trigger:e})))}pause(e){this.el?.isConnected||(this.#l=!0),this.#d("media-pause-request",e);let t=this.#i.get("seeked");t&&e.triggers.add(t);let{paused:i,playing:r}=this.$state;i.set(!0),r.set(!1),this.#r&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:e})),this.#r=!1},0),this.#h()}"time-change"(e){if(this.#e.looping){e.stopImmediatePropagation();return}let{waiting:t,played:i,clipEndTime:r,realCurrentTime:o,currentTime:n}=this.$state,d=e.detail,a=r();o.set(d),this.#V(),t.set(!1);for(let u of this.#t.textTracks)u[G.updateActiveCues](d,e);a>0&&d>=a&&(this.#r=!0,this.dispatch("media-pause-request",{trigger:e})),this.#q(),this.dispatch("time-update",{detail:{currentTime:n(),played:i()},trigger:e})}#V(){let{currentTime:e,played:t,paused:i}=this.$state;i()||(this.#o=Jo(this.#s,this.#o,e()),t.set(new tt(this.#s)))}#A(e){let{clipStartTime:t,clipEndTime:i,duration:r}=this.$state;t()>0||i()>0||this.handle(this.createEvent("time-change",{detail:r(),trigger:e}))}#q(){let{storage:e}=this.#t,{canPlay:t,realCurrentTime:i}=this.$state;t()&&e?.setTime?.(i())}"audio-gain-change"(e){let{storage:t}=this.#t,{canPlay:i,audioGain:r}=this.$state;r.set(e.detail),this.#d("media-audio-gain-change-request",e),i()&&t?.setAudioGain?.(r())}"volume-change"(e){let{storage:t}=this.#t,{volume:i,muted:r,canPlay:o}=this.$state,n=e.detail;i.set(n.volume),r.set(n.muted||n.volume===0),this.#d("media-volume-change-request",e),this.#d(n.muted?"media-mute-request":"media-unmute-request",e),o()&&(t?.setVolume?.(i()),t?.setMuted?.(r()))}seeking=ae(e=>{let{seeking:t,realCurrentTime:i,paused:r}=this.$state;t.set(!0),i.set(e.detail),this.#d("media-seeking-request",e),r()&&(this.#a=e,this.#_()),this.#o=[-1,-1]},150,{leading:!0});seeked(e){let{seeking:t,currentTime:i,realCurrentTime:r,paused:o,seekableEnd:n,ended:d}=this.$state;if(this.#e.seeking)t.set(!0),e.stopImmediatePropagation();else if(t()){let a=this.#i.get("waiting");a&&e.triggers.add(a);let u=this.#i.get("seeking");u&&!e.triggers.has(u)&&e.triggers.add(u),o()&&this.#D(),t.set(!1),r.set(e.detail),this.#d("media-seek-request",e);let c=e?.originEvent;c?.isTrusted&&!(c instanceof MessageEvent)&&!/seek/.test(c.type)&&this.started(e)}Math.floor(i())!==Math.floor(n())?d.set(!1):this.end(e)}waiting(e){this.#n||this.#e.seeking||(e.stopImmediatePropagation(),this.#a=e,this.#_())}#_=ut(()=>{if(!this.#a)return;this.#n=!0;let{waiting:e,playing:t}=this.$state;e.set(!0),t.set(!1);let i=this.createEvent("waiting",{trigger:this.#a});this.#i.set("waiting",i),this.dispatch(i),this.#a=void 0,this.#n=!1},300);end(e){let{loop:t,ended:i}=this.$state;if(!(!t()&&i())){if(t()){setTimeout(()=>{requestAnimationFrame(()=>{this.#R(e),this.dispatch("media-loop-request",{trigger:e})})},10);return}setTimeout(()=>this.#I(e),0)}}#I(e){let{storage:t}=this.#t,{paused:i,seeking:r,ended:o,duration:n}=this.$state;this.#A(e),i()||this.dispatch("pause",{trigger:e}),r()&&this.dispatch("seeked",{detail:n(),trigger:e}),o.set(!0),this.#h(),t?.setTime?.(n(),!0),this.dispatch("ended",{trigger:e})}#D(){this.#_.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(e){let t=e.detail;this.$state.fullscreen.set(t),this.#d(t?"media-enter-fullscreen-request":"media-exit-fullscreen-request",e)}"fullscreen-error"(e){this.#d("media-enter-fullscreen-request",e),this.#d("media-exit-fullscreen-request",e)}"orientation-change"(e){let t=e.detail.lock;this.#d(t?"media-orientation-lock-request":"media-orientation-unlock-request",e)}"picture-in-picture-change"(e){let t=e.detail;this.$state.pictureInPicture.set(t),this.#d(t?"media-enter-pip-request":"media-exit-pip-request",e)}"picture-in-picture-error"(e){this.#d("media-enter-pip-request",e),this.#d("media-exit-pip-request",e)}"title-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredTitle.set(e.detail))}"poster-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredPoster.set(e.detail))}};var Ei=class extends Z{onSetup(){this.#e();let e=[this.#r,this.#o,this.#d,this.#p,this.#a,this.#u,this.#c,this.#m,this.#y,this.#g,this.#n,this.#h,this.#l,this.#t,this.#s];for(let t of e)l(t.bind(this))}#e(){let e={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},t=new Set(["currentTime","paused","playbackRate","volume"]);for(let i of Object.keys(this.$props))t.has(i)||this.$state[e[i]??i]?.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}#t(){let{viewType:e,streamType:t,title:i,poster:r,loop:o}=this.$props,n=this.$state;n.providedPoster.set(r()),n.providedStreamType.set(t()),n.providedViewType.set(e()),n.providedTitle.set(i()),n.providedLoop.set(o())}#i(){}#r(){let{artist:e,artwork:t}=this.$props;this.$state.artist.set(e()),this.$state.artwork.set(t())}#s(){let{title:e}=this.$state;this.dispatch("title-change",{detail:e()})}#o(){let e=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(e),this.dispatch("auto-play-change",{detail:e})}#n(){let e=this.$state.loop();this.dispatch("loop-change",{detail:e})}#a(){let e=this.$props.controls();this.$state.controls.set(e)}#l(){let{poster:e}=this.$state;this.dispatch("poster-change",{detail:e()})}#u(){let e=this.$props.crossOrigin()??this.$props.crossorigin(),t=e===!0?"":e;this.$state.crossOrigin.set(t)}#c(){let{duration:e}=this.$props;this.dispatch("media-duration-change-request",{detail:e()})}#h(){let e=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(e),this.dispatch("plays-inline-change",{detail:e})}#d(){let{clipStartTime:e}=this.$props;this.dispatch("media-clip-start-change-request",{detail:e()})}#p(){let{clipEndTime:e}=this.$props;this.dispatch("media-clip-end-change-request",{detail:e()})}#m(){this.dispatch("live-change",{detail:this.$state.live()})}#g(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#y(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}};var Ti=class{playerId="vds-player";mediaId=null;#e={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#e.volume}async setVolume(e){this.#e.volume=e,this.save()}async getMuted(){return this.#e.muted}async setMuted(e){this.#e.muted=e,this.save()}async getTime(){return this.#e.time}async setTime(e,t){let i=e<0;this.#e.time=i?null:e,i||t?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#e.lang}async setLang(e){this.#e.lang=e,this.save()}async getCaptions(){return this.#e.captions}async setCaptions(e){this.#e.captions=e,this.save()}async getPlaybackRate(){return this.#e.rate}async setPlaybackRate(e){this.#e.rate=e,this.save()}async getAudioGain(){return this.#e.audioGain}async setAudioGain(e){this.#e.audioGain=e,this.save()}async getVideoQuality(){return this.#e.quality}async setVideoQuality(e){this.#e.quality=e,this.save()}onChange(e,t,i="vds-player"){let r=i?localStorage.getItem(i):null,o=t?localStorage.getItem(t):null;this.playerId=i,this.mediaId=t,this.#e={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...r?JSON.parse(r):{},time:o?+o:null}}save(){if(!this.playerId)return;let e=JSON.stringify({...this.#e,time:void 0});localStorage.setItem(this.playerId,e)}saveTimeThrottled=ae(this.saveTime.bind(this),1e3);saveTime(){if(!this.mediaId)return;let e=(this.#e.time??0).toString();localStorage.setItem(this.mediaId,e)}};var xn=["play","pause","seekforward","seekbackward","seekto"],xi=class extends Z{onConnect(){l(this.#t.bind(this)),l(this.#i.bind(this));let e=this.#r.bind(this);for(let t of xn)navigator.mediaSession.setActionHandler(t,e);x(this.#e.bind(this))}#e(){for(let e of xn)navigator.mediaSession.setActionHandler(e,null)}#t(){let{title:e,artist:t,artwork:i,poster:r}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:e(),artist:t(),artwork:i()??[{src:r()}]})}#i(){let{canPlay:e,paused:t}=this.$state;navigator.mediaSession.playbackState=e()?t()?"paused":"playing":"none"}#r(e){let t=new A("media-session-action",{detail:e});switch(e.action){case"play":this.dispatch("media-play-request",{trigger:t});break;case"pause":this.dispatch("media-pause-request",{trigger:t});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:ie(e.seekTime)?e.seekTime:this.$state.currentTime()+(e.seekOffset??10),trigger:t});break}}};var Mi=class{#e=null;#t=null;#i=-1;#r;constructor(e=void 0){this.#r=e}setTarget(e){this.#e=e}getPlayer(e){return this.#t?this.#t:((e??this.#e)?.dispatchEvent(new A("find-media-player",{detail:t=>void(this.#t=t),bubbles:!0,composed:!0})),this.#t)}setPlayer(e){this.#t=e}startLoading(e){this.#s("media-start-loading",e)}startLoadingPoster(e){this.#s("media-poster-start-loading",e)}requestAirPlay(e){this.#s("media-airplay-request",e)}requestGoogleCast(e){this.#s("media-google-cast-request",e)}play(e){this.#s("media-play-request",e)}pause(e){this.#s("media-pause-request",e)}mute(e){this.#s("media-mute-request",e)}unmute(e){this.#s("media-unmute-request",e)}enterFullscreen(e,t){this.#s("media-enter-fullscreen-request",t,e)}exitFullscreen(e,t){this.#s("media-exit-fullscreen-request",t,e)}lockScreenOrientation(e,t){this.#s("media-orientation-lock-request",t,e)}unlockScreenOrientation(e){this.#s("media-orientation-unlock-request",e)}enterPictureInPicture(e){this.#s("media-enter-pip-request",e)}exitPictureInPicture(e){this.#s("media-exit-pip-request",e)}seeking(e,t){this.#s("media-seeking-request",t,e)}seek(e,t){this.#s("media-seek-request",t,e)}seekToLiveEdge(e){this.#s("media-live-edge-request",e)}changeDuration(e,t){this.#s("media-duration-change-request",t,e)}changeClipStart(e,t){this.#s("media-clip-start-change-request",t,e)}changeClipEnd(e,t){this.#s("media-clip-end-change-request",t,e)}changeVolume(e,t){this.#s("media-volume-change-request",t,Math.max(0,Math.min(1,e)))}changeAudioTrack(e,t){this.#s("media-audio-track-change-request",t,e)}changeQuality(e,t){this.#s("media-quality-change-request",t,e)}requestAutoQuality(e){this.changeQuality(-1,e)}changeTextTrackMode(e,t,i){this.#s("media-text-track-change-request",i,{index:e,mode:t})}changePlaybackRate(e,t){this.#s("media-rate-change-request",t,e)}changeAudioGain(e,t){this.#s("media-audio-gain-change-request",t,e)}resumeControls(e){this.#s("media-resume-controls-request",e)}pauseControls(e){this.#s("media-pause-controls-request",e)}togglePaused(e){let t=this.getPlayer(e?.target);t&&(t.state.paused?this.play(e):this.pause(e))}toggleControls(e){let t=this.getPlayer(e?.target);t&&(t.controls.showing?t.controls.hide(0,e):t.controls.show(0,e))}toggleMuted(e){let t=this.getPlayer(e?.target);t&&(t.state.muted?this.unmute(e):this.mute(e))}toggleFullscreen(e,t){let i=this.getPlayer(t?.target);i&&(i.state.fullscreen?this.exitFullscreen(e,t):this.enterFullscreen(e,t))}togglePictureInPicture(e){let t=this.getPlayer(e?.target);t&&(t.state.pictureInPicture?this.exitPictureInPicture(e):this.enterPictureInPicture(e))}showCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,r=this.#i;(!i[r]||!H(i[r]))&&(r=-1),r===-1&&(r=i.findIndex(o=>H(o)&&o.default)),r===-1&&(r=i.findIndex(o=>H(o))),r>=0&&this.changeTextTrackMode(r,"showing",e),this.#i=-1}disableCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,r=t.state.textTrack;if(r){let o=i.indexOf(r);this.changeTextTrackMode(o,"disabled",e),this.#i=o}}toggleCaptions(e){let t=this.getPlayer(e?.target);t&&(t.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(e,t){this.#s("media-user-loop-change-request",t,e)}#s(e,t,i){let r=new A(e,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:t}),o=t?.target||null;o&&o instanceof h&&(o=o.el),o=!o||o===document||o===window||o===document.body||this.#t?.el&&o instanceof Node&&!this.#t.el.contains(o)?this.#e??this.getPlayer()?.el:o??this.#e,this.#t?e==="media-play-request"&&!this.#t.state.canLoad?o?.dispatchEvent(r):this.#t.canPlayQueue.enqueue(e,()=>o?.dispatchEvent(r)):o?.dispatchEvent(r)}#o(e){}};var Si=class extends at{};var Ci=class{priority=0;#e=!0;#t=null;#i=null;#r=new Set;canRender(e,t){return!!t}attach(e){this.#t=e,e&&(e.textTracks.onchange=this.#a.bind(this))}addTrack(e){this.#r.add(e),this.#s(e)}removeTrack(e){e[G.native]?.remove?.(),e[G.native]=null,this.#r.delete(e)}changeTrack(e){let t=e?.[G.native];t&&t.track.mode!=="showing"&&(t.track.mode="showing"),this.#i=e}setDisplay(e){this.#e=e,this.#a()}detach(){this.#t&&(this.#t.textTracks.onchange=null);for(let e of this.#r)this.removeTrack(e);this.#r.clear(),this.#t=null,this.#i=null}#s(e){if(!this.#t)return;let t=e[G.native]??=this.#o(e);fe(t)&&(this.#t.append(t),t.track.mode=t.default?"showing":"disabled")}#o(e){let t=document.createElement("track"),i=e.default||e.mode==="showing",r=e.src&&e.type==="vtt";return t.id=e.id,t.src=r?e.src:"",t.label=e.label,t.kind=e.kind,t.default=i,e.language&&(t.srclang=e.language),i&&!r&&this.#n(e,t.track),t}#n(e,t){if(!(e.src&&e.type==="vtt"||t.cues?.length))for(let i of e.cues)t.addCue(i)}#a(e){for(let t of this.#r){let i=t[G.native];if(!i)continue;if(!this.#e){i.track.mode=i.managed?"hidden":"disabled";continue}let r=i.track.mode==="showing";r&&this.#n(t,i.track),t.setMode(r?"showing":"disabled",e)}}};var Pi=class{#e=null;#t;#i=[];#r;#s=!1;#o=null;#n=null;constructor(e){this.#r=e;let t=e.textTracks;this.#t=t,l(this.#a.bind(this)),x(this.#p.bind(this)),v(t,"add",this.#c.bind(this)),v(t,"remove",this.#h.bind(this)),v(t,"mode-change",this.#d.bind(this))}#a(){let{nativeControls:e}=this.#r.$state;this.#s=e(),this.#d()}add(e){this.#i.push(e),Ge(this.#d.bind(this))}remove(e){e.detach(),this.#i.splice(this.#i.indexOf(e),1),Ge(this.#d.bind(this))}attachVideo(e){requestAnimationFrame(()=>{if(this.#e=e,e){this.#o=new Ci,this.#o.attach(e);for(let t of this.#t)this.#l(t)}this.#d()})}#l(e){H(e)&&this.#o?.addTrack(e)}#u(e){H(e)&&this.#o?.removeTrack(e)}#c(e){this.#l(e.detail)}#h(e){this.#u(e.detail)}#d(){let e=this.#t.selected;if(this.#e&&(this.#s||e?.[G.nativeHLS])){this.#n?.changeTrack(null),this.#o?.setDisplay(!0),this.#o?.changeTrack(e);return}if(this.#o?.setDisplay(!1),this.#o?.changeTrack(null),!e){this.#n?.changeTrack(null);return}let t=this.#i.sort((i,r)=>i.priority-r.priority).find(i=>i.canRender(e,this.#e));this.#n!==t&&(this.#n?.detach(),t?.attach(this.#e),this.#n=t??null),t?.changeTrack(e)}#p(){this.#o?.detach(),this.#o=null,this.#n?.detach(),this.#n=null}};var ki=class extends nt{#e=!1;#t={};#i=null;#r=null;[G.crossOrigin];constructor(){super()}get selected(){return this.items.find(t=>t.mode==="showing"&&H(t))??null}get selectedIndex(){let e=this.selected;return e?this.indexOf(e):-1}get preferredLang(){return this.#r}set preferredLang(e){this.#r=e,this.#u(e)}add(e,t){let i=e instanceof Ke,r=i?e:new Ke(e),o=e.kind==="captions"||e.kind==="subtitles"?"captions":e.kind;return this.#t[o]&&e.default&&delete e.default,r.addEventListener("mode-change",this.#n),this[$.add](r,t),r[G.crossOrigin]=this[G.crossOrigin],this.#e&&r[G.canLoad](),e.default&&(this.#t[o]=r),this.#s(),this}remove(e,t){if(this.#o=e,!!this.items.includes(e))return e===this.#t[e.kind]&&delete this.#t[e.kind],e.mode="disabled",e[G.onModeChange]=null,e.removeEventListener("mode-change",this.#n),this[$.remove](e,t),this.#o=null,this}clear(e){for(let t of[...this.items])this.remove(t,e);return this}getByKind(e){let t=Array.isArray(e)?e:[e];return this.items.filter(i=>t.includes(i.kind))}[G.canLoad](){if(!this.#e){for(let e of this.items)e[G.canLoad]();this.#e=!0,this.#s()}}#s=ut(async()=>{if(!this.#e)return;!this.#r&&this.#i&&(this.#r=await this.#i.getLang());let e=await this.#i?.getCaptions(),t=[["captions","subtitles"],"chapters","descriptions","metadata"];for(let i of t){let r=this.getByKind(i);if(r.find(u=>u.mode==="showing"))continue;let o=this.#r?r.find(u=>u.language===this.#r):null,n=K(i)?this.#t[i.find(u=>this.#t[u])||""]:this.#t[i],d=o??n,a=d&&H(d);d&&(!a||e!==!1)&&(d.mode="showing",a&&this.#l(d))}},300);#o=null;#n=this.#a.bind(this);#a(e){let t=e.detail;if(this.#i&&H(t)&&t!==this.#o&&this.#l(t),t.mode==="showing"){let i=H(t)?["captions","subtitles"]:[t.kind];for(let r of this.items)r.mode==="showing"&&r!=t&&i.includes(r.kind)&&(r.mode="disabled")}this.dispatchEvent(new A("mode-change",{detail:e.detail,trigger:e}))}#l(e){e.mode!=="disabled"&&this.#u(e.language),this.#i?.setCaptions?.(e.mode==="showing")}#u(e){this.#i?.setLang?.(this.#r=e)}setStorage(e){this.#i=e}};var Lt=T(!1);v(document,"pointerdown",()=>{Lt.set(!1)}),v(document,"keydown",s=>{s.metaKey||s.altKey||s.ctrlKey||Lt.set(!0)});var O=class extends F{#e=T(!1);onConnect(e){l(()=>{if(!Lt()){this.#e.set(!1),wi(e,!1),this.listen("pointerenter",this.#r.bind(this)),this.listen("pointerleave",this.#s.bind(this));return}let t=document.activeElement===e;this.#e.set(t),wi(e,t),this.listen("focus",this.#t.bind(this)),this.listen("blur",this.#i.bind(this))})}focused(){return this.#e()}#t(){this.#e.set(!0),wi(this.el,!0)}#i(){this.#e.set(!1),wi(this.el,!1)}#r(){Mn(this.el,!0)}#s(){Mn(this.el,!1)}};function wi(s,e){b(s,"data-focus",e),b(s,"data-hocus",e)}function Mn(s,e){b(s,"data-hocus",e),b(s,"data-hover",e)}var $i=class s extends h{static props=mn;static state=Ys;#e;#t;#i;canPlayQueue=new dt;remoteControl;get#r(){return this.#e.$provider()}get#s(){return this.$props}constructor(){super(),new Ei;let e={player:this,qualities:new hi,audioTracks:new Si,storage:null,$provider:T(null),$providerSetup:T(!1),$props:this.$props,$state:this.$state};e.remote=this.remoteControl=new Mi(void 0),e.remote.setPlayer(this),e.textTracks=new ki,e.textTracks[G.crossOrigin]=this.$state.crossOrigin,e.textRenderers=new Pi(e),e.ariaKeys={},this.#e=e,N(zs,e),this.orientation=new lt,new O,new ci(e);let t=new vi;this.#t=new bi(t,e),this.#i=new yi(this.#t,t,e),e.delegate=new pi(this.#t.handle.bind(this.#t),e),e.notify=e.delegate.notify.bind(e.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new xi,new wt("load",this.startLoading.bind(this)),new wt("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){this.#u(),l(this.#l.bind(this)),l(this.#g.bind(this)),l(this.#p.bind(this)),l(this.#T.bind(this)),l(this.#b.bind(this)),l(this.#x.bind(this)),l(this.#C.bind(this))}onAttach(e){e.setAttribute("data-media-player",""),C(e,"tabindex","0"),C(e,"role","region"),l(this.#S.bind(this)),l(this.#n.bind(this)),l(this.#a.bind(this)),v(e,"find-media-player",this.#c.bind(this))}onConnect(e){ei&&b(e,"data-iphone","");let t=window.matchMedia("(pointer: coarse)");this.#d(t),t.onchange=this.#d.bind(this);let i=new ResizeObserver(me(this.#h.bind(this)));i.observe(e),l(this.#h.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),x(()=>{i.disconnect(),t.onchange=null})}onDestroy(){this.#e.player=null,this.canPlayQueue.reset()}#o=!1;#n(){let e=this.$el,{title:t,live:i,viewType:r,providedTitle:o}=this.$state,n=i(),d=Bo(r()),a=d!=="Unknown"?`${n?"Live ":""}${d}`:n?"Live":"Media",u=t();b(this.el,"aria-label",`${a} Player`+(u?` - ${u}`:"")),e?.hasAttribute("title")&&(this.#o=!0,e?.removeAttribute("title"))}#a(){let e=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(e),b(this.el,"data-orientation",e),this.#h()}#l(){this.$state.canPlay()&&this.#r?this.canPlayQueue.start():this.canPlayQueue.stop()}#u(){if(s[di]){this.setAttributes(s[di]);return}let e={"data-load":function(){return this.$props.load()},"data-captions":function(){let i=this.$state.textTrack();return!!i&&H(i)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:i,canPlay:r,waiting:o}=this.$state;return i()&&(!r()||o())},"data-error":function(){let{error:i}=this.$state;return!!i()},"data-autoplay-error":function(){let{autoPlayError:i}=this.$state;return!!i()}},t={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let i of un){let r="data-"+(t[i]??Zt(i));e[r]=function(){return this.$state[i]()}}delete e.title,s[di]=e,this.setAttributes(e)}#c(e){e.detail(this)}#h(){if(!this.el)return;let e=this.el.clientWidth,t=this.el.clientHeight;this.$state.width.set(e),this.$state.height.set(t),z(this.el,"--player-width",e+"px"),z(this.el,"--player-height",t+"px")}#d(e){let t=e.matches?"coarse":"fine";b(this.el,"data-pointer",t),this.$state.pointer.set(t),this.#h()}get provider(){return this.#r}get controls(){return this.#i.controls}set controls(e){this.#s.controls.set(e)}orientation;get title(){return m(this.$state.providedTitle)}set title(e){if(this.#o){this.#o=!1;return}this.$state.providedTitle.set(e)}get qualities(){return this.#e.qualities}get audioTracks(){return this.#e.audioTracks}get textTracks(){return this.#e.textTracks}get textRenderers(){return this.#e.textRenderers}get duration(){return this.$state.duration()}set duration(e){this.#s.duration.set(e)}get paused(){return m(this.$state.paused)}set paused(e){this.#m(e)}#p(){this.#m(this.$props.paused())}#m(e){e?this.canPlayQueue.enqueue("paused",()=>this.#i.pause()):this.canPlayQueue.enqueue("paused",()=>this.#i.play())}get muted(){return m(this.$state.muted)}set muted(e){this.#y(e)}#g(){this.#y(this.$props.muted())}#y(e){this.canPlayQueue.enqueue("muted",()=>{this.#r&&this.#r.setMuted(e)})}get currentTime(){return m(this.$state.currentTime)}set currentTime(e){this.#E(e)}#b(){this.#E(this.$props.currentTime())}#E(e){this.canPlayQueue.enqueue("currentTime",()=>{let{currentTime:t,clipStartTime:i,seekableStart:r,seekableEnd:o}=this.$state;e!==m(t)&&m(()=>{if(!this.#r)return;let n=e+i(),d=Math.floor(n)===Math.floor(o()),a=d?o():Math.min(Math.max(r()+.1,n),o()-.1);Number.isFinite(a)&&this.#r.setCurrentTime(a)})})}get volume(){return m(this.$state.volume)}set volume(e){this.#v(e)}#T(){this.#v(this.$props.volume())}#v(e){let t=Ct(0,e,1);this.canPlayQueue.enqueue("volume",()=>{this.#r&&this.#r.setVolume(t)})}get playbackRate(){return m(this.$state.playbackRate)}set playbackRate(e){this.#f(e)}#C(){this.#f(this.$props.playbackRate())}#f(e){this.canPlayQueue.enqueue("rate",()=>{this.#r&&this.#r.setPlaybackRate?.(e)})}#x(){this.#M(this.$props.playsInline())}#M(e){this.canPlayQueue.enqueue("playsinline",()=>{this.#r&&this.#r.setPlaysInline?.(e)})}#S(){let e=this.$props.storage(),t=S(e)?new Ti:e;if(t?.onChange){let{source:i}=this.$state,r=S(e)?e:this.el?.id,o=U(this.#P.bind(this));l(()=>t.onChange(i(),o(),r||void 0))}this.#e.storage=t,this.#e.textTracks.setStorage(t),x(()=>{t?.onDestroy?.(),this.#e.storage=null,this.#e.textTracks.setStorage(null)})}#P(){let{clipStartTime:e,clipEndTime:t}=this.$props,{source:i}=this.$state,r=i();return r.src?`${r.src}:${e()}:${t()}`:null}async play(e){return this.#i.play(e)}async pause(e){return this.#i.pause(e)}async enterFullscreen(e,t){return this.#i.enterFullscreen(e,t)}async exitFullscreen(e,t){return this.#i.exitFullscreen(e,t)}enterPictureInPicture(e){return this.#i.enterPictureInPicture(e)}exitPictureInPicture(e){return this.#i.exitPictureInPicture(e)}seekToLiveEdge(e){this.#i.seekToLiveEdge(e)}startLoading(e){this.#e.notify("can-load",void 0,e)}startLoadingPoster(e){this.#e.notify("can-load-poster",void 0,e)}requestAirPlay(e){return this.#i.requestAirPlay(e)}requestGoogleCast(e){return this.#i.requestGoogleCast(e)}setAudioGain(e,t){return this.#i.setAudioGain(e,t)}destroy(){super.destroy(),this.#e.remote.setPlayer(null),this.dispatch("destroy")}};var Li=class extends p(HTMLElement,$i){static tagName="media-player";static attrs={autoPlay:"autoplay",crossOrigin:"crossorigin",playsInline:"playsinline",preferNativeHLS:"prefer-native-hls",minLiveDVRWindow:"min-live-dvr-window"}};var _i=class{name="audio";target;canPlay(e){return Zo(e)?!S(e.src)||e.type==="?"||zo(this.target,e.type):!1}mediaType(){return"audio"}async load(e){return new(await import("./providers/vidstack-audio.js")).AudioProvider(this.target,e)}};var De=class{name="video";target;canPlay(e){return en(e)?!S(e.src)||e.type==="?"||Yo(this.target,e.type):!1}mediaType(){return"video"}async load(e){return new(await import("./providers/vidstack-video.js")).VideoProvider(this.target,e)}};var Ri=class s extends De{static supported=Xo();name="dash";canPlay(e){return s.supported&&St(e)}async load(e){return new(await import("./providers/vidstack-dash.js")).DASHProvider(this.target,e)}};var Ai=class s extends De{static supported=ii();name="hls";canPlay(e){return s.supported&&Mt(e)}async load(e){return new(await import("./providers/vidstack-hls.js")).HLSProvider(this.target,e)}};var Vi=class{name="vimeo";target;preconnect(){let e=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(let t of e)Te(t)}canPlay(e){return S(e.src)&&e.type==="video/vimeo"}mediaType(){return"video"}async load(e){return new(await import("./providers/vidstack-vimeo.js")).VimeoProvider(this.target,e)}async loadPoster(e,t,i){let{resolveVimeoVideoId:r,getVimeoVideoInfo:o}=await import("./chunks/vidstack-JUYOWWVN.js");if(!S(e.src))return null;let{videoId:n,hash:d}=r(e.src);return n?o(n,i,d).then(a=>a?a.poster:null):null}};var Di=class{name="youtube";target;preconnect(){let e=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(let t of e)Te(t)}canPlay(e){return S(e.src)&&e.type==="video/youtube"}mediaType(){return"video"}async load(e){return new(await import("./providers/vidstack-youtube.js")).YouTubeProvider(this.target,e)}async loadPoster(e,t,i){let{findYouTubePoster:r,resolveYouTubeVideoId:o}=await import("./chunks/vidstack-PK326JNQ.js"),n=S(e.src)&&o(e.src);return n?r(n,i):null}};function Sn(s,e){return fetch(s,e).then(t=>t.text()).then(t=>/type="static"/.test(t)?"on-demand":"live")}function eo(s,e){return fetch(s,e).then(t=>t.text()).then(t=>{let i=ma(t);if(i)return eo(/^https?:/.test(i)?i:new URL(i,s).href,e);let r=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(t)?"on-demand":"live";return r==="live"&&fa(t)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(t)||t.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":r})}function ma(s){let e=s.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split(`
`)[1].trim():null}function fa(s){let e=s.split(`
`);for(let t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){let i=parseFloat(t.split(":")[1]);if(!isNaN(i))return i}return-1}var to=new Map,qi=class{#e=!1;#t;#i;#r;#s;constructor(e,t,i,r=[]){this.#i=e,this.#r=t,this.#s=i;let o=new Ri,n=new Ai,d=new De,a=new _i,u=new Di,c=new Vi,f=[u,c];this.#t=U(()=>{let E=t.$state.remotePlaybackLoader(),k=t.$props.preferNativeHLS()?[d,a,o,n,...f,...r]:[n,d,a,o,...f,...r];return E?[E,...k]:k});let{$state:y}=t;y.sources.set(Cn(t.$props.src()));for(let E of y.sources()){let k=this.#t().find(B=>B.canPlay(E));if(!k)continue;let q=k.mediaType(E);t.$state.source.set(E),t.$state.mediaType.set(q),t.$state.inferredViewType.set(q),this.#s.set(k),this.#e=!0;break}}connect(){let e=this.#s();this.#e&&(this.#l(this.#r.$state.source(),e),this.#u(e),this.#e=!1),l(this.#o.bind(this)),l(this.#n.bind(this)),l(this.#c.bind(this)),l(this.#h.bind(this)),l(this.#d.bind(this))}#o(){this.#r.notify("sources-change",[...Cn(this.#r.$props.src()),...this.#i()])}#n(){let{$state:e}=this.#r,t=e.sources(),i=m(e.source),r=this.#a(i,t);if(t[0]?.src&&!r.src&&!r.type){let{crossOrigin:n}=e,d=it(n()),a=new AbortController;return Promise.all(t.map(u=>S(u.src)&&u.type==="?"?fetch(u.src,{method:"HEAD",credentials:d,signal:a.signal}).then(c=>(u.type=c.headers.get("content-type")||"??",to.set(u.src,u.type),u)).catch(()=>u):u)).then(u=>{if(a.signal.aborted)return;let c=this.#a(m(e.source),u);te(),c.src||this.#r.notify("error",{message:"Failed to load resource.",code:4})}),()=>a.abort()}te()}#a(e,t){let i={src:"",type:""},r=null,o=new A("sources-change",{detail:{sources:t}}),n=this.#t(),{started:d,paused:a,currentTime:u,quality:c,savedState:f}=this.#r.$state;for(let y of t){let E=n.find(k=>k.canPlay(y));if(E){i=y,r=E;break}}if($t(i)){let y=c(),E=t.find(k=>k.src===y?.src);m(d)?f.set({paused:m(a),currentTime:m(u)}):f.set(null),E&&(i=E,o=new A("quality-change",{detail:{quality:y}}))}return kn(e,i)||this.#l(i,r,o),r!==m(this.#s)&&this.#u(r,o),i}#l(e,t,i){this.#r.notify("source-change",e,i),this.#r.notify("media-type-change",t?.mediaType(e)||"unknown",i)}#u(e,t){this.#r.$providerSetup.set(!1),this.#r.notify("provider-change",null,t),e&&m(()=>e.preconnect?.(this.#r)),this.#s.set(e),this.#r.notify("provider-loader-change",e,t)}#c(){let e=this.#r.$provider();if(!(!e||m(this.#r.$providerSetup))){if(this.#r.$state.canLoad()){Ce(()=>e.setup(),e.scope),this.#r.$providerSetup.set(!0);return}m(()=>e.preconnect?.())}}#h(){if(!this.#r.$providerSetup())return;let e=this.#r.$provider(),t=this.#r.$state.source(),i=m(this.#r.$state.crossOrigin),r=m(this.#r.$props.preferNativeHLS);if(!kn(e?.currentSrc,t)){if(this.#r.$state.canLoad()){let o=new AbortController;return Mt(t)?(r||!ii())&&eo(t.src,{credentials:it(i),signal:o.signal}).then(n=>{this.#r.notify("stream-type-change",n)}).catch(Os):St(t)?Sn(t.src,{credentials:it(i),signal:o.signal}).then(n=>{this.#r.notify("stream-type-change",n)}).catch(Os):this.#r.notify("stream-type-change","on-demand"),m(()=>{let n=m(this.#r.$state.preload);return e?.loadSource(t,n).catch(d=>{})}),()=>o.abort()}try{S(t.src)&&Te(new URL(t.src).origin)}catch{}}}#d(){let e=this.#s(),{providedPoster:t,source:i,canLoadPoster:r}=this.#r.$state;if(!e||!e.loadPoster||!i()||!r()||t())return;let o=new AbortController,n=new A("source-change",{detail:i});return e.loadPoster(i(),this.#r,o).then(d=>{this.#r.notify("poster-change",d||"",n)}).catch(()=>{this.#r.notify("poster-change","",n)}),()=>{o.abort()}}};function Cn(s){return(K(s)?s:[s]).map(e=>S(e)?{src:e,type:Pn(e)}:{...e,type:Pn(e.src,e.type)})}function Pn(s,e){return S(e)&&e.length?e:S(s)&&to.has(s)?to.get(s):!e&&Mt({src:s,type:""})?"application/x-mpegurl":!e&&St({src:s,type:""})?"application/dash+xml":!S(s)||s.startsWith("blob:")?"video/object":s.includes("youtube")||s.includes("youtu.be")?"video/youtube":s.includes("vimeo")&&!s.includes("progressive_redirect")&&!s.includes(".m3u8")?"video/vimeo":"?"}function kn(s,e){return s?.src===e?.src&&s?.type===e?.type}var Ii=class{#e;#t;#i=[];constructor(e,t){this.#e=e,this.#t=t,l(this.#r.bind(this))}#r(){let e=this.#e();for(let t of this.#i)if(!e.some(i=>i.id===t.id)){let i=t.id&&this.#t.textTracks.getById(t.id);i&&this.#t.textTracks.remove(i)}for(let t of e){let i=t.id||Ke.createId(t);this.#t.textTracks.getById(i)||(t.id=i,this.#t.textTracks.add(t))}this.#i=e}};var Hi=class extends h{static props={loaders:[]};static state=new X({loader:null});#e;#t;#i=T([]);#r=T([]);#s=null;onSetup(){this.#e=g(),this.#t=new qi(this.#i,this.#e,this.$state.loader,this.$props.loaders())}onAttach(e){e.setAttribute("data-media-provider","")}onConnect(e){this.#t.connect(),new Ii(this.#r,this.#e);let t=new ResizeObserver(me(this.#l.bind(this)));t.observe(e);let i=new MutationObserver(this.#u.bind(this));i.observe(e,{attributes:!0,childList:!0}),this.#l(),this.#u(),x(()=>{t.disconnect(),i.disconnect()})}#o=-1;load(e){e?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(this.#o),this.#o=requestAnimationFrame(()=>this.#n(e)),x(()=>{window.cancelAnimationFrame(this.#o)})}#n(e){if(!this.scope)return;let t=this.$state.loader(),{$provider:i}=this.#e;this.#s===t&&t?.target===e&&m(i)||(this.#a(),this.#s=t,t&&(t.target=e||null),!(!t||!e)&&t.load(this.#e).then(r=>{this.scope&&m(this.$state.loader)===t&&this.#e.notify("provider-change",r)}))}onDestroy(){this.#s=null,this.#a()}#a(){this.#e?.notify("provider-change",null)}#l(){if(!this.el)return;let{player:e,$state:t}=this.#e,i=this.el.offsetWidth,r=this.el.offsetHeight;e&&(t.mediaWidth.set(i),t.mediaHeight.set(r),e.el&&(z(e.el,"--media-width",i+"px"),z(e.el,"--media-height",r+"px")))}#u(){let e=[],t=[],i=this.el.children;for(let r of i)if(!r.hasAttribute("data-vds")){if(r instanceof HTMLSourceElement){let o={id:r.id,src:r.src,type:r.type};for(let n of["id","src","width","height","bitrate","codec"]){let d=r.getAttribute(`data-${n}`);S(d)&&(o[n]=/id|src|codec/.test(n)?d:Number(d))}e.push(o)}else if(r instanceof HTMLTrackElement){let o={src:r.src,kind:r.track.kind,language:r.srclang,label:r.label,default:r.default,type:r.getAttribute("data-type")};t.push({id:r.id||Ke.createId(o),...o})}}this.#i.set(e),this.#r.set(t),te()}};var Oi=class extends p(HTMLElement,Hi){static tagName="media-provider";#e;#t=null;#i=null;onSetup(){this.#e=g(),this.setAttribute("keep-alive","")}onDestroy(){this.#i?.remove(),this.#i=null,this.#t?.remove(),this.#t=null}onConnect(){l(()=>{let e=this.$state.loader(),t=e?.name==="youtube",i=e?.name==="vimeo",r=t||i,o=e?.name==="google-cast",n=e?o?this.#n():r?this.#o():e.mediaType()==="audio"?this.#r():this.#s():null;if(this.#t!==n){let d=this.#t?.parentElement??this;this.#t?.remove(),this.#t=n,n&&d.prepend(n),r&&n&&l(()=>{let{nativeControls:a,viewType:u}=this.#e.$state,c=a(),f=u()==="audio";!c&&!f?(this.#i=this.querySelector(".vds-blocker"),this.#i||(this.#i=document.createElement("div"),this.#i.classList.add("vds-blocker"),n.after(this.#i))):(this.#i?.remove(),this.#i=null),b(n,"data-no-controls",!c)})}t?n?.classList.add("vds-youtube"):i&&n?.classList.add("vds-vimeo"),r||(this.#i?.remove(),this.#i=null),this.load(n)})}#r(){let e=this.#t instanceof HTMLAudioElement?this.#t:document.createElement("audio"),{controls:t,crossOrigin:i}=this.#e.$state;return l(()=>{b(e,"controls",t()),b(e,"crossorigin",i())}),e}#s(){let e=this.#t instanceof HTMLVideoElement?this.#t:document.createElement("video"),{crossOrigin:t,poster:i,nativeControls:r}=this.#e.$state,o=U(()=>r()?"true":null),n=U(()=>i()&&r()?i():null);return l(()=>{b(e,"controls",o()),b(e,"crossorigin",t()),b(e,"poster",n())}),e}#o(){let e=this.#t instanceof HTMLIFrameElement?this.#t:document.createElement("iframe"),{nativeControls:t}=this.#e.$state;return l(()=>b(e,"tabindex",t()?null:-1)),e}#n(){if(this.#t?.classList.contains("vds-google-cast"))return this.#t;let e=document.createElement("div");return e.classList.add("vds-google-cast"),import("./chunks/vidstack-TAA2I72D.js").then(({insertContent:t})=>{t(e,this.#e.$state)}),e}};M(Li);M(Oi);function io(s,e){let t=String(s),i=t.length;if(i<e){let o=e-i;return`${"0".repeat(o)}${s}`}return t}function wn(s){let e=Math.trunc(s/3600),t=Math.trunc(s%3600/60),i=Math.trunc(s%60),r=Number((s-Math.trunc(s)).toPrecision(3));return{hours:e,minutes:t,seconds:i,fraction:r}}function qe(s,{padHrs:e=null,padMins:t=null,showHrs:i=!1,showMs:r=!1}={}){let{hours:o,minutes:n,seconds:d,fraction:a}=wn(s),u=e?io(o,2):o,c=t||he(t)&&s>=3600?io(n,2):n,f=io(d,2),y=r&&a>0?`.${String(a).replace(/^0?\./,"")}`:"",E=`${c}:${f}${y}`;return o>0||i?`${u}:${E}`:E}function Ue(s){let e=[],{hours:t,minutes:i,seconds:r}=wn(s);return t>0&&e.push(`${t} hour`),i>0&&e.push(`${i} min`),(r>0||e.length===0)&&e.push(`${r} sec`),e.join(" ")}var Ni=class extends h{static props={translations:null};static state=new X({label:null,busy:!1});#e;#t=!1;onSetup(){this.#e=g()}onAttach(e){e.style.display="contents"}onConnect(e){e.setAttribute("data-media-announcer",""),C(e,"role","status"),C(e,"aria-live","polite");let{busy:t}=this.$state;this.setAttributes({"aria-busy":()=>t()?"true":null}),this.#t=!0,l(this.#i.bind(this)),l(this.#n.bind(this)),l(this.#o.bind(this)),l(this.#r.bind(this)),l(this.#s.bind(this)),l(this.#u.bind(this)),l(this.#h.bind(this)),te(),this.#t=!1}#i(){let{paused:e}=this.#e.$state;this.#d(e()?"Pause":"Play")}#r(){let{fullscreen:e}=this.#e.$state;this.#d(e()?"Enter Fullscreen":"Exit Fullscreen")}#s(){let{pictureInPicture:e}=this.#e.$state;this.#d(e()?"Enter PiP":"Exit PiP")}#o(){let{textTrack:e}=this.#e.$state;this.#d(e()?"Closed-Captions On":"Closed-Captions Off")}#n(){let{muted:e,volume:t,audioGain:i}=this.#e.$state;this.#d(e()||t()===0?"Mute":`${Math.round(t()*(i()??1)*100)}% ${this.#c("Volume")}`)}#a=-1;#l=-1;#u(){let{seeking:e,currentTime:t}=this.#e.$state,i=e();this.#a>0?(window.clearTimeout(this.#l),this.#l=window.setTimeout(()=>{if(!this.scope)return;let r=m(t),o=Math.abs(r-this.#a);if(o>=1){let n=r>=this.#a,d=Ue(o);this.#d(`${this.#c(n?"Seek Forward":"Seek Backward")} ${d}`)}this.#a=-1,this.#l=-1},300)):i&&(this.#a=m(t))}#c(e){let{translations:t}=this.$props;return t?.()?.[e||""]??e}#h(){let{label:e,busy:t}=this.$state,i=this.#c(e());if(this.#t)return;t.set(!0);let r=window.setTimeout(()=>void t.set(!1),150);return this.el&&b(this.el,"aria-label",i),S(i)&&this.dispatch("change",{detail:i}),()=>window.clearTimeout(r)}#d(e){let{label:t}=this.$state;t.set(e)}};var Fi=class extends p(HTMLElement,Ni){static tagName="media-announcer"};function ga(s){return s?"true":"false"}function L(s){return()=>ga(s())}var Gi=class extends F{#e;constructor(e){super(),this.#e=e}onAttach(e){let{$props:t,ariaKeys:i}=g(),r=e.getAttribute("aria-keyshortcuts");if(r){i[this.#e]=r,x(()=>{delete i[this.#e]});return}let o=t.keyShortcuts()[this.#e];if(o){let n=K(o)?o.join(" "):S(o)?o:o?.keys;e.setAttribute("aria-keyshortcuts",K(n)?n.join(" "):n)}}};var D=class extends F{static props={disabled:!1};#e;constructor(e){super(),this.#e=e,new O,e.keyShortcut&&new Gi(e.keyShortcut)}onSetup(){let{disabled:e}=this.$props;this.setAttributes({"data-pressed":this.#e.isPresssed,"aria-pressed":this.#t.bind(this),"aria-disabled":()=>e()?"true":null})}onAttach(e){C(e,"tabindex","0"),C(e,"role","button"),C(e,"type","button")}onConnect(e){se(e,this.#r.bind(this));for(let t of["click","touchstart"])this.listen(t,this.#s.bind(this),{passive:!0})}#t(){return Be(this.#e.isPresssed())}#i(e){Oo(this.#e.isPresssed)&&this.#e.isPresssed.set(t=>!t)}#r(e){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){e.preventDefault(),e.stopImmediatePropagation();return}e.preventDefault(),(this.#e.onPress??this.#i).call(this,e)}#s(e){this.$props.disabled()&&(e.preventDefault(),e.stopImmediatePropagation())}};var Bi=class extends h{static props=D.props;#e;constructor(){super(),new D({isPresssed:this.#i.bind(this),onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{canAirPlay:e,isAirPlayConnected:t}=this.#e.$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":this.#r.bind(this),"aria-hidden":L(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","airplay"),J(e,this.#s.bind(this))}#t(e){this.#e.remote.requestAirPlay(e)}#i(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="airplay"&&t()!=="disconnected"}#r(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="airplay"&&t()}#s(){let{remotePlaybackState:e}=this.#e.$state;return`AirPlay ${e()}`}};var Qi=class extends p(HTMLElement,Bi){static tagName="media-airplay-button"};var Ki=class extends h{static props=D.props;#e;constructor(){super(),new D({isPresssed:this.#i.bind(this),keyShortcut:"toggleCaptions",onPress:this.#t.bind(this)})}onSetup(){this.#e=g(),this.setAttributes({"data-active":this.#i.bind(this),"data-supported":()=>!this.#r(),"aria-hidden":L(this.#r.bind(this))})}onAttach(e){e.setAttribute("data-media-tooltip","caption"),J(e,"Captions")}#t(e){this.#e.remote.toggleCaptions(e)}#i(){let{textTrack:e}=this.#e.$state,t=e();return!!t&&H(t)}#r(){let{hasCaptions:e}=this.#e.$state;return!e()}};var Wi=class extends p(HTMLElement,Ki){static tagName="media-caption-button"};var Ui=class extends h{static props={...D.props,target:"prefer-media"};#e;constructor(){super(),new D({isPresssed:this.#i.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{fullscreen:e}=this.#e.$state,t=this.#r.bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":L(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","fullscreen"),J(e,"Fullscreen")}#t(e){let t=this.#e.remote,i=this.$props.target();this.#i()?t.exitFullscreen(i,e):t.enterFullscreen(i,e)}#i(){let{fullscreen:e}=this.#e.$state;return e()}#r(){let{canFullscreen:e}=this.#e.$state;return e()}};var zi=class extends p(HTMLElement,Ui){static tagName="media-fullscreen-button"};var Yi=class extends h{static props=D.props;#e;constructor(){super(),new D({isPresssed:this.#i.bind(this),onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{canGoogleCast:e,isGoogleCastConnected:t}=this.#e.$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":this.#r.bind(this),"aria-hidden":L(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","google-cast"),J(e,this.#s.bind(this))}#t(e){this.#e.remote.requestGoogleCast(e)}#i(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="google-cast"&&t()!=="disconnected"}#r(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="google-cast"&&t()}#s(){let{remotePlaybackState:e}=this.#e.$state;return`Google Cast ${e()}`}};var ji=class extends p(HTMLElement,Yi){static tagName="media-google-cast-button"};var Xi=class extends h{static props={disabled:!1};#e;constructor(){super(),new O}onSetup(){this.#e=g();let{disabled:e}=this.$props,{live:t,liveEdge:i}=this.#e.$state,r=()=>!t();this.setAttributes({"data-edge":i,"data-hidden":r,"aria-disabled":L(()=>e()||i()),"aria-hidden":L(r)})}onAttach(e){C(e,"tabindex","0"),C(e,"role","button"),C(e,"type","button"),e.setAttribute("data-media-tooltip","live")}onConnect(e){se(e,this.#t.bind(this))}#t(e){let{disabled:t}=this.$props,{liveEdge:i}=this.#e.$state;t()||i()||this.#e.remote.seekToLiveEdge(e)}};var Ji=class extends p(HTMLElement,Xi){static tagName="media-live-button"};var Zi=class extends h{static props=D.props;#e;constructor(){super(),new D({isPresssed:this.#i.bind(this),keyShortcut:"toggleMuted",onPress:this.#t.bind(this)})}onSetup(){this.#e=g(),this.setAttributes({"data-muted":this.#i.bind(this),"data-state":this.#r.bind(this)})}onAttach(e){e.setAttribute("data-media-mute-button",""),e.setAttribute("data-media-tooltip","mute"),J(e,"Mute")}#t(e){let t=this.#e.remote;this.#i()?t.unmute(e):t.mute(e)}#i(){let{muted:e,volume:t}=this.#e.$state;return e()||t()===0}#r(){let{muted:e,volume:t}=this.#e.$state,i=t();if(e()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}};var er=class extends p(HTMLElement,Zi){static tagName="media-mute-button"};var tr=class extends h{static props=D.props;#e;constructor(){super(),new D({isPresssed:this.#i.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{pictureInPicture:e}=this.#e.$state,t=this.#r.bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":L(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","pip"),J(e,"PiP")}#t(e){let t=this.#e.remote;this.#i()?t.exitPictureInPicture(e):t.enterPictureInPicture(e)}#i(){let{pictureInPicture:e}=this.#e.$state;return e()}#r(){let{canPictureInPicture:e}=this.#e.$state;return e()}};var ir=class extends p(HTMLElement,tr){static tagName="media-pip-button"};var rr=class extends h{static props=D.props;#e;constructor(){super(),new D({isPresssed:this.#i.bind(this),keyShortcut:"togglePaused",onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{paused:e,ended:t}=this.#e.$state;this.setAttributes({"data-paused":e,"data-ended":t})}onAttach(e){e.setAttribute("data-media-tooltip","play"),J(e,"Play")}#t(e){let t=this.#e.remote;this.#i()?t.pause(e):t.play(e)}#i(){let{paused:e}=this.#e.$state;return!e()}};var sr=class extends p(HTMLElement,rr){static tagName="media-play-button"};var or=class extends h{static props={disabled:!1,seconds:30};#e;constructor(){super(),new O}onSetup(){this.#e=g();let{seeking:e}=this.#e.$state,{seconds:t}=this.$props,i=this.#t.bind(this);this.setAttributes({seconds:t,"data-seeking":e,"data-supported":i,"aria-hidden":L(()=>!i())})}onAttach(e){C(e,"tabindex","0"),C(e,"role","button"),C(e,"type","button"),e.setAttribute("data-media-tooltip","seek"),J(e,this.#i.bind(this))}onConnect(e){se(e,this.#r.bind(this))}#t(){let{canSeek:e}=this.#e.$state;return e()}#i(){let{seconds:e}=this.$props;return`Seek ${e()>0?"forward":"backward"} ${e()} seconds`}#r(e){let{seconds:t,disabled:i}=this.$props;if(i())return;let{currentTime:r}=this.#e.$state,o=r()+t();this.#e.remote.seek(o,e)}};var nr=class extends p(HTMLElement,or){static tagName="media-seek-button"};var ar=class extends h{static props={disabled:!1,defaultPressed:!1};#e=T(!1);get pressed(){return this.#e()}constructor(){super(),new D({isPresssed:this.#e})}};var lr=class extends p(HTMLElement,ar){static tagName="media-toggle-button"};var dr=class{priority=10;#e=null;#t=Qo();#i;constructor(e){this.#i=e}attach(){}canRender(){return!0}detach(){this.#t.empty(),this.#i.reset(),this.#e=null}changeTrack(e){!e||this.#e===e||(this.#t.empty(),e.readyState<2?(this.#i.reset(),this.#t.add(v(e,"load",()=>this.#r(e),{once:!0}))):this.#r(e),this.#t.add(v(e,"add-cue",t=>{this.#i.addCue(t.detail)}),v(e,"remove-cue",t=>{this.#i.removeCue(t.detail)})),this.#e=e)}#r(e){this.#i.changeTrack({cues:[...e.cues],regions:[...e.regions]})}};var ur=class s extends h{static props={textDir:"ltr",exampleText:"Captions look like this."};#e;static lib=T(null);onSetup(){this.#e=g(),this.setAttributes({"aria-hidden":L(this.#t.bind(this))})}onAttach(e){e.style.setProperty("pointer-events","none")}onConnect(e){s.lib()||import("https://cdn.jsdelivr.net/npm/media-captions@next/dist/prod.js").then(t=>s.lib.set(t)),l(this.#i.bind(this))}#t(){let{textTrack:e,remotePlaybackState:t,iOSControls:i}=this.#e.$state,r=e();return i()||t()==="connected"||!r||!H(r)}#i(){if(!s.lib())return;let{viewType:e}=this.#e.$state;return e()==="audio"?this.#r():this.#a()}#r(){return l(this.#s.bind(this)),this.#c(null),()=>{this.el.textContent=""}}#s(){if(this.#t())return;this.#o();let{textTrack:e}=this.#e.$state;v(e(),"cue-change",this.#o.bind(this)),l(this.#n.bind(this))}#o(){this.el.textContent="",this.#p>=0&&this.#g();let{realCurrentTime:e,textTrack:t}=this.#e.$state,{renderVTTCueString:i}=s.lib(),r=m(e),o=m(t).activeCues;for(let n of o){let d=this.#y(),a=this.#b();a.innerHTML=i(n,r),d.append(a),this.el.append(a)}}#n(){let{realCurrentTime:e}=this.#e.$state,{updateTimedVTTCueNodes:t}=s.lib();t(this.el,e())}#a(){let{CaptionsRenderer:e}=s.lib(),t=new e(this.el),i=new dr(t);return this.#e.textRenderers.add(i),l(this.#l.bind(this,t)),l(this.#u.bind(this,t)),this.#c(t),()=>{this.el.textContent="",this.#e.textRenderers.remove(i),t.destroy()}}#l(e){e.dir=this.$props.textDir()}#u(e){if(this.#t())return;let{realCurrentTime:t,textTrack:i}=this.#e.$state;e.currentTime=t(),this.#p>=0&&i()?.activeCues[0]&&this.#g()}#c(e){let t=this.#e.player;if(!t)return;let i=this.#h.bind(this,e);v(t,"vds-font-change",i)}#h(e){if(this.#p>=0){this.#m();return}let{textTrack:t}=this.#e.$state;t()?.activeCues[0]?e?.update(!0):this.#d()}#d(){let e=this.#y();b(e,"data-example","");let t=this.#b();b(t,"data-example",""),t.textContent=this.$props.exampleText(),e?.append(t),this.el?.append(e),this.el?.setAttribute("data-example",""),this.#m()}#p=-1;#m(){window.clearTimeout(this.#p),this.#p=window.setTimeout(this.#g.bind(this),2500)}#g(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.#p=-1}#y(){let e=document.createElement("div");return b(e,"data-part","cue-display"),e}#b(){let e=document.createElement("div");return b(e,"data-part","cue"),e}};var cr=class extends p(HTMLElement,ur){static tagName="media-captions"};var ro=class extends h{static props={defaultText:""}},hr=class extends p(HTMLElement,ro){static tagName="media-chapter-title";#e;#t;onSetup(){this.#e=g(),this.#t=T("")}onConnect(){let e=this.#e.textTracks;sn(e,"chapters",this.#t.set),l(this.#i.bind(this))}#i(){let{defaultText:e}=this.$props;this.textContent=this.#t()||e()}};var pr=class extends h{static props={hideDelay:2e3,hideOnMouseLeave:!1};#e;onSetup(){this.#e=g(),l(this.#i.bind(this))}onAttach(e){let{pictureInPicture:t,fullscreen:i}=this.#e.$state;z(e,"pointer-events","none"),C(e,"role","group"),this.setAttributes({"data-visible":this.#r.bind(this),"data-fullscreen":i,"data-pip":t}),l(()=>{this.dispatch("change",{detail:this.#r()})}),l(this.#t.bind(this)),l(()=>{let r=i();for(let o of["top","right","bottom","left"])z(e,`padding-${o}`,r&&`env(safe-area-inset-${o})`)})}#t(){if(!this.el)return;let{nativeControls:e}=this.#e.$state,t=e();b(this.el,"aria-hidden",t?"true":null),z(this.el,"display",t?"none":null)}#i(){let{controls:e}=this.#e.player,{hideDelay:t,hideOnMouseLeave:i}=this.$props;e.defaultDelay=t()===2e3?this.#e.$props.controlsDelay():t(),e.hideOnMouseLeave=i()}#r(){let{controlsVisible:e}=this.#e.$state;return e()}};var mr=class extends p(HTMLElement,pr){static tagName="media-controls"};var fr=class extends h{onAttach(e){e.style.pointerEvents||z(e,"pointer-events","auto")}};var gr=class extends p(HTMLElement,fr){static tagName="media-controls-group"};var yr=class extends h{static props={disabled:!1,event:void 0,action:void 0};#e;#t=null;onSetup(){this.#e=g();let{event:e,action:t}=this.$props;this.setAttributes({event:e,action:t})}onAttach(e){e.setAttribute("data-media-gesture",""),e.style.setProperty("pointer-events","none")}onConnect(e){this.#t=this.#e.player.el?.querySelector("[data-media-provider]"),l(this.#i.bind(this))}#i(){let e=this.$props.event(),t=this.$props.disabled();!this.#t||!e||t||(/^dbl/.test(e)&&(e=e.split(/^dbl/)[1]),(e==="pointerup"||e==="pointerdown")&&this.#e.$state.pointer()==="coarse"&&(e=e==="pointerup"?"touchend":"touchstart"),v(this.#t,e,this.#o.bind(this),{passive:!1}))}#r=0;#s=-1;#o(e){if(this.$props.disabled()||Ns(e)&&(e.button!==0||this.#e.activeMenu)||Xt(e)&&this.#e.activeMenu||st(e)||!this.#a(e))return;if(e.MEDIA_GESTURE=!0,e.preventDefault(),!m(this.$props.event)?.startsWith("dbl"))this.#r===0&&setTimeout(()=>{this.#r===1&&this.#n(e)},250);else if(this.#r===1){queueMicrotask(()=>this.#n(e)),clearTimeout(this.#s),this.#r=0;return}this.#r===0&&(this.#s=window.setTimeout(()=>{this.#r=0},275)),this.#r++}#n(e){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.#l()&&this.#u(m(this.$props.action),e),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}#a(e){if(!this.el)return!1;if(Ns(e)||qo(e)||Xt(e)){let t=Xt(e)?e.changedTouches[0]??e.touches[0]:void 0,i=t?.clientX??e.clientX,r=t?.clientY??e.clientY,o=this.el.getBoundingClientRect(),n=r>=o.top&&r<=o.bottom&&i>=o.left&&i<=o.right;return e.type.includes("leave")?!n:n}return!0}#l(){let e=this.#e.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(e).sort((t,i)=>+getComputedStyle(i).zIndex-+getComputedStyle(t).zIndex)[0]===this.el}#u(e,t){if(!e)return;let i=new A("will-trigger",{detail:e,cancelable:!0,trigger:t});if(this.dispatchEvent(i),i.defaultPrevented)return;let[r,o]=e.replace(/:([a-z])/,"-$1").split(":");e.includes(":fullscreen")?this.#e.remote.toggleFullscreen("prefer-media",t):e.includes("seek:")?this.#e.remote.seek(m(this.#e.$state.currentTime)+(+o||0),t):this.#e.remote[Go(r)](t),this.dispatch("trigger",{detail:e,trigger:t})}};var vr=class extends p(HTMLElement,yr){static tagName="media-gesture"};var so=class extends h{static props={when:!1}},br=class extends p(HTMLElement,so){static tagName="media-layout";#e;onSetup(){this.#e=g()}onConnect(){l(this.#t.bind(this))}#t(){let e=this.firstElementChild,t=e?.localName==="template",i=this.$props.when();if(!(Vo(i)?i:U(()=>i(this.#e.player.state))())){t?(this.textContent="",this.appendChild(e)):fe(e)&&(e.style.display="none");return}t?this.append(e.content.cloneNode(!0)):fe(e)&&(e.style.display="")}};var _=re();var _t=re();var ee=class extends F{#e=new Set;#t=T("");#i=null;onValueChange;get values(){return Array.from(this.#e).map(e=>e.value())}get value(){return this.#t()}set value(e){this.#n(e)}onSetup(){N(_t,{add:this.#r.bind(this),remove:this.#s.bind(this)})}onAttach(e){V(_)||C(e,"role","radiogroup"),this.setAttributes({value:this.#t})}onDestroy(){this.#e.clear()}#r(e){this.#e.has(e)||(this.#e.add(e),e.onCheck=this.#o,e.check(e.value()===this.#t()))}#s(e){e.onCheck=null,this.#e.delete(e)}#o=this.#n.bind(this);#n(e,t){let i=m(this.#t);if(!e||e===i)return;let r=this.#a(i),o=this.#a(e);r?.check(!1,t),o?.check(!0,t),this.#t.set(e),this.onValueChange?.(e,t)}#a(e){for(let t of this.#e)if(e===m(t.value))return t;return null}};var ya=[1,1.25,1.5,1.75,2,2.5,3,4],Er=class extends h{static props={normalLabel:"Disabled",gains:ya};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{gains:e}=this.$props,{canSetAudioGain:t}=this.#e.$state;return!t()||e().length===0}constructor(){super(),this.#i=new ee,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=g(),V(_)&&(this.#t=w(_))}onConnect(e){l(this.#r.bind(this)),l(this.#s.bind(this)),l(this.#o.bind(this))}getOptions(){let{gains:e,normalLabel:t}=this.$props;return e().map(i=>({label:i===1||i===null?t:String(i*100)+"%",value:i.toString()}))}#r(){this.#i.value=this.#n()}#s(){let{normalLabel:e}=this.$props,{audioGain:t}=this.#e.$state,i=t();this.#t?.hint.set(i===1||i==null?e():String(i*100)+"%")}#o(){this.#t?.disable(this.disabled)}#n(){let{audioGain:e}=this.#e.$state;return e()?.toString()??"1"}#a(e,t){if(this.disabled)return;let i=+e;this.#e.remote.changeAudioGain(i,t),this.dispatch("change",{detail:i,trigger:t})}};function ye(s,e){Y(()=>{if(!s.connectScope)return;let t=s.querySelector("template");t&&l(()=>{let i=s.getOptions();ot(t,i.length,(r,o)=>{let{label:n,value:d}=i[o],a=r.querySelector('[data-part="label"]');r.setAttribute("value",d),a&&(S(n)?a.textContent=n:l(()=>{a.textContent=n()})),e?.(r,i[o],o)})})})}var Tr=class extends p(HTMLElement,Er){static tagName="media-audio-gain-radio-group";onConnect(){ye(this)}};var xr=class extends h{static props={emptyLabel:"Default"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{audioTracks:e}=this.#t.$state;return e().length<=1}constructor(){super(),this.#i=new ee,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=g(),V(_)&&(this.#e=w(_))}onConnect(e){l(this.#r.bind(this)),l(this.#o.bind(this)),l(this.#s.bind(this))}getOptions(){let{audioTracks:e}=this.#t.$state;return e().map(t=>({track:t,label:t.label,value:t.label.toLowerCase()}))}#r(){this.#i.value=this.#n()}#s(){let{emptyLabel:e}=this.$props,{audioTrack:t}=this.#t.$state,i=t();this.#e?.hint.set(i?.label??e())}#o(){this.#e?.disable(this.disabled)}#n(){let{audioTrack:e}=this.#t.$state,t=e();return t?t.label.toLowerCase():""}#a(e,t){if(this.disabled)return;let i=this.#t.audioTracks.toArray().findIndex(r=>r.label.toLowerCase()===e);if(i>=0){let r=this.#t.audioTracks[i];this.#t.remote.changeAudioTrack(i,t),this.dispatch("change",{detail:r,trigger:t})}}};var Mr=class extends p(HTMLElement,xr){static tagName="media-audio-radio-group";onConnect(){ye(this)}};var Sr=class extends h{static props={offLabel:"Off"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{hasCaptions:e}=this.#e.$state;return!e()}constructor(){super(),this.#i=new ee,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=g(),V(_)&&(this.#t=w(_))}onConnect(e){super.onConnect?.(e),l(this.#r.bind(this)),l(this.#o.bind(this)),l(this.#s.bind(this))}getOptions(){let{offLabel:e}=this.$props,{textTracks:t}=this.#e.$state;return[{value:"off",label:e},...t().filter(H).map(i=>({track:i,label:i.label,value:this.#l(i)}))]}#r(){this.#i.value=this.#n()}#s(){let{offLabel:e}=this.$props,{textTrack:t}=this.#e.$state,i=t();this.#t?.hint.set(i&&H(i)&&i.mode==="showing"?i.label:e())}#o(){this.#t?.disable(this.disabled)}#n(){let{textTrack:e}=this.#e.$state,t=e();return t&&H(t)&&t.mode==="showing"?this.#l(t):"off"}#a(e,t){if(this.disabled)return;if(e==="off"){let r=this.#e.textTracks.selected;if(r){let o=this.#e.textTracks.indexOf(r);this.#e.remote.changeTextTrackMode(o,"disabled",t),this.dispatch("change",{detail:null,trigger:t})}return}let i=this.#e.textTracks.toArray().findIndex(r=>this.#l(r)===e);if(i>=0){let r=this.#e.textTracks[i];this.#e.remote.changeTextTrackMode(i,"showing",t),this.dispatch("change",{detail:r,trigger:t})}}#l(e){return e.id+":"+e.kind+"-"+e.label.toLowerCase()}};var Cr=class extends p(HTMLElement,Sr){static tagName="media-captions-radio-group";onConnect(){ye(this)}};var Pr=class extends h{static props={thumbnails:null};#e;#t;#i;#r=T(null);#s=T([]);get value(){return this.#i.value}get disabled(){return!this.#s()?.length}constructor(){super(),this.#i=new ee,this.#i.onValueChange=this.#c.bind(this)}onSetup(){this.#e=g(),V(_)&&(this.#t=w(_));let{thumbnails:e}=this.$props;this.setAttributes({"data-thumbnails":()=>!!e()})}onAttach(e){this.#t?.attachObserver({onOpen:this.#o.bind(this)})}getOptions(){let{clipStartTime:e,clipEndTime:t}=this.#e.$state,i=e(),r=t()||1/0;return this.#s().map((o,n)=>({cue:o,value:n.toString(),label:o.text,startTime:qe(Math.max(0,o.startTime-i)),duration:Ue(Math.min(r,o.endTime)-Math.max(i,o.startTime))}))}#o(){m(()=>this.#l())}onConnect(e){l(this.#l.bind(this)),l(this.#u.bind(this)),l(this.#n.bind(this)),rt(this.#e.textTracks,"chapters",this.#r.set)}#n(){let e=this.#r();if(!e)return;let t=this.#a.bind(this,e);return t(),v(e,"add-cue",t),v(e,"remove-cue",t),()=>{this.#s.set([])}}#a(e){let{clipStartTime:t,clipEndTime:i}=this.#e.$state,r=t(),o=i()||1/0;this.#s.set([...e.cues].filter(n=>n.startTime<=o&&n.endTime>=r))}#l(){if(!this.#t?.expanded())return;if(!this.#r()){this.#i.value="-1";return}let{realCurrentTime:t,clipStartTime:i,clipEndTime:r}=this.#e.$state,o=i(),n=r()||1/0,d=t(),a=this.#s().findIndex(u=>rn(u,d));this.#i.value=a.toString(),a>=0&&Y(()=>{if(!this.connectScope)return;let u=this.#s()[a],c=this.el.querySelector("[aria-checked='true']"),f=Math.max(o,u.startTime),y=Math.min(n,u.endTime)-f,E=Math.max(0,d-f)/y*100;c&&z(c,"--progress",R(E,3)+"%")})}#u(){this.#t?.disable(this.disabled)}#c(e,t){if(this.disabled||!t)return;let i=+e,r=this.#s(),{clipStartTime:o}=this.#e.$state;ie(i)&&r?.[i]&&(this.#i.value=i.toString(),this.#e.remote.seek(r[i].startTime-o(),t),this.dispatch("change",{detail:r[i],trigger:t}))}};var kr=class extends p(HTMLElement,Pr){static tagName="media-chapters-radio-group";onConnect(){ye(this,(e,t)=>{let{cue:i,startTime:r,duration:o}=t,n=e.querySelector(".vds-thumbnail,media-thumbnail"),d=e.querySelector('[data-part="start-time"]'),a=e.querySelector('[data-part="duration"]');d&&(d.textContent=r),a&&(a.textContent=o),n&&(n.setAttribute("time",i.startTime+""),l(()=>{let u=this.$props.thumbnails();"src"in n?n.src=u:S(u)&&n.setAttribute("src",u)}))})}};var ct=class extends h{static props={disabled:!1};#e;#t=T(null);get expanded(){return this.#e?.expanded()??!1}constructor(){super(),new O}onSetup(){this.#e=w(_)}onAttach(e){this.#e.attachMenuButton(this),l(this.#i.bind(this)),C(e,"type","button")}onConnect(e){l(this.#r.bind(this)),this.#s();let t=new MutationObserver(this.#s.bind(this));t.observe(e,{attributeFilter:["data-part"],childList:!0,subtree:!0}),x(()=>t.disconnect()),se(e,i=>{this.dispatch("select",{trigger:i})})}#i(){this.#e.disableMenuButton(this.$props.disabled())}#r(){let e=this.#t();e&&l(()=>{let t=this.#e.hint();t&&(e.textContent=t)})}#s(){let e=this.el?.querySelector('[data-part="hint"]');this.#t.set(e??null)}};var wr=class extends p(HTMLElement,ct){static tagName="media-menu-button"};var ht=class extends F{#e;constructor(e){super(),this.#e=e,l(this.#t.bind(this))}onDestroy(){this.#s?.(),this.#s=null}#t(){let e=this.#e.trigger();if(!e){this.hide();return}let t=this.show.bind(this),i=this.hide.bind(this);this.#e.listen(e,t,i)}#i=-1;#r=-1;#s=null;show(e){this.#o(),window.cancelAnimationFrame(this.#r),this.#r=-1,this.#s?.(),this.#s=null,this.#i=window.setTimeout(()=>{this.#i=-1;let t=this.#e.content();t&&t.style.removeProperty("display"),m(()=>this.#e.onChange(!0,e))},this.#e.showDelay?.()??0)}hide(e){this.#o(),m(()=>this.#e.onChange(!1,e)),this.#r=requestAnimationFrame(()=>{this.#o(),this.#r=-1;let t=this.#e.content();if(t){let i=()=>{t.style.display="none",this.#s=null};if(an(t)){this.#s?.();let o=v(t,"animationend",i,{once:!0});this.#s=o}else i()}})}#o(){window.clearTimeout(this.#i),this.#i=-1}};var pt=re(),ze=re();var $n=s=>typeof s=="object"&&s!=null&&s.nodeType===1,Ln=(s,e)=>(!e||s!=="hidden")&&s!=="visible"&&s!=="clip",oo=(s,e)=>{if(s.clientHeight<s.scrollHeight||s.clientWidth<s.scrollWidth){let t=getComputedStyle(s,null);return Ln(t.overflowY,e)||Ln(t.overflowX,e)||(i=>{let r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(s)}return!1},$r=(s,e,t,i,r,o,n,d)=>o<s&&n>e||o>s&&n<e?0:o<=s&&d<=t||n>=e&&d>=t?o-s-i:n>e&&d<t||o<s&&d>t?n-e+r:0,va=s=>{let e=s.parentElement;return e??(s.getRootNode().host||null)},_n=(s,e)=>{var t,i,r,o;if(typeof document>"u")return[];let{scrollMode:n,block:d,inline:a,boundary:u,skipOverflowHiddenElements:c}=e,f=typeof u=="function"?u:Fe=>Fe!==u;if(!$n(s))throw new TypeError("Invalid target");let y=document.scrollingElement||document.documentElement,E=[],k=s;for(;$n(k)&&f(k);){if(k=va(k),k===y){E.push(k);break}k!=null&&k===document.body&&oo(k)&&!oo(document.documentElement)||k!=null&&oo(k,c)&&E.push(k)}let q=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,B=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:$e,scrollY:He}=window,{height:Oe,width:Ne,top:Je,right:Tt,bottom:Ze,left:Le}=s.getBoundingClientRect(),{top:xt,right:Ot,bottom:_e,left:Se}=(Fe=>{let I=window.getComputedStyle(Fe);return{top:parseFloat(I.scrollMarginTop)||0,right:parseFloat(I.scrollMarginRight)||0,bottom:parseFloat(I.scrollMarginBottom)||0,left:parseFloat(I.scrollMarginLeft)||0}})(s),oe=d==="start"||d==="nearest"?Je-xt:d==="end"?Ze+_e:Je+Oe/2-xt+_e,j=a==="center"?Le+Ne/2-Se+Ot:a==="end"?Tt+Ot:Le-Se,et=[];for(let Fe=0;Fe<E.length;Fe++){let I=E[Fe],{height:Nt,width:Ft,top:Gt,right:Ds,bottom:qs,left:Bt}=I.getBoundingClientRect();if(n==="if-needed"&&Je>=0&&Le>=0&&Ze<=B&&Tt<=q&&Je>=Gt&&Ze<=qs&&Le>=Bt&&Tt<=Ds)return et;let Qt=getComputedStyle(I),Kt=parseInt(Qt.borderLeftWidth,10),Wt=parseInt(Qt.borderTopWidth,10),Ut=parseInt(Qt.borderRightWidth,10),zt=parseInt(Qt.borderBottomWidth,10),Re=0,Ae=0,Yt="offsetWidth"in I?I.offsetWidth-I.clientWidth-Kt-Ut:0,jt="offsetHeight"in I?I.offsetHeight-I.clientHeight-Wt-zt:0,Is="offsetWidth"in I?I.offsetWidth===0?0:Ft/I.offsetWidth:0,Hs="offsetHeight"in I?I.offsetHeight===0?0:Nt/I.offsetHeight:0;if(y===I)Re=d==="start"?oe:d==="end"?oe-B:d==="nearest"?$r(He,He+B,B,Wt,zt,He+oe,He+oe+Oe,Oe):oe-B/2,Ae=a==="start"?j:a==="center"?j-q/2:a==="end"?j-q:$r($e,$e+q,q,Kt,Ut,$e+j,$e+j+Ne,Ne),Re=Math.max(0,Re+He),Ae=Math.max(0,Ae+$e);else{Re=d==="start"?oe-Gt-Wt:d==="end"?oe-qs+zt+jt:d==="nearest"?$r(Gt,qs,Nt,Wt,zt+jt,oe,oe+Oe,Oe):oe-(Gt+Nt/2)+jt/2,Ae=a==="start"?j-Bt-Kt:a==="center"?j-(Bt+Ft/2)+Yt/2:a==="end"?j-Ds+Ut+Yt:$r(Bt,Ds,Ft,Kt,Ut+Yt,j,j+Ne,Ne);let{scrollLeft:$o,scrollTop:Lo}=I;Re=Hs===0?0:Math.max(0,Math.min(Lo+Re/Hs,I.scrollHeight-Nt/Hs+jt)),Ae=Is===0?0:Math.max(0,Math.min($o+Ae/Is,I.scrollWidth-Ft/Is+Yt)),oe+=Lo-Re,j+=$o-Ae}et.push({el:I,top:Re,left:Ae})}return et};function ba(s,e){let t=_n(s,e);for(let{el:i,top:r,left:o}of t)i.scroll({top:r,left:o,behavior:e.behavior})}function Rn(s,e={}){ba(s,{scrollMode:"if-needed",block:"center",inline:"center",...e})}var Ea=["a[href]","[tabindex]","input","select","button"].map(s=>`${s}:not([aria-hidden='true'])`).join(","),Ta=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]),Lr=class{#e=-1;#t=null;#i=[];#r;get items(){return this.#i}constructor(e){this.#r=e}attachMenu(e){v(e,"focus",this.#n.bind(this)),this.#t=e,x(()=>{this.#t=null})}listen(){this.#t&&(this.update(),v(this.#t,"keyup",this.#l.bind(this)),v(this.#t,"keydown",this.#u.bind(this)),x(()=>{this.#e=-1,this.#i=[]}))}update(){this.#e=0,this.#i=this.#h()}scroll(e=this.#o()){let t=this.#i[e];t&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{Rn(t,{behavior:"smooth",boundary:i=>!i.hasAttribute("data-root")})})})}focusActive(e=!0){let t=this.#o();this.#s(t>=0?t:0,e)}#s(e,t=!0){this.#e=e,this.#i[e]?(this.#i[e].focus({preventScroll:!0}),t&&this.scroll(e)):this.#t?.focus({preventScroll:!0})}#o(){return this.#i.findIndex(e=>document.activeElement===e||e.getAttribute("role")==="menuitemradio"&&e.getAttribute("aria-checked")==="true")}#n(){this.#e>=0||(this.update(),this.focusActive())}#a(e){let t=e.target;if(Io(e)&&t instanceof Element){let i=t.getAttribute("role");return!/a|input|select|button/.test(t.localName)&&!i}return Ta.has(e.key)}#l(e){this.#a(e)&&(e.stopPropagation(),e.preventDefault())}#u(e){if(this.#a(e))switch(e.stopPropagation(),e.preventDefault(),e.key){case"Escape":this.#r.closeMenu(e);break;case"Tab":this.#s(this.#c(e.shiftKey?-1:1));break;case"ArrowUp":this.#s(this.#c(-1));break;case"ArrowDown":this.#s(this.#c(1));break;case"Home":case"PageUp":this.#s(0);break;case"End":case"PageDown":this.#s(this.#i.length-1);break}}#c(e){let t=this.#e;do t=(t+e+this.#i.length)%this.#i.length;while(this.#i[t]?.offsetParent===null);return t}#h(){if(!this.#t)return[];let e=this.#t.querySelectorAll(Ea),t=[],i=r=>r.getAttribute("role")==="menu";for(let r of e)fe(r)&&r.offsetParent!==null&&oi(this.#t,r,i)&&t.push(r);return t}};var xa=0,_r=class extends h{static props={showDelay:0};#e;#t;#i;#r=T(!1);#s=T(!1);#o=T(null);#n=T(null);#a;#l=new Set;#u=null;#c;#h;#d=!1;#p=T(!1);#m=new Set;get triggerElement(){return this.#o()}get contentElement(){return this.#n()}get isSubmenu(){return!!this.#a}constructor(){super();let{showDelay:e}=this.$props;this.#c=new ht({trigger:this.#o,content:this.#n,showDelay:e,listen:(t,i,r)=>{se(t,n=>{this.#r()?r(n):i(n)});let o=this.#L();o&&se(o,n=>{n.stopPropagation(),r(n)})},onChange:this.#x.bind(this)})}onSetup(){this.#e=g();let e=++xa;this.#t=`media-menu-${e}`,this.#i=`media-menu-button-${e}`,this.#h=new Lr({closeMenu:this.close.bind(this)}),V(_)&&(this.#a=w(_)),this.#g(),this.setAttributes({"data-open":this.#r,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#P.bind(this)}),N(_,{button:this.#o,content:this.#n,expanded:this.#r,hint:T(""),submenu:!!this.#a,disable:this.#w.bind(this),attachMenuButton:this.#b.bind(this),attachMenuItems:this.#E.bind(this),attachObserver:this.#T.bind(this),disableMenuButton:this.#C.bind(this),addSubmenu:this.#V.bind(this),onTransitionEvent:t=>{this.#m.add(t),x(()=>{this.#m.delete(t)})}})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){l(this.#y.bind(this)),this.isSubmenu&&this.#a?.addSubmenu(this)}onDestroy(){this.#o.set(null),this.#n.set(null),this.#u=null,this.#m.clear()}#g(){let e=-1,t=V(ze)?w(ze):null;N(ze,{onDragStart:()=>{t?.onDragStart?.(),window.clearTimeout(e),e=-1,this.#d=!0},onDragEnd:()=>{t?.onDragEnd?.(),e=window.setTimeout(()=>{this.#d=!1,e=-1},300)}})}#y(){let e=this.#S();this.isSubmenu||this.#H(),this.#v(e),e&&(l(()=>{let{height:t}=this.#e.$state,i=this.#n();i&&z(i,"--player-height",t()+"px")}),this.#h.listen(),this.listen("pointerup",this.#$.bind(this)),v(window,"pointerup",this.#k.bind(this)))}#b(e){let t=e.el,i=this.isSubmenu,r=L(this.#P.bind(this));C(t,"tabindex",i?"-1":"0"),C(t,"role",i?"menuitem":"button"),b(t,"id",this.#i),b(t,"aria-haspopup","menu"),b(t,"aria-expanded","false"),b(t,"data-root",!this.isSubmenu),b(t,"data-submenu",this.isSubmenu),l(()=>{b(t,"data-open",this.#r()),b(t,"aria-disabled",r())}),this.#o.set(t),x(()=>{this.#o.set(null)})}#E(e){let t=e.el;t.style.setProperty("display","none"),b(t,"id",this.#t),C(t,"role","menu"),C(t,"tabindex","-1"),b(t,"data-root",!this.isSubmenu),b(t,"data-submenu",this.isSubmenu),this.#n.set(t),x(()=>this.#n.set(null)),l(()=>b(t,"data-open",this.#r())),this.#h.attachMenu(t),this.#v(!1);let r=this.#G.bind(this);this.isSubmenu?this.#a?.onTransitionEvent(r):(e.listen("transitionstart",r),e.listen("transitionend",r),e.listen("animationend",this.#H),e.listen("vds-menu-resize",this.#H))}#T(e){this.#u=e}#v(e){let t=m(this.#n);t&&b(t,"aria-hidden",Be(!e))}#C(e){this.#p.set(e)}#f=!1;#x(e,t){if(this.#f=Jt(t),t?.stopPropagation(),this.#r()===e)return;if(this.#P()){e&&this.#c.hide(t);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let i=this.#o(),r=this.#n();if(i&&(b(i,"aria-controls",e&&this.#t),b(i,"aria-expanded",Be(e))),r&&b(r,"aria-labelledby",e&&this.#i),this.#r.set(e),this.#R(t),te(),this.#f){e?r?.focus():i?.focus();for(let o of[this.el,r])o&&o.setAttribute("data-keyboard","")}else for(let o of[this.el,r])o&&o.removeAttribute("data-keyboard");if(this.dispatch(e?"open":"close",{trigger:t}),e)!this.isSubmenu&&this.#e.activeMenu!==this&&(this.#e.activeMenu?.close(t),this.#e.activeMenu=this),this.#u?.onOpen?.(t);else{if(this.isSubmenu)for(let o of this.#l)o.close(t);else this.#e.activeMenu=null;this.#u?.onClose?.(t)}e&&requestAnimationFrame(this.#M.bind(this))}#M(){this.#O||this.#_||(this.#h.update(),requestAnimationFrame(()=>{this.#f?this.#h.focusActive():this.#h.scroll()}))}#S(){return!this.#P()&&this.#r()}#P(){return this.#s()||this.#p()}#w(e){this.#s.set(e)}#$(e){let t=this.#n();this.#d||t&&Ks(t,e)||e.stopPropagation()}#k(e){let t=this.#n();this.#d||t&&Ks(t,e)||this.close(e)}#L(){let e=this.el?.querySelector('[data-part="close-target"]');return this.el&&e&&oi(this.el,e,t=>t.getAttribute("role")==="menu")?e:null}#R(e){this.isSubmenu||(this.#r()?this.#e.remote.pauseControls(e):this.#e.remote.resumeControls(e))}#V(e){this.#l.add(e),v(e,"open",this.#I),v(e,"close",this.#N),x(this.#A)}#A=this.#q.bind(this);#q(e){this.#l.delete(e)}#_=!1;#I=this.#D.bind(this);#D(e){this.#_=!0;let t=this.#n();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(let i of this.#l)if(i!==e.target)for(let r of[i.el,i.triggerElement])r?.setAttribute("aria-hidden","true");if(t){let i=e.target.el;for(let r of t.children)r.contains(i)?r.setAttribute("data-open",""):r!==i&&r.setAttribute("data-hidden","")}}#N=this.#F.bind(this);#F(e){this.#_=!1;let t=this.#n();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(let i of this.#l)for(let r of[i.el,i.triggerElement])r?.setAttribute("aria-hidden","false");if(t)for(let i of t.children)i.removeAttribute("data-open"),i.removeAttribute("data-hidden")}#H=me(()=>{let e=m(this.#n);if(!e)return;let t=0,i=getComputedStyle(e),r=[...e.children];for(let o of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])t+=parseFloat(i[o])||0;for(let o of r)if(fe(o)&&o.style.display==="contents")r.push(...o.children);else if(o.nodeType===3)t+=parseFloat(getComputedStyle(o).fontSize);else if(fe(o)){if(!nn(o))continue;let n=getComputedStyle(o);t+=o.offsetHeight+(parseFloat(n.marginTop)||0)+(parseFloat(n.marginBottom)||0)}z(e,"--menu-height",t+"px")});#O=!1;#G(e){let t=this.#n();t&&e.propertyName==="height"&&(this.#O=e.type==="transitionstart",b(t,"data-transition",this.#O?"height":null),this.#r()&&this.#M());for(let i of this.#m)i(e)}open(e){m(this.#r)||(this.#c.show(e),te())}close(e){m(this.#r)&&(this.#c.hide(e),te())}};var Rr=class extends p(HTMLElement,_r){static tagName="media-menu"};var Ar=class extends ct{};var Vr=class extends p(HTMLElement,Ar){static tagName="media-menu-item"};var Dr=class extends h{static props={container:null,disabled:!1};#e=null;#t;onSetup(){this.#t=g(),N(Rt,{attach:this.#i.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){}onDestroy(){this.#e?.remove(),this.#e=null}#i(e){this.#s(!1),this.#e=e,Y(()=>{Y(()=>{this.connectScope&&l(this.#r.bind(this))})})}#r(){let{fullscreen:e}=this.#t.$state,{disabled:t}=this.$props;this.#s(t()==="fullscreen"?!e():!t())}#s(e){if(!this.#e)return;let t=this.#o(this.$props.container());if(!t)return;let i=this.#e.parentElement===t;b(this.#e,"data-portal",e),e?i||(this.#e.remove(),t.append(this.#e)):i&&this.#e.parentElement===t&&(this.#e.remove(),this.el?.append(this.#e))}#o(e){return fe(e)?e:e?document.querySelector(e):document.body}},Rt=re();var qr=class extends h{static props={placement:null,offset:0,alignOffset:0};#e;constructor(){super(),new O;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){if(this.#e=w(_),this.#e.attachMenuItems(this),V(Rt)){let t=w(Rt);t&&(N(Rt,null),t.attach(e),x(()=>t.attach(null)))}}onConnect(e){l(this.#t.bind(this))}#t(){if(!this.el)return;let e=this.$props.placement();if(e){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:t,alignOffset:i}=this.$props;return li(this.el,this.#i(),e,{offsetVarName:"media-menu",xOffset:i(),yOffset:t()})}else this.el.removeAttribute("style"),this.el.style.display="none"}#i(){return this.#e.button()}};var Ir=class extends p(HTMLElement,qr){static tagName="media-menu-items"};var Hr=class extends p(HTMLElement,Dr){static tagName="media-menu-portal";static attrs={disabled:{converter(e){return S(e)?e:e!==null}}}};function Or(s,e){return[...s].sort(e?Sa:Ma)}function Ma(s,e){return s.height===e.height?(s.bitrate??0)-(e.bitrate??0):s.height-e.height}function Sa(s,e){return e.height===s.height?(e.bitrate??0)-(s.bitrate??0):e.height-s.height}var Nr=class extends h{static props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{canSetQuality:e,qualities:t}=this.#e.$state;return!e()||t().length<=1}#r=U(()=>{let{sort:e}=this.$props,{qualities:t}=this.#e.$state;return Or(t(),e()==="descending")});constructor(){super(),this.#i=new ee,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=g(),V(_)&&(this.#t=w(_))}onConnect(e){l(this.#s.bind(this)),l(this.#n.bind(this)),l(this.#o.bind(this))}getOptions(){let{autoLabel:e,hideBitrate:t}=this.$props;return[{value:"auto",label:e},...this.#r().map(i=>{let r=i.bitrate&&i.bitrate>=0?`${R(i.bitrate/1e6,2)} Mbps`:null;return{quality:i,label:i.height+"p",value:this.#u(i),bitrate:()=>t()?null:r}})]}#s(){this.#i.value=this.#l()}#o(){let{autoLabel:e}=this.$props,{autoQuality:t,quality:i}=this.#e.$state,r=i()?i().height+"p":"";this.#t?.hint.set(t()?e()+(r?` (${r})`:""):r)}#n(){this.#t?.disable(this.disabled)}#a(e,t){if(this.disabled)return;if(e==="auto"){this.#e.remote.changeQuality(-1,t),this.dispatch("change",{detail:"auto",trigger:t});return}let{qualities:i}=this.#e.$state,r=m(i).findIndex(o=>this.#u(o)===e);if(r>=0){let o=m(i)[r];this.#e.remote.changeQuality(r,t),this.dispatch("change",{detail:o,trigger:t})}}#l(){let{quality:e,autoQuality:t}=this.#e.$state;if(t())return"auto";let i=e();return i?this.#u(i):"auto"}#u(e){return e.height+"_"+e.bitrate}};var Fr=class extends p(HTMLElement,Nr){static tagName="media-quality-radio-group";onConnect(){ye(this,(e,t)=>{let i=t.bitrate,r=e.querySelector('[data-part="bitrate"]');i&&r&&l(()=>{r.textContent=i()||""})})}};var Gr=class extends h{static props={value:""};#e=T(!1);#t={value:this.$props.value,check:this.#n.bind(this),onCheck:null};get checked(){return this.#e()}constructor(){super(),new O}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.#e,"aria-checked":L(this.#e)})}onAttach(e){let t=V(_);C(e,"tabindex",t?"-1":"0"),C(e,"role",t?"menuitemradio":"radio"),l(this.#s.bind(this))}onConnect(e){this.#r(),se(e,this.#o.bind(this)),x(this.#i.bind(this))}#i(){Ce(()=>{w(_t).remove(this.#t)},this.connectScope)}#r(){w(_t).add(this.#t)}#s(){let{value:e}=this.$props,t=e();m(this.#e)&&this.#t.onCheck?.(t)}#o(e){m(this.#e)||(this.#a(!0,e),this.#l(e),this.#t.onCheck?.(m(this.$props.value),e))}#n(e,t){m(this.#e)!==e&&this.#a(e,t)}#a(e,t){this.#e.set(e),this.dispatch("change",{detail:e,trigger:t})}#l(e){this.dispatch("select",{trigger:e})}};var Br=class extends p(HTMLElement,Gr){static tagName="media-radio"};var Qr=class extends h{static props={value:""};#e;get values(){return this.#e.values}get value(){return this.#e.value}set value(e){this.#e.value=e}constructor(){super(),this.#e=new ee,this.#e.onValueChange=this.#i.bind(this)}onSetup(){l(this.#t.bind(this))}#t(){this.#e.value=this.$props.value()}#i(e,t){let i=this.createEvent("change",{detail:e,trigger:t});this.dispatch(i)}};var Kr=class extends p(HTMLElement,Qr){static tagName="media-radio-group"};var Ca=[.25,.5,.75,1,1.25,1.5,1.75,2],Wr=class extends h{static props={normalLabel:"Normal",rates:Ca};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{rates:e}=this.$props,{canSetPlaybackRate:t}=this.#e.$state;return!t()||e().length===0}constructor(){super(),this.#i=new ee,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=g(),V(_)&&(this.#t=w(_))}onConnect(e){l(this.#r.bind(this)),l(this.#s.bind(this)),l(this.#o.bind(this))}getOptions(){let{rates:e,normalLabel:t}=this.$props;return e().map(i=>({label:i===1?t:i+"\xD7",value:i.toString()}))}#r(){this.#i.value=this.#n()}#s(){let{normalLabel:e}=this.$props,{playbackRate:t}=this.#e.$state,i=t();this.#t?.hint.set(i===1?e():i+"\xD7")}#o(){this.#t?.disable(this.disabled)}#n(){let{playbackRate:e}=this.#e.$state;return e().toString()}#a(e,t){if(this.disabled)return;let i=+e;this.#e.remote.changePlaybackRate(i,t),this.dispatch("change",{detail:i,trigger:t})}};var Ur=class extends p(HTMLElement,Wr){static tagName="media-speed-radio-group";onConnect(){ye(this)}};var zr=class extends h{static props={src:null,alt:null,crossOrigin:null};static state=new X({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#e;onSetup(){this.#e=g(),this.#a(),this.#l(),this.#u(),this.#r()}onAttach(e){e.style.setProperty("pointer-events","none"),l(this.#o.bind(this)),l(this.#a.bind(this)),l(this.#l.bind(this)),l(this.#u.bind(this)),l(this.#r.bind(this));let{started:t}=this.#e.$state;this.setAttributes({"data-visible":()=>!t()&&!this.$state.hidden(),"data-loading":this.#s.bind(this),"data-error":this.#t.bind(this),"data-hidden":this.$state.hidden})}onConnect(e){l(this.#i.bind(this)),l(this.#c.bind(this))}#t(){let{error:e}=this.$state;return!he(e())}#i(){let{canLoadPoster:e,poster:t}=this.#e.$state;!e()&&t()&&Te(t(),"preconnect")}#r(){let{src:e}=this.$props,{poster:t,nativeControls:i}=this.#e.$state;this.el&&b(this.el,"display",i()?"none":null),this.$state.hidden.set(this.#t()||!(e()||t())||i())}#s(){let{loading:e,hidden:t}=this.$state;return!t()&&e()}#o(){let e=this.$state.img();e&&(v(e,"load",this.#h.bind(this)),v(e,"error",this.#d.bind(this)),e.complete&&this.#h())}#n="";#a(){let{poster:e}=this.#e.$props,{canLoadPoster:t,providedPoster:i,inferredPoster:r}=this.#e.$state,o=this.$props.src()||"",n=o||e()||r();this.#n===i()&&i.set(o),this.$state.src.set(t()&&n.length?n:null),this.#n=o}#l(){let{src:e}=this.$props,{alt:t}=this.$state,{poster:i}=this.#e.$state;t.set(e()||i()?this.$props.alt():null)}#u(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i,poster:r}=this.#e.$state,o=e()!==null?e():i();t.set(/ytimg\.com|vimeo/.test(r()||"")?null:o===!0?"anonymous":o)}#c(){let{loading:e,error:t}=this.$state,{canLoadPoster:i,poster:r}=this.#e.$state;e.set(i()&&!!r()),t.set(null)}#h(){let{loading:e,error:t}=this.$state;e.set(!1),t.set(null)}#d(e){let{loading:t,error:i}=this.$state;t.set(!1),i.set(e)}};var Yr=class extends p(HTMLElement,zr){static tagName="media-poster";static attrs={crossOrigin:"crossorigin"};#e=document.createElement("img");onSetup(){this.$state.img.set(this.#e)}onConnect(){let{src:e,alt:t,crossOrigin:i}=this.$state;l(()=>{let{loading:r,hidden:o}=this.$state;this.#e.style.display=r()||o()?"none":""}),l(()=>{b(this.#e,"alt",t()),b(this.#e,"crossorigin",i()),b(this.#e,"src",e())}),this.#e.parentNode!==this&&this.prepend(this.#e)}};var le=new X({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return An(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return An(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function An(s,e,t){let i=e-s,r=t-s;return i>0?r/i:0}var Ee=re(()=>({}));var mt=class extends F{#e;#t;constructor(e){super(),this.#e=e}onConnect(e){this.#t=new IntersectionObserver(t=>{this.#e.callback?.(t,this.#t)},this.#e),this.#t.observe(e),x(this.#i.bind(this))}#i(){this.#t?.disconnect(),this.#t=void 0}};function Vn(s,e,t,i){return Ct(s,R(t,on(i)),e)}function Dn(s,e,t,i){let r=Ct(0,t,1),o=e-s,n=o*r,d=n/i,a=i*Math.round(d);return s+a}var no={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1},jr=class extends F{#e;#t;#i;constructor(e,t){super(),this.#e=e,this.#t=t}onSetup(){V(ze)&&(this.#i=w(ze))}onConnect(){l(this.#u.bind(this)),l(this.#c.bind(this)),this.#e.swipeGesture&&l(this.#r.bind(this))}#r(){let{pointer:e}=this.#t.$state;if(e()!=="coarse"||!this.#e.swipeGesture()){this.#s=null;return}this.#s=this.#t.player.el?.querySelector("media-provider,[data-media-provider]"),this.#s&&(v(this.#s,"touchstart",this.#a.bind(this),{passive:!0}),v(this.#s,"touchmove",this.#l.bind(this),{passive:!1}))}#s=null;#o=null;#n=null;#a(e){this.#o=e.touches[0]}#l(e){if(he(this.#o)||st(e))return;let t=e.touches[0],i=t.clientX-this.#o.clientX,r=t.clientY-this.#o.clientY,o=this.$state.dragging();!o&&Math.abs(r)>5||o||(e.preventDefault(),Math.abs(i)>20&&(this.#o=t,this.#n=this.$state.value(),this.#T(this.#n,e)))}#u(){let{hidden:e}=this.$props;this.listen("focus",this.#h.bind(this)),this.listen("keydown",this.#x.bind(this)),this.listen("keyup",this.#M.bind(this)),!(e()||this.#e.isDisabled())&&(this.listen("pointerenter",this.#g.bind(this)),this.listen("pointermove",this.#y.bind(this)),this.listen("pointerleave",this.#b.bind(this)),this.listen("pointerdown",this.#E.bind(this)))}#c(){this.#e.isDisabled()||!this.$state.dragging()||(v(document,"pointerup",this.#w.bind(this),{capture:!0}),v(document,"pointermove",this.#k.bind(this)),v(document,"touchmove",this.#$.bind(this),{passive:!1}))}#h(){this.#p(this.$state.value())}#d(e,t){let{value:i,min:r,max:o,dragging:n}=this.$state,d=Math.max(r(),Math.min(e,o()));i.set(d);let a=this.createEvent("value-change",{detail:d,trigger:t});if(this.dispatch(a),this.#e.onValueChange?.(a),n()){let u=this.createEvent("drag-value-change",{detail:d,trigger:t});this.dispatch(u),this.#e.onDragValueChange?.(u)}}#p(e,t){let{pointerValue:i,dragging:r}=this.$state;i.set(e),this.dispatch("pointer-value-change",{detail:e,trigger:t}),r()&&this.#d(e,t)}#m(e){let t,i=this.el.getBoundingClientRect(),{min:r,max:o}=this.$state;if(this.$props.orientation()==="vertical"){let{bottom:n,height:d}=i;t=(n-e.clientY)/d}else if(this.#o&&ie(this.#n)){let{width:n}=this.#s.getBoundingClientRect(),d=(e.clientX-this.#o.clientX)/n,a=o()-r(),u=a*Math.abs(d);t=(d<0?this.#n-u:this.#n+u)/a}else{let{left:n,width:d}=i;t=(e.clientX-n)/d}return Math.max(r(),Math.min(o(),this.#e.roundValue(Dn(r(),o(),t,this.#e.getStep()))))}#g(e){this.$state.pointing.set(!0)}#y(e){let{dragging:t}=this.$state;t()||this.#p(this.#m(e),e)}#b(e){this.$state.pointing.set(!1)}#E(e){if(e.button!==0)return;let t=this.#m(e);this.#T(t,e),this.#p(t,e)}#T(e,t){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.#t.remote.pauseControls(t);let r=this.createEvent("drag-start",{detail:e,trigger:t});this.dispatch(r),this.#e.onDragStart?.(r),this.#i?.onDragStart?.()}#v(e,t){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.#t.remote.resumeControls(t);let r=this.createEvent("drag-end",{detail:e,trigger:t});this.dispatch(r),this.#e.onDragEnd?.(r),this.#o=null,this.#n=null,this.#i?.onDragEnd?.()}#C;#f=!1;#x(e){if(!Object.keys(no).includes(e.key))return;let{key:i}=e,r=this.#S(e);if(!he(r)){this.#p(r,e),this.#d(r,e);return}let o=this.#P(e);this.#f||(this.#f=i===this.#C,!this.$state.dragging()&&this.#f&&this.#T(o,e)),this.#p(o,e),this.#C=i}#M(e){if(!Object.keys(no).includes(e.key)||!he(this.#S(e)))return;let i=this.#f?this.$state.pointerValue():this.#P(e);this.#d(i,e),this.#v(i,e),this.#C="",this.#f=!1}#S(e){let t=e.key,{min:i,max:r}=this.$state;return t==="Home"||t==="PageUp"?i():t==="End"||t==="PageDown"?r():!e.metaKey&&/^[0-9]$/.test(t)?(r()-i())/10*Number(t):null}#P(e){let{key:t,shiftKey:i}=e;e.preventDefault(),e.stopPropagation();let{shiftKeyMultiplier:r}=this.$props,{min:o,max:n,value:d,pointerValue:a}=this.$state,u=this.#e.getStep(),c=this.#e.getKeyStep(),f=i?c*r():c,y=Number(no[t]),E=f*y,k=this.#f?a():this.#e.getValue?.()??d(),q=(k+E)/u;return Math.max(o(),Math.min(n(),Number((u*q).toFixed(3))))}#w(e){if(e.button!==0)return;e.preventDefault(),e.stopImmediatePropagation();let t=this.#m(e);this.#p(t,e),this.#v(t,e)}#$(e){e.preventDefault()}#k=ae(e=>{this.#p(this.#m(e),e)},20,{leading:!0})};var Q=class extends F{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#e;#t;#i=T(!0);#r=T(!0);constructor(e){super(),this.#t=e}onSetup(){this.#e=g();let e=new O;e.attach(this),this.$state.focused=e.focused.bind(e),V(Ee)||N(Ee,{default:"value"}),N(pt,{orientation:this.$props.orientation,disabled:this.#t.isDisabled,preview:T(null)}),l(this.#n.bind(this)),l(this.#a.bind(this)),l(this.#l.bind(this)),this.#c(),new jr(this.#t,this.#e).attach(this),new mt({callback:this.#s.bind(this)}).attach(this)}onAttach(e){C(e,"role","slider"),C(e,"tabindex","0"),C(e,"autocomplete","off"),l(this.#h.bind(this))}onConnect(e){x(si(e,this.#i.set)),l(this.#o.bind(this))}#s(e){this.#r.set(e[0].isIntersecting)}#o(){let{hidden:e}=this.$props;this.$state.hidden.set(e()||!this.#i()||!this.#r.bind(this))}#n(){let{dragging:e,value:t,min:i,max:r}=this.$state;m(e)||t.set(Vn(i(),r(),t(),this.#t.getStep()))}#a(){this.$state.step.set(this.#t.getStep())}#l(){if(!this.#t.isDisabled())return;let{dragging:e,pointing:t}=this.$state;e.set(!1),t.set(!1)}#u(){return Be(this.#t.isDisabled())}#c(){let{orientation:e}=this.$props,{dragging:t,active:i,pointing:r}=this.$state;this.setAttributes({"data-dragging":t,"data-pointing":r,"data-active":i,"aria-disabled":this.#u.bind(this),"aria-valuemin":this.#t.aria.valueMin??this.$state.min,"aria-valuemax":this.#t.aria.valueMax??this.$state.max,"aria-valuenow":this.#t.aria.valueNow,"aria-valuetext":this.#t.aria.valueText,"aria-orientation":e})}#h(){let{fillPercent:e,pointerPercent:t}=this.$state;this.#d(R(e(),3),R(t(),3))}#d=me((e,t)=>{this.el?.style.setProperty("--slider-fill",e+"%"),this.el?.style.setProperty("--slider-pointer",t+"%")})};var Xr=class extends h{static props={...Q.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300};static state=le;#e;onSetup(){this.#e=g(),N(Ee,{default:"percent",percent:(e,t)=>R(this.$state.value(),t)+"%"}),new Q({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#o.bind(this),aria:{valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#l.bind(this),onValueChange:this.#a.bind(this)}).attach(this),l(this.#r.bind(this)),l(this.#s.bind(this))}onAttach(e){e.setAttribute("data-media-audio-gain-slider",""),C(e,"aria-label","Audio Boost");let{canSetAudioGain:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":L(()=>!t())})}#t(){let{value:e}=this.$state;return Math.round(e())}#i(){let{value:e}=this.$state;return e()+"%"}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}#s(){let{audioGain:e}=this.#e.$state,t=((e()??1)-1)*100;this.$state.value.set(t),this.dispatch("value-change",{detail:t})}#o(){let{disabled:e}=this.$props,{canSetAudioGain:t}=this.#e.$state;return e()||!t()}#n(e){if(!e.trigger)return;let t=R(1+e.detail/100,2);this.#e.remote.changeAudioGain(t,e)}#a(e){this.#n(e)}#l(e){this.#n(e)}};var Jr=class extends p(HTMLElement,Xr){static tagName="media-audio-gain-slider"};var Zr=class extends h{static props={...Q.props,step:1,keyStep:1,shiftKeyMultiplier:1};static state=le;#e;#t=U(()=>{let{qualities:e}=this.#e.$state;return Or(e())});onSetup(){this.#e=g(),new Q({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#n.bind(this),aria:{valueNow:this.#i.bind(this),valueText:this.#r.bind(this)},onDragValueChange:this.#c.bind(this),onValueChange:this.#u.bind(this)}).attach(this),l(this.#s.bind(this)),l(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-quality-slider",""),C(e,"aria-label","Video Quality");let{qualities:t,canSetQuality:i}=this.#e.$state,r=U(()=>i()&&t().length>0);this.setAttributes({"data-supported":r,"aria-hidden":L(()=>!r())})}#i(){let{value:e}=this.$state;return e()}#r(){let{quality:e}=this.#e.$state;if(!e())return"";let{height:t,bitrate:i}=e(),r=i&&i>0?`${(i/1e6).toFixed(2)} Mbps`:null;return t?`${t}p${r?` (${r})`:""}`:"Auto"}#s(){let e=this.#t();this.$state.max.set(Math.max(0,e.length-1))}#o(){let{quality:e}=this.#e.$state,t=this.#t(),i=Math.max(0,t.indexOf(e()));this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#n(){let{disabled:e}=this.$props,{canSetQuality:t,qualities:i}=this.#e.$state;return e()||i().length<=1||!t()}#a=ae(this.#l.bind(this),25);#l(e){if(!e.trigger)return;let{qualities:t}=this.#e,i=m(this.#t)[e.detail];this.#e.remote.changeQuality(t.indexOf(i),e)}#u(e){this.#a(e)}#c(e){this.#a(e)}};var es=class extends p(HTMLElement,Zr){static tagName="media-quality-slider"};var ft=class extends h{static props={...Q.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=le;#e;#t;#i=T(null);constructor(){super();let{noSwipeGesture:e}=this.$props;new Q({swipeGesture:()=>!e(),getValue:this.#g.bind(this),getStep:this.#y.bind(this),getKeyStep:this.#b.bind(this),roundValue:this.#E,isDisabled:this.#T.bind(this),aria:{valueNow:this.#v.bind(this),valueText:this.#C.bind(this)},onDragStart:this.#h.bind(this),onDragValueChange:this.#d.bind(this),onDragEnd:this.#p.bind(this),onValueChange:this.#m.bind(this)})}onSetup(){this.#e=g(),N(Ee,{default:"time",value:this.#M.bind(this),time:this.#S.bind(this)}),this.setAttributes({"data-chapters":this.#s.bind(this)}),this.setStyles({"--slider-progress":this.#r.bind(this)}),l(this.#n.bind(this)),l(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-time-slider",""),C(e,"aria-label","Seek")}onConnect(e){l(this.#a.bind(this)),rt(this.#e.textTracks,"chapters",this.#i.set)}#r(){let{bufferedEnd:e,duration:t}=this.#e.$state;return R(Math.min(e()/Math.max(t(),1),1)*100,3)+"%"}#s(){let{duration:e}=this.#e.$state;return this.#i()?.cues.length&&Number.isFinite(e())&&e()>0}#o(){this.#t=ae(this.#l.bind(this),this.$props.seekingRequestThrottle())}#n(){if(this.$state.hidden())return;let{value:e,dragging:t}=this.$state,i=this.#g();m(t)||(e.set(i),this.dispatch("value-change",{detail:i}))}#a(){let e=this.#e.player.el,{preview:t}=w(pt);e&&t()&&b(e,"data-preview",this.$state.active())}#l(e,t){this.#e.remote.seeking(e,t)}#u(e,t,i){this.#t.cancel();let{live:r}=this.#e.$state;if(r()&&t>=99){this.#e.remote.seekToLiveEdge(i);return}this.#e.remote.seek(e,i)}#c=!1;#h(e){let{pauseWhileDragging:t}=this.$props;if(t()){let{paused:i}=this.#e.$state;this.#c=!i(),this.#e.remote.pause(e)}}#d(e){this.#t(this.#f(e.detail),e)}#p(e){let{seeking:t}=this.#e.$state;m(t)||this.#l(this.#f(e.detail),e);let i=e.detail;this.#u(this.#f(i),i,e);let{pauseWhileDragging:r}=this.$props;r()&&this.#c&&(this.#e.remote.play(e),this.#c=!1)}#m(e){let{dragging:t}=this.$state;t()||!e.trigger||this.#p(e)}#g(){let{currentTime:e}=this.#e.$state;return this.#x(e())}#y(){let e=this.$props.step()/this.#e.$state.duration()*100;return Number.isFinite(e)?e:1}#b(){let e=this.$props.keyStep()/this.#e.$state.duration()*100;return Number.isFinite(e)?e:1}#E(e){return R(e,3)}#T(){let{disabled:e}=this.$props,{canSeek:t}=this.#e.$state;return e()||!t()}#v(){let{value:e}=this.$state;return Math.round(e())}#C(){let e=this.#f(this.$state.value()),{duration:t}=this.#e.$state;return Number.isFinite(e)?`${Ue(e)} out of ${Ue(t())}`:"live"}#f(e){let{duration:t}=this.#e.$state;return R(e/100*t(),5)}#x(e){let{liveEdge:t,duration:i}=this.#e.$state,r=Math.max(0,Math.min(1,t()?1:Math.min(e,i())/i()));return Number.isNaN(r)?0:Number.isFinite(r)?r*100:100}#M(e){let t=this.#f(e),{live:i,duration:r}=this.#e.$state;return Number.isFinite(t)?(i()?t-r():t).toFixed(0):"LIVE"}#S(e,t){let i=this.#f(e),{live:r,duration:o}=this.#e.$state,n=r()?i-o():i;return Number.isFinite(i)?`${n<0?"-":""}${qe(Math.abs(n),t)}`:"LIVE"}};var ts=class extends h{static props={disabled:!1};#e;#t;#i;#r=null;#s=[];#o=T(null);#n=T([]);#a=T(-1);#l=T(-1);#u=0;get cues(){return this.#n()}get activeCue(){return this.#n()[this.#a()]||null}get activePointerCue(){return this.#n()[this.#l()]||null}onSetup(){this.#e=g(),this.#t=pe(ft.state)}onAttach(e){rt(this.#e.textTracks,"chapters",this.#c.bind(this)),l(this.#w.bind(this))}onConnect(){x(()=>this.#h.bind(this))}onDestroy(){this.#c(null)}setRefs(e){if(this.#s=e,this.#i?.dispose(),this.#s.length===1){let t=this.#s[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.#s.length>0&&Ce(()=>this.#d(),this.#i=_o())}#c(e){m(this.#o)!==e&&(this.#h(),this.#o.set(e))}#h(){this.#s=[],this.#n.set([]),this.#a.set(-1),this.#l.set(-1),this.#u=0,this.#i?.dispose()}#d(){this.#s.length&&l(this.#p.bind(this))}#p(){let{hidden:e}=this.#t;e()||(l(this.#m.bind(this)),l(this.#g.bind(this)),l(this.#y.bind(this)),l(this.#v.bind(this)))}#m(){let e=this.#n();if(!e.length)return;let t,{clipStartTime:i,clipEndTime:r}=this.#e.$state,o=i(),n=r()||e[e.length-1].endTime,d=n-o,a=100;for(let u=0;u<e.length;u++)if(t=e[u],this.#s[u]){let c=u===e.length-1?a:R((t.endTime-Math.max(o,t.startTime))/d*100,3);this.#s[u].style.width=c+"%",a-=c}}#g(){let{liveEdge:e,clipStartTime:t,duration:i}=this.#e.$state,{fillPercent:r,value:o}=this.#t,n=this.#n(),d=e(),a=m(this.#a),u=n[a],c=d?this.#n.length-1:this.#T(u&&u.startTime/i()*100<=m(o)?a:0,r());d||!u?this.#b(0,n.length,100):c>a?this.#b(a,c,100):c<a&&this.#b(c+1,a+1,0);let f=d?100:this.#S(n[c],r(),t(),this.#M(n));this.#E(this.#s[c],f),this.#a.set(c)}#y(){let{pointing:e,pointerPercent:t}=this.#t;if(!e()){this.#l.set(-1);return}let i=this.#T(0,t());this.#l.set(i)}#b(e,t,i){for(let r=e;r<t;r++)this.#E(this.#s[r],i)}#E(e,t){e&&(e.style.setProperty("--chapter-fill",t+"%"),b(e,"data-active",t>0&&t<100),b(e,"data-ended",t===100))}#T(e,t){let i=0,r=this.#n();if(t===0)return 0;if(t===100)return r.length-1;let{clipStartTime:o}=this.#e.$state,n=o(),d=this.#M(r);for(let a=e;a<r.length;a++)if(i=this.#S(r[a],t,n,d),i>=0&&i<100)return a;return 0}#v(){this.#C(this.#f())}#C=me(e=>{let t,i=this.#n(),{clipStartTime:r}=this.#e.$state,o=r(),n=this.#M(i);for(let d=this.#u;d<this.#s.length;d++)if(t=this.#S(i[d],e,o,n),this.#s[d]?.style.setProperty("--chapter-progress",t+"%"),t<100){this.#u=d;break}});#f=U(this.#x.bind(this));#x(){let{bufferedEnd:e,duration:t}=this.#e.$state;return R(Math.min(e()/Math.max(t(),1),1),3)*100}#M(e){let{clipEndTime:t}=this.#e.$state,i=t();return i>0?i:e[e.length-1]?.endTime||0}#S(e,t,i,r){if(this.#n().length===0)return 0;let n=r-i,d=Math.max(0,e.startTime-i),a=Math.min(r,e.endTime)-i,u=d/n,c=u*100,f=Math.min(1,u+(a-d)/n)*100;return Math.max(0,R(t>=f?100:(t-c)/(f-c)*100,3))}#P(e){let t=[],{clipStartTime:i,clipEndTime:r,duration:o}=this.#e.$state,n=i(),d=r()||1/0;e=e.filter(c=>c.startTime<=d&&c.endTime>=n);let a=e[0];a&&a.startTime>n&&t.push(new window.VTTCue(n,a.startTime,""));for(let c=0;c<e.length-1;c++){let f=e[c],y=e[c+1];if(t.push(f),y){let E=y.startTime-f.endTime;E>0&&t.push(new window.VTTCue(f.endTime,f.endTime+E,""))}}let u=e[e.length-1];if(u){t.push(u);let c=o();c>=0&&c-u.endTime>1&&t.push(new window.VTTCue(u.endTime,o(),""))}return t}#w(){let{source:e}=this.#e.$state;e(),this.#$()}#$(){if(!this.scope)return;let{disabled:e}=this.$props;if(e()){this.#n.set([]),this.#a.set(0),this.#u=0;return}let t=this.#o();if(t){let i=this.#L.bind(this);i(),x(v(t,"add-cue",i)),x(v(t,"remove-cue",i)),l(this.#k.bind(this))}return this.#r=this.#A(),this.#r&&l(this.#R.bind(this)),()=>{this.#r&&(this.#r.textContent="",this.#r=null)}}#k(){this.#e.$state.duration(),this.#L()}#L=ut(()=>{let e=m(this.#o);!this.scope||!e||!e.cues.length||(this.#n.set(this.#P(e.cues)),this.#a.set(0),this.#u=0)},150,!0);#R(){let e=this.activePointerCue||this.activeCue;this.#r&&(this.#r.textContent=e?.text||"")}#V(){let e=this.el;for(;e&&e.getAttribute("role")!=="slider";)e=e.parentElement;return e}#A(){let e=this.#V();return e?e.querySelector('[data-part="chapter-title"]'):null}};var is=class extends p(HTMLElement,ts){static tagName="media-slider-chapters";#e=null;onConnect(){Y(()=>{if(!this.connectScope)return;let e=this.querySelector("template");e&&(this.#e=e,l(this.#t.bind(this)))})}#t(){if(!this.#e)return;let e=ot(this.#e,this.cues.length||1);this.setRefs(e)}};var ve=class extends h{static props={...Q.props,min:0,max:100,value:0};static state=le;constructor(){super(),new Q({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#e.bind(this),valueText:this.#t.bind(this)}})}onSetup(){l(this.#i.bind(this)),l(this.#r.bind(this))}#e(){let{value:e}=this.$state;return Math.round(e())}#t(){let{value:e,max:t}=this.$state;return R(e()/t()*100,2)+"%"}#i(){let{value:e}=this.$props;this.$state.value.set(e())}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}};var rs=class extends p(HTMLElement,ve){static tagName="media-slider"};var ss=class extends h{static props={offset:0,noClamp:!1};#e;onSetup(){this.#e=w(pt);let{active:e}=pe(ve.state);this.setAttributes({"data-visible":e})}onAttach(e){Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){let{preview:t}=this.#e;t.set(e),x(()=>t.set(null)),l(this.#t.bind(this));let i=new ResizeObserver(this.#t.bind(this));i.observe(e),x(()=>i.disconnect())}#t=me(()=>{let{disabled:e,orientation:t}=this.#e;if(e())return;let i=this.el,{offset:r,noClamp:o}=this.$props;i&&Pa(i,{clamp:!o(),offset:r(),orientation:t()})})};function Pa(s,{clamp:e,offset:t,orientation:i}){let r=getComputedStyle(s),o=parseFloat(r.width),n=parseFloat(r.height),d={top:null,right:null,bottom:null,left:null};if(d[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${t}px))`,i==="horizontal"){let a=o/2;if(!e)d.left=`calc(var(--slider-pointer) - ${a}px)`;else{let u=`max(0px, calc(var(--slider-pointer) - ${a}px))`,c=`calc(100% - ${o}px)`;d.left=`min(${u}, ${c})`}}else{let a=n/2;if(!e)d.bottom=`calc(var(--slider-pointer) - ${a}px)`;else{let u=`max(${a}px, calc(var(--slider-pointer) - ${a}px))`,c=`calc(100% - ${n}px)`;d.bottom=`min(${u}, ${c})`}}Object.assign(s.style,d)}var os=class extends p(HTMLElement,ss){static tagName="media-slider-preview"};var ao=class extends h{},ns=class extends p(HTMLElement,ao){static tagName="media-slider-steps";#e=null;onConnect(e){Y(()=>{this.connectScope&&(this.#e=e.querySelector("template"),this.#e&&l(this.#t.bind(this)))})}#t(){if(!this.#e)return;let{min:e,max:t,step:i}=pe(le),r=(t()-e())/i();ot(this.#e,Math.floor(r)+1)}};var Pe=new Map,as=new Map,ka=void 0,ls=class s{#e;#t;#i;$images=T([]);static create(e,t){let i=g();return new s(e,t,i)}constructor(e,t,i){this.#t=e,this.#i=t,this.#e=i,l(this.#r.bind(this))}#r(){let{canLoad:e}=this.#e.$state;if(!e())return;let t=this.#t();if(t){if(S(t)&&Pe.has(t)){let i=Pe.get(t);if(Pe.delete(t),Pe.set(t,i),Pe.size>99){let r=Pe.keys().next().value;Pe.delete(r)}this.$images.set(Pe.get(t))}else if(S(t)){let i=this.#i(),r=t+"::"+i;if(!as.has(r)){let o=new Promise(async(n,d)=>{try{let a=await fetch(t,{credentials:it(i)});if(a.headers.get("content-type")==="application/json"){let c=await a.json();if(K(c))if(c[0]&&"text"in c[0])n(this.#n(c));else{for(let f=0;f<c.length;f++){let y=c[f];xe(Ao(y),!1),xe("url"in y&&S(y.url),!1),xe("startTime"in y&&ie(y.startTime),!1)}n(c)}else n(this.#o(c));return}import("https://cdn.jsdelivr.net/npm/media-captions@next/dist/prod.js").then(async({parseResponse:c})=>{try{let{cues:f}=await c(a);n(this.#n(f))}catch(f){d(f)}})}catch(a){d(a)}}).then(n=>(Pe.set(r,n),n)).catch(n=>{this.#c(t,n)}).finally(()=>{S(r)&&as.delete(r)});as.set(r,o)}as.get(r)?.then(o=>{this.$images.set(o||[])})}else if(K(t))try{this.$images.set(this.#s(t))}catch(i){this.#c(t,i)}else try{this.$images.set(this.#o(t))}catch(i){this.#c(t,i)}return()=>{this.$images.set([])}}}#s(e){let t=this.#a();return e.map((i,r)=>(xe(i.url&&S(i.url),!1),xe("startTime"in i&&ie(i.startTime),!1),{...i,url:S(i.url)?this.#l(i.url,t):i.url}))}#o(e){xe(S(e.url),!1),xe(K(e.tiles)&&e.tiles?.length,!1);let t=new URL(e.url),i=[],r="tile_width"in e?e.tile_width:e.tileWidth,o="tile_height"in e?e.tile_height:e.tileHeight;for(let n of e.tiles)i.push({url:t,startTime:"start"in n?n.start:n.startTime,width:r,height:o,coords:{x:n.x,y:n.y}});return i}#n(e){for(let r=0;r<e.length;r++){let o=e[r];xe("startTime"in o&&ie(o.startTime),!1),xe("text"in o&&S(o.text),!1)}let t=[],i=this.#a();for(let r of e){let[o,n]=r.text.split("#"),d=this.#u(n);t.push({url:this.#l(o,i),startTime:r.startTime,endTime:r.endTime,width:d?.w,height:d?.h,coords:d&&ie(d.x)&&ie(d.y)?{x:d.x,y:d.y}:void 0})}return t}#a(){let e=m(this.#t);return!S(e)||!/^https?:/.test(e)?location.href:e}#l(e,t){return/^https?:/.test(e)?new URL(e):new URL(e,t)}#u(e){if(!e)return{};let[t,i]=e.split("="),r=i?.split(","),o={};if(!t||!r)return null;for(let n=0;n<t.length;n++){let d=+r[n];isNaN(d)||(o[t[n]]=d)}return o}#c(e,t){}};var ds=class extends h{static props={src:null,time:0,crossOrigin:null};static state=new X({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#e;#t=[];onSetup(){this.media=g(),this.#e=ls.create(this.$props.src,this.$state.crossOrigin),this.#r(),this.setAttributes({"data-loading":this.#a.bind(this),"data-error":this.#l.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":L(this.$state.hidden)})}onConnect(e){l(this.#i.bind(this)),l(this.#u.bind(this)),l(this.#r.bind(this)),l(this.#s.bind(this)),l(this.#c.bind(this)),l(this.#h.bind(this))}#i(){let e=this.$state.img();e&&(v(e,"load",this.#o.bind(this)),v(e,"error",this.#n.bind(this)))}#r(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i}=this.media.$state,r=e()!==null?e():i();t.set(r===!0?"anonymous":r)}#s(){let{src:e,loading:t,error:i}=this.$state;return e()&&(t.set(!0),i.set(null)),()=>{this.#p(),t.set(!1),i.set(null)}}#o(){let{loading:e,error:t}=this.$state;this.#h(),e.set(!1),t.set(null)}#n(e){let{loading:t,error:i}=this.$state;t.set(!1),i.set(e)}#a(){let{loading:e,hidden:t}=this.$state;return!t()&&e()}#l(){let{error:e}=this.$state;return!he(e())}#u(){let{hidden:e}=this.$state,{duration:t}=this.media.$state,i=this.#e.$images();e.set(this.#l()||!Number.isFinite(t())||i.length===0)}getTime(){return this.$props.time()}#c(){let e=this.#e.$images();if(!e.length)return;let t=this.getTime(),{src:i,activeThumbnail:r}=this.$state,o=-1,n=null;for(let d=e.length-1;d>=0;d--){let a=e[d];if(t>=a.startTime&&(!a.endTime||t<a.endTime)){o=d;break}}e[o]&&(n=e[o]),r.set(n),i.set(n?.url.href||"")}#h(){if(!this.scope||this.$state.hidden())return;let e=this.el,t=this.$state.img(),i=this.$state.activeThumbnail();if(!t||!i||!e)return;let r=i.width??t.naturalWidth,o=i?.height??t.naturalHeight,{maxWidth:n,maxHeight:d,minWidth:a,minHeight:u,width:c,height:f}=getComputedStyle(this.el);a==="100%"&&(a=parseFloat(c)+""),u==="100%"&&(u=parseFloat(f)+"");let y=Math.max(parseInt(a)/r,parseInt(u)/o),E=Math.min(Math.max(parseInt(a),parseInt(n))/r,Math.max(parseInt(u),parseInt(d))/o),k=!isNaN(E)&&E<1?E:y>1?y:1;this.#d(e,"--thumbnail-width",`${r*k}px`),this.#d(e,"--thumbnail-height",`${o*k}px`),this.#d(t,"width",`${t.naturalWidth*k}px`),this.#d(t,"height",`${t.naturalHeight*k}px`),this.#d(t,"transform",i.coords?`translate(-${i.coords.x*k}px, -${i.coords.y*k}px)`:""),this.#d(t,"max-width","none")}#d(e,t,i){e.style.setProperty(t,i),this.#t.push(()=>e.style.removeProperty(t))}#p(){for(let e of this.#t)e();this.#t=[]}};var wa=ni('<img loading="eager" decoding="async" aria-hidden="true">'),gt=class extends p(HTMLElement,ds){static tagName="media-thumbnail";static attrs={crossOrigin:"crossorigin"};#e;#t=this.#i();onSetup(){this.#e=g(),this.$state.img.set(this.#t)}onConnect(){let{src:e,crossOrigin:t}=this.$state;this.#t.parentNode!==this&&this.prepend(this.#t),l(()=>{b(this.#t,"src",e()),b(this.#t,"crossorigin",t())})}#i(){return ai(wa)}};var us=class extends gt{static tagName="media-slider-thumbnail";#e;#t;onSetup(){super.onSetup(),this.#e=g(),this.#t=pe(ve.state)}onConnect(){super.onConnect(),l(this.#i.bind(this))}#i(){let{duration:e,clipStartTime:t}=this.#e.$state;this.time=t()+this.#t.pointerRate()*e()}};var cs=class extends h{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#e;#t;#i;onSetup(){this.#i=pe(ve.state),this.#e=w(Ee),this.#t=U(this.getValueText.bind(this))}getValueText(){let{type:e,format:t,decimalPlaces:i,padHours:r,padMinutes:o,showHours:n,showMs:d}=this.$props,{value:a,pointerValue:u,min:c,max:f}=this.#i,y=t?.()??this.#e.default,E=e()==="current"?a():u();if(y==="percent"){let k=f()-c(),q=E/k*100;return(this.#e.percent??R)(q,i())+"%"}else return y==="time"?(this.#e.time??qe)(E,{padHrs:r(),padMins:o(),showHrs:n(),showMs:d()}):(this.#e.value?.(E)??E.toFixed(2))+""}};var hs=class extends p(HTMLElement,cs){static tagName="media-slider-value";static attrs={padMinutes:{converter:Us}};onConnect(){l(()=>{this.textContent=this.getValueText()})}};var ps=class extends h{static props={src:null,crossOrigin:null};static state=new X({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});#e;#t;get video(){return this.$state.video()}onSetup(){this.#e=g(),this.#t=pe(ve.state),this.#s(),this.setAttributes({"data-loading":this.#o.bind(this),"data-hidden":this.$state.hidden,"data-error":this.#n.bind(this),"aria-hidden":L(this.$state.hidden)})}onAttach(e){l(this.#i.bind(this)),l(this.#r.bind(this)),l(this.#s.bind(this)),l(this.#a.bind(this)),l(this.#l.bind(this)),l(this.#h.bind(this))}#i(){let e=this.$state.video();e&&(e.readyState>=2&&this.#u(),v(e,"canplay",this.#u.bind(this)),v(e,"error",this.#c.bind(this)))}#r(){let{src:e}=this.$state,{canLoad:t}=this.#e.$state;e.set(t()?this.$props.src():null)}#s(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i}=this.#e.$state,r=e()!==null?e():i();t.set(r===!0?"anonymous":r)}#o(){let{canPlay:e,hidden:t}=this.$state;return!e()&&!t()}#n(){let{error:e}=this.$state;return!he(e)}#a(){let{src:e,hidden:t}=this.$state,{canLoad:i,duration:r}=this.#e.$state;t.set(i()&&(!e()||this.#n()||!Number.isFinite(r())))}#l(){let{src:e,canPlay:t,error:i}=this.$state;e(),t.set(!1),i.set(null)}#u(e){let{canPlay:t,error:i}=this.$state;t.set(!0),i.set(null),this.dispatch("can-play",{trigger:e})}#c(e){let{canPlay:t,error:i}=this.$state;t.set(!1),i.set(e),this.dispatch("error",{trigger:e})}#h(){let{video:e,canPlay:t}=this.$state,{duration:i}=this.#e.$state,{pointerRate:r}=this.#t,o=e();t()&&o&&Number.isFinite(i())&&Number.isFinite(r())&&(o.currentTime=r()*i())}};var $a=ni('<video muted playsinline preload="none" style="max-width: unset;"></video>'),ms=class extends p(HTMLElement,ps){static tagName="media-slider-video";#e;#t=this.#i();onSetup(){this.#e=g(),this.$state.video.set(this.#t)}onConnect(){let{canLoad:e}=this.#e.$state,{src:t,crossOrigin:i}=this.$state;this.#t.parentNode!==this&&this.prepend(this.#t),l(()=>{b(this.#t,"crossorigin",i()),b(this.#t,"preload",e()?"auto":"none"),b(this.#t,"src",t())})}#i(){return ai($a)}};var fs=class extends h{static props={...Q.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2};static state=le;#e;onSetup(){this.#e=g(),new Q({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:this.#o,isDisabled:this.#n.bind(this),aria:{valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#c.bind(this),onValueChange:this.#u.bind(this)}).attach(this),l(this.#r.bind(this)),l(this.#s.bind(this))}onAttach(e){e.setAttribute("data-media-speed-slider",""),C(e,"aria-label","Speed");let{canSetPlaybackRate:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":L(()=>!t())})}#t(){let{value:e}=this.$state;return e()}#i(){let{value:e}=this.$state;return e()+"x"}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}#s(){let{playbackRate:e}=this.#e.$state,t=e();this.$state.value.set(t),this.dispatch("value-change",{detail:t})}#o(e){return R(e,2)}#n(){let{disabled:e}=this.$props,{canSetPlaybackRate:t}=this.#e.$state;return e()||!t()}#a=ae(this.#l.bind(this),25);#l(e){if(!e.trigger)return;let t=e.detail;this.#e.remote.changePlaybackRate(t,e)}#u(e){this.#a(e)}#c(e){this.#a(e)}};var gs=class extends p(HTMLElement,fs){static tagName="media-speed-slider"};var ys=class extends p(HTMLElement,ft){static tagName="media-time-slider"};var vs=class extends h{static props={...Q.props,keyStep:5,shiftKeyMultiplier:2};static state=le;#e;onSetup(){this.#e=g();let{audioGain:e}=this.#e.$state;N(Ee,{default:"percent",value(t){return(t*(e()??1)).toFixed(2)},percent(t){return Math.round(t*(e()??1))}}),new Q({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#s.bind(this),aria:{valueMax:this.#r.bind(this),valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#l.bind(this)}).attach(this),l(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-volume-slider",""),C(e,"aria-label","Volume");let{canSetVolume:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":L(()=>!t())})}#t(){let{value:e}=this.$state,{audioGain:t}=this.#e.$state;return Math.round(e()*(t()??1))}#i(){let{value:e,max:t}=this.$state,{audioGain:i}=this.#e.$state;return R(e()/t()*(i()??1)*100,2)+"%"}#r(){let{audioGain:e}=this.#e.$state;return this.$state.max()*(e()??1)}#s(){let{disabled:e}=this.$props,{canSetVolume:t}=this.#e.$state;return e()||!t()}#o(){let{muted:e,volume:t}=this.#e.$state,i=e()?0:t()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#n=ae(this.#a.bind(this),25);#a(e){if(!e.trigger)return;let t=R(e.detail/100,3);this.#e.remote.changeVolume(t,e)}#l(e){this.#n(e)}#u(e){this.#n(e)}};var bs=class extends p(HTMLElement,vs){static tagName="media-volume-slider"};var lo,uo,co,ho;var de=window,P=s=>{de.emitLitDebugLogEvents&&de.dispatchEvent(new CustomEvent("lit-debug",{detail:s}))},La=0,Es;(lo=de.litIssuedWarnings)!==null&&lo!==void 0||(de.litIssuedWarnings=new Set),Es=(s,e)=>{e+=s?` See https://lit.dev/msg/${s} for more information.`:"",de.litIssuedWarnings.has(e)||(console.warn(e),de.litIssuedWarnings.add(e))},Es("dev-mode","Lit is in dev mode. Not recommended for production!");var be=!((uo=de.ShadyDOM)===null||uo===void 0)&&uo.inUse&&((co=de.ShadyDOM)===null||co===void 0?void 0:co.noPatch)===!0?de.ShadyDOM.wrap:s=>s,vt=de.trustedTypes,qn=vt?vt.createPolicy("lit-html",{createHTML:s=>s}):void 0,_a=s=>s,Ms=(s,e,t)=>_a,Ra=s=>{if(Xe!==Ms)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");Xe=s},Aa=()=>{Xe=Ms},vo=(s,e,t)=>Xe(s,e,t),bo="$lit$",ke=`lit$${String(Math.random()).slice(9)}$`,Bn="?"+ke,Va=`<${Bn}>`,je=document,Vt=()=>je.createComment(""),Dt=s=>s===null||typeof s!="object"&&typeof s!="function",Qn=Array.isArray,Da=s=>Qn(s)||typeof s?.[Symbol.iterator]=="function",po=`[ 	
\f\r]`,qa=`[^ 	
\f\r"'\`<>=]`,Ia=`[^\\s"'>=/]`,At=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,In=1,mo=2,Ha=3,Hn=/-->/g,On=/>/g,Ie=new RegExp(`>|${po}(?:(${Ia}+)(${po}*=${po}*(?:${qa}|("|')|))|$)`,"g"),Oa=0,Nn=1,Na=2,Fn=3,fo=/'/g,go=/"/g,Kn=/^(?:script|style|textarea|title)$/i,Fa=1,Ts=2,Co=1,xs=2,Ga=3,Ba=4,Qa=5,Po=6,Ka=7,Wn=s=>(e,...t)=>(e.some(i=>i===void 0)&&console.warn(`Some template strings are undefined.
This is probably caused by illegal octal escape sequences.`),{_$litType$:s,strings:e,values:t}),Un=Wn(Fa),PT=Wn(Ts),qt=Symbol.for("lit-noChange"),W=Symbol.for("lit-nothing"),Gn=new WeakMap,Ye=je.createTreeWalker(je,129,null,!1),Xe=Ms;function zn(s,e){if(!Array.isArray(s)||!s.hasOwnProperty("raw")){let t="invalid template strings array";throw t=`
          Internal Error: expected template strings to be an array
          with a 'raw' field. Faking a template strings array by
          calling html or svg like an ordinary function is effectively
          the same as calling unsafeHtml and can lead to major security
          issues, e.g. opening your code up to XSS attacks.
          If you're using the html or svg tagged template functions normally
          and still seeing this error, please file a bug at
          https://github.com/lit/lit/issues/new?template=bug_report.md
          and include information about your build tooling, if any.
        `.trim().replace(/\n */g,`
`),new Error(t)}return qn!==void 0?qn.createHTML(e):e}var Wa=(s,e)=>{let t=s.length-1,i=[],r=e===Ts?"<svg>":"",o,n=At;for(let a=0;a<t;a++){let u=s[a],c=-1,f,y=0,E;for(;y<u.length&&(n.lastIndex=y,E=n.exec(u),E!==null);)if(y=n.lastIndex,n===At){if(E[In]==="!--")n=Hn;else if(E[In]!==void 0)n=On;else if(E[mo]!==void 0)Kn.test(E[mo])&&(o=new RegExp(`</${E[mo]}`,"g")),n=Ie;else if(E[Ha]!==void 0)throw new Error("Bindings in tag names are not supported. Please use static templates instead. See https://lit.dev/docs/templates/expressions/#static-expressions")}else n===Ie?E[Oa]===">"?(n=o??At,c=-1):E[Nn]===void 0?c=-2:(c=n.lastIndex-E[Na].length,f=E[Nn],n=E[Fn]===void 0?Ie:E[Fn]==='"'?go:fo):n===go||n===fo?n=Ie:n===Hn||n===On?n=At:(n=Ie,o=void 0);console.assert(c===-1||n===Ie||n===fo||n===go,"unexpected parse state B");let k=n===Ie&&s[a+1].startsWith("/>")?" ":"";r+=n===At?u+Va:c>=0?(i.push(f),u.slice(0,c)+bo+u.slice(c)+ke+k):u+ke+(c===-2?(i.push(void 0),a):k)}let d=r+(s[t]||"<?>")+(e===Ts?"</svg>":"");return[zn(s,d),i]},It=class s{constructor({strings:e,["_$litType$"]:t},i){this.parts=[];let r,o=0,n=0,d=e.length-1,a=this.parts,[u,c]=Wa(e,t);if(this.el=s.createElement(u,i),Ye.currentNode=this.el.content,t===Ts){let f=this.el.content,y=f.firstChild;y.remove(),f.append(...y.childNodes)}for(;(r=Ye.nextNode())!==null&&a.length<d;){if(r.nodeType===1){{let f=r.localName;if(/^(?:textarea|template)$/i.test(f)&&r.innerHTML.includes(ke)){let y=`Expressions are not supported inside \`${f}\` elements. See https://lit.dev/msg/expression-in-${f} for more information.`;if(f==="template")throw new Error(y);Es("",y)}}if(r.hasAttributes()){let f=[];for(let y of r.getAttributeNames())if(y.endsWith(bo)||y.startsWith(ke)){let E=c[n++];if(f.push(y),E!==void 0){let q=r.getAttribute(E.toLowerCase()+bo).split(ke),B=/([.?@])?(.*)/.exec(E);a.push({type:Co,index:o,name:B[2],strings:q,ctor:B[1]==="."?To:B[1]==="?"?xo:B[1]==="@"?Mo:Et})}else a.push({type:Po,index:o})}for(let y of f)r.removeAttribute(y)}if(Kn.test(r.tagName)){let f=r.textContent.split(ke),y=f.length-1;if(y>0){r.textContent=vt?vt.emptyScript:"";for(let E=0;E<y;E++)r.append(f[E],Vt()),Ye.nextNode(),a.push({type:xs,index:++o});r.append(f[y],Vt())}}}else if(r.nodeType===8)if(r.data===Bn)a.push({type:xs,index:o});else{let y=-1;for(;(y=r.data.indexOf(ke,y+1))!==-1;)a.push({type:Ka,index:o}),y+=ke.length-1}o++}P?.({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){let i=je.createElement("template");return i.innerHTML=e,i}};function bt(s,e,t=s,i){var r,o,n,d;if(e===qt)return e;let a=i!==void 0?(r=t.__directives)===null||r===void 0?void 0:r[i]:t.__directive,u=Dt(e)?void 0:e._$litDirective$;return a?.constructor!==u&&((o=a?._$notifyDirectiveConnectionChanged)===null||o===void 0||o.call(a,!1),u===void 0?a=void 0:(a=new u(s),a._$initialize(s,t,i)),i!==void 0?((n=(d=t).__directives)!==null&&n!==void 0?n:d.__directives=[])[i]=a:t.__directive=a),a!==void 0&&(e=bt(s,a._$resolve(s,e.values),a,i)),e}var Eo=class{constructor(e,t){this._$parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){var t;let{el:{content:i},parts:r}=this._$template,o=((t=e?.creationScope)!==null&&t!==void 0?t:je).importNode(i,!0);Ye.currentNode=o;let n=Ye.nextNode(),d=0,a=0,u=r[0];for(;u!==void 0;){if(d===u.index){let c;u.type===xs?c=new Ht(n,n.nextSibling,this,e):u.type===Co?c=new u.ctor(n,u.name,u.strings,this,e):u.type===Po&&(c=new So(n,this,e)),this._$parts.push(c),u=r[++a]}d!==u?.index&&(n=Ye.nextNode(),d++)}return Ye.currentNode=je,o}_update(e){let t=0;for(let i of this._$parts)i!==void 0&&(P?.({kind:"set part",part:i,value:e[t],valueIndex:t,values:e,templateInstance:this}),i.strings!==void 0?(i._$setValue(e,i,t),t+=i.strings.length-2):i._$setValue(e[t])),t++}},Ht=class s{constructor(e,t,i,r){var o;this.type=xs,this._$committedValue=W,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=i,this.options=r,this.__isConnected=(o=r?.isConnected)!==null&&o!==void 0?o:!0,this._textSanitizer=void 0}get _$isConnected(){var e,t;return(t=(e=this._$parent)===null||e===void 0?void 0:e._$isConnected)!==null&&t!==void 0?t:this.__isConnected}get parentNode(){let e=be(this._$startNode).parentNode,t=this._$parent;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){var i;if(this.parentNode===null)throw new Error("This `ChildPart` has no `parentNode` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's `innerHTML` or `textContent` can do this.");if(e=bt(this,e,t),Dt(e))e===W||e==null||e===""?(this._$committedValue!==W&&(P?.({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=W):e!==this._$committedValue&&e!==qt&&this._commitText(e);else if(e._$litType$!==void 0)this._commitTemplateResult(e);else if(e.nodeType!==void 0){if(((i=this.options)===null||i===void 0?void 0:i.host)===e){this._commitText("[probable mistake: rendered a template's host in itself (commonly caused by writing ${this} in a template]"),console.warn("Attempted to render the template host",e,"inside itself. This is almost always a mistake, and in dev mode ","we render some warning text. In production however, we'll ","render it, which will usually result in an error, and sometimes ","in the element disappearing from the DOM.");return}this._commitNode(e)}else Da(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return be(be(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){var t;if(this._$committedValue!==e){if(this._$clear(),Xe!==Ms){let i=(t=this._$startNode.parentNode)===null||t===void 0?void 0:t.nodeName;if(i==="STYLE"||i==="SCRIPT"){let r="Forbidden";throw i==="STYLE"?r="Lit does not support binding inside style nodes. This is a security risk, as style injection attacks can exfiltrate data and spoof UIs. Consider instead using css`...` literals to compose styles, and make do dynamic styling with css custom properties, ::parts, <slot>s, and by mutating the DOM rather than stylesheets.":r="Lit does not support binding inside script nodes. This is a security risk, as it could allow arbitrary code execution.",new Error(r)}}P?.({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e)}}_commitText(e){if(this._$committedValue!==W&&Dt(this._$committedValue)){let t=be(this._$startNode).nextSibling;this._textSanitizer===void 0&&(this._textSanitizer=vo(t,"data","property")),e=this._textSanitizer(e),P?.({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else{let t=je.createTextNode("");this._commitNode(t),this._textSanitizer===void 0&&(this._textSanitizer=vo(t,"data","property")),e=this._textSanitizer(e),P?.({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}this._$committedValue=e}_commitTemplateResult(e){var t;let{values:i,["_$litType$"]:r}=e,o=typeof r=="number"?this._$getTemplate(e):(r.el===void 0&&(r.el=It.createElement(zn(r.h,r.h[0]),this.options)),r);if(((t=this._$committedValue)===null||t===void 0?void 0:t._$template)===o)P?.({kind:"template updating",template:o,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:i}),this._$committedValue._update(i);else{let n=new Eo(o,this),d=n._clone(this.options);P?.({kind:"template instantiated",template:o,instance:n,parts:n._$parts,options:this.options,fragment:d,values:i}),n._update(i),P?.({kind:"template instantiated and updated",template:o,instance:n,parts:n._$parts,options:this.options,fragment:d,values:i}),this._commitNode(d),this._$committedValue=n}}_$getTemplate(e){let t=Gn.get(e.strings);return t===void 0&&Gn.set(e.strings,t=new It(e)),t}_commitIterable(e){Qn(this._$committedValue)||(this._$committedValue=[],this._$clear());let t=this._$committedValue,i=0,r;for(let o of e)i===t.length?t.push(r=new s(this._insert(Vt()),this._insert(Vt()),this,this.options)):r=t[i],r._$setValue(o),i++;i<t.length&&(this._$clear(r&&be(r._$endNode).nextSibling,i),t.length=i)}_$clear(e=be(this._$startNode).nextSibling,t){var i;for((i=this._$notifyConnectionChanged)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$endNode;){let r=be(e).nextSibling;be(e).remove(),e=r}}setConnected(e){var t;if(this._$parent===void 0)this.__isConnected=e,(t=this._$notifyConnectionChanged)===null||t===void 0||t.call(this,e);else throw new Error("part.setConnected() may only be called on a RootPart returned from render().")}},Et=class{constructor(e,t,i,r,o){this.type=Co,this._$committedValue=W,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=r,this.options=o,i.length>2||i[0]!==""||i[1]!==""?(this._$committedValue=new Array(i.length-1).fill(new String),this.strings=i):this._$committedValue=W,this._sanitizer=void 0}get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e,t=this,i,r){let o=this.strings,n=!1;if(o===void 0)e=bt(this,e,t,0),n=!Dt(e)||e!==this._$committedValue&&e!==qt,n&&(this._$committedValue=e);else{let d=e;e=o[0];let a,u;for(a=0;a<o.length-1;a++)u=bt(this,d[i+a],t,a),u===qt&&(u=this._$committedValue[a]),n||(n=!Dt(u)||u!==this._$committedValue[a]),u===W?e=W:e!==W&&(e+=(u??"")+o[a+1]),this._$committedValue[a]=u}n&&!r&&this._commitValue(e)}_commitValue(e){e===W?be(this.element).removeAttribute(this.name):(this._sanitizer===void 0&&(this._sanitizer=Xe(this.element,this.name,"attribute")),e=this._sanitizer(e??""),P?.({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),be(this.element).setAttribute(this.name,e??""))}},To=class extends Et{constructor(){super(...arguments),this.type=Ga}_commitValue(e){this._sanitizer===void 0&&(this._sanitizer=Xe(this.element,this.name,"property")),e=this._sanitizer(e),P?.({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===W?void 0:e}},Ua=vt?vt.emptyScript:"",xo=class extends Et{constructor(){super(...arguments),this.type=Ba}_commitValue(e){P?.({kind:"commit boolean attribute",element:this.element,name:this.name,value:!!(e&&e!==W),options:this.options}),e&&e!==W?be(this.element).setAttribute(this.name,Ua):be(this.element).removeAttribute(this.name)}},Mo=class extends Et{constructor(e,t,i,r,o){if(super(e,t,i,r,o),this.type=Qa,this.strings!==void 0)throw new Error(`A \`<${e.localName}>\` has a \`@${t}=...\` listener with invalid content. Event listeners in templates must have exactly one expression and no surrounding text.`)}_$setValue(e,t=this){var i;if(e=(i=bt(this,e,t,0))!==null&&i!==void 0?i:W,e===qt)return;let r=this._$committedValue,o=e===W&&r!==W||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==W&&(r===W||o);P?.({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:o,addListener:n,oldListener:r}),o&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){var t,i;typeof this._$committedValue=="function"?this._$committedValue.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$committedValue.handleEvent(e)}},So=class{constructor(e,t,i){this.element=e,this.type=Po,this._$disconnectableChildren=void 0,this._$parent=t,this.options=i}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){P?.({kind:"commit to element binding",element:this.element,value:e,options:this.options}),bt(this,e)}};var yo=de.litHtmlPolyfillSupportDevMode;yo?.(It,Ht);((ho=de.litHtmlVersions)!==null&&ho!==void 0?ho:de.litHtmlVersions=[]).push("2.8.0");de.litHtmlVersions.length>1&&Es("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.");var yt=(s,e,t)=>{var i,r;if(e==null)throw new TypeError(`The container to render into may not be ${e}`);let o=La++,n=(i=t?.renderBefore)!==null&&i!==void 0?i:e,d=n._$litPart$;if(P?.({kind:"begin render",id:o,value:s,container:e,options:t,part:d}),d===void 0){let a=(r=t?.renderBefore)!==null&&r!==void 0?r:null;n._$litPart$=d=new Ht(e.insertBefore(Vt(),a),a,void 0,t??{})}return d._$setValue(s),P?.({kind:"end render",id:o,value:s,container:e,options:t,part:d}),d};yt.setSanitizer=Ra,yt.createSanitizer=vo,yt._testOnlyClearSanitizerFactoryDoNotCallOrElse=Aa;var Ss=class extends HTMLElement{rootPart=null;connectedCallback(){this.rootPart=yt(this.render(),this,{renderBefore:this.firstChild}),this.rootPart.setConnected(!0)}disconnectedCallback(){this.rootPart?.setConnected(!1),this.rootPart=null,yt(null,this)}};var ko=class extends h{static props={size:96,trackWidth:8,fillPercent:50};onConnect(e){Y(()=>{if(!this.connectScope)return;let t=e.querySelector("svg"),i=t.firstElementChild,r=i.nextElementSibling;l(this.#e.bind(this,t,i,r))})}#e(e,t,i){let{size:r,trackWidth:o,fillPercent:n}=this.$props;b(e,"width",r()),b(e,"height",r()),b(t,"stroke-width",o()),b(i,"stroke-width",o()),b(i,"stroke-dashoffset",100-n())}},Cs=class extends p(Ss,ko){static tagName="media-spinner";render(){return Un`
      <svg fill="none" viewBox="0 0 120 120" aria-hidden="true" data-part="root">
        <circle cx="60" cy="60" r="54" stroke="currentColor" data-part="track"></circle>
        <circle
          cx="60"
          cy="60"
          r="54"
          stroke="currentColor"
          pathLength="100"
          stroke-dasharray="100"
          data-part="track-fill"
        ></circle>
      </svg>
    `}};var Ps=class extends h{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new X({timeText:"",hidden:!1});#e;#t=T(null);#i=T(!0);#r=T(!0);onSetup(){this.#e=g(),this.#a();let{type:e}=this.$props;this.setAttributes({"data-type":e,"data-remainder":this.#c.bind(this)}),new mt({callback:this.#s.bind(this)}).attach(this)}onAttach(e){e.hasAttribute("role")||l(this.#l.bind(this)),l(this.#a.bind(this))}onConnect(e){x(si(e,this.#i.set)),l(this.#o.bind(this)),l(this.#n.bind(this))}#s(e){this.#r.set(e[0].isIntersecting)}#o(){let{hidden:e}=this.$props;this.$state.hidden.set(e()||!this.#i()||!this.#r())}#n(){if(!this.$props.toggle()){this.#t.set(null);return}this.el&&se(this.el,this.#h.bind(this))}#a(){let{hidden:e,timeText:t}=this.$state,{duration:i}=this.#e.$state;if(e())return;let{type:r,padHours:o,padMinutes:n,showHours:d}=this.$props,a=this.#u(r()),u=i(),c=this.#c();if(!Number.isFinite(a+u)){t.set("LIVE");return}let f=c?Math.max(0,u-a):a,y=qe(f,{padHrs:o(),padMins:n(),showHrs:d()});t.set((c?"-":"")+y)}#l(){if(!this.el)return;let{toggle:e}=this.$props;b(this.el,"role",e()?"timer":null),b(this.el,"tabindex",e()?0:null)}#u(e){let{bufferedEnd:t,duration:i,currentTime:r}=this.#e.$state;switch(e){case"buffered":return t();case"duration":return i();default:return r()}}#c(){return this.$props.remainder()&&this.#t()!==!1}#h(e){if(e.preventDefault(),this.#t()===null){this.#t.set(!this.$props.remainder());return}this.#t.set(t=>!t)}};var ks=class extends p(HTMLElement,Ps){static tagName="media-time";onConnect(){l(()=>{this.textContent=this.$state.timeText()})}};var wo=class extends h{},ws=class extends p(HTMLElement,wo){static tagName="media-title";#e;onSetup(){this.#e=g()}onConnect(){l(this.#t.bind(this))}#t(){let{title:e}=this.#e.$state;this.textContent=e()}};var we=re();var $s=class extends h{static props={placement:"top center",offset:0,alignOffset:0};constructor(){super(),new O;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){this.#e(e),Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){this.#e(e);let t=w(we);x(()=>t.detachContent(e)),x(Y(()=>{this.connectScope&&l(this.#t.bind(this))}))}#e(e){w(we).attachContent(e)}#t(){let{placement:e,offset:t,alignOffset:i}=this.$props;return li(this.el,this.#i(),e(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:t()})}#i(){return w(we).trigger()}};var Ls=class extends p(HTMLElement,$s){static tagName="media-tooltip-content"};var za=0,_s=class extends h{static props={showDelay:700};#e=`media-tooltip-${++za}`;#t=T(null);#i=T(null);constructor(){super(),new O;let{showDelay:e}=this.$props;new ht({trigger:this.#t,content:this.#i,showDelay:e,listen(t,i,r){v(t,"touchstart",o=>o.preventDefault(),{passive:!1}),l(()=>{Lt()&&v(t,"focus",i),v(t,"blur",r)}),v(t,"mouseenter",i),v(t,"mouseleave",r)},onChange:this.#a.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onSetup(){N(we,{trigger:this.#t,content:this.#i,attachTrigger:this.#r.bind(this),detachTrigger:this.#s.bind(this),attachContent:this.#o.bind(this),detachContent:this.#n.bind(this)})}#r(e){this.#t.set(e);let t=e.getAttribute("data-media-tooltip");t&&this.el?.setAttribute(`data-media-${t}-tooltip`,""),b(e,"data-describedby",this.#e)}#s(e){e.removeAttribute("data-describedby"),e.removeAttribute("aria-describedby"),this.#t.set(null)}#o(e){e.setAttribute("id",this.#e),e.style.display="none",C(e,"role","tooltip"),this.#i.set(e)}#n(e){e.removeAttribute("id"),e.removeAttribute("role"),this.#i.set(null)}#a(e){let t=this.#t(),i=this.#i();t&&b(t,"aria-describedby",e?this.#e:null);for(let r of[this.el,t,i])r&&b(r,"data-visible",e)}};var Rs=class extends p(HTMLElement,_s){static tagName="media-tooltip"};var As=class extends h{constructor(){super(),new O}onConnect(e){x(Y(()=>{if(!this.connectScope)return;this.#e();let t=w(we);x(()=>{let i=this.#t();i&&t.detachTrigger(i)})}))}#e(){let e=this.#t(),t=w(we);e&&t.attachTrigger(e)}#t(){let e=this.el.firstElementChild;return e?.localName==="button"||e?.getAttribute("role")==="button"?e:this.el}};var Vs=class extends p(HTMLElement,As){static tagName="media-tooltip-trigger";onConnect(){this.style.display="contents"}};M(br);M(mr);M(gr);M(Yr);M(Fi);M(Rs);M(Vs);M(Ls);M(sr);M(er);M(Wi);M(zi);M(ir);M(nr);M(Qi);M(ji);M(lr);M(rs);M(Jr);M(bs);M(ys);M(gs);M(es);M(is);M(ns);M(os);M(hs);M(us);M(ms);M(Rr);M(wr);M(Hr);M(Ir);M(Vr);M(Mr);M(Cr);M(Ur);M(Tr);M(Fr);M(kr);M(Kr);M(Br);M(vr);M(gt);M(cr);M(Ji);M(ks);M(ws);M(hr);M(Cs);import"https://cdn.vidstack.io/icons";
