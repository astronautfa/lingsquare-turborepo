import{b as vn,c as L,d as pe,e as Ua,f as sr,g as nr,h as ye,i as Ht,j as le,k as Nt,l as ar,m as lr,n as dr,o as za,p as Ya,q as ja,r as ur,s as Xa,t as Ee,u as cr}from"./chunks/vidstack-2VHLSK4R.js";import{a as or,b as Qe}from"./chunks/vidstack-IMNMJXWE.js";import{a as B,b as Ka,c as fi}from"./chunks/vidstack-KCALJS55.js";import{a as Pe}from"./chunks/vidstack-NTONOYHO.js";import{a as te,b as Qa,c as Ge,d as Wa,e as vt,f as j}from"./chunks/vidstack-V3FIARZT.js";import{a as I}from"./chunks/vidstack-WJVXB6YB.js";import{a as Ot,b as yn,c as yt,d as Na}from"./chunks/vidstack-WFKXGTV5.js";import{b as Be,d as qt,e as rr}from"./chunks/vidstack-DHW3MMHQ.js";import{a as Da,b as er,c as Va,e as tr,f as Ia,g as Oa,k as qa,l as ir,m as Ha,n as Fa,o as Ba,p as mi,q as hi,r as Ga}from"./chunks/vidstack-MZUA5TJ4.js";import{$ as Ra,A as $a,B as x,C as ae,D as Pa,E,F as w,G as ka,H as d,I as re,J as W,K as A,L as K,M as hn,N as fn,O as _a,P as Z,Q as wa,R as $e,S as La,T as pi,U as b,V as ue,W as Le,X as It,Y as gt,Z as Zi,a as v,aa as gn,b as mt,c as ne,ca as ce,da as Aa,e as He,f as $,g as ba,h as ci,i as we,j as Ta,k as Ea,l as xa,m as ge,n as P,o as Xi,p as Vt,q as N,r as G,s as Sa,t as S,u as mn,v as Ji,w as Ma,x as ht,y as Ca,z as ft}from"./chunks/vidstack-BQB2M2TQ.js";var bn=r=>r===null?"":r+"",Pd=r=>r===null?null:r+"",kd=r=>r===null?0:Number(r);var Tn=r=>r!==null,_d=()=>null,wd=r=>r===null?[]:JSON.parse(r),Ld=r=>r===null?{}:JSON.parse(r);function Rd(r){if(r===null)return Pd;switch(typeof r){case"undefined":return bn;case"string":return bn;case"boolean":return Tn;case"number":return kd;case"function":return _d;case"object":return N(r)?wd:Ld;default:return bn}}var ot=Symbol("ATTRS"),Ja=Symbol("SETUP"),bt=Symbol("SETUP_STATE"),gi=Symbol("SETUP_CALLBACKS");function y(r,e){var t,i,o;let n=class n extends r{constructor(...a){if(super(...a),this[i]=0,this[o]=null,this.keepAlive=!1,this.forwardKeepAlive=!0,this.$=He(()=>_a(e),null),this.$.$$._addHooks(this),e.props){let u=this.$props,c=Object.getOwnPropertyDescriptors(this);for(let f of Object.keys(c))f in e.props&&(u[f].set(this[f]),delete this[f])}}static get observedAttributes(){if(!this[ot]&&e.props){let a=new Map;for(let u of Object.keys(e.props)){let c=this.attrs?.[u],f=P(c)?c:c&&c?.attr;f!==!1&&(f||(f=$e(u)),a.set(f,{_prop:u,_converter:c&&!P(c)&&c?.converter||Rd(e.props[u])}))}this[ot]=a}return this[ot]?Array.from(this[ot].keys()):[]}get scope(){return this.$.$$._scope}get attachScope(){return this.$.$$._attachScope}get connectScope(){return this.$.$$._connectScope}get $props(){return this.$.$$._props}get $state(){return this.$.$$._$state}get state(){return this.$.state}attributeChangedCallback(a,u,c){let f=this.constructor;if(!f[ot]){super.attributeChangedCallback?.(a,u,c);return}let g=f[ot].get(a);g&&(this[g._prop]=g._converter(c))}connectedCallback(){let a=this.$?.$$;if(!a||a._destroyed)return;if(this[bt]!==2){Dd.call(this);return}if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),a._connect(),N(this[gi])&&wa(this[gi],this),this[gi]=null;let u=super.connectedCallback;u&&He(()=>u.call(this),this.connectScope)}disconnectedCallback(){let a=this.$?.$$;if(!a||a._destroyed)return;a._disconnect();let u=super.disconnectedCallback;u&&u.call(this),!this.keepAlive&&!this.hasAttribute("keep-alive")&&setTimeout(()=>{requestAnimationFrame(()=>{this.isConnected||a._destroy()})},0)}[(t=ot,i=bt,o=gi,Ja)](){let a=this.$.$$,u=this.constructor;if(a._destroyed&&console.warn(`[maverick] attempted attaching to destroyed element \`${this.tagName}\``),a._destroyed)return;let c=u[ot];if(c)for(let f of this.attributes){let g=c.get(f.name);g&&g._converter&&a._props[g._prop].set(g._converter(this.getAttribute(f.name)))}a._setup(),a._attach(this),this[bt]=2,this.connectedCallback()}subscribe(a){return this.$.subscribe(a)}destroy(){this.disconnectedCallback(),this.$.destroy()}};n[t]=null;let s=n;return Ad(s,e),s}function Ad(r,e){let t=r.prototype,i=e.prototype;if(e.props)for(let o of Object.keys(e.props))Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get(){return this.$props[o]()},set(s){this.$props[o].set(s)}});if(i[hn])for(let o of i[hn])Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get(){return this.$[o]},set(s){this.$[o]=s}});if(i[fn])for(let o of i[fn])t[o]=function(...s){return this.$[o](...s)}}function Dd(){if(this[bt]!==0)return;this[bt]=1;let r=Id(this),e=r&&window.customElements.get(r.localName),t=r&&r[bt]===2;if(r&&(!e||!t)){Vd.call(this,r);return}Za.call(this,r)}async function Vd(r){await window.customElements.whenDefined(r.localName),r[bt]!==2&&await new Promise(e=>(r[gi]??=[]).push(e)),Za.call(this,r)}function Za(r){if(this.isConnected){if(r){r.keepAlive&&r.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));let e=this.$.$$._scope;e&&r.$.$$._attachScope.append(e)}this[Ja]()}}function Id(r){let e=r.parentNode,t=r.localName.split("-",1)[0]+"-";for(;e;){if(e.nodeType===1&&e.localName.startsWith(t))return e;e=e.parentNode}return null}function k(r,e=!1){(e||!window.customElements.get(r.tagName))&&window.customElements.define(r.tagName,r)}var pr=Symbol(0),el=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"];var En=re();function h(){return A(En)}function V(){return h().$state}function Od(r){return r instanceof HTMLAudioElement}function qd(r){return r instanceof HTMLVideoElement}function tl(r){return Od(r)||qd(r)}var me=class extends Z{};var rl={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},mr=new Set(["Shift","Alt","Meta","Ctrl"]),Hd='button, [role="button"]',il='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]',hr=class extends me{#e;constructor(e){super(),this.#e=e}onConnect(){d(this.#t.bind(this))}#t(){let{keyDisabled:e,keyTarget:t}=this.$props;if(e())return;let i=t()==="player"?this.el:document,o=E(!1);i===this.el?(this.listen("focusin",()=>o.set(!0)),this.listen("focusout",s=>{this.el.contains(s.target)||o.set(!1)})):(v(o)||o.set(document.querySelector("[data-media-player]")===this.el),S(document,"focusin",s=>{let n=s.composedPath().find(l=>l instanceof Element&&l.localName==="media-player");n!==void 0&&o.set(this.el===n)})),d(()=>{o()&&(S(i,"keyup",this.#i.bind(this)),S(i,"keydown",this.#r.bind(this)),S(i,"keydown",this.#o.bind(this),{capture:!0}))})}#i(e){let t=document.activeElement;if(!e.key||!this.$state.canSeek()||t?.matches(il))return;let{method:i,value:o}=this.#s(e);if(!P(o)&&!N(o)){o?.onKeyUp?.({event:e,player:this.#e.player,remote:this.#e.remote}),o?.callback?.(e,this.#e.remote);return}i?.startsWith("seek")&&(e.preventDefault(),e.stopPropagation(),this.#l?(this.#u(e,i==="seekForward"),this.#l=null):(this.#e.remote.seek(this.#n,e),this.#n=void 0)),i?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}))}#r(e){if(!e.key||mr.has(e.key))return;let t=document.activeElement;if(t?.matches(il)||ft(e)&&t?.matches(Hd))return;let{method:i,value:o}=this.#s(e),s=!e.metaKey&&/^[0-9]$/.test(e.key);if(!P(o)&&!N(o)&&!s){o?.onKeyDown?.({event:e,player:this.#e.player,remote:this.#e.remote}),o?.callback?.(e,this.#e.remote);return}if(!i&&s){e.preventDefault(),e.stopPropagation(),this.#e.remote.seek(this.$state.duration()/10*Number(e.key),e);return}if(i){switch(e.preventDefault(),e.stopPropagation(),i){case"seekForward":case"seekBackward":this.#c(e,i,i==="seekForward");break;case"volumeUp":case"volumeDown":let n=this.el.querySelector("[data-media-volume-slider]");if(n)n.dispatchEvent(new KeyboardEvent("keydown",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}));else{let a=e.shiftKey?.1:.05;this.#e.remote.changeVolume(this.$state.volume()+(i==="volumeUp"?+a:-a),e)}break;case"toggleFullscreen":this.#e.remote.toggleFullscreen("prefer-media",e);break;case"speedUp":case"slowDown":let l=this.$state.playbackRate();this.#e.remote.changePlaybackRate(Math.max(.25,Math.min(2,l+(i==="speedUp"?.25:-.25))),e);break;default:this.#e.remote[i]?.(e)}this.$state.lastKeyboardAction.set({action:i,event:e})}}#o(e){tl(e.target)&&this.#s(e).method&&e.preventDefault()}#s(e){let t={...this.$props.keyShortcuts(),...this.#e.ariaKeys},i=Object.keys(t).find(o=>{let s=t[o],n=N(s)?s.join(" "):P(s)?s:s?.keys;return(N(n)?n:n?.split(" "))?.map(a=>Fd(a).replace(/Control/g,"Ctrl").split("+"))?.some(a=>{let u=new Set(a.filter(c=>mr.has(c)));for(let c of mr){let f=c.toLowerCase()+"Key";if(!u.has(c)&&e[f])return!1}return a.every(c=>mr.has(c)?e[c.toLowerCase()+"Key"]:e.key===c.replace("Space"," "))})});return{method:i,value:i?t[i]:null}}#n;#a(e,t){let i=e.shiftKey?10:5;return this.#n=Math.max(0,Math.min((this.#n??this.$state.currentTime())+(t==="seekForward"?+i:-i),this.$state.duration()))}#l=null;#u(e,t){this.#l?.dispatchEvent(new KeyboardEvent(e.type,{key:t?"Right":"Left",shiftKey:e.shiftKey,trigger:e}))}#c(e,t,i){this.$state.canSeek()&&(this.#l||(this.#l=this.el.querySelector("[data-media-time-slider]")),this.#l?this.#u(e,i):this.#e.remote.seeking(this.#a(e,t),e))}},Nd=["!","@","#","$","%","^","&","*","(",")"];function Fd(r){return r.replace(/Shift\+(\d)/g,(e,t)=>Nd[t-1])}var ol={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:rl,storage:null};var ke={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},sl=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],nl=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],al=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],xe=typeof window<"u"&&typeof window.document<"u"?window.document:{},Re="fullscreenEnabled"in xe&&Object.keys(ke)||sl[0]in xe&&sl||nl[0]in xe&&nl||al[0]in xe&&al||[],Bd={requestFullscreen:function(r){return r[Re[ke.requestFullscreen]]()},requestFullscreenFunction:function(r){return r[Re[ke.requestFullscreen]]},get exitFullscreen(){return xe[Re[ke.exitFullscreen]].bind(xe)},get fullscreenPseudoClass(){return":"+Re[ke.fullscreen]},addEventListener:function(r,e,t){return xe.addEventListener(Re[ke[r]],e,t)},removeEventListener:function(r,e,t){return xe.removeEventListener(Re[ke[r]],e,t)},get fullscreenEnabled(){return!!xe[Re[ke.fullscreenEnabled]]},set fullscreenEnabled(r){},get fullscreenElement(){return xe[Re[ke.fullscreenElement]]},set fullscreenElement(r){},get onfullscreenchange(){return xe[("on"+Re[ke.fullscreenchange]).toLowerCase()]},set onfullscreenchange(r){return xe[("on"+Re[ke.fullscreenchange]).toLowerCase()]=r},get onfullscreenerror(){return xe[("on"+Re[ke.fullscreenerror]).toLowerCase()]},set onfullscreenerror(r){return xe[("on"+Re[ke.fullscreenerror]).toLowerCase()]=r}},We=Bd;var xn=new ue({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new Ot,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:tr(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return er&&this.mediaType==="video"&&(!this.playsInline||!We.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new Ot,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new Ot,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(j).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){let r=yn(this.buffered)??0;return Math.max(0,r-this.clipStartTime)},get bufferedEnd(){let r=yt(this.buffered)??0;return Math.min(this.duration,Math.max(0,r-this.clipStartTime))},get seekableStart(){let r=yn(this.seekable)??0;return Math.max(0,r-this.clipStartTime)},get seekableEnd(){let r=this.canPlay?yt(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,r-this.clipStartTime)):r},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,savedState:null}),ll=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),Gd=new Set([...ll,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function Sn(r,e=!1){let t=e?ll:Gd;xn.reset(r,i=>t.has(i)),ne()}var Ft=class extends Sa{items=[];[I.readonly]=!1;get length(){return this.items.length}get readonly(){return this[I.readonly]}indexOf(e){return this.items.indexOf(e)}getById(e){return e===""?null:this.items.find(t=>t.id===e)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[I.add](e,t){let i=this.items.length;""+i in this||Object.defineProperty(this,i,{get(){return this.items[i]}}),!this.items.includes(e)&&(this.items.push(e),this.dispatchEvent(new G("add",{detail:e,trigger:t})))}[I.remove](e,t){let i=this.items.indexOf(e);i>=0&&(this[I.onRemove]?.(e,t),this.items.splice(i,1),this.dispatchEvent(new G("remove",{detail:e,trigger:t})))}[I.reset](e){for(let t of[...this.items])this[I.remove](t,e);this.items=[],this[I.setReadonly](!1,e),this[I.onReset]?.()}[I.setReadonly](e,t){this[I.readonly]!==e&&(this[I.readonly]=e,this.dispatchEvent(new G("readonly-change",{detail:e,trigger:t})))}};var yi=Symbol(0),Bt=class extends Ft{get selected(){return this.items.find(e=>e.selected)??null}get selectedIndex(){return this.items.findIndex(e=>e.selected)}[I.onRemove](e,t){this[I.select](e,!1,t)}[I.add](e,t){e[yi]=!1,Object.defineProperty(e,"selected",{get(){return this[yi]},set:i=>{this.readonly||(this[I.onUserSelect]?.(),this[I.select](e,i))}}),super[I.add](e,t)}[I.select](e,t,i){if(t===e?.[yi])return;let o=this.selected;e&&(e[yi]=t),(t?o!==e:o===e)&&(o&&(o[yi]=!1),this.dispatchEvent(new G("change",{detail:{prev:o,current:this.selected},trigger:i})))}};var fr=class extends Bt{#e=!1;switch="current";get auto(){return this.#e||this.readonly}[Pe.enableAuto];[I.onUserSelect](){this[Pe.setAuto](!1)}[I.onReset](e){this[Pe.enableAuto]=void 0,this[Pe.setAuto](!1,e)}autoSelect(e){this.readonly||this.#e||!this[Pe.enableAuto]||(this[Pe.enableAuto]?.(e),this[Pe.setAuto](!0,e))}getBySrc(e){return this.items.find(t=>t.src===e)}[Pe.setAuto](e,t){this.#e!==e&&(this.#e=e,this.dispatchEvent(new G("auto-change",{detail:e,trigger:t})))}};var vi=class extends me{#e;#t;constructor(e,t){super(),this.#e=e,this.#t=t}async onAttach(e){let t=this.$props[this.#e]();if(t==="eager")requestAnimationFrame(this.#t);else if(t==="idle")Aa(this.#t);else if(t==="visible"){let i,o=new IntersectionObserver(s=>{this.scope&&s[0].isIntersecting&&(i?.(),i=void 0,this.#t())});o.observe(e),i=$(()=>o.disconnect())}}};var gr=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}notify(e,...t){this.#e(new G(e,{detail:t?.[0],trigger:t?.[1]}))}async ready(e,t){return mt(async()=>{let{logger:i}=this.#t,{autoPlay:o,canPlay:s,started:n,duration:l,seekable:a,buffered:u,remotePlaybackInfo:c,playsInline:f,savedState:g,source:T}=this.#t.$state;if(s())return;let C={duration:e?.duration??l(),seekable:e?.seekable??a(),buffered:e?.buffered??u(),provider:this.#t.$provider()};this.notify("can-play",C,t),ne();let q=this.#t.$provider(),{storage:D,qualities:ee}=this.#t,{muted:ve,volume:be,clipStartTime:se,playbackRate:_e}=this.#t.$props;await D?.onLoad?.(T());let Oe=g()?.currentTime,ct=g()?.paused,qe=await D?.getTime(),ui=Oe??qe??se(),Hi=ct||ct!==!1&&!n()&&o();if(q){q.setVolume(await D?.getVolume()??be()),q.setMuted(ve()||!!await D?.getMuted());let Ye=await D?.getAudioGain()??1;Ye>1&&q.audioGain?.setGain?.(Ye),q.setPlaybackRate?.(await D?.getPlaybackRate()??_e()),q.setPlaysInline?.(f()),ui>0&&q.setCurrentTime(ui)}let tt=await D?.getVideoQuality();if(tt&&ee.length){let Ye=null,Te=1/0;for(let de of ee){let Dt=Math.abs(tt.width-de.width)+Math.abs(tt.height-de.height)+(tt.bitrate?Math.abs(tt.bitrate-(de.bitrate??0)):0);Dt<Te&&(Ye=de,Te=Dt)}Ye&&(Ye.selected=!0)}s()&&Hi?await this.#i(t):qe&&qe>0&&this.notify("started",void 0,t),c.set(null)})}async#i(e){let{player:t,$state:{autoPlaying:i,muted:o}}=this.#t;i.set(!0);let s=new G("auto-play-attempt",{trigger:e});try{await t.play(s)}catch{}}};var Cn=We.fullscreenEnabled,yr=class extends Z{#e=!1;#t=!1;get active(){return this.#t}get supported(){return Cn}onConnect(){S(We,"fullscreenchange",this.#r.bind(this)),S(We,"fullscreenerror",this.#o.bind(this)),$(this.#i.bind(this))}async#i(){Cn&&await this.exit()}#r(e){let t=Mn(this.el);t!==this.#t&&(t||(this.#e=!1),this.#t=t,this.dispatch("fullscreen-change",{detail:t,trigger:e}))}#o(e){this.#e&&(this.dispatch("fullscreen-error",{detail:null,trigger:e}),this.#e=!1)}async enter(){try{return this.#e=!0,!this.el||Mn(this.el)?void 0:(dl(),We.requestFullscreen(this.el))}catch(e){throw this.#e=!1,e}}async exit(){if(!(!this.el||!Mn(this.el)))return dl(),We.exitFullscreen()}};function Mn(r){if(We.fullscreenElement===r)return!0;try{return r.matches(We.fullscreenPseudoClass)}catch{return!1}}function dl(){if(!Cn)throw Error("[vidstack] no fullscreen API")}var Gt=class r extends Z{#e=E(this.#n());#t=E(!1);#i;get type(){return this.#e()}get locked(){return this.#t()}get portrait(){return this.#e().startsWith("portrait")}get landscape(){return this.#e().startsWith("landscape")}static supported=tr();get supported(){return r.supported}onConnect(){if(this.supported)S(screen.orientation,"change",this.#o.bind(this));else{let e=window.matchMedia("(orientation: landscape)");e.onchange=this.#o.bind(this),$(()=>e.onchange=null)}$(this.#r.bind(this))}async#r(){this.supported&&this.#t()&&await this.unlock()}#o(e){this.#e.set(this.#n()),this.dispatch("orientation-change",{detail:{orientation:v(this.#e),lock:this.#i},trigger:e})}async lock(e){v(this.#t)||this.#i===e||(this.#s(),await screen.orientation.lock(e),this.#t.set(!0),this.#i=e)}async unlock(){v(this.#t)&&(this.#s(),this.#i=void 0,await screen.orientation.unlock(),this.#t.set(!1))}#s(){if(!this.supported)throw Error("[vidstack] no orientation API")}#n(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};var vr=class{#e=new Map;enqueue(e,t){this.#e.set(e,t)}serve(e){let t=this.peek(e);return this.#e.delete(e),t}peek(e){return this.#e.get(e)}delete(e){this.#e.delete(e)}clear(){this.#e.clear()}};var Qt=class{#e=!1;#t=gn();#i=new Map;get size(){return this.#i.size}get isServing(){return this.#e}async waitForFlush(){this.#e||await this.#t.promise}enqueue(e,t){if(this.#e){t();return}this.#i.delete(e),this.#i.set(e,t)}serve(e){this.#i.get(e)?.(),this.#i.delete(e)}start(){this.#r(),this.#e=!0,this.#i.size>0&&this.#r()}stop(){this.#e=!1}reset(){this.stop(),this.#i.clear(),this.#o()}#r(){for(let e of this.#i.keys())this.serve(e);this.#o()}#o(){this.#t.resolve(),this.#t=gn()}};var br=class extends me{#e=-2;#t=!1;#i=E(!1);#r=E(!1);#o=null;#s=E(!0);defaultDelay=2e3;get canIdle(){return this.#s()}set canIdle(e){this.#s.set(e)}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:e}=this.$props;return this.#i()||e()}set hideOnMouseLeave(e){this.#i.set(e)}get showing(){return this.$state.controlsVisible()}show(e=0,t){this.#m(),this.#t||this.#g(!0,e,t)}hide(e=this.defaultDelay,t){this.#m(),this.#t||this.#g(!1,e,t)}pause(e){this.#t=!0,this.#m(),this.#g(!0,0,e)}resume(e){this.#t=!1,!this.$state.paused()&&this.#g(!1,this.defaultDelay,e)}onConnect(){d(this.#n.bind(this))}#n(){let{viewType:e}=this.$state;if(!this.#s())return;if(e()==="audio"){this.show();return}d(this.#a.bind(this)),d(this.#l.bind(this));let t=this.#u.bind(this),i=this.#c.bind(this);this.listen("can-play",o=>this.show(0,o)),this.listen("play",t),this.listen("pause",i),this.listen("auto-play-fail",i)}#a(){let{started:e,pointer:t,paused:i}=this.$state;if(!e()||t()!=="fine")return;let o=this.hideOnMouseLeave;(!o||!this.#r())&&d(()=>{i()||this.listen("pointermove",this.#h.bind(this))}),o&&(this.listen("mouseenter",this.#p.bind(this)),this.listen("mouseleave",this.#d.bind(this)))}#l(){let{paused:e,started:t,autoPlayError:i}=this.$state;if(e()||i()&&!t())return;let o=this.#h.bind(this);d(()=>{let s=this.$state.pointer(),n=s==="coarse",l=[n?"touchend":"pointerup","keydown"];for(let a of l)this.listen(a,o,{passive:!1})})}#u(e){this.show(0,e),this.hide(void 0,e)}#c(e){this.show(0,e)}#p(e){this.#r.set(!1),this.show(0,e),this.hide(void 0,e)}#d(e){this.#r.set(!0),this.hide(0,e)}#m(){window.clearTimeout(this.#e),this.#e=-1}#h(e){e.MEDIA_GESTURE||this.#t||Ht(e)||(ht(e)&&(e.key==="Escape"?(this.el?.focus(),this.#o=null):this.#o&&(e.preventDefault(),requestAnimationFrame(()=>{this.#o?.focus(),this.#o=null}))),this.show(0,e),this.hide(this.defaultDelay,e))}#g(e,t,i){if(t===0){this.#y(e,i);return}this.#e=window.setTimeout(()=>{this.scope&&this.#y(e&&!this.#t,i)},t)}#y(e,t){this.$state.controlsVisible()!==e&&(this.$state.controlsVisible.set(e),!e&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#o=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:e,trigger:t}))}};var Tr=class extends me{#e;#t;#i;controls;#r;#o;#s;#n=new Qt;constructor(e,t,i){super(),this.#e=e,this.#t=t,this.#i=i,this.#s=i.$provider,this.controls=new br,this.#r=new yr,this.#o=new Gt}onAttach(){this.listen("fullscreen-change",this.#C.bind(this))}onConnect(){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),t=this.#u.bind(this);for(let i of e)i.startsWith("media-")&&this.listen(i,t);this.#a(),d(this.#l.bind(this)),d(this.#h.bind(this)),d(this.#g.bind(this)),d(this.#y.bind(this)),d(this.#b.bind(this)),d(this.#T.bind(this)),d(this.#E.bind(this))}onDestroy(){try{let e=this.createEvent("destroy"),{pictureInPicture:t,fullscreen:i}=this.$state;i()&&this.exitFullscreen("prefer-media",e),t()&&this.exitPictureInPicture(e)}catch{}this.#n.reset()}#a(){let{load:e}=this.$props,{canLoad:t}=this.$state;if(e()!=="play"||t())return;let i=this.listen("media-play-request",o=>{this.#c(o),i()})}#l(){let e=this.#s(),t=this.$state.canPlay();return e&&t&&this.#n.start(),()=>{this.#n.stop()}}#u(e){e.stopPropagation(),!e.defaultPrevented&&this[e.type]&&(v(this.#s)?this[e.type](e):this.#n.enqueue(e.type,()=>{v(this.#s)&&this[e.type](e)}))}async play(e){let{canPlay:t,paused:i,autoPlaying:o}=this.$state;if(this.#c(e)||!v(i))return;e&&this.#t.queue.enqueue("media-play-request",e);let s=v(o);try{let n=v(this.#s);return $n(n,v(t)),await n.play()}catch(n){let l=this.createEvent("play-fail",{detail:or(n),trigger:e});throw l.autoPlay=s,this.#e.handle(l),n}}#c(e){let{load:t}=this.$props,{canLoad:i}=this.$state;if(t()==="play"&&!i()){let o=this.createEvent("media-start-loading",{trigger:e});return this.dispatchEvent(o),this.#n.enqueue("media-play-request",async()=>{try{await this.play(o)}catch{}}),!0}return!1}async pause(e){let{canPlay:t,paused:i}=this.$state;if(!v(i)){e&&this.#t.queue.enqueue("media-pause-request",e);try{let o=v(this.#s);return $n(o,v(t)),await o.pause()}catch(o){throw this.#t.queue.delete("media-pause-request"),o}}}setAudioGain(e,t){let{audioGain:i,canSetAudioGain:o}=this.$state;if(i()===e)return;let s=this.#s();if(!s?.audioGain||!o())throw Error("[vidstack] audio gain api not available");t&&this.#t.queue.enqueue("media-audio-gain-change-request",t),s.audioGain.setGain(e)}seekToLiveEdge(e){let{canPlay:t,live:i,liveEdge:o,canSeek:s,liveSyncPosition:n,seekableEnd:l,userBehindLiveEdge:a}=this.$state;if(a.set(!1),v(()=>!i()||o()||!s()))return;let u=v(this.#s);$n(u,v(t)),e&&this.#t.queue.enqueue("media-seek-request",e);let c=l()-2;u.setCurrentTime(Math.min(c,n()??c))}#p=!1;async enterFullscreen(e="prefer-media",t){let i=this.#d(e);if(ul(e,i),!i.active)return v(this.$state.pictureInPicture)&&(this.#p=!0,await this.exitPictureInPicture(t)),t&&this.#t.queue.enqueue("media-enter-fullscreen-request",t),i.enter()}async exitFullscreen(e="prefer-media",t){let i=this.#d(e);if(ul(e,i),!!i.active){t&&this.#t.queue.enqueue("media-exit-fullscreen-request",t);try{let o=await i.exit();return this.#p&&v(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),o}finally{this.#p=!1}}}#d(e){let t=v(this.#s);return e==="prefer-media"&&this.#r.supported||e==="media"?this.#r:t?.fullscreen}async enterPictureInPicture(e){if(this.#m(),!this.$state.pictureInPicture())return e&&this.#t.queue.enqueue("media-enter-pip-request",e),await this.#s().pictureInPicture.enter()}async exitPictureInPicture(e){if(this.#m(),!!this.$state.pictureInPicture())return e&&this.#t.queue.enqueue("media-exit-pip-request",e),await this.#s().pictureInPicture.exit()}#m(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#h(){this.controls.defaultDelay=this.$props.controlsDelay()}#g(){let{canSetAudioGain:e}=this.$state,t=!!this.#s()?.audioGain?.supported;e.set(t)}#y(){let{canAirPlay:e}=this.$state,t=!!this.#s()?.airPlay?.supported;e.set(t)}#b(){let{canGoogleCast:e,source:t}=this.$state,i=Va&&!Da&&Ga(t());e.set(i)}#T(){let{canFullscreen:e}=this.$state,t=this.#r.supported||!!this.#s()?.fullscreen?.supported;e.set(t)}#E(){let{canPictureInPicture:e}=this.$state,t=!!this.#s()?.pictureInPicture?.supported;e.set(t)}async"media-airplay-request"(e){try{await this.requestAirPlay(e)}catch{}}async requestAirPlay(e){try{let t=this.#s()?.airPlay;if(!t?.supported)throw Error("No AirPlay adapter.");return e&&this.#t.queue.enqueue("media-airplay-request",e),await t.prompt()}catch(t){throw this.#t.queue.delete("media-airplay-request"),t}}async"media-google-cast-request"(e){try{await this.requestGoogleCast(e)}catch{}}#v;async requestGoogleCast(e){try{let{canGoogleCast:t}=this.$state;if(!v(t)){let o=Error("Cast not available.");throw o.code="CAST_NOT_AVAILABLE",o}if(Be("https://www.gstatic.com"),!this.#v){let o=await import("./chunks/vidstack-WHXBLLZD.js");this.#v=new o.GoogleCastLoader}await this.#v.prompt(this.#i),e&&this.#t.queue.enqueue("media-google-cast-request",e);let i=v(this.$state.remotePlaybackState)!=="disconnected";i&&this.$state.savedState.set({paused:v(this.$state.paused),currentTime:v(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(i?this.#v:null)}catch(t){throw this.#t.queue.delete("media-google-cast-request"),t}}"media-clip-start-change-request"(e){let{clipStartTime:t}=this.$state;t.set(e.detail)}"media-clip-end-change-request"(e){let{clipEndTime:t}=this.$state;t.set(e.detail),this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-duration-change-request"(e){let{providedDuration:t,clipEndTime:i}=this.$state;t.set(e.detail),i()<=0&&this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-audio-track-change-request"(e){let{logger:t,audioTracks:i}=this.#i;if(i.readonly)return;let o=e.detail,s=i[o];if(s){let n=e.type;this.#t.queue.enqueue(n,e),s.selected=!0}}async"media-enter-fullscreen-request"(e){try{await this.enterFullscreen(e.detail,e)}catch(t){this.#f(t,e)}}async"media-exit-fullscreen-request"(e){try{await this.exitFullscreen(e.detail,e)}catch(t){this.#f(t,e)}}async#C(e){let t=v(this.$props.fullscreenOrientation),i=e.detail;if(!(Ta(t)||t==="none"||!this.#o.supported))if(i){if(this.#o.locked)return;this.dispatch("media-orientation-lock-request",{detail:t,trigger:e})}else this.#o.locked&&this.dispatch("media-orientation-unlock-request",{trigger:e})}#f(e,t){this.#e.handle(this.createEvent("fullscreen-error",{detail:or(e)}))}async"media-orientation-lock-request"(e){let t=e.type;try{this.#t.queue.enqueue(t,e),await this.#o.lock(e.detail)}catch{this.#t.queue.delete(t)}}async"media-orientation-unlock-request"(e){let t=e.type;try{this.#t.queue.enqueue(t,e),await this.#o.unlock()}catch{this.#t.queue.delete(t)}}async"media-enter-pip-request"(e){try{await this.enterPictureInPicture(e)}catch(t){this.#x(t,e)}}async"media-exit-pip-request"(e){try{await this.exitPictureInPicture(e)}catch(t){this.#x(t,e)}}#x(e,t){this.#e.handle(this.createEvent("picture-in-picture-error",{detail:or(e)}))}"media-live-edge-request"(e){let{live:t,liveEdge:i,canSeek:o}=this.$state;if(!(!t()||i()||!o())){this.#t.queue.enqueue("media-seek-request",e);try{this.seekToLiveEdge()}catch{this.#t.queue.delete("media-seek-request")}}}async"media-loop-request"(e){try{this.#t.looping=!0,this.#t.replaying=!0,await this.play(e)}catch{this.#t.looping=!1}}"media-user-loop-change-request"(e){this.$state.userPrefersLoop.set(e.detail)}async"media-pause-request"(e){if(!this.$state.paused())try{await this.pause(e)}catch{}}async"media-play-request"(e){if(this.$state.paused())try{await this.play(e)}catch{}}"media-rate-change-request"(e){let{playbackRate:t,canSetPlaybackRate:i}=this.$state;if(t()===e.detail||!i())return;let o=this.#s();o?.setPlaybackRate&&(this.#t.queue.enqueue("media-rate-change-request",e),o.setPlaybackRate(e.detail))}"media-audio-gain-change-request"(e){try{this.setAudioGain(e.detail,e)}catch{}}"media-quality-change-request"(e){let{qualities:t,storage:i,logger:o}=this.#i;if(t.readonly)return;this.#t.queue.enqueue("media-quality-change-request",e);let s=e.detail;if(s<0)t.autoSelect(e),e.isOriginTrusted&&i?.setVideoQuality?.(null);else{let n=t[s];n&&(n.selected=!0,e.isOriginTrusted&&i?.setVideoQuality?.({id:n.id,width:n.width,height:n.height,bitrate:n.bitrate}))}}"media-pause-controls-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.controls.pause(e)}"media-resume-controls-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.controls.resume(e)}"media-seek-request"(e){let{seekableStart:t,seekableEnd:i,ended:o,canSeek:s,live:n,userBehindLiveEdge:l,clipStartTime:a}=this.$state,u=e.detail;o()&&(this.#t.replaying=!0);let c=e.type;this.#t.seeking=!1,this.#t.queue.delete(c);let f=u+a(),g=Math.floor(f)===Math.floor(i()),T=g?i():Math.min(Math.max(t()+.1,f),i()-.1);!Number.isFinite(T)||!s()||(this.#t.queue.enqueue(c,e),this.#s().setCurrentTime(T),n()&&e.isOriginTrusted&&Math.abs(i()-T)>=2&&l.set(!0))}"media-seeking-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.$state.seeking.set(!0),this.#t.seeking=!0}"media-start-loading"(e){if(this.$state.canLoad())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#e.handle(this.createEvent("can-load"))}"media-poster-start-loading"(e){if(this.$state.canLoadPoster())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#e.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(e){let{index:t,mode:i}=e.detail,o=this.#i.textTracks[t];if(o){let s=e.type;this.#t.queue.enqueue(s,e),o.setMode(i,e)}}"media-mute-request"(e){if(this.$state.muted())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#s().setMuted(!0)}"media-unmute-request"(e){let{muted:t,volume:i}=this.$state;if(!t())return;let o=e.type;this.#t.queue.enqueue(o,e),this.#i.$provider().setMuted(!1),i()===0&&(this.#t.queue.enqueue(o,e),this.#s().setVolume(.25))}"media-volume-change-request"(e){let{muted:t,volume:i}=this.$state,o=e.detail;if(i()===o)return;let s=e.type;this.#t.queue.enqueue(s,e),this.#s().setVolume(o),o>0&&t()&&(this.#t.queue.enqueue(s,e),this.#s().setMuted(!1))}#S(e,t,i){}};function $n(r,e){if(!(r&&e))throw Error("[vidstack] media not ready")}function ul(r,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}var Er=class{seeking=!1;looping=!1;replaying=!1;queue=new vr};var Wt=Qd;function Qd(r,e,t){var i=null,o=null,s=function(){i&&(clearTimeout(i),o=null,i=null)},n=function(){var a=o;s(),a&&a()},l=function(){if(!e)return r.apply(this,arguments);var a=this,u=arguments,c=t&&!i;if(s(),o=function(){r.apply(a,u)},i=setTimeout(function(){if(i=null,!c){var f=o;return o=null,f()}},e),c)return o()};return l.cancel=s,l.flush=n,l}var Se=Wd;function Wd(r,e,t){var i=null,o=null,s=t&&t.leading,n=t&&t.trailing;s==null&&(s=!0),n==null&&(n=!s),s==!0&&(n=!1);var l=function(){i&&(clearTimeout(i),i=null)},a=function(){var c=o;l(),c&&c()},u=function(){var c=s&&!i,f=this,g=arguments;if(o=function(){return r.apply(f,g)},i||(i=setTimeout(function(){if(i=null,n)return o()},e)),c)return c=!1,o()};return u.cancel=l,u.flush=a,u}function bi(r){return!P(r)&&"width"in r&&"height"in r&&ge(r.width)&&ge(r.height)}var cl=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);var xr=class extends me{#e;#t;#i=new Map;#r=!1;#o=[];#s=[-1,-1];#n=!1;#a;constructor(e,t){super(),this.#e=e,this.#t=t}onAttach(e){e.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(e){d(this.#k.bind(this)),this.#m(),this.#h(),this.#g(),this.#u(),$(this.#c.bind(this))}onDestroy(){let{audioTracks:e,qualities:t,textTracks:i}=this.#t;e[I.reset](),t[I.reset](),i[I.reset](),this.#M()}handle(e){if(!this.scope)return;let t=e.type;mt(()=>this[e.type]?.(e)),cl.has(t)&&this.#i.set(t,e),this.dispatch(e)}#l=!1;#u(){this.#l&&(requestAnimationFrame(()=>{this.scope&&this.#t.remote.play(new G("dom-connect"))}),this.#l=!1)}#c(){this.#l||(this.#l=!this.$state.paused(),this.#t.$provider()?.pause())}#p(){this.#V(),this.#r=!1,this.#e.replaying=!1,this.#e.looping=!1,this.#n=!1,this.#a=void 0,this.#i.clear()}#d(e,t){let i=this.#e.queue.serve(e);i&&(t.request=i,t.triggers.add(i))}#m(){this.#y(),this.#b();let e=this.#t.textTracks;S(e,"add",this.#y.bind(this)),S(e,"remove",this.#y.bind(this)),S(e,"mode-change",this.#b.bind(this))}#h(){let e=this.#t.qualities;S(e,"add",this.#v.bind(this)),S(e,"remove",this.#v.bind(this)),S(e,"change",this.#C.bind(this)),S(e,"auto-change",this.#f.bind(this)),S(e,"readonly-change",this.#$.bind(this))}#g(){let e=this.#t.audioTracks;S(e,"add",this.#T.bind(this)),S(e,"remove",this.#T.bind(this)),S(e,"change",this.#E.bind(this))}#y(e){let{textTracks:t}=this.$state;t.set(this.#t.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:t(),trigger:e})}#b(e){e&&this.#d("media-text-track-change-request",e);let t=this.#t.textTracks.selected,{textTrack:i}=this.$state;i()!==t&&(i.set(t),this.dispatch("text-track-change",{detail:t,trigger:e}))}#T(e){let{audioTracks:t}=this.$state;t.set(this.#t.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:t(),trigger:e})}#E(e){let{audioTrack:t}=this.$state;t.set(this.#t.audioTracks.selected),e&&this.#d("media-audio-track-change-request",e),this.dispatch("audio-track-change",{detail:t(),trigger:e})}#v(e){let{qualities:t}=this.$state;t.set(this.#t.qualities.toArray()),this.dispatch("qualities-change",{detail:t(),trigger:e})}#C(e){let{quality:t}=this.$state;t.set(this.#t.qualities.selected),e&&this.#d("media-quality-change-request",e),this.dispatch("quality-change",{detail:t(),trigger:e})}#f(){let{qualities:e}=this.#t,t=e.auto;this.$state.autoQuality.set(t),t||this.#M()}#x=null;#S(){this.#M(),this.#x=d(()=>{let{qualities:e}=this.#t,{mediaWidth:t,mediaHeight:i}=this.$state,o=t(),s=i();if(o===0||s===0)return;let n=null,l=1/0;for(let a of e){let u=Math.abs(a.width-o)+Math.abs(a.height-s);u<l&&(l=u,n=a)}n&&e[I.select](n,!0,new G("resize",{detail:{width:o,height:s}}))})}#M(){this.#x?.(),this.#x=null}#$(){this.$state.canSetQuality.set(!this.#t.qualities.readonly)}#k(){let{canSetVolume:e,isGoogleCastConnected:t}=this.$state;if(t()){e.set(!1);return}qa().then(e.set)}"provider-change"(e){let t=this.#t.$provider(),i=e.detail;t?.type!==i?.type&&(t?.destroy?.(),t?.scope?.dispose(),this.#t.$provider.set(e.detail),t&&e.detail===null&&this.#P(e))}"provider-loader-change"(e){}"auto-play"(e){this.$state.autoPlayError.set(null)}"auto-play-fail"(e){this.$state.autoPlayError.set(e.detail),this.#p()}"can-load"(e){this.$state.canLoad.set(!0),this.#i.set("can-load",e),this.#t.textTracks[te.canLoad](),this.#d("media-start-loading",e)}"can-load-poster"(e){this.$state.canLoadPoster.set(!0),this.#i.set("can-load-poster",e),this.#d("media-poster-start-loading",e)}"media-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.$state.viewType();this.$state.mediaType.set(e.detail);let o=this.$state.providedViewType(),s=o==="unknown"?e.detail:o;i!==s&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(e.detail),this.dispatch("view-type-change",{detail:s,trigger:e}))})},0)}"stream-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let{streamType:i,inferredStreamType:o}=this.$state;o.set(e.detail),e.detail=i()}"rate-change"(e){let{storage:t}=this.#t,{canPlay:i}=this.$state;this.$state.playbackRate.set(e.detail),this.#d("media-rate-change-request",e),i()&&t?.setPlaybackRate?.(e.detail)}"remote-playback-change"(e){let{remotePlaybackState:t,remotePlaybackType:i}=this.$state,{type:o,state:s}=e.detail,n=s==="connected";i.set(o),t.set(s);let l=o==="airplay"?"media-airplay-request":"media-google-cast-request";if(n)this.#d(l,e);else{let a=this.#e.queue.peek(l);a&&(e.request=a,e.triggers.add(a))}}"sources-change"(e){let t=this.$state.sources(),i=e.detail;this.$state.sources.set(i),this.#_(t,i,e)}#_(e,t,i){let{qualities:o}=this.#t,s=!1,n=!1;for(let l of e){if(!bi(l))continue;if(!t.some(u=>u.src===l.src)){let u=o.getBySrc(l.src);u&&(o[I.remove](u,i),n=!0)}}n&&!o.length&&(this.$state.savedState.set(null),o[I.reset](i));for(let l of t){if(!bi(l)||o.getBySrc(l.src))continue;let a={id:l.id??l.height+"p",bitrate:null,codec:null,...l,selected:!1};o[I.add](a,i),s=!0}s&&!o[Pe.enableAuto]&&(this.#S(),o[Pe.enableAuto]=this.#S.bind(this),o[Pe.setAuto](!0,i))}"source-change"(e){e.isQualityChange=e.originEvent?.type==="quality-change";let t=e.detail;this.#P(e,e.isQualityChange),this.#i.set(e.type,e),this.$state.source.set(t),this.el?.setAttribute("aria-busy","true")}#P(e,t=!1){let{audioTracks:i,qualities:o}=this.#t;if(!t){this.#o=[],this.#s=[-1,-1],i[I.reset](e),o[I.reset](e),Sn(this.$state,t),this.#p();return}Sn(this.$state,t),this.#p()}abort(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.#i.get("can-load");i&&!e.triggers.hasType("can-load")&&e.triggers.add(i)}"load-start"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t)}error(e){this.$state.error.set(e.detail);let t=this.#i.get("abort");t&&e.triggers.add(t)}"loaded-metadata"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"loaded-data"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"can-play"(e){let t=this.#i.get("loaded-metadata");t&&e.triggers.add(t),this.#w(e.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(e){this.#w(e.detail);let t=this.#i.get("can-play");t&&e.triggers.add(t)}#w(e){let{seekable:t,buffered:i,intrinsicDuration:o,canPlay:s}=this.$state;s.set(!0),i.set(e.buffered),t.set(e.seekable);let n=yt(e.seekable)??1/0;o.set(n)}"duration-change"(e){let{live:t,intrinsicDuration:i,providedDuration:o,clipEndTime:s,ended:n}=this.$state,l=e.detail;if(!t()){let a=Number.isNaN(l)?0:l;i.set(a),n()&&this.#A(e)}(o()>0||s()>0)&&e.stopImmediatePropagation()}progress(e){let{buffered:t,bufferedEnd:i,seekable:o,seekableEnd:s,live:n,intrinsicDuration:l}=this.$state,{buffered:a,seekable:u}=e.detail,c=yt(a)??1/0,f=a.length!==t().length,g=c>i(),T=yt(u)??1/0,C=u.length!==o().length,q=T>s();(f||g)&&t.set(a),(C||q)&&o.set(u),n()&&(l.set(T),this.dispatch("duration-change",{detail:T,trigger:e}))}play(e){let{paused:t,autoPlayError:i,ended:o,autoPlaying:s,playsInline:n,pointer:l,muted:a,viewType:u,live:c,userBehindLiveEdge:f}=this.$state;if(this.#R(),!t()){e.stopImmediatePropagation();return}e.autoPlay=s();let g=this.#i.get("waiting");g&&e.triggers.add(g),this.#d("media-play-request",e),this.#i.set("play",e),t.set(!1),i.set(null),e.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:a()},trigger:e})),s.set(!1)),(o()||this.#e.replaying)&&(this.#e.replaying=!1,o.set(!1),this.handle(this.createEvent("replay",{trigger:e}))),!n()&&u()==="video"&&l()==="coarse"&&this.#t.remote.enterFullscreen("prefer-media",e),c()&&!f()&&this.#t.remote.seekToLiveEdge(e)}#R(e){if(!v(this.#t.$provider))return;let{ended:i,seekableStart:o,clipStartTime:s,clipEndTime:n,realCurrentTime:l,duration:a}=this.$state,u=l()<s()||n()>0&&l()>=n()||Math.abs(l()-a())<.1||i();return u&&this.dispatch("media-seek-request",{detail:(s()>0?0:o())+.1,trigger:e}),u}"play-fail"(e){let{muted:t,autoPlaying:i}=this.$state,o=this.#i.get("play");o&&e.triggers.add(o),this.#d("media-play-request",e);let{paused:s,playing:n}=this.$state;s.set(!0),n.set(!1),this.#p(),this.#i.set("play-fail",e),e.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:t(),error:e.detail},trigger:e})),i.set(!1))}playing(e){let t=this.#i.get("play"),i=this.#i.get("seeked");t?e.triggers.add(t):i&&e.triggers.add(i),setTimeout(()=>this.#p(),0);let{paused:o,playing:s,live:n,liveSyncPosition:l,seekableEnd:a,started:u,currentTime:c,seeking:f,ended:g}=this.$state;if(o.set(!1),s.set(!0),f.set(!1),g.set(!1),this.#e.looping){this.#e.looping=!1;return}if(n()&&!u()&&c()===0){let T=l()??a()-2;Number.isFinite(T)&&this.#t.$provider().setCurrentTime(T)}this.started(e)}started(e){let{started:t}=this.$state;t()||(t.set(!0),this.handle(this.createEvent("started",{trigger:e})))}pause(e){this.el?.isConnected||(this.#l=!0),this.#d("media-pause-request",e);let t=this.#i.get("seeked");t&&e.triggers.add(t);let{paused:i,playing:o}=this.$state;i.set(!0),o.set(!1),this.#r&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:e})),this.#r=!1},0),this.#p()}"time-change"(e){if(this.#e.looping){e.stopImmediatePropagation();return}let{waiting:t,played:i,clipEndTime:o,realCurrentTime:s,currentTime:n}=this.$state,l=e.detail,a=o();s.set(l),this.#D(),t.set(!1);for(let u of this.#t.textTracks)u[te.updateActiveCues](l,e);a>0&&l>=a&&(this.#r=!0,this.dispatch("media-pause-request",{trigger:e})),this.#I(),this.dispatch("time-update",{detail:{currentTime:n(),played:i()},trigger:e})}#D(){let{currentTime:e,played:t,paused:i}=this.$state;i()||(this.#s=Na(this.#o,this.#s,e()),t.set(new Ot(this.#o)))}#A(e){let{clipStartTime:t,clipEndTime:i,duration:o}=this.$state;t()>0||i()>0||this.handle(this.createEvent("time-change",{detail:o(),trigger:e}))}#I(){let{storage:e}=this.#t,{canPlay:t,realCurrentTime:i}=this.$state;t()&&e?.setTime?.(i())}"audio-gain-change"(e){let{storage:t}=this.#t,{canPlay:i,audioGain:o}=this.$state;o.set(e.detail),this.#d("media-audio-gain-change-request",e),i()&&t?.setAudioGain?.(o())}"volume-change"(e){let{storage:t}=this.#t,{volume:i,muted:o,canPlay:s}=this.$state,n=e.detail;i.set(n.volume),o.set(n.muted||n.volume===0),this.#d("media-volume-change-request",e),this.#d(n.muted?"media-mute-request":"media-unmute-request",e),s()&&(t?.setVolume?.(i()),t?.setMuted?.(o()))}seeking=Se(e=>{let{seeking:t,realCurrentTime:i,paused:o}=this.$state;t.set(!0),i.set(e.detail),this.#d("media-seeking-request",e),o()&&(this.#a=e,this.#L()),this.#s=[-1,-1]},150,{leading:!0});seeked(e){let{seeking:t,currentTime:i,realCurrentTime:o,paused:s,seekableEnd:n,ended:l}=this.$state;if(this.#e.seeking)t.set(!0),e.stopImmediatePropagation();else if(t()){let a=this.#i.get("waiting");a&&e.triggers.add(a);let u=this.#i.get("seeking");u&&!e.triggers.has(u)&&e.triggers.add(u),s()&&this.#V(),t.set(!1),o.set(e.detail),this.#d("media-seek-request",e);let c=e?.originEvent;c?.isTrusted&&!(c instanceof MessageEvent)&&!/seek/.test(c.type)&&this.started(e)}Math.floor(i())!==Math.floor(n())?l.set(!1):this.end(e)}waiting(e){this.#n||this.#e.seeking||(e.stopImmediatePropagation(),this.#a=e,this.#L())}#L=Wt(()=>{if(!this.#a)return;this.#n=!0;let{waiting:e,playing:t}=this.$state;e.set(!0),t.set(!1);let i=this.createEvent("waiting",{trigger:this.#a});this.#i.set("waiting",i),this.dispatch(i),this.#a=void 0,this.#n=!1},300);end(e){let{loop:t,ended:i}=this.$state;if(!(!t()&&i())){if(t()){setTimeout(()=>{requestAnimationFrame(()=>{this.#R(e),this.dispatch("media-loop-request",{trigger:e})})},10);return}setTimeout(()=>this.#O(e),0)}}#O(e){let{storage:t}=this.#t,{paused:i,seeking:o,ended:s,duration:n}=this.$state;this.#A(e),i()||this.dispatch("pause",{trigger:e}),o()&&this.dispatch("seeked",{detail:n(),trigger:e}),s.set(!0),this.#p(),t?.setTime?.(n(),!0),this.dispatch("ended",{trigger:e})}#V(){this.#L.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(e){let t=e.detail;this.$state.fullscreen.set(t),this.#d(t?"media-enter-fullscreen-request":"media-exit-fullscreen-request",e)}"fullscreen-error"(e){this.#d("media-enter-fullscreen-request",e),this.#d("media-exit-fullscreen-request",e)}"orientation-change"(e){let t=e.detail.lock;this.#d(t?"media-orientation-lock-request":"media-orientation-unlock-request",e)}"picture-in-picture-change"(e){let t=e.detail;this.$state.pictureInPicture.set(t),this.#d(t?"media-enter-pip-request":"media-exit-pip-request",e)}"picture-in-picture-error"(e){this.#d("media-enter-pip-request",e),this.#d("media-exit-pip-request",e)}"title-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredTitle.set(e.detail))}"poster-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredPoster.set(e.detail))}};var Sr=class extends me{onSetup(){this.#e();let e=[this.#r,this.#s,this.#d,this.#m,this.#a,this.#u,this.#c,this.#h,this.#y,this.#g,this.#n,this.#p,this.#l,this.#t,this.#o];for(let t of e)d(t.bind(this))}#e(){let e={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},t=new Set(["currentTime","paused","playbackRate","volume"]);for(let i of Object.keys(this.$props))t.has(i)||this.$state[e[i]??i]?.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}#t(){let{viewType:e,streamType:t,title:i,poster:o,loop:s}=this.$props,n=this.$state;n.providedPoster.set(o()),n.providedStreamType.set(t()),n.providedViewType.set(e()),n.providedTitle.set(i()),n.providedLoop.set(s())}#i(){}#r(){let{artist:e,artwork:t}=this.$props;this.$state.artist.set(e()),this.$state.artwork.set(t())}#o(){let{title:e}=this.$state;this.dispatch("title-change",{detail:e()})}#s(){let e=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(e),this.dispatch("auto-play-change",{detail:e})}#n(){let e=this.$state.loop();this.dispatch("loop-change",{detail:e})}#a(){let e=this.$props.controls();this.$state.controls.set(e)}#l(){let{poster:e}=this.$state;this.dispatch("poster-change",{detail:e()})}#u(){let e=this.$props.crossOrigin()??this.$props.crossorigin(),t=e===!0?"":e;this.$state.crossOrigin.set(t)}#c(){let{duration:e}=this.$props;this.dispatch("media-duration-change-request",{detail:e()})}#p(){let e=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(e),this.dispatch("plays-inline-change",{detail:e})}#d(){let{clipStartTime:e}=this.$props;this.dispatch("media-clip-start-change-request",{detail:e()})}#m(){let{clipEndTime:e}=this.$props;this.dispatch("media-clip-end-change-request",{detail:e()})}#h(){this.dispatch("live-change",{detail:this.$state.live()})}#g(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#y(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}};var Mr=class{playerId="vds-player";mediaId=null;#e={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#e.volume}async setVolume(e){this.#e.volume=e,this.save()}async getMuted(){return this.#e.muted}async setMuted(e){this.#e.muted=e,this.save()}async getTime(){return this.#e.time}async setTime(e,t){let i=e<0;this.#e.time=i?null:e,i||t?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#e.lang}async setLang(e){this.#e.lang=e,this.save()}async getCaptions(){return this.#e.captions}async setCaptions(e){this.#e.captions=e,this.save()}async getPlaybackRate(){return this.#e.rate}async setPlaybackRate(e){this.#e.rate=e,this.save()}async getAudioGain(){return this.#e.audioGain}async setAudioGain(e){this.#e.audioGain=e,this.save()}async getVideoQuality(){return this.#e.quality}async setVideoQuality(e){this.#e.quality=e,this.save()}onChange(e,t,i="vds-player"){let o=i?localStorage.getItem(i):null,s=t?localStorage.getItem(t):null;this.playerId=i,this.mediaId=t,this.#e={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...o?JSON.parse(o):{},time:s?+s:null}}save(){if(!this.playerId)return;let e=JSON.stringify({...this.#e,time:void 0});localStorage.setItem(this.playerId,e)}saveTimeThrottled=Se(this.saveTime.bind(this),1e3);saveTime(){if(!this.mediaId)return;let e=(this.#e.time??0).toString();localStorage.setItem(this.mediaId,e)}};var pl=["play","pause","seekforward","seekbackward","seekto"],Cr=class extends me{onConnect(){d(this.#t.bind(this)),d(this.#i.bind(this));let e=this.#r.bind(this);for(let t of pl)navigator.mediaSession.setActionHandler(t,e);$(this.#e.bind(this))}#e(){for(let e of pl)navigator.mediaSession.setActionHandler(e,null)}#t(){let{title:e,artist:t,artwork:i,poster:o}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:e(),artist:t(),artwork:i()??[{src:o()}]})}#i(){let{canPlay:e,paused:t}=this.$state;navigator.mediaSession.playbackState=e()?t()?"paused":"playing":"none"}#r(e){let t=new G("media-session-action",{detail:e});switch(e.action){case"play":this.dispatch("media-play-request",{trigger:t});break;case"pause":this.dispatch("media-pause-request",{trigger:t});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:ge(e.seekTime)?e.seekTime:this.$state.currentTime()+(e.seekOffset??10),trigger:t});break}}};var $r=class{#e=null;#t=null;#i=-1;#r;constructor(e=void 0){this.#r=e}setTarget(e){this.#e=e}getPlayer(e){return this.#t?this.#t:((e??this.#e)?.dispatchEvent(new G("find-media-player",{detail:t=>void(this.#t=t),bubbles:!0,composed:!0})),this.#t)}setPlayer(e){this.#t=e}startLoading(e){this.#o("media-start-loading",e)}startLoadingPoster(e){this.#o("media-poster-start-loading",e)}requestAirPlay(e){this.#o("media-airplay-request",e)}requestGoogleCast(e){this.#o("media-google-cast-request",e)}play(e){this.#o("media-play-request",e)}pause(e){this.#o("media-pause-request",e)}mute(e){this.#o("media-mute-request",e)}unmute(e){this.#o("media-unmute-request",e)}enterFullscreen(e,t){this.#o("media-enter-fullscreen-request",t,e)}exitFullscreen(e,t){this.#o("media-exit-fullscreen-request",t,e)}lockScreenOrientation(e,t){this.#o("media-orientation-lock-request",t,e)}unlockScreenOrientation(e){this.#o("media-orientation-unlock-request",e)}enterPictureInPicture(e){this.#o("media-enter-pip-request",e)}exitPictureInPicture(e){this.#o("media-exit-pip-request",e)}seeking(e,t){this.#o("media-seeking-request",t,e)}seek(e,t){this.#o("media-seek-request",t,e)}seekToLiveEdge(e){this.#o("media-live-edge-request",e)}changeDuration(e,t){this.#o("media-duration-change-request",t,e)}changeClipStart(e,t){this.#o("media-clip-start-change-request",t,e)}changeClipEnd(e,t){this.#o("media-clip-end-change-request",t,e)}changeVolume(e,t){this.#o("media-volume-change-request",t,Math.max(0,Math.min(1,e)))}changeAudioTrack(e,t){this.#o("media-audio-track-change-request",t,e)}changeQuality(e,t){this.#o("media-quality-change-request",t,e)}requestAutoQuality(e){this.changeQuality(-1,e)}changeTextTrackMode(e,t,i){this.#o("media-text-track-change-request",i,{index:e,mode:t})}changePlaybackRate(e,t){this.#o("media-rate-change-request",t,e)}changeAudioGain(e,t){this.#o("media-audio-gain-change-request",t,e)}resumeControls(e){this.#o("media-resume-controls-request",e)}pauseControls(e){this.#o("media-pause-controls-request",e)}togglePaused(e){let t=this.getPlayer(e?.target);t&&(t.state.paused?this.play(e):this.pause(e))}toggleControls(e){let t=this.getPlayer(e?.target);t&&(t.controls.showing?t.controls.hide(0,e):t.controls.show(0,e))}toggleMuted(e){let t=this.getPlayer(e?.target);t&&(t.state.muted?this.unmute(e):this.mute(e))}toggleFullscreen(e,t){let i=this.getPlayer(t?.target);i&&(i.state.fullscreen?this.exitFullscreen(e,t):this.enterFullscreen(e,t))}togglePictureInPicture(e){let t=this.getPlayer(e?.target);t&&(t.state.pictureInPicture?this.exitPictureInPicture(e):this.enterPictureInPicture(e))}showCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,o=this.#i;(!i[o]||!j(i[o]))&&(o=-1),o===-1&&(o=i.findIndex(s=>j(s)&&s.default)),o===-1&&(o=i.findIndex(s=>j(s))),o>=0&&this.changeTextTrackMode(o,"showing",e),this.#i=-1}disableCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,o=t.state.textTrack;if(o){let s=i.indexOf(o);this.changeTextTrackMode(s,"disabled",e),this.#i=s}}toggleCaptions(e){let t=this.getPlayer(e?.target);t&&(t.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(e,t){this.#o("media-user-loop-change-request",t,e)}#o(e,t,i){let o=new G(e,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:t}),s=t?.target||null;s&&s instanceof b&&(s=s.el),s=!s||s===document||s===window||s===document.body||this.#t?.el&&s instanceof Node&&!this.#t.el.contains(s)?this.#e??this.getPlayer()?.el:s??this.#e,this.#t?e==="media-play-request"&&!this.#t.state.canLoad?s?.dispatchEvent(o):this.#t.canPlayQueue.enqueue(e,()=>s?.dispatchEvent(o)):s?.dispatchEvent(o)}#s(e){}};var Pr=class extends Bt{};var kr=class{priority=0;#e=!0;#t=null;#i=null;#r=new Set;canRender(e,t){return!!t}attach(e){this.#t=e,e&&(e.textTracks.onchange=this.#a.bind(this))}addTrack(e){this.#r.add(e),this.#o(e)}removeTrack(e){e[te.native]?.remove?.(),e[te.native]=null,this.#r.delete(e)}changeTrack(e){let t=e?.[te.native];t&&t.track.mode!=="showing"&&(t.track.mode="showing"),this.#i=e}setDisplay(e){this.#e=e,this.#a()}detach(){this.#t&&(this.#t.textTracks.onchange=null);for(let e of this.#r)this.removeTrack(e);this.#r.clear(),this.#t=null,this.#i=null}#o(e){if(!this.#t)return;let t=e[te.native]??=this.#s(e);Ee(t)&&(this.#t.append(t),t.track.mode=t.default?"showing":"disabled")}#s(e){let t=document.createElement("track"),i=e.default||e.mode==="showing",o=e.src&&e.type==="vtt";return t.id=e.id,t.src=o?e.src:"",t.label=e.label,t.kind=e.kind,t.default=i,e.language&&(t.srclang=e.language),i&&!o&&this.#n(e,t.track),t}#n(e,t){if(!(e.src&&e.type==="vtt"||t.cues?.length))for(let i of e.cues)t.addCue(i)}#a(e){for(let t of this.#r){let i=t[te.native];if(!i)continue;if(!this.#e){i.track.mode=i.managed?"hidden":"disabled";continue}let o=i.track.mode==="showing";o&&this.#n(t,i.track),t.setMode(o?"showing":"disabled",e)}}};var _r=class{#e=null;#t;#i=[];#r;#o=!1;#s=null;#n=null;constructor(e){this.#r=e;let t=e.textTracks;this.#t=t,d(this.#a.bind(this)),$(this.#m.bind(this)),S(t,"add",this.#c.bind(this)),S(t,"remove",this.#p.bind(this)),S(t,"mode-change",this.#d.bind(this))}#a(){let{nativeControls:e}=this.#r.$state;this.#o=e(),this.#d()}add(e){this.#i.push(e),mt(this.#d.bind(this))}remove(e){e.detach(),this.#i.splice(this.#i.indexOf(e),1),mt(this.#d.bind(this))}attachVideo(e){requestAnimationFrame(()=>{if(this.#e=e,e){this.#s=new kr,this.#s.attach(e);for(let t of this.#t)this.#l(t)}this.#d()})}#l(e){j(e)&&this.#s?.addTrack(e)}#u(e){j(e)&&this.#s?.removeTrack(e)}#c(e){this.#l(e.detail)}#p(e){this.#u(e.detail)}#d(){let e=this.#t.selected;if(this.#e&&(this.#o||e?.[te.nativeHLS])){this.#n?.changeTrack(null),this.#s?.setDisplay(!0),this.#s?.changeTrack(e);return}if(this.#s?.setDisplay(!1),this.#s?.changeTrack(null),!e){this.#n?.changeTrack(null);return}let t=this.#i.sort((i,o)=>i.priority-o.priority).find(i=>i.canRender(e,this.#e));this.#n!==t&&(this.#n?.detach(),t?.attach(this.#e),this.#n=t??null),t?.changeTrack(e)}#m(){this.#s?.detach(),this.#s=null,this.#n?.detach(),this.#n=null}};var wr=class extends Ft{#e=!1;#t={};#i=null;#r=null;[te.crossOrigin];constructor(){super()}get selected(){return this.items.find(t=>t.mode==="showing"&&j(t))??null}get selectedIndex(){let e=this.selected;return e?this.indexOf(e):-1}get preferredLang(){return this.#r}set preferredLang(e){this.#r=e,this.#u(e)}add(e,t){let i=e instanceof vt,o=i?e:new vt(e),s=e.kind==="captions"||e.kind==="subtitles"?"captions":e.kind;return this.#t[s]&&e.default&&delete e.default,o.addEventListener("mode-change",this.#n),this[I.add](o,t),o[te.crossOrigin]=this[te.crossOrigin],this.#e&&o[te.canLoad](),e.default&&(this.#t[s]=o),this.#o(),this}remove(e,t){if(this.#s=e,!!this.items.includes(e))return e===this.#t[e.kind]&&delete this.#t[e.kind],e.mode="disabled",e[te.onModeChange]=null,e.removeEventListener("mode-change",this.#n),this[I.remove](e,t),this.#s=null,this}clear(e){for(let t of[...this.items])this.remove(t,e);return this}getByKind(e){let t=Array.isArray(e)?e:[e];return this.items.filter(i=>t.includes(i.kind))}[te.canLoad](){if(!this.#e){for(let e of this.items)e[te.canLoad]();this.#e=!0,this.#o()}}#o=Wt(async()=>{if(!this.#e)return;!this.#r&&this.#i&&(this.#r=await this.#i.getLang());let e=await this.#i?.getCaptions(),t=[["captions","subtitles"],"chapters","descriptions","metadata"];for(let i of t){let o=this.getByKind(i);if(o.find(u=>u.mode==="showing"))continue;let s=this.#r?o.find(u=>u.language===this.#r):null,n=N(i)?this.#t[i.find(u=>this.#t[u])||""]:this.#t[i],l=s??n,a=l&&j(l);l&&(!a||e!==!1)&&(l.mode="showing",a&&this.#l(l))}},300);#s=null;#n=this.#a.bind(this);#a(e){let t=e.detail;if(this.#i&&j(t)&&t!==this.#s&&this.#l(t),t.mode==="showing"){let i=j(t)?["captions","subtitles"]:[t.kind];for(let o of this.items)o.mode==="showing"&&o!=t&&i.includes(o.kind)&&(o.mode="disabled")}this.dispatchEvent(new G("mode-change",{detail:e.detail,trigger:e}))}#l(e){e.mode!=="disabled"&&this.#u(e.language),this.#i?.setCaptions?.(e.mode==="showing")}#u(e){this.#i?.setLang?.(this.#r=e)}setStorage(e){this.#i=e}};var Ti=E(!1);S(document,"pointerdown",()=>{Ti.set(!1)}),S(document,"keydown",r=>{r.metaKey||r.altKey||r.ctrlKey||Ti.set(!0)});var X=class extends Z{#e=E(!1);onConnect(e){d(()=>{if(!Ti()){this.#e.set(!1),Lr(e,!1),this.listen("pointerenter",this.#r.bind(this)),this.listen("pointerleave",this.#o.bind(this));return}let t=document.activeElement===e;this.#e.set(t),Lr(e,t),this.listen("focus",this.#t.bind(this)),this.listen("blur",this.#i.bind(this))})}focused(){return this.#e()}#t(){this.#e.set(!0),Lr(this.el,!0)}#i(){this.#e.set(!1),Lr(this.el,!1)}#r(){ml(this.el,!0)}#o(){ml(this.el,!1)}};function Lr(r,e){x(r,"data-focus",e),x(r,"data-hocus",e)}function ml(r,e){x(r,"data-hocus",e),x(r,"data-hover",e)}var Rr=class r extends b{static props=ol;static state=xn;#e;#t;#i;canPlayQueue=new Qt;remoteControl;get#r(){return this.#e.$provider()}get#o(){return this.$props}constructor(){super(),new Sr;let e={player:this,qualities:new fr,audioTracks:new Pr,storage:null,$provider:E(null),$providerSetup:E(!1),$props:this.$props,$state:this.$state};e.remote=this.remoteControl=new $r(void 0),e.remote.setPlayer(this),e.textTracks=new wr,e.textTracks[te.crossOrigin]=this.$state.crossOrigin,e.textRenderers=new _r(e),e.ariaKeys={},this.#e=e,W(En,e),this.orientation=new Gt,new X,new hr(e);let t=new Er;this.#t=new xr(t,e),this.#i=new Tr(this.#t,t,e),e.delegate=new gr(this.#t.handle.bind(this.#t),e),e.notify=e.delegate.notify.bind(e.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new Cr,new vi("load",this.startLoading.bind(this)),new vi("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){this.#u(),d(this.#l.bind(this)),d(this.#g.bind(this)),d(this.#m.bind(this)),d(this.#E.bind(this)),d(this.#b.bind(this)),d(this.#x.bind(this)),d(this.#C.bind(this))}onAttach(e){e.setAttribute("data-media-player",""),L(e,"tabindex","0"),L(e,"role","region"),d(this.#M.bind(this)),d(this.#n.bind(this)),d(this.#a.bind(this)),S(e,"find-media-player",this.#c.bind(this))}onConnect(e){er&&x(e,"data-iphone","");let t=window.matchMedia("(pointer: coarse)");this.#d(t),t.onchange=this.#d.bind(this);let i=new ResizeObserver(ce(this.#p.bind(this)));i.observe(e),d(this.#p.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),$(()=>{i.disconnect(),t.onchange=null})}onDestroy(){this.#e.player=null,this.canPlayQueue.reset()}#s=!1;#n(){let e=this.$el,{title:t,live:i,viewType:o,providedTitle:s}=this.$state,n=i(),l=pi(o()),a=l!=="Unknown"?`${n?"Live ":""}${l}`:n?"Live":"Media",u=t();x(this.el,"aria-label",`${a} Player`+(u?` - ${u}`:"")),e?.hasAttribute("title")&&(this.#s=!0,e?.removeAttribute("title"))}#a(){let e=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(e),x(this.el,"data-orientation",e),this.#p()}#l(){this.$state.canPlay()&&this.#r?this.canPlayQueue.start():this.canPlayQueue.stop()}#u(){if(r[pr]){this.setAttributes(r[pr]);return}let e={"data-load":function(){return this.$props.load()},"data-captions":function(){let i=this.$state.textTrack();return!!i&&j(i)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:i,canPlay:o,waiting:s}=this.$state;return i()&&(!o()||s())},"data-error":function(){let{error:i}=this.$state;return!!i()},"data-autoplay-error":function(){let{autoPlayError:i}=this.$state;return!!i()}},t={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let i of el){let o="data-"+(t[i]??$e(i));e[o]=function(){return this.$state[i]()}}delete e.title,r[pr]=e,this.setAttributes(e)}#c(e){e.detail(this)}#p(){if(!this.el)return;let e=this.el.clientWidth,t=this.el.clientHeight;this.$state.width.set(e),this.$state.height.set(t),ae(this.el,"--player-width",e+"px"),ae(this.el,"--player-height",t+"px")}#d(e){let t=e.matches?"coarse":"fine";x(this.el,"data-pointer",t),this.$state.pointer.set(t),this.#p()}get provider(){return this.#r}get controls(){return this.#i.controls}set controls(e){this.#o.controls.set(e)}orientation;get title(){return v(this.$state.providedTitle)}set title(e){if(this.#s){this.#s=!1;return}this.$state.providedTitle.set(e)}get qualities(){return this.#e.qualities}get audioTracks(){return this.#e.audioTracks}get textTracks(){return this.#e.textTracks}get textRenderers(){return this.#e.textRenderers}get duration(){return this.$state.duration()}set duration(e){this.#o.duration.set(e)}get paused(){return v(this.$state.paused)}set paused(e){this.#h(e)}#m(){this.#h(this.$props.paused())}#h(e){e?this.canPlayQueue.enqueue("paused",()=>this.#i.pause()):this.canPlayQueue.enqueue("paused",()=>this.#i.play())}get muted(){return v(this.$state.muted)}set muted(e){this.#y(e)}#g(){this.#y(this.$props.muted())}#y(e){this.canPlayQueue.enqueue("muted",()=>{this.#r&&this.#r.setMuted(e)})}get currentTime(){return v(this.$state.currentTime)}set currentTime(e){this.#T(e)}#b(){this.#T(this.$props.currentTime())}#T(e){this.canPlayQueue.enqueue("currentTime",()=>{let{currentTime:t,clipStartTime:i,seekableStart:o,seekableEnd:s}=this.$state;e!==v(t)&&v(()=>{if(!this.#r)return;let n=e+i(),l=Math.floor(n)===Math.floor(s()),a=l?s():Math.min(Math.max(o()+.1,n),s()-.1);Number.isFinite(a)&&this.#r.setCurrentTime(a)})})}get volume(){return v(this.$state.volume)}set volume(e){this.#v(e)}#E(){this.#v(this.$props.volume())}#v(e){let t=fi(0,e,1);this.canPlayQueue.enqueue("volume",()=>{this.#r&&this.#r.setVolume(t)})}get playbackRate(){return v(this.$state.playbackRate)}set playbackRate(e){this.#f(e)}#C(){this.#f(this.$props.playbackRate())}#f(e){this.canPlayQueue.enqueue("rate",()=>{this.#r&&this.#r.setPlaybackRate?.(e)})}#x(){this.#S(this.$props.playsInline())}#S(e){this.canPlayQueue.enqueue("playsinline",()=>{this.#r&&this.#r.setPlaysInline?.(e)})}#M(){let e=this.$props.storage(),t=P(e)?new Mr:e;if(t?.onChange){let{source:i}=this.$state,o=P(e)?e:this.el?.id,s=w(this.#$.bind(this));d(()=>t.onChange(i(),s(),o||void 0))}this.#e.storage=t,this.#e.textTracks.setStorage(t),$(()=>{t?.onDestroy?.(),this.#e.storage=null,this.#e.textTracks.setStorage(null)})}#$(){let{clipStartTime:e,clipEndTime:t}=this.$props,{source:i}=this.$state,o=i();return o.src?`${o.src}:${e()}:${t()}`:null}async play(e){return this.#i.play(e)}async pause(e){return this.#i.pause(e)}async enterFullscreen(e,t){return this.#i.enterFullscreen(e,t)}async exitFullscreen(e,t){return this.#i.exitFullscreen(e,t)}enterPictureInPicture(e){return this.#i.enterPictureInPicture(e)}exitPictureInPicture(e){return this.#i.exitPictureInPicture(e)}seekToLiveEdge(e){this.#i.seekToLiveEdge(e)}startLoading(e){this.#e.notify("can-load",void 0,e)}startLoadingPoster(e){this.#e.notify("can-load-poster",void 0,e)}requestAirPlay(e){return this.#i.requestAirPlay(e)}requestGoogleCast(e){return this.#i.requestGoogleCast(e)}setAudioGain(e,t){return this.#i.setAudioGain(e,t)}destroy(){super.destroy(),this.#e.remote.setPlayer(null),this.dispatch("destroy")}};var Ar=class extends y(HTMLElement,Rr){static tagName="media-player";static attrs={autoPlay:"autoplay",crossOrigin:"crossorigin",playsInline:"playsinline",preferNativeHLS:"prefer-native-hls",minLiveDVRWindow:"min-live-dvr-window"}};var Dr=class{name="audio";target;canPlay(e){return Fa(e)?!P(e.src)||e.type==="?"||Ia(this.target,e.type):!1}mediaType(){return"audio"}async load(e){return new(await import("./providers/vidstack-audio.js")).AudioProvider(this.target,e)}};var st=class{name="video";target;canPlay(e){return Ba(e)?!P(e.src)||e.type==="?"||Oa(this.target,e.type):!1}mediaType(){return"video"}async load(e){return new(await import("./providers/vidstack-video.js")).VideoProvider(this.target,e)}};var Vr=class r extends st{static supported=Ha();name="dash";canPlay(e){return r.supported&&hi(e)}async load(e){return new(await import("./providers/vidstack-dash.js")).DASHProvider(this.target,e)}};var Ir=class r extends st{static supported=ir();name="hls";canPlay(e){return r.supported&&mi(e)}async load(e){return new(await import("./providers/vidstack-hls.js")).HLSProvider(this.target,e)}};var Or=class{name="vimeo";target;preconnect(){let e=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(let t of e)Be(t)}canPlay(e){return P(e.src)&&e.type==="video/vimeo"}mediaType(){return"video"}async load(e){return new(await import("./providers/vidstack-vimeo.js")).VimeoProvider(this.target,e)}async loadPoster(e,t,i){let{resolveVimeoVideoId:o,getVimeoVideoInfo:s}=await import("./chunks/vidstack-JUYOWWVN.js");if(!P(e.src))return null;let{videoId:n,hash:l}=o(e.src);return n?s(n,i,l).then(a=>a?a.poster:null):null}};var qr=class{name="youtube";target;preconnect(){let e=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(let t of e)Be(t)}canPlay(e){return P(e.src)&&e.type==="video/youtube"}mediaType(){return"video"}async load(e){return new(await import("./providers/vidstack-youtube.js")).YouTubeProvider(this.target,e)}async loadPoster(e,t,i){let{findYouTubePoster:o,resolveYouTubeVideoId:s}=await import("./chunks/vidstack-PK326JNQ.js"),n=P(e.src)&&s(e.src);return n?o(n,i):null}};function hl(r,e){return fetch(r,e).then(t=>t.text()).then(t=>/type="static"/.test(t)?"on-demand":"live")}function Pn(r,e){return fetch(r,e).then(t=>t.text()).then(t=>{let i=Kd(t);if(i)return Pn(/^https?:/.test(i)?i:new URL(i,r).href,e);let o=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(t)?"on-demand":"live";return o==="live"&&Ud(t)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(t)||t.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":o})}function Kd(r){let e=r.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split(`
`)[1].trim():null}function Ud(r){let e=r.split(`
`);for(let t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){let i=parseFloat(t.split(":")[1]);if(!isNaN(i))return i}return-1}var kn=new Map,Hr=class{#e=!1;#t;#i;#r;#o;constructor(e,t,i,o=[]){this.#i=e,this.#r=t,this.#o=i;let s=new Vr,n=new Ir,l=new st,a=new Dr,u=new qr,c=new Or,f=[u,c];this.#t=w(()=>{let T=t.$state.remotePlaybackLoader(),C=t.$props.preferNativeHLS()?[l,a,s,n,...f,...o]:[n,l,a,s,...f,...o];return T?[T,...C]:C});let{$state:g}=t;g.sources.set(fl(t.$props.src()));for(let T of g.sources()){let C=this.#t().find(D=>D.canPlay(T));if(!C)continue;let q=C.mediaType(T);t.$state.source.set(T),t.$state.mediaType.set(q),t.$state.inferredViewType.set(q),this.#o.set(C),this.#e=!0;break}}connect(){let e=this.#o();this.#e&&(this.#l(this.#r.$state.source(),e),this.#u(e),this.#e=!1),d(this.#s.bind(this)),d(this.#n.bind(this)),d(this.#c.bind(this)),d(this.#p.bind(this)),d(this.#d.bind(this))}#s(){this.#r.notify("sources-change",[...fl(this.#r.$props.src()),...this.#i()])}#n(){let{$state:e}=this.#r,t=e.sources(),i=v(e.source),o=this.#a(i,t);if(t[0]?.src&&!o.src&&!o.type){let{crossOrigin:n}=e,l=qt(n()),a=new AbortController;return Promise.all(t.map(u=>P(u.src)&&u.type==="?"?fetch(u.src,{method:"HEAD",credentials:l,signal:a.signal}).then(c=>(u.type=c.headers.get("content-type")||"??",kn.set(u.src,u.type),u)).catch(()=>u):u)).then(u=>{if(a.signal.aborted)return;let c=this.#a(v(e.source),u);ne(),c.src||this.#r.notify("error",{message:"Failed to load resource.",code:4})}),()=>a.abort()}ne()}#a(e,t){let i={src:"",type:""},o=null,s=new G("sources-change",{detail:{sources:t}}),n=this.#t(),{started:l,paused:a,currentTime:u,quality:c,savedState:f}=this.#r.$state;for(let g of t){let T=n.find(C=>C.canPlay(g));if(T){i=g,o=T;break}}if(bi(i)){let g=c(),T=t.find(C=>C.src===g?.src);v(l)?f.set({paused:v(a),currentTime:v(u)}):f.set(null),T&&(i=T,s=new G("quality-change",{detail:{quality:g}}))}return yl(e,i)||this.#l(i,o,s),o!==v(this.#o)&&this.#u(o,s),i}#l(e,t,i){this.#r.notify("source-change",e,i),this.#r.notify("media-type-change",t?.mediaType(e)||"unknown",i)}#u(e,t){this.#r.$providerSetup.set(!1),this.#r.notify("provider-change",null,t),e&&v(()=>e.preconnect?.(this.#r)),this.#o.set(e),this.#r.notify("provider-loader-change",e,t)}#c(){let e=this.#r.$provider();if(!(!e||v(this.#r.$providerSetup))){if(this.#r.$state.canLoad()){He(()=>e.setup(),e.scope),this.#r.$providerSetup.set(!0);return}v(()=>e.preconnect?.())}}#p(){if(!this.#r.$providerSetup())return;let e=this.#r.$provider(),t=this.#r.$state.source(),i=v(this.#r.$state.crossOrigin),o=v(this.#r.$props.preferNativeHLS);if(!yl(e?.currentSrc,t)){if(this.#r.$state.canLoad()){let s=new AbortController;return mi(t)?(o||!ir())&&Pn(t.src,{credentials:qt(i),signal:s.signal}).then(n=>{this.#r.notify("stream-type-change",n)}).catch(ci):hi(t)?hl(t.src,{credentials:qt(i),signal:s.signal}).then(n=>{this.#r.notify("stream-type-change",n)}).catch(ci):this.#r.notify("stream-type-change","on-demand"),v(()=>{let n=v(this.#r.$state.preload);return e?.loadSource(t,n).catch(l=>{})}),()=>s.abort()}try{P(t.src)&&Be(new URL(t.src).origin)}catch{}}}#d(){let e=this.#o(),{providedPoster:t,source:i,canLoadPoster:o}=this.#r.$state;if(!e||!e.loadPoster||!i()||!o()||t())return;let s=new AbortController,n=new G("source-change",{detail:i});return e.loadPoster(i(),this.#r,s).then(l=>{this.#r.notify("poster-change",l||"",n)}).catch(()=>{this.#r.notify("poster-change","",n)}),()=>{s.abort()}}};function fl(r){return(N(r)?r:[r]).map(e=>P(e)?{src:e,type:gl(e)}:{...e,type:gl(e.src,e.type)})}function gl(r,e){return P(e)&&e.length?e:P(r)&&kn.has(r)?kn.get(r):!e&&mi({src:r,type:""})?"application/x-mpegurl":!e&&hi({src:r,type:""})?"application/dash+xml":!P(r)||r.startsWith("blob:")?"video/object":r.includes("youtube")||r.includes("youtu.be")?"video/youtube":r.includes("vimeo")&&!r.includes("progressive_redirect")&&!r.includes(".m3u8")?"video/vimeo":"?"}function yl(r,e){return r?.src===e?.src&&r?.type===e?.type}var Nr=class{#e;#t;#i=[];constructor(e,t){this.#e=e,this.#t=t,d(this.#r.bind(this))}#r(){let e=this.#e();for(let t of this.#i)if(!e.some(i=>i.id===t.id)){let i=t.id&&this.#t.textTracks.getById(t.id);i&&this.#t.textTracks.remove(i)}for(let t of e){let i=t.id||vt.createId(t);this.#t.textTracks.getById(i)||(t.id=i,this.#t.textTracks.add(t))}this.#i=e}};var Fr=class extends b{static props={loaders:[]};static state=new ue({loader:null});#e;#t;#i=E([]);#r=E([]);#o=null;onSetup(){this.#e=h(),this.#t=new Hr(this.#i,this.#e,this.$state.loader,this.$props.loaders())}onAttach(e){e.setAttribute("data-media-provider","")}onConnect(e){this.#t.connect(),new Nr(this.#r,this.#e);let t=new ResizeObserver(ce(this.#l.bind(this)));t.observe(e);let i=new MutationObserver(this.#u.bind(this));i.observe(e,{attributes:!0,childList:!0}),this.#l(),this.#u(),$(()=>{t.disconnect(),i.disconnect()})}#s=-1;load(e){e?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(this.#s),this.#s=requestAnimationFrame(()=>this.#n(e)),$(()=>{window.cancelAnimationFrame(this.#s)})}#n(e){if(!this.scope)return;let t=this.$state.loader(),{$provider:i}=this.#e;this.#o===t&&t?.target===e&&v(i)||(this.#a(),this.#o=t,t&&(t.target=e||null),!(!t||!e)&&t.load(this.#e).then(o=>{this.scope&&v(this.$state.loader)===t&&this.#e.notify("provider-change",o)}))}onDestroy(){this.#o=null,this.#a()}#a(){this.#e?.notify("provider-change",null)}#l(){if(!this.el)return;let{player:e,$state:t}=this.#e,i=this.el.offsetWidth,o=this.el.offsetHeight;e&&(t.mediaWidth.set(i),t.mediaHeight.set(o),e.el&&(ae(e.el,"--media-width",i+"px"),ae(e.el,"--media-height",o+"px")))}#u(){let e=[],t=[],i=this.el.children;for(let o of i)if(!o.hasAttribute("data-vds")){if(o instanceof HTMLSourceElement){let s={id:o.id,src:o.src,type:o.type};for(let n of["id","src","width","height","bitrate","codec"]){let l=o.getAttribute(`data-${n}`);P(l)&&(s[n]=/id|src|codec/.test(n)?l:Number(l))}e.push(s)}else if(o instanceof HTMLTrackElement){let s={src:o.src,kind:o.track.kind,language:o.srclang,label:o.label,default:o.default,type:o.getAttribute("data-type")};t.push({id:o.id||vt.createId(s),...s})}}this.#i.set(e),this.#r.set(t),ne()}};var Br=class extends y(HTMLElement,Fr){static tagName="media-provider";#e;#t=null;#i=null;onSetup(){this.#e=h(),this.setAttribute("keep-alive","")}onDestroy(){this.#i?.remove(),this.#i=null,this.#t?.remove(),this.#t=null}onConnect(){d(()=>{let e=this.$state.loader(),t=e?.name==="youtube",i=e?.name==="vimeo",o=t||i,s=e?.name==="google-cast",n=e?s?this.#n():o?this.#s():e.mediaType()==="audio"?this.#r():this.#o():null;if(this.#t!==n){let l=this.#t?.parentElement??this;this.#t?.remove(),this.#t=n,n&&l.prepend(n),o&&n&&d(()=>{let{nativeControls:a,viewType:u}=this.#e.$state,c=a(),f=u()==="audio";!c&&!f?(this.#i=this.querySelector(".vds-blocker"),this.#i||(this.#i=document.createElement("div"),this.#i.classList.add("vds-blocker"),n.after(this.#i))):(this.#i?.remove(),this.#i=null),x(n,"data-no-controls",!c)})}t?n?.classList.add("vds-youtube"):i&&n?.classList.add("vds-vimeo"),o||(this.#i?.remove(),this.#i=null),this.load(n)})}#r(){let e=this.#t instanceof HTMLAudioElement?this.#t:document.createElement("audio"),{controls:t,crossOrigin:i}=this.#e.$state;return d(()=>{x(e,"controls",t()),x(e,"crossorigin",i())}),e}#o(){let e=this.#t instanceof HTMLVideoElement?this.#t:document.createElement("video"),{crossOrigin:t,poster:i,nativeControls:o}=this.#e.$state,s=w(()=>o()?"true":null),n=w(()=>i()&&o()?i():null);return d(()=>{x(e,"controls",s()),x(e,"crossorigin",t()),x(e,"poster",n())}),e}#s(){let e=this.#t instanceof HTMLIFrameElement?this.#t:document.createElement("iframe"),{nativeControls:t}=this.#e.$state;return d(()=>x(e,"tabindex",t()?null:-1)),e}#n(){if(this.#t?.classList.contains("vds-google-cast"))return this.#t;let e=document.createElement("div");return e.classList.add("vds-google-cast"),import("./chunks/vidstack-X3E4VRRZ.js").then(({insertContent:t})=>{t(e,this.#e.$state)}),e}};k(Ar);k(Br);var _n=re();function M(){return A(_n)}var vl={colorScheme:"system",download:null,customIcons:!1,disableTimeSlider:!1,menuContainer:null,menuGroup:"bottom",noAudioGain:!1,noGestures:!1,noKeyboardAnimations:!1,noModal:!1,noScrubGesture:!1,playbackRates:{min:0,max:2,step:.25},audioGains:{min:0,max:300,step:25},seekStep:10,sliderChaptersMinWidth:325,hideQualityBitrate:!1,smallWhen:!1,thumbnails:null,translations:null,when:!1};var Kt=class extends b{static props=vl;#e;#t=w(()=>{let e=this.$props.when();return this.#r(e)});#i=w(()=>{let e=this.$props.smallWhen();return this.#r(e)});get isMatch(){return this.#t()}get isSmallLayout(){return this.#i()}onSetup(){this.#e=h(),this.setAttributes({"data-match":this.#t,"data-sm":()=>this.#i()?"":null,"data-lg":()=>this.#i()?null:"","data-size":()=>this.#i()?"sm":"lg","data-no-scrub-gesture":this.$props.noScrubGesture});let e=this;W(_n,{...this.$props,when:this.#t,smallWhen:this.#i,userPrefersAnnouncements:E(!0),userPrefersKeyboardAnimations:E(!0),menuPortal:E(null)})}onAttach(e){cr(e,this.$props.colorScheme)}#r(e){return e!=="never"&&(Xi(e)?e:w(()=>e(this.#e.player.state))())}};var Gr=class extends Kt{static props={...super.props,when:({viewType:e})=>e==="audio",smallWhen:({width:e})=>e<576}};var wn,Ln,Rn,An;var Me=window,R=r=>{Me.emitLitDebugLogEvents&&Me.dispatchEvent(new CustomEvent("lit-debug",{detail:r}))},zd=0,Qr;(wn=Me.litIssuedWarnings)!==null&&wn!==void 0||(Me.litIssuedWarnings=new Set),Qr=(r,e)=>{e+=r?` See https://lit.dev/msg/${r} for more information.`:"",Me.litIssuedWarnings.has(e)||(console.warn(e),Me.litIssuedWarnings.add(e))},Qr("dev-mode","Lit is in dev mode. Not recommended for production!");var Ae=!((Ln=Me.ShadyDOM)===null||Ln===void 0)&&Ln.inUse&&((Rn=Me.ShadyDOM)===null||Rn===void 0?void 0:Rn.noPatch)===!0?Me.ShadyDOM.wrap:r=>r,Ut=Me.trustedTypes,bl=Ut?Ut.createPolicy("lit-html",{createHTML:r=>r}):void 0,Yd=r=>r,Zr=(r,e,t)=>Yd,jd=r=>{if(St!==Zr)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");St=r},Xd=()=>{St=Zr},Hn=(r,e,t)=>St(r,e,t),Wr="$lit$",Ke=`lit$${String(Math.random()).slice(9)}$`,Nn="?"+Ke,Jd=`<${Nn}>`,Et=document,xi=()=>Et.createComment(""),Si=r=>r===null||typeof r!="object"&&typeof r!="function",$l=Array.isArray,Pl=r=>$l(r)||typeof r?.[Symbol.iterator]=="function",Dn=`[ 	
\f\r]`,Zd=`[^ 	
\f\r"'\`<>=]`,eu=`[^\\s"'>=/]`,Ei=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Tl=1,Vn=2,tu=3,El=/-->/g,xl=/>/g,nt=new RegExp(`>|${Dn}(?:(${eu}+)(${Dn}*=${Dn}*(?:${Zd}|("|')|))|$)`,"g"),iu=0,Sl=1,ru=2,Ml=3,In=/'/g,On=/"/g,kl=/^(?:script|style|textarea|title)$/i,_l=1,Kr=2,Fn=1,Ur=2,ou=3,su=4,nu=5,Bn=6,au=7,wl=r=>(e,...t)=>(e.some(i=>i===void 0)&&console.warn(`Some template strings are undefined.
This is probably caused by illegal octal escape sequences.`),{_$litType$:r,strings:e,values:t}),p=wl(_l),ug=wl(Kr),xt=Symbol.for("lit-noChange"),H=Symbol.for("lit-nothing"),Cl=new WeakMap,Tt=Et.createTreeWalker(Et,129,null,!1),St=Zr;function Ll(r,e){if(!Array.isArray(r)||!r.hasOwnProperty("raw")){let t="invalid template strings array";throw t=`
          Internal Error: expected template strings to be an array
          with a 'raw' field. Faking a template strings array by
          calling html or svg like an ordinary function is effectively
          the same as calling unsafeHtml and can lead to major security
          issues, e.g. opening your code up to XSS attacks.
          If you're using the html or svg tagged template functions normally
          and still seeing this error, please file a bug at
          https://github.com/lit/lit/issues/new?template=bug_report.md
          and include information about your build tooling, if any.
        `.trim().replace(/\n */g,`
`),new Error(t)}return bl!==void 0?bl.createHTML(e):e}var Rl=(r,e)=>{let t=r.length-1,i=[],o=e===Kr?"<svg>":"",s,n=Ei;for(let a=0;a<t;a++){let u=r[a],c=-1,f,g=0,T;for(;g<u.length&&(n.lastIndex=g,T=n.exec(u),T!==null);)if(g=n.lastIndex,n===Ei){if(T[Tl]==="!--")n=El;else if(T[Tl]!==void 0)n=xl;else if(T[Vn]!==void 0)kl.test(T[Vn])&&(s=new RegExp(`</${T[Vn]}`,"g")),n=nt;else if(T[tu]!==void 0)throw new Error("Bindings in tag names are not supported. Please use static templates instead. See https://lit.dev/docs/templates/expressions/#static-expressions")}else n===nt?T[iu]===">"?(n=s??Ei,c=-1):T[Sl]===void 0?c=-2:(c=n.lastIndex-T[ru].length,f=T[Sl],n=T[Ml]===void 0?nt:T[Ml]==='"'?On:In):n===On||n===In?n=nt:n===El||n===xl?n=Ei:(n=nt,s=void 0);console.assert(c===-1||n===nt||n===In||n===On,"unexpected parse state B");let C=n===nt&&r[a+1].startsWith("/>")?" ":"";o+=n===Ei?u+Jd:c>=0?(i.push(f),u.slice(0,c)+Wr+u.slice(c)+Ke+C):u+Ke+(c===-2?(i.push(void 0),a):C)}let l=o+(r[t]||"<?>")+(e===Kr?"</svg>":"");return[Ll(r,l),i]},Mi=class r{constructor({strings:e,["_$litType$"]:t},i){this.parts=[];let o,s=0,n=0,l=e.length-1,a=this.parts,[u,c]=Rl(e,t);if(this.el=r.createElement(u,i),Tt.currentNode=this.el.content,t===Kr){let f=this.el.content,g=f.firstChild;g.remove(),f.append(...g.childNodes)}for(;(o=Tt.nextNode())!==null&&a.length<l;){if(o.nodeType===1){{let f=o.localName;if(/^(?:textarea|template)$/i.test(f)&&o.innerHTML.includes(Ke)){let g=`Expressions are not supported inside \`${f}\` elements. See https://lit.dev/msg/expression-in-${f} for more information.`;if(f==="template")throw new Error(g);Qr("",g)}}if(o.hasAttributes()){let f=[];for(let g of o.getAttributeNames())if(g.endsWith(Wr)||g.startsWith(Ke)){let T=c[n++];if(f.push(g),T!==void 0){let q=o.getAttribute(T.toLowerCase()+Wr).split(Ke),D=/([.?@])?(.*)/.exec(T);a.push({type:Fn,index:s,name:D[2],strings:q,ctor:D[1]==="."?Yr:D[1]==="?"?jr:D[1]==="@"?Xr:Ct})}else a.push({type:Bn,index:s})}for(let g of f)o.removeAttribute(g)}if(kl.test(o.tagName)){let f=o.textContent.split(Ke),g=f.length-1;if(g>0){o.textContent=Ut?Ut.emptyScript:"";for(let T=0;T<g;T++)o.append(f[T],xi()),Tt.nextNode(),a.push({type:Ur,index:++s});o.append(f[g],xi())}}}else if(o.nodeType===8)if(o.data===Nn)a.push({type:Ur,index:s});else{let g=-1;for(;(g=o.data.indexOf(Ke,g+1))!==-1;)a.push({type:au,index:s}),g+=Ke.length-1}s++}R?.({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){let i=Et.createElement("template");return i.innerHTML=e,i}};function Mt(r,e,t=r,i){var o,s,n,l;if(e===xt)return e;let a=i!==void 0?(o=t.__directives)===null||o===void 0?void 0:o[i]:t.__directive,u=Si(e)?void 0:e._$litDirective$;return a?.constructor!==u&&((s=a?._$notifyDirectiveConnectionChanged)===null||s===void 0||s.call(a,!1),u===void 0?a=void 0:(a=new u(r),a._$initialize(r,t,i)),i!==void 0?((n=(l=t).__directives)!==null&&n!==void 0?n:l.__directives=[])[i]=a:t.__directive=a),a!==void 0&&(e=Mt(r,a._$resolve(r,e.values),a,i)),e}var zr=class{constructor(e,t){this._$parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){var t;let{el:{content:i},parts:o}=this._$template,s=((t=e?.creationScope)!==null&&t!==void 0?t:Et).importNode(i,!0);Tt.currentNode=s;let n=Tt.nextNode(),l=0,a=0,u=o[0];for(;u!==void 0;){if(l===u.index){let c;u.type===Ur?c=new zt(n,n.nextSibling,this,e):u.type===Fn?c=new u.ctor(n,u.name,u.strings,this,e):u.type===Bn&&(c=new Jr(n,this,e)),this._$parts.push(c),u=o[++a]}l!==u?.index&&(n=Tt.nextNode(),l++)}return Tt.currentNode=Et,s}_update(e){let t=0;for(let i of this._$parts)i!==void 0&&(R?.({kind:"set part",part:i,value:e[t],valueIndex:t,values:e,templateInstance:this}),i.strings!==void 0?(i._$setValue(e,i,t),t+=i.strings.length-2):i._$setValue(e[t])),t++}},zt=class r{constructor(e,t,i,o){var s;this.type=Ur,this._$committedValue=H,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=i,this.options=o,this.__isConnected=(s=o?.isConnected)!==null&&s!==void 0?s:!0,this._textSanitizer=void 0}get _$isConnected(){var e,t;return(t=(e=this._$parent)===null||e===void 0?void 0:e._$isConnected)!==null&&t!==void 0?t:this.__isConnected}get parentNode(){let e=Ae(this._$startNode).parentNode,t=this._$parent;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){var i;if(this.parentNode===null)throw new Error("This `ChildPart` has no `parentNode` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's `innerHTML` or `textContent` can do this.");if(e=Mt(this,e,t),Si(e))e===H||e==null||e===""?(this._$committedValue!==H&&(R?.({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=H):e!==this._$committedValue&&e!==xt&&this._commitText(e);else if(e._$litType$!==void 0)this._commitTemplateResult(e);else if(e.nodeType!==void 0){if(((i=this.options)===null||i===void 0?void 0:i.host)===e){this._commitText("[probable mistake: rendered a template's host in itself (commonly caused by writing ${this} in a template]"),console.warn("Attempted to render the template host",e,"inside itself. This is almost always a mistake, and in dev mode ","we render some warning text. In production however, we'll ","render it, which will usually result in an error, and sometimes ","in the element disappearing from the DOM.");return}this._commitNode(e)}else Pl(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return Ae(Ae(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){var t;if(this._$committedValue!==e){if(this._$clear(),St!==Zr){let i=(t=this._$startNode.parentNode)===null||t===void 0?void 0:t.nodeName;if(i==="STYLE"||i==="SCRIPT"){let o="Forbidden";throw i==="STYLE"?o="Lit does not support binding inside style nodes. This is a security risk, as style injection attacks can exfiltrate data and spoof UIs. Consider instead using css`...` literals to compose styles, and make do dynamic styling with css custom properties, ::parts, <slot>s, and by mutating the DOM rather than stylesheets.":o="Lit does not support binding inside script nodes. This is a security risk, as it could allow arbitrary code execution.",new Error(o)}}R?.({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e)}}_commitText(e){if(this._$committedValue!==H&&Si(this._$committedValue)){let t=Ae(this._$startNode).nextSibling;this._textSanitizer===void 0&&(this._textSanitizer=Hn(t,"data","property")),e=this._textSanitizer(e),R?.({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else{let t=Et.createTextNode("");this._commitNode(t),this._textSanitizer===void 0&&(this._textSanitizer=Hn(t,"data","property")),e=this._textSanitizer(e),R?.({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}this._$committedValue=e}_commitTemplateResult(e){var t;let{values:i,["_$litType$"]:o}=e,s=typeof o=="number"?this._$getTemplate(e):(o.el===void 0&&(o.el=Mi.createElement(Ll(o.h,o.h[0]),this.options)),o);if(((t=this._$committedValue)===null||t===void 0?void 0:t._$template)===s)R?.({kind:"template updating",template:s,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:i}),this._$committedValue._update(i);else{let n=new zr(s,this),l=n._clone(this.options);R?.({kind:"template instantiated",template:s,instance:n,parts:n._$parts,options:this.options,fragment:l,values:i}),n._update(i),R?.({kind:"template instantiated and updated",template:s,instance:n,parts:n._$parts,options:this.options,fragment:l,values:i}),this._commitNode(l),this._$committedValue=n}}_$getTemplate(e){let t=Cl.get(e.strings);return t===void 0&&Cl.set(e.strings,t=new Mi(e)),t}_commitIterable(e){$l(this._$committedValue)||(this._$committedValue=[],this._$clear());let t=this._$committedValue,i=0,o;for(let s of e)i===t.length?t.push(o=new r(this._insert(xi()),this._insert(xi()),this,this.options)):o=t[i],o._$setValue(s),i++;i<t.length&&(this._$clear(o&&Ae(o._$endNode).nextSibling,i),t.length=i)}_$clear(e=Ae(this._$startNode).nextSibling,t){var i;for((i=this._$notifyConnectionChanged)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$endNode;){let o=Ae(e).nextSibling;Ae(e).remove(),e=o}}setConnected(e){var t;if(this._$parent===void 0)this.__isConnected=e,(t=this._$notifyConnectionChanged)===null||t===void 0||t.call(this,e);else throw new Error("part.setConnected() may only be called on a RootPart returned from render().")}},Ct=class{constructor(e,t,i,o,s){this.type=Fn,this._$committedValue=H,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=o,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$committedValue=new Array(i.length-1).fill(new String),this.strings=i):this._$committedValue=H,this._sanitizer=void 0}get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e,t=this,i,o){let s=this.strings,n=!1;if(s===void 0)e=Mt(this,e,t,0),n=!Si(e)||e!==this._$committedValue&&e!==xt,n&&(this._$committedValue=e);else{let l=e;e=s[0];let a,u;for(a=0;a<s.length-1;a++)u=Mt(this,l[i+a],t,a),u===xt&&(u=this._$committedValue[a]),n||(n=!Si(u)||u!==this._$committedValue[a]),u===H?e=H:e!==H&&(e+=(u??"")+s[a+1]),this._$committedValue[a]=u}n&&!o&&this._commitValue(e)}_commitValue(e){e===H?Ae(this.element).removeAttribute(this.name):(this._sanitizer===void 0&&(this._sanitizer=St(this.element,this.name,"attribute")),e=this._sanitizer(e??""),R?.({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),Ae(this.element).setAttribute(this.name,e??""))}},Yr=class extends Ct{constructor(){super(...arguments),this.type=ou}_commitValue(e){this._sanitizer===void 0&&(this._sanitizer=St(this.element,this.name,"property")),e=this._sanitizer(e),R?.({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===H?void 0:e}},lu=Ut?Ut.emptyScript:"",jr=class extends Ct{constructor(){super(...arguments),this.type=su}_commitValue(e){R?.({kind:"commit boolean attribute",element:this.element,name:this.name,value:!!(e&&e!==H),options:this.options}),e&&e!==H?Ae(this.element).setAttribute(this.name,lu):Ae(this.element).removeAttribute(this.name)}},Xr=class extends Ct{constructor(e,t,i,o,s){if(super(e,t,i,o,s),this.type=nu,this.strings!==void 0)throw new Error(`A \`<${e.localName}>\` has a \`@${t}=...\` listener with invalid content. Event listeners in templates must have exactly one expression and no surrounding text.`)}_$setValue(e,t=this){var i;if(e=(i=Mt(this,e,t,0))!==null&&i!==void 0?i:H,e===xt)return;let o=this._$committedValue,s=e===H&&o!==H||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,n=e!==H&&(o===H||s);R?.({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:s,addListener:n,oldListener:o}),s&&this.element.removeEventListener(this.name,this,o),n&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){var t,i;typeof this._$committedValue=="function"?this._$committedValue.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$committedValue.handleEvent(e)}},Jr=class{constructor(e,t,i){this.element=e,this.type=Bn,this._$disconnectableChildren=void 0,this._$parent=t,this.options=i}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){R?.({kind:"commit to element binding",element:this.element,value:e,options:this.options}),Mt(this,e)}},Al={_boundAttributeSuffix:Wr,_marker:Ke,_markerMatch:Nn,_HTML_RESULT:_l,_getTemplateHtml:Rl,_TemplateInstance:zr,_isIterable:Pl,_resolveDirective:Mt,_ChildPart:zt,_AttributePart:Ct,_BooleanAttributePart:jr,_EventPart:Xr,_PropertyPart:Yr,_ElementPart:Jr},qn=Me.litHtmlPolyfillSupportDevMode;qn?.(Mi,zt);((An=Me.litHtmlVersions)!==null&&An!==void 0?An:Me.litHtmlVersions=[]).push("2.8.0");Me.litHtmlVersions.length>1&&Qr("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.");var je=(r,e,t)=>{var i,o;if(e==null)throw new TypeError(`The container to render into may not be ${e}`);let s=zd++,n=(i=t?.renderBefore)!==null&&i!==void 0?i:e,l=n._$litPart$;if(R?.({kind:"begin render",id:s,value:r,container:e,options:t,part:l}),l===void 0){let a=(o=t?.renderBefore)!==null&&o!==void 0?o:null;n._$litPart$=l=new zt(e.insertBefore(xi(),a),a,void 0,t??{})}return l._$setValue(r),R?.({kind:"end render",id:s,value:r,container:e,options:t,part:l}),l};je.setSanitizer=jd,je.createSanitizer=Hn,je._testOnlyClearSanitizerFactoryDoNotCallOrElse=Xd;var Gn,Qn,{_ChildPart:mg}=Al,du=!0,hg=du&&(!((Gn=window.ShadyDOM)===null||Gn===void 0)&&Gn.inUse)&&((Qn=window.ShadyDOM)===null||Qn===void 0?void 0:Qn.noPatch)===!0?window.ShadyDOM.wrap:r=>r;var Dl=r=>r.strings===void 0;var uu={},Vl=(r,e=uu)=>r._$committedValue=e;var $t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ue=r=>(...e)=>({_$litDirective$:r,values:e}),at=class{constructor(e){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(e,t,i){this.__part=e,this._$parent=t,this.__attributeIndex=i}_$resolve(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};var cu=!0,Ci=(r,e)=>{var t,i;let o=r._$disconnectableChildren;if(o===void 0)return!1;for(let s of o)(i=(t=s)._$notifyDirectiveConnectionChanged)===null||i===void 0||i.call(t,e,!1),Ci(s,e);return!0},eo=r=>{let e,t;do{if((e=r._$parent)===void 0)break;t=e._$disconnectableChildren,t.delete(r),r=e}while(t?.size===0)},Il=r=>{for(let e;e=r._$parent;r=e){let t=e._$disconnectableChildren;if(t===void 0)e._$disconnectableChildren=t=new Set;else if(t.has(r))break;t.add(r),hu(e)}};function pu(r){this._$disconnectableChildren!==void 0?(eo(this),this._$parent=r,Il(this)):this._$parent=r}function mu(r,e=!1,t=0){let i=this._$committedValue,o=this._$disconnectableChildren;if(!(o===void 0||o.size===0))if(e)if(Array.isArray(i))for(let s=t;s<i.length;s++)Ci(i[s],!1),eo(i[s]);else i!=null&&(Ci(i,!1),eo(i));else Ci(this,r)}var hu=r=>{var e,t,i,o;r.type==$t.CHILD&&((e=(i=r)._$notifyConnectionChanged)!==null&&e!==void 0||(i._$notifyConnectionChanged=mu),(t=(o=r)._$reparentDisconnectables)!==null&&t!==void 0||(o._$reparentDisconnectables=pu))},Yt=class extends at{constructor(){super(...arguments),this._$disconnectableChildren=void 0}_$initialize(e,t,i){super._$initialize(e,t,i),Il(this),this.isConnected=e._$isConnected}_$notifyDirectiveConnectionChanged(e,t=!0){var i,o;e!==this.isConnected&&(this.isConnected=e,e?(i=this.reconnected)===null||i===void 0||i.call(this):(o=this.disconnected)===null||o===void 0||o.call(this)),t&&(Ci(this,e),eo(this))}setValue(e){if(Dl(this.__part))this.__part._$setValue(e,this);else{if(cu&&this.__attributeIndex===void 0)throw new Error("Expected this.__attributeIndex to be a number");let t=[...this.__part._$committedValue];t[this.__attributeIndex]=e,this.__part._$setValue(t,this,0)}}disconnected(){}reconnected(){}};var jt=r=>r??H;var Wn=class extends Yt{#e=null;#t=!1;#i=null;constructor(e){super(e),this.#t=e.type===$t.ATTRIBUTE||e.type===$t.BOOLEAN_ATTRIBUTE}render(e){return e!==this.#e&&(this.disconnected(),this.#e=e,this.isConnected&&this.#r()),this.#e?this.#o(v(this.#e)):H}reconnected(){this.#r()}disconnected(){this.#i?.(),this.#i=null}#r(){this.#e&&(this.#i=d(this.#n.bind(this)))}#o(e){return this.#t?jt(e):e}#s(e){this.setValue(this.#o(e))}#n(){if(0)try{}catch(e){}else this.#s(this.#e?.())}};function m(r){return Ue(Wn)(w(r))}var ze=class extends HTMLElement{rootPart=null;connectedCallback(){this.rootPart=je(this.render(),this,{renderBefore:this.firstChild}),this.rootPart.setConnected(!0)}disconnectedCallback(){this.rootPart?.setConnected(!1),this.rootPart=null,je(null,this)}};function to(r,e){d(()=>{let{player:t}=h(),i=t.el;return i&&x(i,"data-layout",e()&&r),()=>i?.removeAttribute("data-layout")})}var Xt=class{#e;#t;elements=new Set;constructor(e,t){this.#e=e,this.#t=t}connect(){this.#r();let e=new MutationObserver(this.#i);for(let t of this.#e)e.observe(t,{childList:!0,subtree:!0});$(()=>e.disconnect()),$(this.disconnect.bind(this))}disconnect(){this.elements.clear()}assign(e,t){$a(e)?(t.textContent="",t.append(e)):(je(null,t),je(e,t)),t.style.display||(t.style.display="contents");let i=t.firstElementChild;if(!i)return;let o=t.getAttribute("data-class");o&&i.classList.add(...o.split(" "))}#i=ce(this.#r.bind(this));#r(e){if(e&&!e.some(o=>o.addedNodes.length))return;let t=!1,i=this.#e.flatMap(o=>[...o.querySelectorAll("slot")]);for(let o of i)!o.hasAttribute("name")||this.elements.has(o)||(this.elements.add(o),t=!0);t&&this.#t(this.elements)}};var fu=0,io="data-slot-id",lt=class{#e;slots;constructor(e){this.#e=e,this.slots=new Xt(e,this.#i.bind(this))}connect(){this.slots.connect(),this.#i();let e=new MutationObserver(this.#t);for(let t of this.#e)e.observe(t,{childList:!0});$(()=>e.disconnect())}#t=ce(this.#i.bind(this));#i(){for(let e of this.#e)for(let t of e.children){if(t.nodeType!==1)continue;let i=t.getAttribute("slot");if(!i)continue;t.style.display="none";let o=t.getAttribute(io);o||t.setAttribute(io,o=++fu+"");for(let s of this.slots.elements){if(s.getAttribute("name")!==i||s.getAttribute(io)===o)continue;let n=document.importNode(t,!0);i.includes("-icon")&&n.classList.add("vds-icon"),n.style.display="",n.removeAttribute("slot"),this.slots.assign(n,s),s.setAttribute(io,o)}}}};var Kn=new WeakMap,Un=class extends Yt{render(e){return H}update(e,[t]){var i;let o=t!==this._ref;return o&&this._ref!==void 0&&this._updateRefValue(void 0),(o||this._lastElementForRef!==this._element)&&(this._ref=t,this._context=(i=e.options)===null||i===void 0?void 0:i.host,this._updateRefValue(this._element=e.element)),H}_updateRefValue(e){var t;if(typeof this._ref=="function"){let i=(t=this._context)!==null&&t!==void 0?t:globalThis,o=Kn.get(i);o===void 0&&(o=new WeakMap,Kn.set(i,o)),o.get(this._ref)!==void 0&&this._ref.call(this._context,void 0),o.set(this._ref,e),e!==void 0&&this._ref.call(this._context,e)}else this._ref.value=e}get _lastElementForRef(){var e,t,i;return typeof this._ref=="function"?(t=Kn.get((e=this._context)!==null&&e!==void 0?e:globalThis))===null||t===void 0?void 0:t.get(this._ref):(i=this._ref)===null||i===void 0?void 0:i.value}disconnected(){this._lastElementForRef===this._element&&this._updateRefValue(void 0)}reconnected(){this._updateRefValue(this._element)}},Pt=Ue(Un);function J(r,e){return r()?.[e]??e}function $i(){return m(()=>{let{translations:r,userPrefersAnnouncements:e}=M();return e()?p`<media-announcer .translations=${m(r)}></media-announcer>`:null})}function oe(r,e=""){return p`<slot
    name=${`${r}-icon`}
    data-class=${`vds-icon vds-${r}-icon${e?` ${e}`:""}`}
  ></slot>`}function Jt(r){return r.map(e=>oe(e))}function _(r,e){return m(()=>J(r,e))}function Pi({tooltip:r}){let{translations:e}=M(),{remotePlaybackState:t}=V(),i=m(()=>{let s=J(e,"AirPlay"),n=pi(t());return`${s} ${n}`}),o=_(e,"AirPlay");return p`
    <media-tooltip class="vds-airplay-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-airplay-button class="vds-airplay-button vds-button" aria-label=${i}>
          ${oe("airplay")}
        </media-airplay-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${r}>
        <span class="vds-airplay-tooltip-text">${o}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function zn({tooltip:r}){let{translations:e}=M(),{remotePlaybackState:t}=V(),i=m(()=>{let s=J(e,"Google Cast"),n=pi(t());return`${s} ${n}`}),o=_(e,"Google Cast");return p`
    <media-tooltip class="vds-google-cast-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-google-cast-button class="vds-google-cast-button vds-button" aria-label=${i}>
          ${oe("google-cast")}
        </media-google-cast-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${r}>
        <span class="vds-google-cast-tooltip-text">${o}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function Zt({tooltip:r}){let{translations:e}=M(),t=_(e,"Play"),i=_(e,"Pause");return p`
    <media-tooltip class="vds-play-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-play-button
          class="vds-play-button vds-button"
          aria-label=${_(e,"Play")}
        >
          ${Jt(["play","pause","replay"])}
        </media-play-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${r}>
        <span class="vds-play-tooltip-text">${t}</span>
        <span class="vds-pause-tooltip-text">${i}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function Yn({tooltip:r,ref:e=ci}){let{translations:t}=M(),i=_(t,"Mute"),o=_(t,"Unmute");return p`
    <media-tooltip class="vds-mute-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-mute-button
          class="vds-mute-button vds-button"
          aria-label=${_(t,"Mute")}
          ${Pt(e)}
        >
          ${Jt(["mute","volume-low","volume-high"])}
        </media-mute-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${r}>
        <span class="vds-mute-tooltip-text">${o}</span>
        <span class="vds-unmute-tooltip-text">${i}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function ki({tooltip:r}){let{translations:e}=M(),t=_(e,"Closed-Captions On"),i=_(e,"Closed-Captions Off");return p`
    <media-tooltip class="vds-caption-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-caption-button
          class="vds-caption-button vds-button"
          aria-label=${_(e,"Captions")}
        >
          ${Jt(["cc-on","cc-off"])}
        </media-caption-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${r}>
        <span class="vds-cc-on-tooltip-text">${i}</span>
        <span class="vds-cc-off-tooltip-text">${t}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function Ol(){let{translations:r}=M(),e=_(r,"Enter PiP"),t=_(r,"Exit PiP");return p`
    <media-tooltip class="vds-pip-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-pip-button
          class="vds-pip-button vds-button"
          aria-label=${_(r,"PiP")}
        >
          ${Jt(["pip-enter","pip-exit"])}
        </media-pip-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content">
        <span class="vds-pip-enter-tooltip-text">${e}</span>
        <span class="vds-pip-exit-tooltip-text">${t}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function jn({tooltip:r}){let{translations:e}=M(),t=_(e,"Enter Fullscreen"),i=_(e,"Exit Fullscreen");return p`
    <media-tooltip class="vds-fullscreen-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-fullscreen-button
          class="vds-fullscreen-button vds-button"
          aria-label=${_(e,"Fullscreen")}
        >
          ${Jt(["fs-enter","fs-exit"])}
        </media-fullscreen-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${r}>
        <span class="vds-fs-enter-tooltip-text">${t}</span>
        <span class="vds-fs-exit-tooltip-text">${i}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function Xn({backward:r,tooltip:e}){let{translations:t,seekStep:i}=M(),o=r?"Seek Backward":"Seek Forward",s=_(t,o);return p`
    <media-tooltip class="vds-seek-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-seek-button
          class="vds-seek-button vds-button"
          seconds=${m(()=>(r?-1:1)*i())}
          aria-label=${s}
        >
          ${r?oe("seek-backward"):oe("seek-forward")}
        </media-seek-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${e}>
        ${_(t,o)}
      </media-tooltip-content>
    </media-tooltip>
  `}function Jn(){let{translations:r}=M(),{live:e}=V(),t=_(r,"Skip To Live"),i=_(r,"LIVE");return e()?p`
        <media-live-button class="vds-live-button" aria-label=${t}>
          <span class="vds-live-button-text">${i}</span>
        </media-live-button>
      `:null}function _i(){return m(()=>{let{download:r,translations:e}=M(),t=r();if(Ea(t))return null;let{source:i,title:o}=V(),s=i(),n=rr({title:o(),src:s,download:t});return n?p`
          <media-tooltip class="vds-download-tooltip vds-tooltip">
            <media-tooltip-trigger>
              <a
                role="button"
                class="vds-download-button vds-button"
                aria-label=${_(e,"Download")}
                href=${n.url+`?download=${n.name}`}
                download=${n.name}
                target="_blank"
              >
                <slot name="download-icon" data-class="vds-icon" />
              </a>
            </media-tooltip-trigger>
            <media-tooltip-content class="vds-tooltip-content" placement="top">
              ${_(e,"Download")}
            </media-tooltip-content>
          </media-tooltip>
        `:null})}function wi(){let{translations:r}=M();return p`
    <media-captions
      class="vds-captions"
      .exampleText=${_(r,"Captions look like this")}
    ></media-captions>
  `}function Ne(){return p`<div class="vds-controls-spacer"></div>`}function ro(r,e){return p`
    <media-menu-portal .container=${m(r)} disabled="fullscreen">
      ${e}
    </media-menu-portal>
  `}function oo(r,e,t,i){let o=P(e)?document.querySelector(e):e;o||(o=r?.closest("dialog")),o||(o=document.body);let s=document.createElement("div");s.style.display="contents",s.classList.add(t),o.append(s),d(()=>{if(!s)return;let{viewType:l}=V(),a=i();x(s,"data-view-type",l()),x(s,"data-sm",a),x(s,"data-lg",!a),x(s,"data-size",a?"sm":"lg")});let{colorScheme:n}=M();return cr(s,n),s}function so({placement:r,tooltip:e,portal:t}){let{textTracks:i}=h(),{viewType:o,clipStartTime:s,clipEndTime:n}=V(),{translations:l,thumbnails:a,menuPortal:u,noModal:c,menuGroup:f,smallWhen:g}=M();if(w(()=>{let se=s(),_e=n()||1/0,Oe=E(null);return Ge(i,"chapters",Oe.set),!Oe()?.cues.filter(qe=>qe.startTime<=_e&&qe.endTime>=se)?.length})())return null;let C=w(()=>c()?It(r):g()?null:It(r)),q=w(()=>!g()&&f()==="bottom"&&o()==="video"?26:0),D=E(!1);function ee(){D.set(!0)}function ve(){D.set(!1)}let be=p`
    <media-menu-items
      class="vds-chapters-menu-items vds-menu-items"
      placement=${m(C)}
      offset=${m(q)}
    >
      ${m(()=>D()?p`
          <media-chapters-radio-group
            class="vds-chapters-radio-group vds-radio-group"
            .thumbnails=${m(a)}
          >
            <template>
              <media-radio class="vds-chapter-radio vds-radio">
                <media-thumbnail class="vds-thumbnail"></media-thumbnail>
                <div class="vds-chapter-radio-content">
                  <span class="vds-chapter-radio-label" data-part="label"></span>
                  <span class="vds-chapter-radio-start-time" data-part="start-time"></span>
                  <span class="vds-chapter-radio-duration" data-part="duration"></span>
                </div>
              </media-radio>
            </template>
          </media-chapters-radio-group>
        `:null)}
    </media-menu-items>
  `;return p`
    <media-menu class="vds-chapters-menu vds-menu" @open=${ee} @close=${ve}>
      <media-tooltip class="vds-tooltip">
        <media-tooltip-trigger>
          <media-menu-button
            class="vds-menu-button vds-button"
            aria-label=${_(l,"Chapters")}
          >
            ${oe("menu-chapters")}
          </media-menu-button>
        </media-tooltip-trigger>
        <media-tooltip-content
          class="vds-tooltip-content"
          placement=${Vt(e)?m(e):e}
        >
          ${_(l,"Chapters")}
        </media-tooltip-content>
      </media-tooltip>
      ${t?ro(u,be):be}
    </media-menu>
  `}function no(r){let{style:e}=new Option;return e.color=r,e.color.match(/\((.*?)\)/)[1].replace(/,/g," ")}var ao={type:"color"},ql={type:"radio",values:{"Monospaced Serif":"mono-serif","Proportional Serif":"pro-serif","Monospaced Sans-Serif":"mono-sans","Proportional Sans-Serif":"pro-sans",Casual:"casual",Cursive:"cursive","Small Capitals":"capitals"}},Hl={type:"slider",min:0,max:400,step:25,upIcon:null,downIcon:null},Nl={type:"slider",min:0,max:100,step:5,upIcon:null,downIcon:null},Fl={type:"radio",values:["None","Drop Shadow","Raised","Depressed","Outline"]},Li={fontFamily:"pro-sans",fontSize:"100%",textColor:"#ffffff",textOpacity:"100%",textShadow:"none",textBg:"#000000",textBgOpacity:"100%",displayBg:"#000000",displayBgOpacity:"0%"},Xe=Object.keys(Li).reduce((r,e)=>({...r,[e]:E(Li[e])}),{});for(let r of Object.keys(Xe)){let e=localStorage.getItem(`vds-player:${$e(r)}`);P(e)&&Xe[r].set(e)}function Bl(){for(let r of Object.keys(Xe)){let e=Li[r];Xe[r].set(e)}}var Gl=!1,Zn=new Set;function Ql(){let{player:r}=h();Zn.add(r),$(()=>Zn.delete(r)),Gl||(He(()=>{for(let e of Ra(Xe)){let t=Xe[e],i=Li[e],o=`--media-user-${$e(e)}`,s=`vds-player:${$e(e)}`;d(()=>{let n=t(),l=n===i,a=l?null:gu(r,e,n);for(let u of Zn)u.el?.style.setProperty(o,a);l?localStorage.removeItem(s):localStorage.setItem(s,n)})}},null),Gl=!0)}function gu(r,e,t){switch(e){case"fontFamily":let i=t==="capitals"?"small-caps":"";return r.el?.style.setProperty("--media-user-font-variant",i),vu(t);case"fontSize":case"textOpacity":case"textBgOpacity":case"displayBgOpacity":return yu(t);case"textColor":return`rgb(${no(t)} / var(--media-user-text-opacity, 1))`;case"textShadow":return bu(t);case"textBg":return`rgb(${no(t)} / var(--media-user-text-bg-opacity, 1))`;case"displayBg":return`rgb(${no(t)} / var(--media-user-display-bg-opacity, 1))`}}function yu(r){return(parseInt(r)/100).toString()}function vu(r){switch(r){case"mono-serif":return'"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace';case"mono-sans":return'"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace';case"pro-sans":return'Roboto, "Arial Unicode Ms", Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif';case"casual":return'"Comic Sans MS", Impact, Handlee, fantasy';case"cursive":return'"Monotype Corsiva", "URW Chancery L", "Apple Chancery", "Dancing Script", cursive';case"capitals":return'"Arial Unicode Ms", Arial, Helvetica, Verdana, "Marcellus SC", sans-serif + font-variant=small-caps';default:return'"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif'}}function bu(r){switch(r){case"drop shadow":return"rgb(34, 34, 34) 1.86389px 1.86389px 2.79583px, rgb(34, 34, 34) 1.86389px 1.86389px 3.72778px, rgb(34, 34, 34) 1.86389px 1.86389px 4.65972px";case"raised":return"rgb(34, 34, 34) 1px 1px, rgb(34, 34, 34) 2px 2px";case"depressed":return"rgb(204, 204, 204) 1px 1px, rgb(34, 34, 34) -1px -1px";case"outline":return"rgb(34, 34, 34) 0px 0px 1.86389px, rgb(34, 34, 34) 0px 0px 1.86389px, rgb(34, 34, 34) 0px 0px 1.86389px, rgb(34, 34, 34) 0px 0px 1.86389px, rgb(34, 34, 34) 0px 0px 1.86389px";default:return""}}var Tu=0;function he({label:r="",value:e="",children:t}){if(!r)return p`
      <div class="vds-menu-section">
        <div class="vds-menu-section-body">${t}</div>
      </div>
    `;let i=`vds-menu-section-${++Tu}`;return p`
    <section class="vds-menu-section" role="group" aria-labelledby=${i}>
      <div class="vds-menu-section-title">
        <header id=${i}>${r}</header>
        ${e?p`<div class="vds-menu-section-value">${e}</div>`:null}
      </div>
      <div class="vds-menu-section-body">${t}</div>
    </section>
  `}function dt({label:r,children:e}){return p`
    <div class="vds-menu-item">
      <div class="vds-menu-item-label">${r}</div>
      ${e}
    </div>
  `}function De({label:r,icon:e,hint:t}){return p`
    <media-menu-button class="vds-menu-item">
      ${oe("menu-arrow-left","vds-menu-close-icon")}
      ${e?oe(e,"vds-menu-item-icon"):null}
      <span class="vds-menu-item-label">${m(r)}</span>
      <span class="vds-menu-item-hint" data-part="hint">${t?m(t):null} </span>
      ${oe("menu-arrow-right","vds-menu-open-icon")}
    </media-menu-button>
  `}function Wl({value:r=null,options:e,hideLabel:t=!1,children:i=null,onChange:o=null}){function s(n){let{value:l,label:a}=n;return p`
      <media-radio class="vds-radio" value=${l}>
        ${oe("menu-radio-check")}
        ${t?null:p`
              <span class="vds-radio-label" data-part="label">
                ${P(a)?a:m(a)}
              </span>
            `}
        ${Vt(i)?i(n):i}
      </media-radio>
    `}return p`
    <media-radio-group
      class="vds-radio-group"
      value=${P(r)?r:r?m(r):""}
      @change=${o}
    >
      ${N(e)?e.map(s):m(()=>e().map(s))}
    </media-radio-group>
  `}function Kl(r){return N(r)?r.map(e=>({label:e,value:e.toLowerCase()})):Object.keys(r).map(e=>({label:e,value:r[e]}))}function kt(){return p`
    <div class="vds-slider-track"></div>
    <div class="vds-slider-track-fill vds-slider-track"></div>
    <div class="vds-slider-thumb"></div>
  `}function _t(){return p`
    <media-slider-steps class="vds-slider-steps">
      <template>
        <div class="vds-slider-step"></div>
      </template>
    </media-slider-steps>
  `}function wt({label:r=null,value:e=null,upIcon:t="",downIcon:i="",children:o,isMin:s,isMax:n}){let l=r||e,a=[i?oe(i,"down"):null,o,t?oe(t,"up"):null];return p`
    <div
      class=${`vds-menu-item vds-menu-slider-item${l?" group":""}`}
      data-min=${m(()=>s()?"":null)}
      data-max=${m(()=>n()?"":null)}
    >
      ${l?p`
            <div class="vds-menu-slider-title">
              ${[r?p`<div>${r}</div>`:null,e?p`<div>${e}</div>`:null]}
            </div>
            <div class="vds-menu-slider-body">${a}</div>
          `:a}
    </div>
  `}var Eu={...Hl,upIcon:"menu-opacity-up",downIcon:"menu-opacity-down"},ea={...Nl,upIcon:"menu-opacity-up",downIcon:"menu-opacity-down"};function Ul(){return m(()=>{let{hasCaptions:r}=V(),{translations:e}=M();return r()?p`
      <media-menu class="vds-font-menu vds-menu">
        ${De({label:()=>J(e,"Caption Styles")})}
        <media-menu-items class="vds-menu-items">
          ${[he({label:_(e,"Font"),children:[xu(),Su()]}),he({label:_(e,"Text"),children:[Mu(),$u(),Cu()]}),he({label:_(e,"Text Background"),children:[Pu(),ku()]}),he({label:_(e,"Display Background"),children:[_u(),wu()]}),he({children:[Lu()]})]}
        </media-menu-items>
      </media-menu>
    `:null})}function xu(){return Je({label:"Family",option:ql,type:"fontFamily"})}function Su(){return Je({label:"Size",option:Eu,type:"fontSize"})}function Mu(){return Je({label:"Color",option:ao,type:"textColor"})}function Cu(){return Je({label:"Opacity",option:ea,type:"textOpacity"})}function $u(){return Je({label:"Shadow",option:Fl,type:"textShadow"})}function Pu(){return Je({label:"Color",option:ao,type:"textBg"})}function ku(){return Je({label:"Opacity",option:ea,type:"textBgOpacity"})}function _u(){return Je({label:"Color",option:ao,type:"displayBg"})}function wu(){return Je({label:"Opacity",option:ea,type:"displayBgOpacity"})}function Lu(){let{translations:r}=M();return p`
    <button class="vds-menu-item" role="menuitem" @click=${Bl}>
      <span class="vds-menu-item-label">${m(()=>J(r,"Reset"))}</span>
    </button>
  `}function Je({label:r,option:e,type:t}){let{player:i}=h(),{translations:o}=M(),s=Xe[t],n=()=>J(o,r);function l(){ne(),i.dispatchEvent(new Event("vds-font-change"))}if(e.type==="color"){let g=function(T){s.set(T.target.value),l()};var c=g;return dt({label:m(n),children:p`
        <input
          class="vds-color-picker"
          type="color"
          .value=${m(s)}
          @input=${g}
        />
      `})}if(e.type==="slider"){let ee=function(ve){s.set(ve.detail+"%"),l()};var f=ee;let{min:g,max:T,step:C,upIcon:q,downIcon:D}=e;return wt({label:m(n),value:m(s),upIcon:q,downIcon:D,isMin:()=>s()===g+"%",isMax:()=>s()===T+"%",children:p`
        <media-slider
          class="vds-slider"
          min=${g}
          max=${T}
          step=${C}
          key-step=${C}
          .value=${m(()=>parseInt(s()))}
          aria-label=${m(n)}
          @value-change=${ee}
          @drag-value-change=${ee}
        >
          ${kt()}${_t()}
        </media-slider>
      `})}let a=Kl(e.values),u=()=>{let g=s(),T=a.find(C=>C.value===g)?.label||"";return J(o,P(T)?T:T())};return p`
    <media-menu class=${`vds-${$e(t)}-menu vds-menu`}>
      ${De({label:n,hint:u})}
      <media-menu-items class="vds-menu-items">
        ${Wl({value:s,options:a,onChange({detail:g}){s.set(g),l()}})}
      </media-menu-items>
    </media-menu>
  `}function Ru(r){return r?"true":"false"}function O(r){return()=>Ru(r())}function ei({label:r,checked:e,defaultChecked:t=!1,storageKey:i,onChange:o}){let{translations:s}=M(),n=i?localStorage.getItem(i):null,l=E(!!(n??t)),a=E(!1),u=m(O(l)),c=_(s,r);i&&o(v(l)),e&&d(()=>void l.set(e()));function f(C){C?.button!==1&&(l.set(q=>!q),i&&localStorage.setItem(i,l()?"1":""),o(l(),C),a.set(!1))}function g(C){ft(C)&&f()}function T(C){C.button===0&&a.set(!0)}return p`
    <div
      class="vds-menu-checkbox"
      role="menuitemcheckbox"
      tabindex="0"
      aria-label=${c}
      aria-checked=${u}
      data-active=${m(()=>a()?"":null)}
      @pointerup=${f}
      @pointerdown=${T}
      @keydown=${g}
    ></div>
  `}function zl(){return m(()=>{let{translations:r}=M();return p`
      <media-menu class="vds-accessibility-menu vds-menu">
        ${De({label:()=>J(r,"Accessibility"),icon:"menu-accessibility"})}
        <media-menu-items class="vds-menu-items">
          ${[he({children:[Au(),Du()]}),he({children:[Ul()]})]}
        </media-menu-items>
      </media-menu>
    `})}function Au(){let{userPrefersAnnouncements:r,translations:e}=M(),t="Announcements";return dt({label:_(e,t),children:ei({label:t,storageKey:"vds-player::announcements",onChange(i){r.set(i)}})})}function Du(){return m(()=>{let{translations:r,userPrefersKeyboardAnimations:e,noKeyboardAnimations:t}=M(),{viewType:i}=V();if(w(()=>i()!=="video"||t())())return null;let s="Keyboard Animations";return dt({label:_(r,s),children:ei({label:s,defaultChecked:!0,storageKey:"vds-player::keyboard-animations",onChange(n){e.set(n)}})})})}function Yl(){return m(()=>{let{noAudioGain:r,translations:e}=M(),{audioTracks:t,canSetAudioGain:i}=V();return w(()=>!(i()&&!r())&&t().length<=1)()?null:p`
      <media-menu class="vds-audio-menu vds-menu">
        ${De({label:()=>J(e,"Audio"),icon:"menu-audio"})}
        <media-menu-items class="vds-menu-items">
          ${[Vu(),Iu()]}
        </media-menu-items>
      </media-menu>
    `})}function Vu(){return m(()=>{let{translations:r}=M(),{audioTracks:e}=V(),t=_(r,"Default");return w(()=>e().length<=1)()?null:he({children:p`
        <media-menu class="vds-audio-tracks-menu vds-menu">
          ${De({label:()=>J(r,"Track")})}
          <media-menu-items class="vds-menu-items">
            <media-audio-radio-group
              class="vds-audio-track-radio-group vds-radio-group"
              empty-label=${t}
            >
              <template>
                <media-radio class="vds-audio-track-radio vds-radio">
                  <slot name="menu-radio-check-icon" data-class="vds-icon"></slot>
                  <span class="vds-radio-label" data-part="label"></span>
                </media-radio>
              </template>
            </media-audio-radio-group>
          </media-menu-items>
        </media-menu>
      `})})}function Iu(){return m(()=>{let{noAudioGain:r,translations:e}=M(),{canSetAudioGain:t}=V();if(w(()=>!t()||r())())return null;let{audioGain:o}=V();return he({label:_(e,"Boost"),value:m(()=>Math.round(((o()??1)-1)*100)+"%"),children:[wt({upIcon:"menu-audio-boost-up",downIcon:"menu-audio-boost-down",children:Ou(),isMin:()=>((o()??1)-1)*100<=jl(),isMax:()=>((o()??1)-1)*100===Xl()})]})})}function Ou(){let{translations:r}=M(),e=_(r,"Boost"),t=jl,i=Xl,o=qu;return p`
    <media-audio-gain-slider
      class="vds-audio-gain-slider vds-slider"
      aria-label=${e}
      min=${m(t)}
      max=${m(i)}
      step=${m(o)}
      key-step=${m(o)}
    >
      ${kt()}${_t()}
    </media-audio-gain-slider>
  `}function jl(){let{audioGains:r}=M(),e=r();return N(e)?e[0]??0:e.min}function Xl(){let{audioGains:r}=M(),e=r();return N(e)?e[e.length-1]??300:e.max}function qu(){let{audioGains:r}=M(),e=r();return N(e)?e[1]-e[0]||25:e.step}function Jl(){return m(()=>{let{translations:r}=M(),{hasCaptions:e}=V(),t=_(r,"Off");return e()?p`
      <media-menu class="vds-captions-menu vds-menu">
        ${De({label:()=>J(r,"Captions"),icon:"menu-captions"})}
        <media-menu-items class="vds-menu-items">
          <media-captions-radio-group
            class="vds-captions-radio-group vds-radio-group"
            off-label=${t}
          >
            <template>
              <media-radio class="vds-caption-radio vds-radio">
                <slot name="menu-radio-check-icon" data-class="vds-icon"></slot>
                <span class="vds-radio-label" data-part="label"></span>
              </media-radio>
            </template>
          </media-captions-radio-group>
        </media-menu-items>
      </media-menu>
    `:null})}function ti(r,e){return[...r].sort(e?Nu:Hu)}function Hu(r,e){return r.height===e.height?(r.bitrate??0)-(e.bitrate??0):r.height-e.height}function Nu(r,e){return e.height===r.height?(e.bitrate??0)-(r.bitrate??0):e.height-r.height}function Zl(){return m(()=>{let{translations:r}=M();return p`
      <media-menu class="vds-playback-menu vds-menu">
        ${De({label:()=>J(r,"Playback"),icon:"menu-playback"})}
        <media-menu-items class="vds-menu-items">
          ${[he({children:Fu()}),Bu(),Ku()]}
        </media-menu-items>
      </media-menu>
    `})}function Fu(){let{remote:r}=h(),{translations:e}=M(),t="Loop";return dt({label:_(e,t),children:ei({label:t,storageKey:"vds-player::user-loop",onChange(i,o){r.userPrefersLoopChange(i,o)}})})}function Bu(){return m(()=>{let{translations:r}=M(),{canSetPlaybackRate:e,playbackRate:t}=V();return e()?he({label:_(r,"Speed"),value:m(()=>t()===1?J(r,"Normal"):t()+"x"),children:[wt({upIcon:"menu-speed-up",downIcon:"menu-speed-down",children:Qu(),isMin:()=>t()===ed(),isMax:()=>t()===td()})]}):null})}function ed(){let{playbackRates:r}=M(),e=r();return N(e)?e[0]??0:e.min}function td(){let{playbackRates:r}=M(),e=r();return N(e)?e[e.length-1]??2:e.max}function Gu(){let{playbackRates:r}=M(),e=r();return N(e)?e[1]-e[0]||.25:e.step}function Qu(){let{translations:r}=M(),e=_(r,"Speed"),t=ed,i=td,o=Gu;return p`
    <media-speed-slider
      class="vds-speed-slider vds-slider"
      aria-label=${e}
      min=${m(t)}
      max=${m(i)}
      step=${m(o)}
      key-step=${m(o)}
    >
      ${kt()}${_t()}
    </media-speed-slider>
  `}function Wu(){let{remote:r,qualities:e}=h(),{autoQuality:t,canSetQuality:i,qualities:o}=V(),{translations:s}=M(),n="Auto";return w(()=>!i()||o().length<=1)()?null:dt({label:_(s,n),children:ei({label:n,checked:t,onChange(a,u){a?r.requestAutoQuality(u):r.changeQuality(e.selectedIndex,u)}})})}function Ku(){return m(()=>{let{hideQualityBitrate:r,translations:e}=M(),{canSetQuality:t,qualities:i,quality:o}=V(),s=w(()=>!t()||i().length<=1),n=w(()=>ti(i()));return s()?null:he({label:_(e,"Quality"),value:m(()=>{let l=o()?.height,a=r()?null:o()?.bitrate,u=a&&a>0?`${(a/1e6).toFixed(2)} Mbps`:null,c=J(e,"Auto");return l?`${l}p${u?` (${u})`:""}`:c}),children:[wt({upIcon:"menu-quality-up",downIcon:"menu-quality-down",children:Uu(),isMin:()=>n()[0]===o(),isMax:()=>n().at(-1)===o()}),Wu()]})})}function Uu(){let{translations:r}=M(),e=_(r,"Quality");return p`
    <media-quality-slider class="vds-quality-slider vds-slider" aria-label=${e}>
      ${kt()}${_t()}
    </media-quality-slider>
  `}function lo({placement:r,portal:e,tooltip:t}){return m(()=>{let{viewType:i}=V(),{translations:o,menuPortal:s,noModal:n,menuGroup:l,smallWhen:a}=M(),u=w(()=>n()?It(r):a()?null:It(r)),c=w(()=>!a()&&l()==="bottom"&&i()==="video"?26:0),f=E(!1);Ql();function g(){f.set(!0)}function T(){f.set(!1)}let C=p`
      <media-menu-items
        class="vds-settings-menu-items vds-menu-items"
        placement=${m(u)}
        offset=${m(c)}
      >
        ${m(()=>f()?[Zl(),zl(),Yl(),Jl()]:null)}
      </media-menu-items>
    `;return p`
      <media-menu class="vds-settings-menu vds-menu" @open=${g} @close=${T}>
        <media-tooltip class="vds-tooltip">
          <media-tooltip-trigger>
            <media-menu-button
              class="vds-menu-button vds-button"
              aria-label=${_(o,"Settings")}
            >
              ${oe("menu-settings","vds-rotate-icon")}
            </media-menu-button>
          </media-tooltip-trigger>
          <media-tooltip-content
            class="vds-tooltip-content"
            placement=${Vt(t)?m(t):t}
          >
            ${_(o,"Settings")}
          </media-tooltip-content>
        </media-tooltip>
        ${e?ro(s,C):C}
      </media-menu>
    `})}function Ri({orientation:r,tooltip:e}){return m(()=>{let{pointer:t,muted:i,canSetVolume:o}=V();if(t()==="coarse"&&!i())return null;if(!o())return Yn({tooltip:e});let s=E(void 0),n=Xa(s);return p`
      <div class="vds-volume" ?data-active=${m(n)} ${Pt(s.set)}>
        ${Yn({tooltip:e})}
        <div class="vds-volume-popup">${zu({orientation:r})}</div>
      </div>
    `})}function zu({orientation:r}={}){let{translations:e}=M(),t=_(e,"Volume");return p`
    <media-volume-slider
      class="vds-volume-slider vds-slider"
      aria-label=${t}
      orientation=${jt(r)}
    >
      <div class="vds-slider-track"></div>
      <div class="vds-slider-track-fill vds-slider-track"></div>
      <media-slider-preview class="vds-slider-preview" no-clamp>
        <media-slider-value class="vds-slider-value"></media-slider-value>
      </media-slider-preview>
      <div class="vds-slider-thumb"></div>
    </media-volume-slider>
  `}function Ai(){let r=E(void 0),e=E(0),{thumbnails:t,translations:i,sliderChaptersMinWidth:o,disableTimeSlider:s,seekStep:n,noScrubGesture:l}=M(),a=_(i,"Seek"),u=m(s),c=m(()=>e()<o()),f=m(t);return ur(r,()=>{let g=r();g&&e.set(g.clientWidth)}),p`
    <media-time-slider
      class="vds-time-slider vds-slider"
      aria-label=${a}
      key-step=${m(n)}
      ?disabled=${u}
      ?no-swipe-gesture=${m(l)}
      ${Pt(r.set)}
    >
      <media-slider-chapters class="vds-slider-chapters" ?disabled=${c}>
        <template>
          <div class="vds-slider-chapter">
            <div class="vds-slider-track"></div>
            <div class="vds-slider-track-fill vds-slider-track"></div>
            <div class="vds-slider-progress vds-slider-track"></div>
          </div>
        </template>
      </media-slider-chapters>
      <div class="vds-slider-thumb"></div>
      <media-slider-preview class="vds-slider-preview">
        <media-slider-thumbnail
          class="vds-slider-thumbnail vds-thumbnail"
          .src=${f}
        ></media-slider-thumbnail>
        <div class="vds-slider-chapter-title" data-part="chapter-title"></div>
        <media-slider-value class="vds-slider-value"></media-slider-value>
      </media-slider-preview>
    </media-time-slider>
  `}function Yu(){return p`
    <div class="vds-time-group">
      ${m(()=>{let{duration:r}=V();return r()?[p`<media-time class="vds-time" type="current"></media-time>`,p`<div class="vds-time-divider">/</div>`,p`<media-time class="vds-time" type="duration"></media-time>`]:null})}
    </div>
  `}function id(){return m(()=>{let{live:r,duration:e}=V();return r()?Jn():e()?p`<media-time class="vds-time" type="current" toggle remainder></media-time>`:null})}function ta(){return m(()=>{let{live:r}=V();return r()?Jn():Yu()})}function ia(){return m(()=>{let{textTracks:r}=h(),{title:e,started:t}=V(),i=E(null);return Ge(r,"chapters",i.set),i()&&(t()||!e())?ra():p`<media-title class="vds-chapter-title"></media-title>`})}function ra(){return p`<media-chapter-title class="vds-chapter-title"></media-chapter-title>`}function rd(){return[$i(),wi(),p`
      <media-controls class="vds-controls">
        <media-controls-group class="vds-controls-group">
          ${[Xn({backward:!0,tooltip:"top start"}),Zt({tooltip:"top"}),Xn({tooltip:"top"}),ju(),Ai(),id(),Ri({orientation:"vertical",tooltip:"top"}),ki({tooltip:"top"}),_i(),Pi({tooltip:"top"}),Xu()]}
        </media-controls-group>
      </media-controls>
    `]}function ju(){return m(()=>{let r=E(void 0),e=E(!1),t=h(),{title:i,started:o,currentTime:s,ended:n}=V(),{translations:l}=M(),a=ja(r),u=()=>o()||s()>0,c=()=>{let T=n()?"Replay":u()?"Continue":"Play";return`${J(l,T)}: ${i()}`};d(()=>{a()&&document.activeElement===document.body&&t.player.el?.focus({preventScroll:!0})});function f(){let T=r(),C=!!T&&!a()&&T.clientWidth<T.children[0].clientWidth;T&&Pa(T,"vds-marquee",C),e.set(C)}function g(){return p`
        <span class="vds-title-text">
          ${m(c)}${m(()=>u()?ra():null)}
        </span>
      `}return ur(r,f),i()?p`
          <span class="vds-title" title=${m(c)} ${Pt(r.set)}>
            ${[g(),m(()=>e()&&!a()?g():null)]}
          </span>
        `:Ne()})}function Xu(){let r="top end";return[so({tooltip:"top",placement:r,portal:!0}),lo({tooltip:"top end",placement:r,portal:!0})]}var Ju=1,Lt=class extends at{constructor(e){if(super(e),this._value=H,e.type!==$t.CHILD)throw new Error(`${this.constructor.directiveName}() can only be used in child bindings`)}render(e){if(e===H||e==null)return this._templateResult=void 0,this._value=e;if(e===xt)return e;if(typeof e!="string")throw new Error(`${this.constructor.directiveName}() called with a non-string value`);if(e===this._value)return this._templateResult;this._value=e;let t=[e];return t.raw=t,this._templateResult={_$litType$:this.constructor.resultType,strings:t,values:[]}}};Lt.directiveName="unsafeHTML";Lt.resultType=Ju;var oa=Ue(Lt);var Zu=2,Di=class extends Lt{};Di.directiveName="unsafeSVG";Di.resultType=Zu;var od=Ue(Di);function uo({name:r,class:e,state:t,paths:i,viewBox:o="0 0 32 32"}){return p`<svg
    class="${"vds-icon"+(e?` ${e}`:"")}"
    viewBox="${o}"
    fill="none"
    aria-hidden="true"
    focusable="false"
    xmlns="http://www.w3.org/2000/svg"
    data-icon=${jt(r??t)}
  >
    ${P(i)?od(i):m(i)}
  </svg>`}var co=class{#e={};#t=!1;slots;constructor(e){this.slots=new Xt(e,this.#r.bind(this))}connect(){this.slots.connect()}load(){this.loadIcons().then(e=>{this.#e=e,this.#t=!0,this.#r()})}*#i(){for(let e of Object.keys(this.#e)){let t=`${e}-icon`;for(let i of this.slots.elements)i.name===t&&(yield{icon:this.#e[e],slot:i})}}#r(){if(this.#t)for(let{icon:e,slot:t}of this.#i())this.slots.assign(e,t)}};var ii=class extends co{connect(){super.connect();let{player:e}=h();if(!e.el)return;let t,i=new IntersectionObserver(o=>{o[0]?.isIntersecting&&(t?.(),t=void 0,this.load())});i.observe(e.el),t=$(()=>i.disconnect())}};var ri=class extends ii{async loadIcons(){let e=(await import("./chunks/vidstack-3DWFKMC2.js")).icons,t={};for(let i of Object.keys(e))t[i]=uo({name:i,paths:e[i]});return t}};var po=class extends y(ze,Gr){static tagName="media-audio-layout";static attrs={smallWhen:{converter(e){return e!=="never"&&!!e}}};#e;#t=E(!1);onSetup(){this.forwardKeepAlive=!1,this.#e=h(),this.classList.add("vds-audio-layout"),this.#o()}onConnect(){to("audio",()=>this.isMatch),this.#r()}render(){return m(this.#i.bind(this))}#i(){return this.isMatch?rd():null}#r(){let{menuPortal:e}=M();d(()=>{if(!this.isMatch)return;let t=oo(this,this.menuContainer,"vds-audio-layout",()=>this.isSmallLayout),i=t?[this,t]:[this];return(this.$props.customIcons()?new lt(i):new ri(i)).connect(),e.set(t),()=>{t.remove(),e.set(null)}})}#o(){let{pointer:e}=this.#e.$state;d(()=>{e()==="coarse"&&d(this.#s.bind(this))})}#s(){if(!this.#t()){S(this,"pointerdown",this.#n.bind(this),{capture:!0});return}S(this,"pointerdown",e=>e.stopPropagation()),S(window,"pointerdown",this.#a.bind(this))}#n(e){let{target:t}=e;Ee(t)&&t.closest(".vds-time-slider")&&(e.stopImmediatePropagation(),this.setAttribute("data-scrubbing",""),this.#t.set(!0))}#a(){this.#t.set(!1),this.removeAttribute("data-scrubbing")}};var mo=class extends Kt{static props={...super.props,when:({viewType:e})=>e==="video",smallWhen:({width:e,height:t})=>e<576||t<380}};var sa=class extends at{constructor(){super(...arguments),this.key=H}render(e,t){return this.key=e,t}update(e,[t,i]){return t!==this.key&&(Vl(e),this.key=t),i}},sd=Ue(sa);function na(){return m(()=>{let r=h(),{noKeyboardAnimations:e,userPrefersKeyboardAnimations:t}=M();if(w(()=>e()||!t())())return null;let o=E(!1),{lastKeyboardAction:s}=r.$state;d(()=>{o.set(!!s());let f=setTimeout(()=>o.set(!1),500);return()=>{o.set(!1),window.clearTimeout(f)}});let n=w(()=>{let f=s()?.action;return f&&o()?$e(f):null}),l=w(()=>`vds-kb-action${o()?"":" hidden"}`),a=w(ec),u=w(()=>{let f=tc();return f?Ya(f):null});function c(){let f=u();return f?p`
        <div class="vds-kb-bezel">
          <div class="vds-kb-icon">${f}</div>
        </div>
      `:null}return p`
      <div class=${m(l)} data-action=${m(n)}>
        <div class="vds-kb-text-wrapper">
          <div class="vds-kb-text">${m(a)}</div>
        </div>
        ${m(()=>sd(s(),c()))}
      </div>
    `})}function ec(){let{$state:r}=h(),e=r.lastKeyboardAction()?.action,t=r.audioGain()??1;switch(e){case"toggleMuted":return r.muted()?"0%":nd(r.volume(),t);case"volumeUp":case"volumeDown":return nd(r.volume(),t);default:return""}}function nd(r,e){return`${Math.round(r*e*100)}%`}function tc(){let{$state:r}=h();switch(r.lastKeyboardAction()?.action){case"togglePaused":return r.paused()?"kb-pause-icon":"kb-play-icon";case"toggleMuted":return r.muted()||r.volume()===0?"kb-mute-icon":r.volume()>=.5?"kb-volume-up-icon":"kb-volume-down-icon";case"toggleFullscreen":return`kb-fs-${r.fullscreen()?"enter":"exit"}-icon`;case"togglePictureInPicture":return`kb-pip-${r.pictureInPicture()?"enter":"exit"}-icon`;case"toggleCaptions":return r.hasCaptions()?`kb-cc-${r.textTrack()?"on":"off"}-icon`:null;case"volumeUp":return"kb-volume-up-icon";case"volumeDown":return"kb-volume-down-icon";case"seekForward":return"kb-seek-forward-icon";case"seekBackward":return"kb-seek-backward-icon";default:return null}}function ad(){return[$i(),ud(),Vi(),na(),wi(),p`<div class="vds-scrim"></div>`,p`
      <media-controls class="vds-controls">
        ${[rc(),Ne(),p`<media-controls-group class="vds-controls-group"></media-controls-group>`,Ne(),p`
            <media-controls-group class="vds-controls-group">
              ${Ai()}
            </media-controls-group>
          `,p`
            <media-controls-group class="vds-controls-group">
              ${[Zt({tooltip:"top start"}),Ri({orientation:"horizontal",tooltip:"top"}),ta(),ia(),ki({tooltip:"top"}),ic(),Pi({tooltip:"top"}),zn({tooltip:"top"}),_i(),Ol(),jn({tooltip:"top end"})]}
            </media-controls-group>
          `]}
      </media-controls>
    `]}function ic(){return m(()=>{let{menuGroup:r}=M();return r()==="bottom"?aa():null})}function rc(){return p`
    <media-controls-group class="vds-controls-group">
      ${m(()=>{let{menuGroup:r}=M();return r()==="top"?[Ne(),aa()]:null})}
    </media-controls-group>
  `}function ld(){return[$i(),ud(),Vi(),wi(),na(),p`<div class="vds-scrim"></div>`,p`
      <media-controls class="vds-controls">
        <media-controls-group class="vds-controls-group">
          ${[Pi({tooltip:"top start"}),zn({tooltip:"bottom start"}),Ne(),ki({tooltip:"bottom"}),_i(),aa(),Ri({orientation:"vertical",tooltip:"bottom end"})]}
        </media-controls-group>

        ${Ne()}

        <media-controls-group class="vds-controls-group" style="pointer-events: none;">
          ${[Ne(),Zt({tooltip:"top"}),Ne()]}
        </media-controls-group>

        ${Ne()}

        <media-controls-group class="vds-controls-group">
          ${[ta(),ia(),jn({tooltip:"top end"})]}
        </media-controls-group>

        <media-controls-group class="vds-controls-group">
          ${Ai()}
        </media-controls-group>
      </media-controls>
    `,oc()]}function dd(){return p`
    <div class="vds-load-container">
      ${[Vi(),Zt({tooltip:"top"})]}
    </div>
  `}function oc(){return m(()=>{let{duration:r}=V();return r()===0?null:p`
      <div class="vds-start-duration">
        <media-time class="vds-time" type="duration"></media-time>
      </div>
    `})}function Vi(){return p`
    <div class="vds-buffering-indicator">
      <media-spinner class="vds-buffering-spinner"></media-spinner>
    </div>
  `}function aa(){let{menuGroup:r,smallWhen:e}=M(),t=()=>r()==="top"||e()?"bottom":"top",i=w(()=>`${t()} ${r()==="top"?"end":"center"}`),o=w(()=>`${t()} end`);return[so({tooltip:i,placement:o,portal:!0}),lo({tooltip:i,placement:o,portal:!0})]}function ud(){return m(()=>{let{noGestures:r}=M();return r()?null:p`
      <div class="vds-gestures">
        <media-gesture class="vds-gesture" event="pointerup" action="toggle:paused"></media-gesture>
        <media-gesture
          class="vds-gesture"
          event="pointerup"
          action="toggle:controls"
        ></media-gesture>
        <media-gesture
          class="vds-gesture"
          event="dblpointerup"
          action="toggle:fullscreen"
        ></media-gesture>
        <media-gesture class="vds-gesture" event="dblpointerup" action="seek:-10"></media-gesture>
        <media-gesture class="vds-gesture" event="dblpointerup" action="seek:10"></media-gesture>
      </div>
    `})}var ho=class extends y(ze,mo){static tagName="media-video-layout";static attrs={smallWhen:{converter(e){return e!=="never"&&!!e}}};#e;onSetup(){this.forwardKeepAlive=!1,this.#e=h(),this.classList.add("vds-video-layout")}onConnect(){to("video",()=>this.isMatch),this.#t()}render(){return m(this.#i.bind(this))}#t(){let{menuPortal:e}=M();d(()=>{if(!this.isMatch)return;let t=oo(this,this.menuContainer,"vds-video-layout",()=>this.isSmallLayout),i=t?[this,t]:[this];return(this.$props.customIcons()?new lt(i):new ri(i)).connect(),e.set(t),()=>{t.remove(),e.set(null)}})}#i(){let{load:e}=this.#e.$props,{canLoad:t,streamType:i,nativeControls:o}=this.#e.$state;return!o()&&this.isMatch?e()==="play"&&!t()?dd():i()==="unknown"?Vi():this.isSmallLayout?ld():ad():null}};var la=re();function Q(){return A(la)}var cd={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]};var fo=class extends b{static props=cd;#e;onSetup(){this.#e=h(),W(la,{...this.$props,previewTime:E(0)})}};function pd(r,e){let{canAirPlay:t,canFullscreen:i,canPictureInPicture:o,controlsHidden:s,currentTime:n,fullscreen:l,hasCaptions:a,isAirPlayConnected:u,paused:c,pictureInPicture:f,playing:g,pointer:T,poster:C,textTrack:q,viewType:D,waiting:ee}=e.$state;r.classList.add("plyr"),r.classList.add("plyr--full-ui");let ve={"plyr--airplay-active":u,"plyr--airplay-supported":t,"plyr--fullscreen-active":l,"plyr--fullscreen-enabled":i,"plyr--hide-controls":s,"plyr--is-touch":()=>T()==="coarse","plyr--loading":ee,"plyr--paused":c,"plyr--pip-active":f,"plyr--pip-enabled":o,"plyr--playing":g,"plyr__poster-enabled":C,"plyr--stopped":()=>c()&&n()===0,"plyr--captions-active":q,"plyr--captions-enabled":a},be=Zi();for(let se of Object.keys(ve))be.add(d(()=>void r.classList.toggle(se,!!ve[se]())));return be.add(d(()=>{let se=`plyr--${D()}`;return r.classList.add(se),()=>r.classList.remove(se)}),d(()=>{let{$provider:se}=e,_e=se()?.type,Oe=`plyr--${sc(_e)?"html5":_e}`;return r.classList.toggle(Oe,!!_e),()=>r.classList.remove(Oe)})),()=>be.empty()}function sc(r){return r==="audio"||r==="video"}var go=class extends ii{async loadIcons(){let e=(await import("./chunks/vidstack-235QJEHX.js")).icons,t={};for(let i of Object.keys(e))t[i]=uo({name:i,paths:e[i],viewBox:"0 0 18 18"});return t}};function Ii(r,e){return r()?.[e]??e}function hd(){return lc()}function fd(){let r=h(),{load:e}=r.$props,{canLoad:t}=r.$state;return w(()=>e()==="play"&&!t())()?[gd(),md()]:[nc(),ac(),md(),dc(),Mc(),Cc()]}function gd(){let r=h(),{translations:e}=Q(),{title:t}=r.$state,i=m(()=>`${Ii(e,"Play")}, ${t()}`);return p`
    <media-play-button
      class="plyr__control plyr__control--overlaid"
      aria-label=${i}
      data-plyr="play"
    >
      <slot name="play-icon"></slot>
    </button>
  `}function nc(){let{controls:r}=Q();return m(()=>r().includes("play-large")?gd():null)}function ac(){let{thumbnails:r,previewTime:e}=Q();return p`
    <media-thumbnail
      .src=${m(r)}
      class="plyr__preview-scrubbing"
      time=${m(()=>e())}
    ></media-thumbnail>
  `}function md(){let r=h(),{poster:e}=r.$state,t=m(()=>`background-image: url("${e()}");`);return p`<div class="plyr__poster" style=${t}></div>`}function lc(){let r=new Set(["captions","pip","airplay","fullscreen"]),{controls:e}=Q(),t=m(()=>e().filter(i=>!r.has(i)).map(yd));return p`<div class="plyr__controls">${t}</div>`}function dc(){let{controls:r}=Q(),e=m(()=>r().map(yd));return p`<div class="plyr__controls">${e}</div>`}function yd(r){switch(r){case"airplay":return uc();case"captions":return cc();case"current-time":return xc();case"download":return Sc();case"duration":return vd();case"fast-forward":return vc();case"fullscreen":return pc();case"mute":case"volume":case"mute+volume":return Tc(r);case"pip":return hc();case"play":return fc();case"progress":return bc();case"restart":return gc();case"rewind":return yc();case"settings":return $c();default:return null}}function uc(){let{translations:r}=Q();return p`
    <media-airplay-button class="plyr__controls__item plyr__control" data-plyr="airplay">
      <slot name="airplay-icon"></slot>
      <span class="plyr__tooltip">${U(r,"AirPlay")}</span>
    </media-airplay-button>
  `}function cc(){let{translations:r}=Q(),e=U(r,"Disable captions"),t=U(r,"Enable captions");return p`
    <media-caption-button
      class="plyr__controls__item plyr__control"
      data-no-label
      data-plyr="captions"
    >
      <slot name="captions-on-icon" data-class="icon--pressed"></slot>
      <slot name="captions-off-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-caption-button>
  `}function pc(){let{translations:r}=Q(),e=U(r,"Enter Fullscreen"),t=U(r,"Exit Fullscreen");return p`
    <media-fullscreen-button
      class="plyr__controls__item plyr__control"
      data-no-label
      data-plyr="fullscreen"
    >
      <slot name="enter-fullscreen-icon" data-class="icon--pressed"></slot>
      <slot name="exit-fullscreen-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-fullscreen-button>
  `}function mc(){let{translations:r}=Q(),e=U(r,"Mute"),t=U(r,"Unmute");return p`
    <media-mute-button class="plyr__control" data-no-label data-plyr="mute">
      <slot name="muted-icon" data-class="icon--pressed"></slot>
      <slot name="volume-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-mute-button>
  `}function hc(){let{translations:r}=Q(),e=U(r,"Enter PiP"),t=U(r,"Exit PiP");return p`
    <media-pip-button class="plyr__controls__item plyr__control" data-no-label data-plyr="pip">
      <slot name="pip-icon"></slot>
      <slot name="enter-pip-icon" data-class="icon--pressed"></slot>
      <slot name="exit-pip-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-pip-button>
  `}function fc(){let{translations:r}=Q(),e=U(r,"Play"),t=U(r,"Pause");return p`
    <media-play-button class="plyr__controls__item plyr__control" data-no-label data-plyr="play">
      <slot name="pause-icon" data-class="icon--pressed"></slot>
      <slot name="play-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-play-button>
  `}function gc(){let{translations:r}=Q(),{remote:e}=h(),t=U(r,"Restart");function i(o){ht(o)&&!ft(o)||e.seek(0,o)}return p`
    <button
      type="button"
      class="plyr__control"
      data-plyr="restart"
      @pointerup=${i}
      @keydown=${i}
    >
      <slot name="restart-icon"></slot>
      <span class="plyr__tooltip">${t}</span>
    </button>
  `}function yc(){let{translations:r,seekTime:e}=Q(),t=m(()=>`${Ii(r,"Rewind")} ${e()}s`),i=m(()=>-1*e());return p`
    <media-seek-button
      class="plyr__controls__item plyr__control"
      seconds=${i}
      data-no-label
      data-plyr="rewind"
    >
      <slot name="rewind-icon"></slot>
      <span class="plyr__tooltip">${t}</span>
    </media-seek-button>
  `}function vc(){let{translations:r,seekTime:e}=Q(),t=m(()=>`${Ii(r,"Forward")} ${e()}s`),i=m(e);return p`
    <media-seek-button
      class="plyr__controls__item plyr__control"
      seconds=${i}
      data-no-label
      data-plyr="fast-forward"
    >
      <slot name="fast-forward-icon"></slot>
      <span class="plyr__tooltip">${t}</span>
    </media-seek-button>
  `}function bc(){let r=h(),{duration:e,viewType:t}=r.$state,{translations:i,markers:o,thumbnails:s,seekTime:n,previewTime:l}=Q(),a=U(i,"Seek"),u=E(null),c=m(()=>{let D=u();return D?p`<span class="plyr__progress__marker-label">${oa(D.label)}<br /></span>`:null});function f(D){l.set(D.detail)}function g(){u.set(this)}function T(){u.set(null)}function C(){let D=s(),ee=m(()=>t()==="audio");return D?p`
          <media-slider-preview class="plyr__slider__preview" ?no-clamp=${ee}>
            <media-slider-thumbnail .src=${D} class="plyr__slider__preview__thumbnail">
              <span class="plyr__slider__preview__time-container">
                ${c}
                <media-slider-value class="plyr__slider__preview__time"></media-slider-value>
              </span>
            </media-slider-thumbnail>
          </media-slider-preview>
        `:p`
          <span class="plyr__tooltip">
            ${c}
            <media-slider-value></media-slider-value>
          </span>
        `}function q(){let D=e();return Number.isFinite(D)?o()?.map(ee=>p`
        <span
          class="plyr__progress__marker"
          @mouseenter=${g.bind(ee)}
          @mouseleave=${T}
          style=${`left: ${ee.time/D*100}%;`}
        ></span>
      `):null}return p`
    <div class="plyr__controls__item plyr__progress__container">
      <div class="plyr__progress">
        <media-time-slider
          class="plyr__slider"
          data-plyr="seek"
          pause-while-dragging
          key-step=${m(n)}
          aria-label=${a}
          @media-seeking-request=${f}
        >
          <div class="plyr__slider__track"></div>
          <div class="plyr__slider__thumb"></div>
          <div class="plyr__slider__buffer"></div>
          ${m(C)}${m(q)}
        </media-time-slider>
      </div>
    </div>
  `}function Tc(r){return m(()=>{let e=r==="mute"||r==="mute+volume",t=r==="volume"||r==="mute+volume";return p`
      <div class="plyr__controls__item plyr__volume">
        ${[e?mc():null,t?Ec():null]}
      </div>
    `})}function Ec(){let{translations:r}=Q(),e=U(r,"Volume");return p`
    <media-volume-slider class="plyr__slider" data-plyr="volume" aria-label=${e}>
      <div class="plyr__slider__track"></div>
      <div class="plyr__slider__thumb"></div>
    </media-volume-slider>
  `}function xc(){let r=h(),{translations:e,invertTime:t,toggleTime:i,displayDuration:o}=Q(),s=E(v(t));function n(a){!i()||o()||ht(a)&&!ft(a)||s.set(u=>!u)}function l(){return m(()=>o()?vd():null)}return m(()=>{let{streamType:a}=r.$state,u=U(e,"LIVE"),c=U(e,"Current time"),f=m(()=>!o()&&s());return a()==="live"||a()==="ll-live"?p`
          <media-live-button
            class="plyr__controls__item plyr__control plyr__live-button"
            data-plyr="live"
          >
            <span class="plyr__live-button__text">${u}</span>
          </media-live-button>
        `:p`
          <media-time
            type="current"
            class="plyr__controls__item plyr__time plyr__time--current"
            tabindex="0"
            role="timer"
            aria-label=${c}
            ?remainder=${f}
            @pointerup=${n}
            @keydown=${n}
          ></media-time>
          ${l()}
        `})}function vd(){let{translations:r}=Q(),e=U(r,"Duration");return p`
    <media-time
      type="duration"
      class="plyr__controls__item plyr__time plyr__time--duration"
      role="timer"
      tabindex="0"
      aria-label=${e}
    ></media-time>
  `}function Sc(){return m(()=>{let r=h(),{translations:e,download:t}=Q(),{title:i,source:o}=r.$state,s=o(),n=t(),l=rr({title:i(),src:s,download:n}),a=U(e,"Download");return l?p`
          <a
            class="plyr__controls__item plyr__control"
            href=${l.url+`?download=${l.name}`}
            download=${l.name}
            target="_blank"
          >
            <slot name="download-icon" />
            <span class="plyr__tooltip">${a}</span>
          </a>
        `:null})}function Mc(){return m(()=>{let{clickToPlay:r,clickToFullscreen:e}=Q();return[r()?p`
            <media-gesture
              class="plyr__gesture"
              event="pointerup"
              action="toggle:paused"
            ></media-gesture>
          `:null,e()?p`
            <media-gesture
              class="plyr__gesture"
              event="dblpointerup"
              action="toggle:fullscreen"
            ></media-gesture>
          `:null]})}function Cc(){let r=h(),e=E(void 0),t=m(()=>oa(e()?.text));return d(()=>{let i=r.$state.textTrack();if(!i)return;function o(){e.set(i?.activeCues[0])}return o(),S(i,"cue-change",o)}),p`
    <div class="plyr__captions" dir="auto">
      <span class="plyr__caption">${t}</span>
    </div>
  `}function $c(){let{translations:r}=Q(),e=U(r,"Settings");return p`
    <div class="plyr__controls__item plyr__menu">
      <media-menu>
        <media-menu-button class="plyr__control" data-plyr="settings">
          <slot name="settings-icon" />
          <span class="plyr__tooltip">${e}</span>
        </media-menu-button>
        <media-menu-items class="plyr__menu__container" placement="top end">
          <div><div>${[kc(),Rc(),Dc(),wc()]}</div></div>
        </media-menu-items>
      </media-menu>
    </div>
  `}function yo({label:r,children:e}){let t=E(!1);return p`
    <media-menu @open=${()=>t.set(!0)} @close=${()=>t.set(!1)}>
      ${Pc({label:r,open:t})}
      <media-menu-items>${e}</media-menu-items>
    </media-menu>
  `}function Pc({open:r,label:e}){let{translations:t}=Q(),i=m(()=>`plyr__control plyr__control--${r()?"back":"forward"}`);function o(){let s=U(t,"Go back to previous menu");return m(()=>r()?p`<span class="plyr__sr-only">${s}</span>`:null)}return p`
    <media-menu-button class=${i} data-plyr="settings">
      <span class="plyr__menu__label" aria-hidden=${Ic(r)}>
        ${U(t,e)}
      </span>
      <span class="plyr__menu__value" data-part="hint"></span>
      ${o()}
    </media-menu-button>
  `}function kc(){return yo({label:"Audio",children:_c()})}function _c(){let{translations:r}=Q();return p`
    <media-audio-radio-group empty-label=${U(r,"Default")}>
      <template>
        <media-radio class="plyr__control" data-plyr="audio">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-audio-radio-group>
  `}function wc(){return yo({label:"Speed",children:Lc()})}function Lc(){let{translations:r,speed:e}=Q();return p`
    <media-speed-radio-group .rates=${e} normal-label=${U(r,"Normal")}>
      <template>
        <media-radio class="plyr__control" data-plyr="speed">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-speed-radio-group>
  `}function Rc(){return yo({label:"Captions",children:Ac()})}function Ac(){let{translations:r}=Q();return p`
    <media-captions-radio-group off-label=${U(r,"Disabled")}>
      <template>
        <media-radio class="plyr__control" data-plyr="captions">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-captions-radio-group>
  `}function Dc(){return yo({label:"Quality",children:Vc()})}function Vc(){let{translations:r}=Q();return p`
    <media-quality-radio-group auto-label=${U(r,"Auto")}>
      <template>
        <media-radio class="plyr__control" data-plyr="quality">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-quality-radio-group>
  `}function Ic(r){return m(()=>r()?"true":"false")}function U(r,e){return m(()=>Ii(r,e))}var vo=class extends y(ze,fo){static tagName="media-plyr-layout";#e;onSetup(){this.forwardKeepAlive=!1,this.#e=h()}onConnect(){this.#e.player.el?.setAttribute("data-layout","plyr"),$(()=>this.#e.player.el?.removeAttribute("data-layout")),pd(this,this.#e),d(()=>{this.$props.customIcons()?new lt([this]).connect():new go([this]).connect()})}render(){return m(this.#t.bind(this))}#t(){let{viewType:e}=this.#e.$state;return e()==="audio"?hd():e()==="video"?fd():null}};k(po);k(ho);k(vo);function da(r,e){let t=String(r),i=t.length;if(i<e){let s=e-i;return`${"0".repeat(s)}${r}`}return t}function bd(r){let e=Math.trunc(r/3600),t=Math.trunc(r%3600/60),i=Math.trunc(r%60),o=Number((r-Math.trunc(r)).toPrecision(3));return{hours:e,minutes:t,seconds:i,fraction:o}}function ut(r,{padHrs:e=null,padMins:t=null,showHrs:i=!1,showMs:o=!1}={}){let{hours:s,minutes:n,seconds:l,fraction:a}=bd(r),u=e?da(s,2):s,c=t||we(t)&&r>=3600?da(n,2):n,f=da(l,2),g=o&&a>0?`.${String(a).replace(/^0?\./,"")}`:"",T=`${c}:${f}${g}`;return s>0||i?`${u}:${T}`:T}function Rt(r){let e=[],{hours:t,minutes:i,seconds:o}=bd(r);return t>0&&e.push(`${t} hour`),i>0&&e.push(`${i} min`),(o>0||e.length===0)&&e.push(`${o} sec`),e.join(" ")}var bo=class extends b{static props={translations:null};static state=new ue({label:null,busy:!1});#e;#t=!1;onSetup(){this.#e=h()}onAttach(e){e.style.display="contents"}onConnect(e){e.setAttribute("data-media-announcer",""),L(e,"role","status"),L(e,"aria-live","polite");let{busy:t}=this.$state;this.setAttributes({"aria-busy":()=>t()?"true":null}),this.#t=!0,d(this.#i.bind(this)),d(this.#n.bind(this)),d(this.#s.bind(this)),d(this.#r.bind(this)),d(this.#o.bind(this)),d(this.#u.bind(this)),d(this.#p.bind(this)),ne(),this.#t=!1}#i(){let{paused:e}=this.#e.$state;this.#d(e()?"Pause":"Play")}#r(){let{fullscreen:e}=this.#e.$state;this.#d(e()?"Enter Fullscreen":"Exit Fullscreen")}#o(){let{pictureInPicture:e}=this.#e.$state;this.#d(e()?"Enter PiP":"Exit PiP")}#s(){let{textTrack:e}=this.#e.$state;this.#d(e()?"Closed-Captions On":"Closed-Captions Off")}#n(){let{muted:e,volume:t,audioGain:i}=this.#e.$state;this.#d(e()||t()===0?"Mute":`${Math.round(t()*(i()??1)*100)}% ${this.#c("Volume")}`)}#a=-1;#l=-1;#u(){let{seeking:e,currentTime:t}=this.#e.$state,i=e();this.#a>0?(window.clearTimeout(this.#l),this.#l=window.setTimeout(()=>{if(!this.scope)return;let o=v(t),s=Math.abs(o-this.#a);if(s>=1){let n=o>=this.#a,l=Rt(s);this.#d(`${this.#c(n?"Seek Forward":"Seek Backward")} ${l}`)}this.#a=-1,this.#l=-1},300)):i&&(this.#a=v(t))}#c(e){let{translations:t}=this.$props;return t?.()?.[e||""]??e}#p(){let{label:e,busy:t}=this.$state,i=this.#c(e());if(this.#t)return;t.set(!0);let o=window.setTimeout(()=>void t.set(!1),150);return this.el&&x(this.el,"aria-label",i),P(i)&&this.dispatch("change",{detail:i}),()=>window.clearTimeout(o)}#d(e){let{label:t}=this.$state;t.set(e)}};var To=class extends y(HTMLElement,bo){static tagName="media-announcer"};var Eo=class extends Z{#e;constructor(e){super(),this.#e=e}onAttach(e){let{$props:t,ariaKeys:i}=h(),o=e.getAttribute("aria-keyshortcuts");if(o){i[this.#e]=o,$(()=>{delete i[this.#e]});return}let s=t.keyShortcuts()[this.#e];if(s){let n=N(s)?s.join(" "):P(s)?s:s?.keys;e.setAttribute("aria-keyshortcuts",N(n)?n.join(" "):n)}}};var z=class extends Z{static props={disabled:!1};#e;constructor(e){super(),this.#e=e,new X,e.keyShortcut&&new Eo(e.keyShortcut)}onSetup(){let{disabled:e}=this.$props;this.setAttributes({"data-pressed":this.#e.isPresssed,"aria-pressed":this.#t.bind(this),"aria-disabled":()=>e()?"true":null})}onAttach(e){L(e,"tabindex","0"),L(e,"role","button"),L(e,"type","button")}onConnect(e){ye(e,this.#r.bind(this));for(let t of["click","touchstart"])this.listen(t,this.#o.bind(this),{passive:!0})}#t(){return gt(this.#e.isPresssed())}#i(e){ka(this.#e.isPresssed)&&this.#e.isPresssed.set(t=>!t)}#r(e){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){e.preventDefault(),e.stopImmediatePropagation();return}e.preventDefault(),(this.#e.onPress??this.#i).call(this,e)}#o(e){this.$props.disabled()&&(e.preventDefault(),e.stopImmediatePropagation())}};var xo=class extends b{static props=z.props;#e;constructor(){super(),new z({isPresssed:this.#i.bind(this),onPress:this.#t.bind(this)})}onSetup(){this.#e=h();let{canAirPlay:e,isAirPlayConnected:t}=this.#e.$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":this.#r.bind(this),"aria-hidden":O(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","airplay"),pe(e,this.#o.bind(this))}#t(e){this.#e.remote.requestAirPlay(e)}#i(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="airplay"&&t()!=="disconnected"}#r(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="airplay"&&t()}#o(){let{remotePlaybackState:e}=this.#e.$state;return`AirPlay ${e()}`}};var So=class extends y(HTMLElement,xo){static tagName="media-airplay-button"};var Mo=class extends b{static props=z.props;#e;constructor(){super(),new z({isPresssed:this.#i.bind(this),keyShortcut:"toggleCaptions",onPress:this.#t.bind(this)})}onSetup(){this.#e=h(),this.setAttributes({"data-active":this.#i.bind(this),"data-supported":()=>!this.#r(),"aria-hidden":O(this.#r.bind(this))})}onAttach(e){e.setAttribute("data-media-tooltip","caption"),pe(e,"Captions")}#t(e){this.#e.remote.toggleCaptions(e)}#i(){let{textTrack:e}=this.#e.$state,t=e();return!!t&&j(t)}#r(){let{hasCaptions:e}=this.#e.$state;return!e()}};var Co=class extends y(HTMLElement,Mo){static tagName="media-caption-button"};var $o=class extends b{static props={...z.props,target:"prefer-media"};#e;constructor(){super(),new z({isPresssed:this.#i.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#t.bind(this)})}onSetup(){this.#e=h();let{fullscreen:e}=this.#e.$state,t=this.#r.bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":O(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","fullscreen"),pe(e,"Fullscreen")}#t(e){let t=this.#e.remote,i=this.$props.target();this.#i()?t.exitFullscreen(i,e):t.enterFullscreen(i,e)}#i(){let{fullscreen:e}=this.#e.$state;return e()}#r(){let{canFullscreen:e}=this.#e.$state;return e()}};var Po=class extends y(HTMLElement,$o){static tagName="media-fullscreen-button"};var ko=class extends b{static props=z.props;#e;constructor(){super(),new z({isPresssed:this.#i.bind(this),onPress:this.#t.bind(this)})}onSetup(){this.#e=h();let{canGoogleCast:e,isGoogleCastConnected:t}=this.#e.$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":this.#r.bind(this),"aria-hidden":O(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","google-cast"),pe(e,this.#o.bind(this))}#t(e){this.#e.remote.requestGoogleCast(e)}#i(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="google-cast"&&t()!=="disconnected"}#r(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="google-cast"&&t()}#o(){let{remotePlaybackState:e}=this.#e.$state;return`Google Cast ${e()}`}};var _o=class extends y(HTMLElement,ko){static tagName="media-google-cast-button"};var wo=class extends b{static props={disabled:!1};#e;constructor(){super(),new X}onSetup(){this.#e=h();let{disabled:e}=this.$props,{live:t,liveEdge:i}=this.#e.$state,o=()=>!t();this.setAttributes({"data-edge":i,"data-hidden":o,"aria-disabled":O(()=>e()||i()),"aria-hidden":O(o)})}onAttach(e){L(e,"tabindex","0"),L(e,"role","button"),L(e,"type","button"),e.setAttribute("data-media-tooltip","live")}onConnect(e){ye(e,this.#t.bind(this))}#t(e){let{disabled:t}=this.$props,{liveEdge:i}=this.#e.$state;t()||i()||this.#e.remote.seekToLiveEdge(e)}};var Lo=class extends y(HTMLElement,wo){static tagName="media-live-button"};var Ro=class extends b{static props=z.props;#e;constructor(){super(),new z({isPresssed:this.#i.bind(this),keyShortcut:"toggleMuted",onPress:this.#t.bind(this)})}onSetup(){this.#e=h(),this.setAttributes({"data-muted":this.#i.bind(this),"data-state":this.#r.bind(this)})}onAttach(e){e.setAttribute("data-media-mute-button",""),e.setAttribute("data-media-tooltip","mute"),pe(e,"Mute")}#t(e){let t=this.#e.remote;this.#i()?t.unmute(e):t.mute(e)}#i(){let{muted:e,volume:t}=this.#e.$state;return e()||t()===0}#r(){let{muted:e,volume:t}=this.#e.$state,i=t();if(e()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}};var Ao=class extends y(HTMLElement,Ro){static tagName="media-mute-button"};var Do=class extends b{static props=z.props;#e;constructor(){super(),new z({isPresssed:this.#i.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#t.bind(this)})}onSetup(){this.#e=h();let{pictureInPicture:e}=this.#e.$state,t=this.#r.bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":O(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","pip"),pe(e,"PiP")}#t(e){let t=this.#e.remote;this.#i()?t.exitPictureInPicture(e):t.enterPictureInPicture(e)}#i(){let{pictureInPicture:e}=this.#e.$state;return e()}#r(){let{canPictureInPicture:e}=this.#e.$state;return e()}};var Vo=class extends y(HTMLElement,Do){static tagName="media-pip-button"};var Io=class extends b{static props=z.props;#e;constructor(){super(),new z({isPresssed:this.#i.bind(this),keyShortcut:"togglePaused",onPress:this.#t.bind(this)})}onSetup(){this.#e=h();let{paused:e,ended:t}=this.#e.$state;this.setAttributes({"data-paused":e,"data-ended":t})}onAttach(e){e.setAttribute("data-media-tooltip","play"),pe(e,"Play")}#t(e){let t=this.#e.remote;this.#i()?t.pause(e):t.play(e)}#i(){let{paused:e}=this.#e.$state;return!e()}};var Oo=class extends y(HTMLElement,Io){static tagName="media-play-button"};var qo=class extends b{static props={disabled:!1,seconds:30};#e;constructor(){super(),new X}onSetup(){this.#e=h();let{seeking:e}=this.#e.$state,{seconds:t}=this.$props,i=this.#t.bind(this);this.setAttributes({seconds:t,"data-seeking":e,"data-supported":i,"aria-hidden":O(()=>!i())})}onAttach(e){L(e,"tabindex","0"),L(e,"role","button"),L(e,"type","button"),e.setAttribute("data-media-tooltip","seek"),pe(e,this.#i.bind(this))}onConnect(e){ye(e,this.#r.bind(this))}#t(){let{canSeek:e}=this.#e.$state;return e()}#i(){let{seconds:e}=this.$props;return`Seek ${e()>0?"forward":"backward"} ${e()} seconds`}#r(e){let{seconds:t,disabled:i}=this.$props;if(i())return;let{currentTime:o}=this.#e.$state,s=o()+t();this.#e.remote.seek(s,e)}};var Ho=class extends y(HTMLElement,qo){static tagName="media-seek-button"};var No=class extends b{static props={disabled:!1,defaultPressed:!1};#e=E(!1);get pressed(){return this.#e()}constructor(){super(),new z({isPresssed:this.#e})}};var Fo=class extends y(HTMLElement,No){static tagName="media-toggle-button"};var Bo=class{priority=10;#e=null;#t=Zi();#i;constructor(e){this.#i=e}attach(){}canRender(){return!0}detach(){this.#t.empty(),this.#i.reset(),this.#e=null}changeTrack(e){!e||this.#e===e||(this.#t.empty(),e.readyState<2?(this.#i.reset(),this.#t.add(S(e,"load",()=>this.#r(e),{once:!0}))):this.#r(e),this.#t.add(S(e,"add-cue",t=>{this.#i.addCue(t.detail)}),S(e,"remove-cue",t=>{this.#i.removeCue(t.detail)})),this.#e=e)}#r(e){this.#i.changeTrack({cues:[...e.cues],regions:[...e.regions]})}};var Go=class r extends b{static props={textDir:"ltr",exampleText:"Captions look like this."};#e;static lib=E(null);onSetup(){this.#e=h(),this.setAttributes({"aria-hidden":O(this.#t.bind(this))})}onAttach(e){e.style.setProperty("pointer-events","none")}onConnect(e){r.lib()||import("https://cdn.jsdelivr.net/npm/media-captions@next/dist/prod.js").then(t=>r.lib.set(t)),d(this.#i.bind(this))}#t(){let{textTrack:e,remotePlaybackState:t,iOSControls:i}=this.#e.$state,o=e();return i()||t()==="connected"||!o||!j(o)}#i(){if(!r.lib())return;let{viewType:e}=this.#e.$state;return e()==="audio"?this.#r():this.#a()}#r(){return d(this.#o.bind(this)),this.#c(null),()=>{this.el.textContent=""}}#o(){if(this.#t())return;this.#s();let{textTrack:e}=this.#e.$state;S(e(),"cue-change",this.#s.bind(this)),d(this.#n.bind(this))}#s(){this.el.textContent="",this.#m>=0&&this.#g();let{realCurrentTime:e,textTrack:t}=this.#e.$state,{renderVTTCueString:i}=r.lib(),o=v(e),s=v(t).activeCues;for(let n of s){let l=this.#y(),a=this.#b();a.innerHTML=i(n,o),l.append(a),this.el.append(a)}}#n(){let{realCurrentTime:e}=this.#e.$state,{updateTimedVTTCueNodes:t}=r.lib();t(this.el,e())}#a(){let{CaptionsRenderer:e}=r.lib(),t=new e(this.el),i=new Bo(t);return this.#e.textRenderers.add(i),d(this.#l.bind(this,t)),d(this.#u.bind(this,t)),this.#c(t),()=>{this.el.textContent="",this.#e.textRenderers.remove(i),t.destroy()}}#l(e){e.dir=this.$props.textDir()}#u(e){if(this.#t())return;let{realCurrentTime:t,textTrack:i}=this.#e.$state;e.currentTime=t(),this.#m>=0&&i()?.activeCues[0]&&this.#g()}#c(e){let t=this.#e.player;if(!t)return;let i=this.#p.bind(this,e);S(t,"vds-font-change",i)}#p(e){if(this.#m>=0){this.#h();return}let{textTrack:t}=this.#e.$state;t()?.activeCues[0]?e?.update(!0):this.#d()}#d(){let e=this.#y();x(e,"data-example","");let t=this.#b();x(t,"data-example",""),t.textContent=this.$props.exampleText(),e?.append(t),this.el?.append(e),this.el?.setAttribute("data-example",""),this.#h()}#m=-1;#h(){window.clearTimeout(this.#m),this.#m=window.setTimeout(this.#g.bind(this),2500)}#g(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.#m=-1}#y(){let e=document.createElement("div");return x(e,"data-part","cue-display"),e}#b(){let e=document.createElement("div");return x(e,"data-part","cue"),e}};var Qo=class extends y(HTMLElement,Go){static tagName="media-captions"};var ua=class extends b{static props={defaultText:""}},Wo=class extends y(HTMLElement,ua){static tagName="media-chapter-title";#e;#t;onSetup(){this.#e=h(),this.#t=E("")}onConnect(){let e=this.#e.textTracks;Wa(e,"chapters",this.#t.set),d(this.#i.bind(this))}#i(){let{defaultText:e}=this.$props;this.textContent=this.#t()||e()}};var Ko=class extends b{static props={hideDelay:2e3,hideOnMouseLeave:!1};#e;onSetup(){this.#e=h(),d(this.#i.bind(this))}onAttach(e){let{pictureInPicture:t,fullscreen:i}=this.#e.$state;ae(e,"pointer-events","none"),L(e,"role","group"),this.setAttributes({"data-visible":this.#r.bind(this),"data-fullscreen":i,"data-pip":t}),d(()=>{this.dispatch("change",{detail:this.#r()})}),d(this.#t.bind(this)),d(()=>{let o=i();for(let s of["top","right","bottom","left"])ae(e,`padding-${s}`,o&&`env(safe-area-inset-${s})`)})}#t(){if(!this.el)return;let{nativeControls:e}=this.#e.$state,t=e();x(this.el,"aria-hidden",t?"true":null),ae(this.el,"display",t?"none":null)}#i(){let{controls:e}=this.#e.player,{hideDelay:t,hideOnMouseLeave:i}=this.$props;e.defaultDelay=t()===2e3?this.#e.$props.controlsDelay():t(),e.hideOnMouseLeave=i()}#r(){let{controlsVisible:e}=this.#e.$state;return e()}};var Uo=class extends y(HTMLElement,Ko){static tagName="media-controls"};var zo=class extends b{onAttach(e){e.style.pointerEvents||ae(e,"pointer-events","auto")}};var Yo=class extends y(HTMLElement,zo){static tagName="media-controls-group"};var jo=class extends b{static props={disabled:!1,event:void 0,action:void 0};#e;#t=null;onSetup(){this.#e=h();let{event:e,action:t}=this.$props;this.setAttributes({event:e,action:t})}onAttach(e){e.setAttribute("data-media-gesture",""),e.style.setProperty("pointer-events","none")}onConnect(e){this.#t=this.#e.player.el?.querySelector("[data-media-provider]"),d(this.#i.bind(this))}#i(){let e=this.$props.event(),t=this.$props.disabled();!this.#t||!e||t||(/^dbl/.test(e)&&(e=e.split(/^dbl/)[1]),(e==="pointerup"||e==="pointerdown")&&this.#e.$state.pointer()==="coarse"&&(e=e==="pointerup"?"touchend":"touchstart"),S(this.#t,e,this.#s.bind(this),{passive:!1}))}#r=0;#o=-1;#s(e){if(this.$props.disabled()||mn(e)&&(e.button!==0||this.#e.activeMenu)||Ji(e)&&this.#e.activeMenu||Ht(e)||!this.#a(e))return;if(e.MEDIA_GESTURE=!0,e.preventDefault(),!v(this.$props.event)?.startsWith("dbl"))this.#r===0&&setTimeout(()=>{this.#r===1&&this.#n(e)},250);else if(this.#r===1){queueMicrotask(()=>this.#n(e)),clearTimeout(this.#o),this.#r=0;return}this.#r===0&&(this.#o=window.setTimeout(()=>{this.#r=0},275)),this.#r++}#n(e){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.#l()&&this.#u(v(this.$props.action),e),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}#a(e){if(!this.el)return!1;if(mn(e)||Ma(e)||Ji(e)){let t=Ji(e)?e.changedTouches[0]??e.touches[0]:void 0,i=t?.clientX??e.clientX,o=t?.clientY??e.clientY,s=this.el.getBoundingClientRect(),n=o>=s.top&&o<=s.bottom&&i>=s.left&&i<=s.right;return e.type.includes("leave")?!n:n}return!0}#l(){let e=this.#e.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(e).sort((t,i)=>+getComputedStyle(i).zIndex-+getComputedStyle(t).zIndex)[0]===this.el}#u(e,t){if(!e)return;let i=new G("will-trigger",{detail:e,cancelable:!0,trigger:t});if(this.dispatchEvent(i),i.defaultPrevented)return;let[o,s]=e.replace(/:([a-z])/,"-$1").split(":");e.includes(":fullscreen")?this.#e.remote.toggleFullscreen("prefer-media",t):e.includes("seek:")?this.#e.remote.seek(v(this.#e.$state.currentTime)+(+s||0),t):this.#e.remote[La(o)](t),this.dispatch("trigger",{detail:e,trigger:t})}};var Xo=class extends y(HTMLElement,jo){static tagName="media-gesture"};var ca=class extends b{static props={when:!1}},Jo=class extends y(HTMLElement,ca){static tagName="media-layout";#e;onSetup(){this.#e=h()}onConnect(){d(this.#t.bind(this))}#t(){let e=this.firstElementChild,t=e?.localName==="template",i=this.$props.when();if(!(Xi(i)?i:w(()=>i(this.#e.player.state))())){t?(this.textContent="",this.appendChild(e)):Ee(e)&&(e.style.display="none");return}t?this.append(e.content.cloneNode(!0)):Ee(e)&&(e.style.display="")}};var F=re();var Oi=re();var fe=class extends Z{#e=new Set;#t=E("");#i=null;onValueChange;get values(){return Array.from(this.#e).map(e=>e.value())}get value(){return this.#t()}set value(e){this.#n(e)}onSetup(){W(Oi,{add:this.#r.bind(this),remove:this.#o.bind(this)})}onAttach(e){K(F)||L(e,"role","radiogroup"),this.setAttributes({value:this.#t})}onDestroy(){this.#e.clear()}#r(e){this.#e.has(e)||(this.#e.add(e),e.onCheck=this.#s,e.check(e.value()===this.#t()))}#o(e){e.onCheck=null,this.#e.delete(e)}#s=this.#n.bind(this);#n(e,t){let i=v(this.#t);if(!e||e===i)return;let o=this.#a(i),s=this.#a(e);o?.check(!1,t),s?.check(!0,t),this.#t.set(e),this.onValueChange?.(e,t)}#a(e){for(let t of this.#e)if(e===v(t.value))return t;return null}};var Oc=[1,1.25,1.5,1.75,2,2.5,3,4],Zo=class extends b{static props={normalLabel:"Disabled",gains:Oc};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{gains:e}=this.$props,{canSetAudioGain:t}=this.#e.$state;return!t()||e().length===0}constructor(){super(),this.#i=new fe,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=h(),K(F)&&(this.#t=A(F))}onConnect(e){d(this.#r.bind(this)),d(this.#o.bind(this)),d(this.#s.bind(this))}getOptions(){let{gains:e,normalLabel:t}=this.$props;return e().map(i=>({label:i===1||i===null?t:String(i*100)+"%",value:i.toString()}))}#r(){this.#i.value=this.#n()}#o(){let{normalLabel:e}=this.$props,{audioGain:t}=this.#e.$state,i=t();this.#t?.hint.set(i===1||i==null?e():String(i*100)+"%")}#s(){this.#t?.disable(this.disabled)}#n(){let{audioGain:e}=this.#e.$state;return e()?.toString()??"1"}#a(e,t){if(this.disabled)return;let i=+e;this.#e.remote.changeAudioGain(i,t),this.dispatch("change",{detail:i,trigger:t})}};function Ve(r,e){le(()=>{if(!r.connectScope)return;let t=r.querySelector("template");t&&d(()=>{let i=r.getOptions();Nt(t,i.length,(o,s)=>{let{label:n,value:l}=i[s],a=o.querySelector('[data-part="label"]');o.setAttribute("value",l),a&&(P(n)?a.textContent=n:d(()=>{a.textContent=n()})),e?.(o,i[s],s)})})})}var es=class extends y(HTMLElement,Zo){static tagName="media-audio-gain-radio-group";onConnect(){Ve(this)}};var ts=class extends b{static props={emptyLabel:"Default"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{audioTracks:e}=this.#t.$state;return e().length<=1}constructor(){super(),this.#i=new fe,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=h(),K(F)&&(this.#e=A(F))}onConnect(e){d(this.#r.bind(this)),d(this.#s.bind(this)),d(this.#o.bind(this))}getOptions(){let{audioTracks:e}=this.#t.$state;return e().map(t=>({track:t,label:t.label,value:t.label.toLowerCase()}))}#r(){this.#i.value=this.#n()}#o(){let{emptyLabel:e}=this.$props,{audioTrack:t}=this.#t.$state,i=t();this.#e?.hint.set(i?.label??e())}#s(){this.#e?.disable(this.disabled)}#n(){let{audioTrack:e}=this.#t.$state,t=e();return t?t.label.toLowerCase():""}#a(e,t){if(this.disabled)return;let i=this.#t.audioTracks.toArray().findIndex(o=>o.label.toLowerCase()===e);if(i>=0){let o=this.#t.audioTracks[i];this.#t.remote.changeAudioTrack(i,t),this.dispatch("change",{detail:o,trigger:t})}}};var is=class extends y(HTMLElement,ts){static tagName="media-audio-radio-group";onConnect(){Ve(this)}};var rs=class extends b{static props={offLabel:"Off"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{hasCaptions:e}=this.#e.$state;return!e()}constructor(){super(),this.#i=new fe,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=h(),K(F)&&(this.#t=A(F))}onConnect(e){super.onConnect?.(e),d(this.#r.bind(this)),d(this.#s.bind(this)),d(this.#o.bind(this))}getOptions(){let{offLabel:e}=this.$props,{textTracks:t}=this.#e.$state;return[{value:"off",label:e},...t().filter(j).map(i=>({track:i,label:i.label,value:this.#l(i)}))]}#r(){this.#i.value=this.#n()}#o(){let{offLabel:e}=this.$props,{textTrack:t}=this.#e.$state,i=t();this.#t?.hint.set(i&&j(i)&&i.mode==="showing"?i.label:e())}#s(){this.#t?.disable(this.disabled)}#n(){let{textTrack:e}=this.#e.$state,t=e();return t&&j(t)&&t.mode==="showing"?this.#l(t):"off"}#a(e,t){if(this.disabled)return;if(e==="off"){let o=this.#e.textTracks.selected;if(o){let s=this.#e.textTracks.indexOf(o);this.#e.remote.changeTextTrackMode(s,"disabled",t),this.dispatch("change",{detail:null,trigger:t})}return}let i=this.#e.textTracks.toArray().findIndex(o=>this.#l(o)===e);if(i>=0){let o=this.#e.textTracks[i];this.#e.remote.changeTextTrackMode(i,"showing",t),this.dispatch("change",{detail:o,trigger:t})}}#l(e){return e.id+":"+e.kind+"-"+e.label.toLowerCase()}};var os=class extends y(HTMLElement,rs){static tagName="media-captions-radio-group";onConnect(){Ve(this)}};var ss=class extends b{static props={thumbnails:null};#e;#t;#i;#r=E(null);#o=E([]);get value(){return this.#i.value}get disabled(){return!this.#o()?.length}constructor(){super(),this.#i=new fe,this.#i.onValueChange=this.#c.bind(this)}onSetup(){this.#e=h(),K(F)&&(this.#t=A(F));let{thumbnails:e}=this.$props;this.setAttributes({"data-thumbnails":()=>!!e()})}onAttach(e){this.#t?.attachObserver({onOpen:this.#s.bind(this)})}getOptions(){let{clipStartTime:e,clipEndTime:t}=this.#e.$state,i=e(),o=t()||1/0;return this.#o().map((s,n)=>({cue:s,value:n.toString(),label:s.text,startTime:ut(Math.max(0,s.startTime-i)),duration:Rt(Math.min(o,s.endTime)-Math.max(i,s.startTime))}))}#s(){v(()=>this.#l())}onConnect(e){d(this.#l.bind(this)),d(this.#u.bind(this)),d(this.#n.bind(this)),Ge(this.#e.textTracks,"chapters",this.#r.set)}#n(){let e=this.#r();if(!e)return;let t=this.#a.bind(this,e);return t(),S(e,"add-cue",t),S(e,"remove-cue",t),()=>{this.#o.set([])}}#a(e){let{clipStartTime:t,clipEndTime:i}=this.#e.$state,o=t(),s=i()||1/0;this.#o.set([...e.cues].filter(n=>n.startTime<=s&&n.endTime>=o))}#l(){if(!this.#t?.expanded())return;if(!this.#r()){this.#i.value="-1";return}let{realCurrentTime:t,clipStartTime:i,clipEndTime:o}=this.#e.$state,s=i(),n=o()||1/0,l=t(),a=this.#o().findIndex(u=>Qa(u,l));this.#i.value=a.toString(),a>=0&&le(()=>{if(!this.connectScope)return;let u=this.#o()[a],c=this.el.querySelector("[aria-checked='true']"),f=Math.max(s,u.startTime),g=Math.min(n,u.endTime)-f,T=Math.max(0,l-f)/g*100;c&&ae(c,"--progress",B(T,3)+"%")})}#u(){this.#t?.disable(this.disabled)}#c(e,t){if(this.disabled||!t)return;let i=+e,o=this.#o(),{clipStartTime:s}=this.#e.$state;ge(i)&&o?.[i]&&(this.#i.value=i.toString(),this.#e.remote.seek(o[i].startTime-s(),t),this.dispatch("change",{detail:o[i],trigger:t}))}};var ns=class extends y(HTMLElement,ss){static tagName="media-chapters-radio-group";onConnect(){Ve(this,(e,t)=>{let{cue:i,startTime:o,duration:s}=t,n=e.querySelector(".vds-thumbnail,media-thumbnail"),l=e.querySelector('[data-part="start-time"]'),a=e.querySelector('[data-part="duration"]');l&&(l.textContent=o),a&&(a.textContent=s),n&&(n.setAttribute("time",i.startTime+""),d(()=>{let u=this.$props.thumbnails();"src"in n?n.src=u:P(u)&&n.setAttribute("src",u)}))})}};var oi=class extends b{static props={disabled:!1};#e;#t=E(null);get expanded(){return this.#e?.expanded()??!1}constructor(){super(),new X}onSetup(){this.#e=A(F)}onAttach(e){this.#e.attachMenuButton(this),d(this.#i.bind(this)),L(e,"type","button")}onConnect(e){d(this.#r.bind(this)),this.#o();let t=new MutationObserver(this.#o.bind(this));t.observe(e,{attributeFilter:["data-part"],childList:!0,subtree:!0}),$(()=>t.disconnect()),ye(e,i=>{this.dispatch("select",{trigger:i})})}#i(){this.#e.disableMenuButton(this.$props.disabled())}#r(){let e=this.#t();e&&d(()=>{let t=this.#e.hint();t&&(e.textContent=t)})}#o(){let e=this.el?.querySelector('[data-part="hint"]');this.#t.set(e??null)}};var as=class extends y(HTMLElement,oi){static tagName="media-menu-button"};var si=class extends Z{#e;constructor(e){super(),this.#e=e,d(this.#t.bind(this))}onDestroy(){this.#o?.(),this.#o=null}#t(){let e=this.#e.trigger();if(!e){this.hide();return}let t=this.show.bind(this),i=this.hide.bind(this);this.#e.listen(e,t,i)}#i=-1;#r=-1;#o=null;show(e){this.#s(),window.cancelAnimationFrame(this.#r),this.#r=-1,this.#o?.(),this.#o=null,this.#i=window.setTimeout(()=>{this.#i=-1;let t=this.#e.content();t&&t.style.removeProperty("display"),v(()=>this.#e.onChange(!0,e))},this.#e.showDelay?.()??0)}hide(e){this.#s(),v(()=>this.#e.onChange(!1,e)),this.#r=requestAnimationFrame(()=>{this.#s(),this.#r=-1;let t=this.#e.content();if(t){let i=()=>{t.style.display="none",this.#o=null};if(za(t)){this.#o?.();let s=S(t,"animationend",i,{once:!0});this.#o=s}else i()}})}#s(){window.clearTimeout(this.#i),this.#i=-1}};var ni=re(),At=re();var Td=r=>typeof r=="object"&&r!=null&&r.nodeType===1,Ed=(r,e)=>(!e||r!=="hidden")&&r!=="visible"&&r!=="clip",pa=(r,e)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){let t=getComputedStyle(r,null);return Ed(t.overflowY,e)||Ed(t.overflowX,e)||(i=>{let o=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!o&&(o.clientHeight<i.scrollHeight||o.clientWidth<i.scrollWidth)})(r)}return!1},ls=(r,e,t,i,o,s,n,l)=>s<r&&n>e||s>r&&n<e?0:s<=r&&l<=t||n>=e&&l>=t?s-r-i:n>e&&l<t||s<r&&l>t?n-e+o:0,qc=r=>{let e=r.parentElement;return e??(r.getRootNode().host||null)},xd=(r,e)=>{var t,i,o,s;if(typeof document>"u")return[];let{scrollMode:n,block:l,inline:a,boundary:u,skipOverflowHiddenElements:c}=e,f=typeof u=="function"?u:pt=>pt!==u;if(!Td(r))throw new TypeError("Invalid target");let g=document.scrollingElement||document.documentElement,T=[],C=r;for(;Td(C)&&f(C);){if(C=qc(C),C===g){T.push(C);break}C!=null&&C===document.body&&pa(C)&&!pa(document.documentElement)||C!=null&&pa(C,c)&&T.push(C)}let q=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,D=(s=(o=window.visualViewport)==null?void 0:o.height)!=null?s:innerHeight,{scrollX:ee,scrollY:ve}=window,{height:be,width:se,top:_e,right:Oe,bottom:ct,left:qe}=r.getBoundingClientRect(),{top:ui,right:Hi,bottom:tt,left:Ye}=(pt=>{let Y=window.getComputedStyle(pt);return{top:parseFloat(Y.scrollMarginTop)||0,right:parseFloat(Y.scrollMarginRight)||0,bottom:parseFloat(Y.scrollMarginBottom)||0,left:parseFloat(Y.scrollMarginLeft)||0}})(r),Te=l==="start"||l==="nearest"?_e-ui:l==="end"?ct+tt:_e+be/2-ui+tt,de=a==="center"?qe+se/2-Ye+Hi:a==="end"?Oe+Hi:qe-Ye,Dt=[];for(let pt=0;pt<T.length;pt++){let Y=T[pt],{height:Ni,width:Fi,top:Bi,right:dn,bottom:un,left:Gi}=Y.getBoundingClientRect();if(n==="if-needed"&&_e>=0&&qe>=0&&ct<=D&&Oe<=q&&_e>=Bi&&ct<=un&&qe>=Gi&&Oe<=dn)return Dt;let Qi=getComputedStyle(Y),Wi=parseInt(Qi.borderLeftWidth,10),Ki=parseInt(Qi.borderTopWidth,10),Ui=parseInt(Qi.borderRightWidth,10),zi=parseInt(Qi.borderBottomWidth,10),it=0,rt=0,Yi="offsetWidth"in Y?Y.offsetWidth-Y.clientWidth-Wi-Ui:0,ji="offsetHeight"in Y?Y.offsetHeight-Y.clientHeight-Ki-zi:0,cn="offsetWidth"in Y?Y.offsetWidth===0?0:Fi/Y.offsetWidth:0,pn="offsetHeight"in Y?Y.offsetHeight===0?0:Ni/Y.offsetHeight:0;if(g===Y)it=l==="start"?Te:l==="end"?Te-D:l==="nearest"?ls(ve,ve+D,D,Ki,zi,ve+Te,ve+Te+be,be):Te-D/2,rt=a==="start"?de:a==="center"?de-q/2:a==="end"?de-q:ls(ee,ee+q,q,Wi,Ui,ee+de,ee+de+se,se),it=Math.max(0,it+ve),rt=Math.max(0,rt+ee);else{it=l==="start"?Te-Bi-Ki:l==="end"?Te-un+zi+ji:l==="nearest"?ls(Bi,un,Ni,Ki,zi+ji,Te,Te+be,be):Te-(Bi+Ni/2)+ji/2,rt=a==="start"?de-Gi-Wi:a==="center"?de-(Gi+Fi/2)+Yi/2:a==="end"?de-dn+Ui+Yi:ls(Gi,dn,Fi,Wi,Ui+Yi,de,de+se,se);let{scrollLeft:ya,scrollTop:va}=Y;it=pn===0?0:Math.max(0,Math.min(va+it/pn,Y.scrollHeight-Ni/pn+ji)),rt=cn===0?0:Math.max(0,Math.min(ya+rt/cn,Y.scrollWidth-Fi/cn+Yi)),Te+=va-it,de+=ya-rt}Dt.push({el:Y,top:it,left:rt})}return Dt};function Hc(r,e){let t=xd(r,e);for(let{el:i,top:o,left:s}of t)i.scroll({top:o,left:s,behavior:e.behavior})}function Sd(r,e={}){Hc(r,{scrollMode:"if-needed",block:"center",inline:"center",...e})}var Nc=["a[href]","[tabindex]","input","select","button"].map(r=>`${r}:not([aria-hidden='true'])`).join(","),Fc=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]),ds=class{#e=-1;#t=null;#i=[];#r;get items(){return this.#i}constructor(e){this.#r=e}attachMenu(e){S(e,"focus",this.#n.bind(this)),this.#t=e,$(()=>{this.#t=null})}listen(){this.#t&&(this.update(),S(this.#t,"keyup",this.#l.bind(this)),S(this.#t,"keydown",this.#u.bind(this)),$(()=>{this.#e=-1,this.#i=[]}))}update(){this.#e=0,this.#i=this.#p()}scroll(e=this.#s()){let t=this.#i[e];t&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{Sd(t,{behavior:"smooth",boundary:i=>!i.hasAttribute("data-root")})})})}focusActive(e=!0){let t=this.#s();this.#o(t>=0?t:0,e)}#o(e,t=!0){this.#e=e,this.#i[e]?(this.#i[e].focus({preventScroll:!0}),t&&this.scroll(e)):this.#t?.focus({preventScroll:!0})}#s(){return this.#i.findIndex(e=>document.activeElement===e||e.getAttribute("role")==="menuitemradio"&&e.getAttribute("aria-checked")==="true")}#n(){this.#e>=0||(this.update(),this.focusActive())}#a(e){let t=e.target;if(Ca(e)&&t instanceof Element){let i=t.getAttribute("role");return!/a|input|select|button/.test(t.localName)&&!i}return Fc.has(e.key)}#l(e){this.#a(e)&&(e.stopPropagation(),e.preventDefault())}#u(e){if(this.#a(e))switch(e.stopPropagation(),e.preventDefault(),e.key){case"Escape":this.#r.closeMenu(e);break;case"Tab":this.#o(this.#c(e.shiftKey?-1:1));break;case"ArrowUp":this.#o(this.#c(-1));break;case"ArrowDown":this.#o(this.#c(1));break;case"Home":case"PageUp":this.#o(0);break;case"End":case"PageDown":this.#o(this.#i.length-1);break}}#c(e){let t=this.#e;do t=(t+e+this.#i.length)%this.#i.length;while(this.#i[t]?.offsetParent===null);return t}#p(){if(!this.#t)return[];let e=this.#t.querySelectorAll(Nc),t=[],i=o=>o.getAttribute("role")==="menu";for(let o of e)Ee(o)&&o.offsetParent!==null&&nr(this.#t,o,i)&&t.push(o);return t}};var Bc=0,us=class extends b{static props={showDelay:0};#e;#t;#i;#r=E(!1);#o=E(!1);#s=E(null);#n=E(null);#a;#l=new Set;#u=null;#c;#p;#d=!1;#m=E(!1);#h=new Set;get triggerElement(){return this.#s()}get contentElement(){return this.#n()}get isSubmenu(){return!!this.#a}constructor(){super();let{showDelay:e}=this.$props;this.#c=new si({trigger:this.#s,content:this.#n,showDelay:e,listen:(t,i,o)=>{ye(t,n=>{this.#r()?o(n):i(n)});let s=this.#w();s&&ye(s,n=>{n.stopPropagation(),o(n)})},onChange:this.#x.bind(this)})}onSetup(){this.#e=h();let e=++Bc;this.#t=`media-menu-${e}`,this.#i=`media-menu-button-${e}`,this.#p=new ds({closeMenu:this.close.bind(this)}),K(F)&&(this.#a=A(F)),this.#g(),this.setAttributes({"data-open":this.#r,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#$.bind(this)}),W(F,{button:this.#s,content:this.#n,expanded:this.#r,hint:E(""),submenu:!!this.#a,disable:this.#k.bind(this),attachMenuButton:this.#b.bind(this),attachMenuItems:this.#T.bind(this),attachObserver:this.#E.bind(this),disableMenuButton:this.#C.bind(this),addSubmenu:this.#D.bind(this),onTransitionEvent:t=>{this.#h.add(t),$(()=>{this.#h.delete(t)})}})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){d(this.#y.bind(this)),this.isSubmenu&&this.#a?.addSubmenu(this)}onDestroy(){this.#s.set(null),this.#n.set(null),this.#u=null,this.#h.clear()}#g(){let e=-1,t=K(At)?A(At):null;W(At,{onDragStart:()=>{t?.onDragStart?.(),window.clearTimeout(e),e=-1,this.#d=!0},onDragEnd:()=>{t?.onDragEnd?.(),e=window.setTimeout(()=>{this.#d=!1,e=-1},300)}})}#y(){let e=this.#M();this.isSubmenu||this.#q(),this.#v(e),e&&(d(()=>{let{height:t}=this.#e.$state,i=this.#n();i&&ae(i,"--player-height",t()+"px")}),this.#p.listen(),this.listen("pointerup",this.#_.bind(this)),S(window,"pointerup",this.#P.bind(this)))}#b(e){let t=e.el,i=this.isSubmenu,o=O(this.#$.bind(this));L(t,"tabindex",i?"-1":"0"),L(t,"role",i?"menuitem":"button"),x(t,"id",this.#i),x(t,"aria-haspopup","menu"),x(t,"aria-expanded","false"),x(t,"data-root",!this.isSubmenu),x(t,"data-submenu",this.isSubmenu),d(()=>{x(t,"data-open",this.#r()),x(t,"aria-disabled",o())}),this.#s.set(t),$(()=>{this.#s.set(null)})}#T(e){let t=e.el;t.style.setProperty("display","none"),x(t,"id",this.#t),L(t,"role","menu"),L(t,"tabindex","-1"),x(t,"data-root",!this.isSubmenu),x(t,"data-submenu",this.isSubmenu),this.#n.set(t),$(()=>this.#n.set(null)),d(()=>x(t,"data-open",this.#r())),this.#p.attachMenu(t),this.#v(!1);let o=this.#B.bind(this);this.isSubmenu?this.#a?.onTransitionEvent(o):(e.listen("transitionstart",o),e.listen("transitionend",o),e.listen("animationend",this.#q),e.listen("vds-menu-resize",this.#q))}#E(e){this.#u=e}#v(e){let t=v(this.#n);t&&x(t,"aria-hidden",gt(!e))}#C(e){this.#m.set(e)}#f=!1;#x(e,t){if(this.#f=ht(t),t?.stopPropagation(),this.#r()===e)return;if(this.#$()){e&&this.#c.hide(t);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let i=this.#s(),o=this.#n();if(i&&(x(i,"aria-controls",e&&this.#t),x(i,"aria-expanded",gt(e))),o&&x(o,"aria-labelledby",e&&this.#i),this.#r.set(e),this.#R(t),ne(),this.#f){e?o?.focus():i?.focus();for(let s of[this.el,o])s&&s.setAttribute("data-keyboard","")}else for(let s of[this.el,o])s&&s.removeAttribute("data-keyboard");if(this.dispatch(e?"open":"close",{trigger:t}),e)!this.isSubmenu&&this.#e.activeMenu!==this&&(this.#e.activeMenu?.close(t),this.#e.activeMenu=this),this.#u?.onOpen?.(t);else{if(this.isSubmenu)for(let s of this.#l)s.close(t);else this.#e.activeMenu=null;this.#u?.onClose?.(t)}e&&requestAnimationFrame(this.#S.bind(this))}#S(){this.#H||this.#L||(this.#p.update(),requestAnimationFrame(()=>{this.#f?this.#p.focusActive():this.#p.scroll()}))}#M(){return!this.#$()&&this.#r()}#$(){return this.#o()||this.#m()}#k(e){this.#o.set(e)}#_(e){let t=this.#n();this.#d||t&&vn(t,e)||e.stopPropagation()}#P(e){let t=this.#n();this.#d||t&&vn(t,e)||this.close(e)}#w(){let e=this.el?.querySelector('[data-part="close-target"]');return this.el&&e&&nr(this.el,e,t=>t.getAttribute("role")==="menu")?e:null}#R(e){this.isSubmenu||(this.#r()?this.#e.remote.pauseControls(e):this.#e.remote.resumeControls(e))}#D(e){this.#l.add(e),S(e,"open",this.#O),S(e,"close",this.#N),$(this.#A)}#A=this.#I.bind(this);#I(e){this.#l.delete(e)}#L=!1;#O=this.#V.bind(this);#V(e){this.#L=!0;let t=this.#n();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(let i of this.#l)if(i!==e.target)for(let o of[i.el,i.triggerElement])o?.setAttribute("aria-hidden","true");if(t){let i=e.target.el;for(let o of t.children)o.contains(i)?o.setAttribute("data-open",""):o!==i&&o.setAttribute("data-hidden","")}}#N=this.#F.bind(this);#F(e){this.#L=!1;let t=this.#n();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(let i of this.#l)for(let o of[i.el,i.triggerElement])o?.setAttribute("aria-hidden","false");if(t)for(let i of t.children)i.removeAttribute("data-open"),i.removeAttribute("data-hidden")}#q=ce(()=>{let e=v(this.#n);if(!e)return;let t=0,i=getComputedStyle(e),o=[...e.children];for(let s of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])t+=parseFloat(i[s])||0;for(let s of o)if(Ee(s)&&s.style.display==="contents")o.push(...s.children);else if(s.nodeType===3)t+=parseFloat(getComputedStyle(s).fontSize);else if(Ee(s)){if(!Ua(s))continue;let n=getComputedStyle(s);t+=s.offsetHeight+(parseFloat(n.marginTop)||0)+(parseFloat(n.marginBottom)||0)}ae(e,"--menu-height",t+"px")});#H=!1;#B(e){let t=this.#n();t&&e.propertyName==="height"&&(this.#H=e.type==="transitionstart",x(t,"data-transition",this.#H?"height":null),this.#r()&&this.#S());for(let i of this.#h)i(e)}open(e){v(this.#r)||(this.#c.show(e),ne())}close(e){v(this.#r)&&(this.#c.hide(e),ne())}};var cs=class extends y(HTMLElement,us){static tagName="media-menu"};var ps=class extends oi{};var ms=class extends y(HTMLElement,ps){static tagName="media-menu-item"};var hs=class extends b{static props={container:null,disabled:!1};#e=null;#t;onSetup(){this.#t=h(),W(qi,{attach:this.#i.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){}onDestroy(){this.#e?.remove(),this.#e=null}#i(e){this.#o(!1),this.#e=e,le(()=>{le(()=>{this.connectScope&&d(this.#r.bind(this))})})}#r(){let{fullscreen:e}=this.#t.$state,{disabled:t}=this.$props;this.#o(t()==="fullscreen"?!e():!t())}#o(e){if(!this.#e)return;let t=this.#s(this.$props.container());if(!t)return;let i=this.#e.parentElement===t;x(this.#e,"data-portal",e),e?i||(this.#e.remove(),t.append(this.#e)):i&&this.#e.parentElement===t&&(this.#e.remove(),this.el?.append(this.#e))}#s(e){return Ee(e)?e:e?document.querySelector(e):document.body}},qi=re();var fs=class extends b{static props={placement:null,offset:0,alignOffset:0};#e;constructor(){super(),new X;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){if(this.#e=A(F),this.#e.attachMenuItems(this),K(qi)){let t=A(qi);t&&(W(qi,null),t.attach(e),$(()=>t.attach(null)))}}onConnect(e){d(this.#t.bind(this))}#t(){if(!this.el)return;let e=this.$props.placement();if(e){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:t,alignOffset:i}=this.$props;return dr(this.el,this.#i(),e,{offsetVarName:"media-menu",xOffset:i(),yOffset:t()})}else this.el.removeAttribute("style"),this.el.style.display="none"}#i(){return this.#e.button()}};var gs=class extends y(HTMLElement,fs){static tagName="media-menu-items"};var ys=class extends y(HTMLElement,hs){static tagName="media-menu-portal";static attrs={disabled:{converter(e){return P(e)?e:e!==null}}}};var vs=class extends b{static props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{canSetQuality:e,qualities:t}=this.#e.$state;return!e()||t().length<=1}#r=w(()=>{let{sort:e}=this.$props,{qualities:t}=this.#e.$state;return ti(t(),e()==="descending")});constructor(){super(),this.#i=new fe,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=h(),K(F)&&(this.#t=A(F))}onConnect(e){d(this.#o.bind(this)),d(this.#n.bind(this)),d(this.#s.bind(this))}getOptions(){let{autoLabel:e,hideBitrate:t}=this.$props;return[{value:"auto",label:e},...this.#r().map(i=>{let o=i.bitrate&&i.bitrate>=0?`${B(i.bitrate/1e6,2)} Mbps`:null;return{quality:i,label:i.height+"p",value:this.#u(i),bitrate:()=>t()?null:o}})]}#o(){this.#i.value=this.#l()}#s(){let{autoLabel:e}=this.$props,{autoQuality:t,quality:i}=this.#e.$state,o=i()?i().height+"p":"";this.#t?.hint.set(t()?e()+(o?` (${o})`:""):o)}#n(){this.#t?.disable(this.disabled)}#a(e,t){if(this.disabled)return;if(e==="auto"){this.#e.remote.changeQuality(-1,t),this.dispatch("change",{detail:"auto",trigger:t});return}let{qualities:i}=this.#e.$state,o=v(i).findIndex(s=>this.#u(s)===e);if(o>=0){let s=v(i)[o];this.#e.remote.changeQuality(o,t),this.dispatch("change",{detail:s,trigger:t})}}#l(){let{quality:e,autoQuality:t}=this.#e.$state;if(t())return"auto";let i=e();return i?this.#u(i):"auto"}#u(e){return e.height+"_"+e.bitrate}};var bs=class extends y(HTMLElement,vs){static tagName="media-quality-radio-group";onConnect(){Ve(this,(e,t)=>{let i=t.bitrate,o=e.querySelector('[data-part="bitrate"]');i&&o&&d(()=>{o.textContent=i()||""})})}};var Ts=class extends b{static props={value:""};#e=E(!1);#t={value:this.$props.value,check:this.#n.bind(this),onCheck:null};get checked(){return this.#e()}constructor(){super(),new X}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.#e,"aria-checked":O(this.#e)})}onAttach(e){let t=K(F);L(e,"tabindex",t?"-1":"0"),L(e,"role",t?"menuitemradio":"radio"),d(this.#o.bind(this))}onConnect(e){this.#r(),ye(e,this.#s.bind(this)),$(this.#i.bind(this))}#i(){He(()=>{A(Oi).remove(this.#t)},this.connectScope)}#r(){A(Oi).add(this.#t)}#o(){let{value:e}=this.$props,t=e();v(this.#e)&&this.#t.onCheck?.(t)}#s(e){v(this.#e)||(this.#a(!0,e),this.#l(e),this.#t.onCheck?.(v(this.$props.value),e))}#n(e,t){v(this.#e)!==e&&this.#a(e,t)}#a(e,t){this.#e.set(e),this.dispatch("change",{detail:e,trigger:t})}#l(e){this.dispatch("select",{trigger:e})}};var Es=class extends y(HTMLElement,Ts){static tagName="media-radio"};var xs=class extends b{static props={value:""};#e;get values(){return this.#e.values}get value(){return this.#e.value}set value(e){this.#e.value=e}constructor(){super(),this.#e=new fe,this.#e.onValueChange=this.#i.bind(this)}onSetup(){d(this.#t.bind(this))}#t(){this.#e.value=this.$props.value()}#i(e,t){let i=this.createEvent("change",{detail:e,trigger:t});this.dispatch(i)}};var Ss=class extends y(HTMLElement,xs){static tagName="media-radio-group"};var Gc=[.25,.5,.75,1,1.25,1.5,1.75,2],Ms=class extends b{static props={normalLabel:"Normal",rates:Gc};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{rates:e}=this.$props,{canSetPlaybackRate:t}=this.#e.$state;return!t()||e().length===0}constructor(){super(),this.#i=new fe,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=h(),K(F)&&(this.#t=A(F))}onConnect(e){d(this.#r.bind(this)),d(this.#o.bind(this)),d(this.#s.bind(this))}getOptions(){let{rates:e,normalLabel:t}=this.$props;return e().map(i=>({label:i===1?t:i+"\xD7",value:i.toString()}))}#r(){this.#i.value=this.#n()}#o(){let{normalLabel:e}=this.$props,{playbackRate:t}=this.#e.$state,i=t();this.#t?.hint.set(i===1?e():i+"\xD7")}#s(){this.#t?.disable(this.disabled)}#n(){let{playbackRate:e}=this.#e.$state;return e().toString()}#a(e,t){if(this.disabled)return;let i=+e;this.#e.remote.changePlaybackRate(i,t),this.dispatch("change",{detail:i,trigger:t})}};var Cs=class extends y(HTMLElement,Ms){static tagName="media-speed-radio-group";onConnect(){Ve(this)}};var $s=class extends b{static props={src:null,alt:null,crossOrigin:null};static state=new ue({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#e;onSetup(){this.#e=h(),this.#a(),this.#l(),this.#u(),this.#r()}onAttach(e){e.style.setProperty("pointer-events","none"),d(this.#s.bind(this)),d(this.#a.bind(this)),d(this.#l.bind(this)),d(this.#u.bind(this)),d(this.#r.bind(this));let{started:t}=this.#e.$state;this.setAttributes({"data-visible":()=>!t()&&!this.$state.hidden(),"data-loading":this.#o.bind(this),"data-error":this.#t.bind(this),"data-hidden":this.$state.hidden})}onConnect(e){d(this.#i.bind(this)),d(this.#c.bind(this))}#t(){let{error:e}=this.$state;return!we(e())}#i(){let{canLoadPoster:e,poster:t}=this.#e.$state;!e()&&t()&&Be(t(),"preconnect")}#r(){let{src:e}=this.$props,{poster:t,nativeControls:i}=this.#e.$state;this.el&&x(this.el,"display",i()?"none":null),this.$state.hidden.set(this.#t()||!(e()||t())||i())}#o(){let{loading:e,hidden:t}=this.$state;return!t()&&e()}#s(){let e=this.$state.img();e&&(S(e,"load",this.#p.bind(this)),S(e,"error",this.#d.bind(this)),e.complete&&this.#p())}#n="";#a(){let{poster:e}=this.#e.$props,{canLoadPoster:t,providedPoster:i,inferredPoster:o}=this.#e.$state,s=this.$props.src()||"",n=s||e()||o();this.#n===i()&&i.set(s),this.$state.src.set(t()&&n.length?n:null),this.#n=s}#l(){let{src:e}=this.$props,{alt:t}=this.$state,{poster:i}=this.#e.$state;t.set(e()||i()?this.$props.alt():null)}#u(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i,poster:o}=this.#e.$state,s=e()!==null?e():i();t.set(/ytimg\.com|vimeo/.test(o()||"")?null:s===!0?"anonymous":s)}#c(){let{loading:e,error:t}=this.$state,{canLoadPoster:i,poster:o}=this.#e.$state;e.set(i()&&!!o()),t.set(null)}#p(){let{loading:e,error:t}=this.$state;e.set(!1),t.set(null)}#d(e){let{loading:t,error:i}=this.$state;t.set(!1),i.set(e)}};var Ps=class extends y(HTMLElement,$s){static tagName="media-poster";static attrs={crossOrigin:"crossorigin"};#e=document.createElement("img");onSetup(){this.$state.img.set(this.#e)}onConnect(){let{src:e,alt:t,crossOrigin:i}=this.$state;d(()=>{let{loading:o,hidden:s}=this.$state;this.#e.style.display=o()||s()?"none":""}),d(()=>{x(this.#e,"alt",t()),x(this.#e,"crossorigin",i()),x(this.#e,"src",e())}),this.#e.parentNode!==this&&this.prepend(this.#e)}};var Ce=new ue({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Md(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Md(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Md(r,e,t){let i=e-r,o=t-r;return i>0?o/i:0}var Fe=re(()=>({}));var ai=class extends Z{#e;#t;constructor(e){super(),this.#e=e}onConnect(e){this.#t=new IntersectionObserver(t=>{this.#e.callback?.(t,this.#t)},this.#e),this.#t.observe(e),$(this.#i.bind(this))}#i(){this.#t?.disconnect(),this.#t=void 0}};function Cd(r,e,t,i){return fi(r,B(t,Ka(i)),e)}function $d(r,e,t,i){let o=fi(0,t,1),s=e-r,n=s*o,l=n/i,a=i*Math.round(l);return r+a}var ma={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1},ks=class extends Z{#e;#t;#i;constructor(e,t){super(),this.#e=e,this.#t=t}onSetup(){K(At)&&(this.#i=A(At))}onConnect(){d(this.#u.bind(this)),d(this.#c.bind(this)),this.#e.swipeGesture&&d(this.#r.bind(this))}#r(){let{pointer:e}=this.#t.$state;if(e()!=="coarse"||!this.#e.swipeGesture()){this.#o=null;return}this.#o=this.#t.player.el?.querySelector("media-provider,[data-media-provider]"),this.#o&&(S(this.#o,"touchstart",this.#a.bind(this),{passive:!0}),S(this.#o,"touchmove",this.#l.bind(this),{passive:!1}))}#o=null;#s=null;#n=null;#a(e){this.#s=e.touches[0]}#l(e){if(we(this.#s)||Ht(e))return;let t=e.touches[0],i=t.clientX-this.#s.clientX,o=t.clientY-this.#s.clientY,s=this.$state.dragging();!s&&Math.abs(o)>5||s||(e.preventDefault(),Math.abs(i)>20&&(this.#s=t,this.#n=this.$state.value(),this.#E(this.#n,e)))}#u(){let{hidden:e}=this.$props;this.listen("focus",this.#p.bind(this)),this.listen("keydown",this.#x.bind(this)),this.listen("keyup",this.#S.bind(this)),!(e()||this.#e.isDisabled())&&(this.listen("pointerenter",this.#g.bind(this)),this.listen("pointermove",this.#y.bind(this)),this.listen("pointerleave",this.#b.bind(this)),this.listen("pointerdown",this.#T.bind(this)))}#c(){this.#e.isDisabled()||!this.$state.dragging()||(S(document,"pointerup",this.#k.bind(this),{capture:!0}),S(document,"pointermove",this.#P.bind(this)),S(document,"touchmove",this.#_.bind(this),{passive:!1}))}#p(){this.#m(this.$state.value())}#d(e,t){let{value:i,min:o,max:s,dragging:n}=this.$state,l=Math.max(o(),Math.min(e,s()));i.set(l);let a=this.createEvent("value-change",{detail:l,trigger:t});if(this.dispatch(a),this.#e.onValueChange?.(a),n()){let u=this.createEvent("drag-value-change",{detail:l,trigger:t});this.dispatch(u),this.#e.onDragValueChange?.(u)}}#m(e,t){let{pointerValue:i,dragging:o}=this.$state;i.set(e),this.dispatch("pointer-value-change",{detail:e,trigger:t}),o()&&this.#d(e,t)}#h(e){let t,i=this.el.getBoundingClientRect(),{min:o,max:s}=this.$state;if(this.$props.orientation()==="vertical"){let{bottom:n,height:l}=i;t=(n-e.clientY)/l}else if(this.#s&&ge(this.#n)){let{width:n}=this.#o.getBoundingClientRect(),l=(e.clientX-this.#s.clientX)/n,a=s()-o(),u=a*Math.abs(l);t=(l<0?this.#n-u:this.#n+u)/a}else{let{left:n,width:l}=i;t=(e.clientX-n)/l}return Math.max(o(),Math.min(s(),this.#e.roundValue($d(o(),s(),t,this.#e.getStep()))))}#g(e){this.$state.pointing.set(!0)}#y(e){let{dragging:t}=this.$state;t()||this.#m(this.#h(e),e)}#b(e){this.$state.pointing.set(!1)}#T(e){if(e.button!==0)return;let t=this.#h(e);this.#E(t,e),this.#m(t,e)}#E(e,t){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.#t.remote.pauseControls(t);let o=this.createEvent("drag-start",{detail:e,trigger:t});this.dispatch(o),this.#e.onDragStart?.(o),this.#i?.onDragStart?.()}#v(e,t){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.#t.remote.resumeControls(t);let o=this.createEvent("drag-end",{detail:e,trigger:t});this.dispatch(o),this.#e.onDragEnd?.(o),this.#s=null,this.#n=null,this.#i?.onDragEnd?.()}#C;#f=!1;#x(e){if(!Object.keys(ma).includes(e.key))return;let{key:i}=e,o=this.#M(e);if(!we(o)){this.#m(o,e),this.#d(o,e);return}let s=this.#$(e);this.#f||(this.#f=i===this.#C,!this.$state.dragging()&&this.#f&&this.#E(s,e)),this.#m(s,e),this.#C=i}#S(e){if(!Object.keys(ma).includes(e.key)||!we(this.#M(e)))return;let i=this.#f?this.$state.pointerValue():this.#$(e);this.#d(i,e),this.#v(i,e),this.#C="",this.#f=!1}#M(e){let t=e.key,{min:i,max:o}=this.$state;return t==="Home"||t==="PageUp"?i():t==="End"||t==="PageDown"?o():!e.metaKey&&/^[0-9]$/.test(t)?(o()-i())/10*Number(t):null}#$(e){let{key:t,shiftKey:i}=e;e.preventDefault(),e.stopPropagation();let{shiftKeyMultiplier:o}=this.$props,{min:s,max:n,value:l,pointerValue:a}=this.$state,u=this.#e.getStep(),c=this.#e.getKeyStep(),f=i?c*o():c,g=Number(ma[t]),T=f*g,C=this.#f?a():this.#e.getValue?.()??l(),q=(C+T)/u;return Math.max(s(),Math.min(n(),Number((u*q).toFixed(3))))}#k(e){if(e.button!==0)return;e.preventDefault(),e.stopImmediatePropagation();let t=this.#h(e);this.#m(t,e),this.#v(t,e)}#_(e){e.preventDefault()}#P=Se(e=>{this.#m(this.#h(e),e)},20,{leading:!0})};var ie=class extends Z{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#e;#t;#i=E(!0);#r=E(!0);constructor(e){super(),this.#t=e}onSetup(){this.#e=h();let e=new X;e.attach(this),this.$state.focused=e.focused.bind(e),K(Fe)||W(Fe,{default:"value"}),W(ni,{orientation:this.$props.orientation,disabled:this.#t.isDisabled,preview:E(null)}),d(this.#n.bind(this)),d(this.#a.bind(this)),d(this.#l.bind(this)),this.#c(),new ks(this.#t,this.#e).attach(this),new ai({callback:this.#o.bind(this)}).attach(this)}onAttach(e){L(e,"role","slider"),L(e,"tabindex","0"),L(e,"autocomplete","off"),d(this.#p.bind(this))}onConnect(e){$(sr(e,this.#i.set)),d(this.#s.bind(this))}#o(e){this.#r.set(e[0].isIntersecting)}#s(){let{hidden:e}=this.$props;this.$state.hidden.set(e()||!this.#i()||!this.#r.bind(this))}#n(){let{dragging:e,value:t,min:i,max:o}=this.$state;v(e)||t.set(Cd(i(),o(),t(),this.#t.getStep()))}#a(){this.$state.step.set(this.#t.getStep())}#l(){if(!this.#t.isDisabled())return;let{dragging:e,pointing:t}=this.$state;e.set(!1),t.set(!1)}#u(){return gt(this.#t.isDisabled())}#c(){let{orientation:e}=this.$props,{dragging:t,active:i,pointing:o}=this.$state;this.setAttributes({"data-dragging":t,"data-pointing":o,"data-active":i,"aria-disabled":this.#u.bind(this),"aria-valuemin":this.#t.aria.valueMin??this.$state.min,"aria-valuemax":this.#t.aria.valueMax??this.$state.max,"aria-valuenow":this.#t.aria.valueNow,"aria-valuetext":this.#t.aria.valueText,"aria-orientation":e})}#p(){let{fillPercent:e,pointerPercent:t}=this.$state;this.#d(B(e(),3),B(t(),3))}#d=ce((e,t)=>{this.el?.style.setProperty("--slider-fill",e+"%"),this.el?.style.setProperty("--slider-pointer",t+"%")})};var _s=class extends b{static props={...ie.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300};static state=Ce;#e;onSetup(){this.#e=h(),W(Fe,{default:"percent",percent:(e,t)=>B(this.$state.value(),t)+"%"}),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#s.bind(this),aria:{valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#l.bind(this),onValueChange:this.#a.bind(this)}).attach(this),d(this.#r.bind(this)),d(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-audio-gain-slider",""),L(e,"aria-label","Audio Boost");let{canSetAudioGain:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":O(()=>!t())})}#t(){let{value:e}=this.$state;return Math.round(e())}#i(){let{value:e}=this.$state;return e()+"%"}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}#o(){let{audioGain:e}=this.#e.$state,t=((e()??1)-1)*100;this.$state.value.set(t),this.dispatch("value-change",{detail:t})}#s(){let{disabled:e}=this.$props,{canSetAudioGain:t}=this.#e.$state;return e()||!t()}#n(e){if(!e.trigger)return;let t=B(1+e.detail/100,2);this.#e.remote.changeAudioGain(t,e)}#a(e){this.#n(e)}#l(e){this.#n(e)}};var ws=class extends y(HTMLElement,_s){static tagName="media-audio-gain-slider"};var Ls=class extends b{static props={...ie.props,step:1,keyStep:1,shiftKeyMultiplier:1};static state=Ce;#e;#t=w(()=>{let{qualities:e}=this.#e.$state;return ti(e())});onSetup(){this.#e=h(),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#n.bind(this),aria:{valueNow:this.#i.bind(this),valueText:this.#r.bind(this)},onDragValueChange:this.#c.bind(this),onValueChange:this.#u.bind(this)}).attach(this),d(this.#o.bind(this)),d(this.#s.bind(this))}onAttach(e){e.setAttribute("data-media-quality-slider",""),L(e,"aria-label","Video Quality");let{qualities:t,canSetQuality:i}=this.#e.$state,o=w(()=>i()&&t().length>0);this.setAttributes({"data-supported":o,"aria-hidden":O(()=>!o())})}#i(){let{value:e}=this.$state;return e()}#r(){let{quality:e}=this.#e.$state;if(!e())return"";let{height:t,bitrate:i}=e(),o=i&&i>0?`${(i/1e6).toFixed(2)} Mbps`:null;return t?`${t}p${o?` (${o})`:""}`:"Auto"}#o(){let e=this.#t();this.$state.max.set(Math.max(0,e.length-1))}#s(){let{quality:e}=this.#e.$state,t=this.#t(),i=Math.max(0,t.indexOf(e()));this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#n(){let{disabled:e}=this.$props,{canSetQuality:t,qualities:i}=this.#e.$state;return e()||i().length<=1||!t()}#a=Se(this.#l.bind(this),25);#l(e){if(!e.trigger)return;let{qualities:t}=this.#e,i=v(this.#t)[e.detail];this.#e.remote.changeQuality(t.indexOf(i),e)}#u(e){this.#a(e)}#c(e){this.#a(e)}};var Rs=class extends y(HTMLElement,Ls){static tagName="media-quality-slider"};var li=class extends b{static props={...ie.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=Ce;#e;#t;#i=E(null);constructor(){super();let{noSwipeGesture:e}=this.$props;new ie({swipeGesture:()=>!e(),getValue:this.#g.bind(this),getStep:this.#y.bind(this),getKeyStep:this.#b.bind(this),roundValue:this.#T,isDisabled:this.#E.bind(this),aria:{valueNow:this.#v.bind(this),valueText:this.#C.bind(this)},onDragStart:this.#p.bind(this),onDragValueChange:this.#d.bind(this),onDragEnd:this.#m.bind(this),onValueChange:this.#h.bind(this)})}onSetup(){this.#e=h(),W(Fe,{default:"time",value:this.#S.bind(this),time:this.#M.bind(this)}),this.setAttributes({"data-chapters":this.#o.bind(this)}),this.setStyles({"--slider-progress":this.#r.bind(this)}),d(this.#n.bind(this)),d(this.#s.bind(this))}onAttach(e){e.setAttribute("data-media-time-slider",""),L(e,"aria-label","Seek")}onConnect(e){d(this.#a.bind(this)),Ge(this.#e.textTracks,"chapters",this.#i.set)}#r(){let{bufferedEnd:e,duration:t}=this.#e.$state;return B(Math.min(e()/Math.max(t(),1),1)*100,3)+"%"}#o(){let{duration:e}=this.#e.$state;return this.#i()?.cues.length&&Number.isFinite(e())&&e()>0}#s(){this.#t=Se(this.#l.bind(this),this.$props.seekingRequestThrottle())}#n(){if(this.$state.hidden())return;let{value:e,dragging:t}=this.$state,i=this.#g();v(t)||(e.set(i),this.dispatch("value-change",{detail:i}))}#a(){let e=this.#e.player.el,{preview:t}=A(ni);e&&t()&&x(e,"data-preview",this.$state.active())}#l(e,t){this.#e.remote.seeking(e,t)}#u(e,t,i){this.#t.cancel();let{live:o}=this.#e.$state;if(o()&&t>=99){this.#e.remote.seekToLiveEdge(i);return}this.#e.remote.seek(e,i)}#c=!1;#p(e){let{pauseWhileDragging:t}=this.$props;if(t()){let{paused:i}=this.#e.$state;this.#c=!i(),this.#e.remote.pause(e)}}#d(e){this.#t(this.#f(e.detail),e)}#m(e){let{seeking:t}=this.#e.$state;v(t)||this.#l(this.#f(e.detail),e);let i=e.detail;this.#u(this.#f(i),i,e);let{pauseWhileDragging:o}=this.$props;o()&&this.#c&&(this.#e.remote.play(e),this.#c=!1)}#h(e){let{dragging:t}=this.$state;t()||!e.trigger||this.#m(e)}#g(){let{currentTime:e}=this.#e.$state;return this.#x(e())}#y(){let e=this.$props.step()/this.#e.$state.duration()*100;return Number.isFinite(e)?e:1}#b(){let e=this.$props.keyStep()/this.#e.$state.duration()*100;return Number.isFinite(e)?e:1}#T(e){return B(e,3)}#E(){let{disabled:e}=this.$props,{canSeek:t}=this.#e.$state;return e()||!t()}#v(){let{value:e}=this.$state;return Math.round(e())}#C(){let e=this.#f(this.$state.value()),{duration:t}=this.#e.$state;return Number.isFinite(e)?`${Rt(e)} out of ${Rt(t())}`:"live"}#f(e){let{duration:t}=this.#e.$state;return B(e/100*t(),5)}#x(e){let{liveEdge:t,duration:i}=this.#e.$state,o=Math.max(0,Math.min(1,t()?1:Math.min(e,i())/i()));return Number.isNaN(o)?0:Number.isFinite(o)?o*100:100}#S(e){let t=this.#f(e),{live:i,duration:o}=this.#e.$state;return Number.isFinite(t)?(i()?t-o():t).toFixed(0):"LIVE"}#M(e,t){let i=this.#f(e),{live:o,duration:s}=this.#e.$state,n=o()?i-s():i;return Number.isFinite(i)?`${n<0?"-":""}${ut(Math.abs(n),t)}`:"LIVE"}};var As=class extends b{static props={disabled:!1};#e;#t;#i;#r=null;#o=[];#s=E(null);#n=E([]);#a=E(-1);#l=E(-1);#u=0;get cues(){return this.#n()}get activeCue(){return this.#n()[this.#a()]||null}get activePointerCue(){return this.#n()[this.#l()]||null}onSetup(){this.#e=h(),this.#t=Le(li.state)}onAttach(e){Ge(this.#e.textTracks,"chapters",this.#c.bind(this)),d(this.#k.bind(this))}onConnect(){$(()=>this.#p.bind(this))}onDestroy(){this.#c(null)}setRefs(e){if(this.#o=e,this.#i?.dispose(),this.#o.length===1){let t=this.#o[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.#o.length>0&&He(()=>this.#d(),this.#i=ba())}#c(e){v(this.#s)!==e&&(this.#p(),this.#s.set(e))}#p(){this.#o=[],this.#n.set([]),this.#a.set(-1),this.#l.set(-1),this.#u=0,this.#i?.dispose()}#d(){this.#o.length&&d(this.#m.bind(this))}#m(){let{hidden:e}=this.#t;e()||(d(this.#h.bind(this)),d(this.#g.bind(this)),d(this.#y.bind(this)),d(this.#v.bind(this)))}#h(){let e=this.#n();if(!e.length)return;let t,{clipStartTime:i,clipEndTime:o}=this.#e.$state,s=i(),n=o()||e[e.length-1].endTime,l=n-s,a=100;for(let u=0;u<e.length;u++)if(t=e[u],this.#o[u]){let c=u===e.length-1?a:B((t.endTime-Math.max(s,t.startTime))/l*100,3);this.#o[u].style.width=c+"%",a-=c}}#g(){let{liveEdge:e,clipStartTime:t,duration:i}=this.#e.$state,{fillPercent:o,value:s}=this.#t,n=this.#n(),l=e(),a=v(this.#a),u=n[a],c=l?this.#n.length-1:this.#E(u&&u.startTime/i()*100<=v(s)?a:0,o());l||!u?this.#b(0,n.length,100):c>a?this.#b(a,c,100):c<a&&this.#b(c+1,a+1,0);let f=l?100:this.#M(n[c],o(),t(),this.#S(n));this.#T(this.#o[c],f),this.#a.set(c)}#y(){let{pointing:e,pointerPercent:t}=this.#t;if(!e()){this.#l.set(-1);return}let i=this.#E(0,t());this.#l.set(i)}#b(e,t,i){for(let o=e;o<t;o++)this.#T(this.#o[o],i)}#T(e,t){e&&(e.style.setProperty("--chapter-fill",t+"%"),x(e,"data-active",t>0&&t<100),x(e,"data-ended",t===100))}#E(e,t){let i=0,o=this.#n();if(t===0)return 0;if(t===100)return o.length-1;let{clipStartTime:s}=this.#e.$state,n=s(),l=this.#S(o);for(let a=e;a<o.length;a++)if(i=this.#M(o[a],t,n,l),i>=0&&i<100)return a;return 0}#v(){this.#C(this.#f())}#C=ce(e=>{let t,i=this.#n(),{clipStartTime:o}=this.#e.$state,s=o(),n=this.#S(i);for(let l=this.#u;l<this.#o.length;l++)if(t=this.#M(i[l],e,s,n),this.#o[l]?.style.setProperty("--chapter-progress",t+"%"),t<100){this.#u=l;break}});#f=w(this.#x.bind(this));#x(){let{bufferedEnd:e,duration:t}=this.#e.$state;return B(Math.min(e()/Math.max(t(),1),1),3)*100}#S(e){let{clipEndTime:t}=this.#e.$state,i=t();return i>0?i:e[e.length-1]?.endTime||0}#M(e,t,i,o){if(this.#n().length===0)return 0;let n=o-i,l=Math.max(0,e.startTime-i),a=Math.min(o,e.endTime)-i,u=l/n,c=u*100,f=Math.min(1,u+(a-l)/n)*100;return Math.max(0,B(t>=f?100:(t-c)/(f-c)*100,3))}#$(e){let t=[],{clipStartTime:i,clipEndTime:o,duration:s}=this.#e.$state,n=i(),l=o()||1/0;e=e.filter(c=>c.startTime<=l&&c.endTime>=n);let a=e[0];a&&a.startTime>n&&t.push(new window.VTTCue(n,a.startTime,""));for(let c=0;c<e.length-1;c++){let f=e[c],g=e[c+1];if(t.push(f),g){let T=g.startTime-f.endTime;T>0&&t.push(new window.VTTCue(f.endTime,f.endTime+T,""))}}let u=e[e.length-1];if(u){t.push(u);let c=s();c>=0&&c-u.endTime>1&&t.push(new window.VTTCue(u.endTime,s(),""))}return t}#k(){let{source:e}=this.#e.$state;e(),this.#_()}#_(){if(!this.scope)return;let{disabled:e}=this.$props;if(e()){this.#n.set([]),this.#a.set(0),this.#u=0;return}let t=this.#s();if(t){let i=this.#w.bind(this);i(),$(S(t,"add-cue",i)),$(S(t,"remove-cue",i)),d(this.#P.bind(this))}return this.#r=this.#A(),this.#r&&d(this.#R.bind(this)),()=>{this.#r&&(this.#r.textContent="",this.#r=null)}}#P(){this.#e.$state.duration(),this.#w()}#w=Wt(()=>{let e=v(this.#s);!this.scope||!e||!e.cues.length||(this.#n.set(this.#$(e.cues)),this.#a.set(0),this.#u=0)},150,!0);#R(){let e=this.activePointerCue||this.activeCue;this.#r&&(this.#r.textContent=e?.text||"")}#D(){let e=this.el;for(;e&&e.getAttribute("role")!=="slider";)e=e.parentElement;return e}#A(){let e=this.#D();return e?e.querySelector('[data-part="chapter-title"]'):null}};var Ds=class extends y(HTMLElement,As){static tagName="media-slider-chapters";#e=null;onConnect(){le(()=>{if(!this.connectScope)return;let e=this.querySelector("template");e&&(this.#e=e,d(this.#t.bind(this)))})}#t(){if(!this.#e)return;let e=Nt(this.#e,this.cues.length||1);this.setRefs(e)}};var Ie=class extends b{static props={...ie.props,min:0,max:100,value:0};static state=Ce;constructor(){super(),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#e.bind(this),valueText:this.#t.bind(this)}})}onSetup(){d(this.#i.bind(this)),d(this.#r.bind(this))}#e(){let{value:e}=this.$state;return Math.round(e())}#t(){let{value:e,max:t}=this.$state;return B(e()/t()*100,2)+"%"}#i(){let{value:e}=this.$props;this.$state.value.set(e())}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}};var Vs=class extends y(HTMLElement,Ie){static tagName="media-slider"};var Is=class extends b{static props={offset:0,noClamp:!1};#e;onSetup(){this.#e=A(ni);let{active:e}=Le(Ie.state);this.setAttributes({"data-visible":e})}onAttach(e){Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){let{preview:t}=this.#e;t.set(e),$(()=>t.set(null)),d(this.#t.bind(this));let i=new ResizeObserver(this.#t.bind(this));i.observe(e),$(()=>i.disconnect())}#t=ce(()=>{let{disabled:e,orientation:t}=this.#e;if(e())return;let i=this.el,{offset:o,noClamp:s}=this.$props;i&&Qc(i,{clamp:!s(),offset:o(),orientation:t()})})};function Qc(r,{clamp:e,offset:t,orientation:i}){let o=getComputedStyle(r),s=parseFloat(o.width),n=parseFloat(o.height),l={top:null,right:null,bottom:null,left:null};if(l[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${t}px))`,i==="horizontal"){let a=s/2;if(!e)l.left=`calc(var(--slider-pointer) - ${a}px)`;else{let u=`max(0px, calc(var(--slider-pointer) - ${a}px))`,c=`calc(100% - ${s}px)`;l.left=`min(${u}, ${c})`}}else{let a=n/2;if(!e)l.bottom=`calc(var(--slider-pointer) - ${a}px)`;else{let u=`max(${a}px, calc(var(--slider-pointer) - ${a}px))`,c=`calc(100% - ${n}px)`;l.bottom=`min(${u}, ${c})`}}Object.assign(r.style,l)}var Os=class extends y(HTMLElement,Is){static tagName="media-slider-preview"};var ha=class extends b{},qs=class extends y(HTMLElement,ha){static tagName="media-slider-steps";#e=null;onConnect(e){le(()=>{this.connectScope&&(this.#e=e.querySelector("template"),this.#e&&d(this.#t.bind(this)))})}#t(){if(!this.#e)return;let{min:e,max:t,step:i}=Le(Ce),o=(t()-e())/i();Nt(this.#e,Math.floor(o)+1)}};var Ze=new Map,Hs=new Map,Wc=void 0,Ns=class r{#e;#t;#i;$images=E([]);static create(e,t){let i=h();return new r(e,t,i)}constructor(e,t,i){this.#t=e,this.#i=t,this.#e=i,d(this.#r.bind(this))}#r(){let{canLoad:e}=this.#e.$state;if(!e())return;let t=this.#t();if(t){if(P(t)&&Ze.has(t)){let i=Ze.get(t);if(Ze.delete(t),Ze.set(t,i),Ze.size>99){let o=Ze.keys().next().value;Ze.delete(o)}this.$images.set(Ze.get(t))}else if(P(t)){let i=this.#i(),o=t+"::"+i;if(!Hs.has(o)){let s=new Promise(async(n,l)=>{try{let a=await fetch(t,{credentials:qt(i)});if(a.headers.get("content-type")==="application/json"){let c=await a.json();if(N(c))if(c[0]&&"text"in c[0])n(this.#n(c));else{for(let f=0;f<c.length;f++){let g=c[f];Qe(xa(g),!1),Qe("url"in g&&P(g.url),!1),Qe("startTime"in g&&ge(g.startTime),!1)}n(c)}else n(this.#s(c));return}import("https://cdn.jsdelivr.net/npm/media-captions@next/dist/prod.js").then(async({parseResponse:c})=>{try{let{cues:f}=await c(a);n(this.#n(f))}catch(f){l(f)}})}catch(a){l(a)}}).then(n=>(Ze.set(o,n),n)).catch(n=>{this.#c(t,n)}).finally(()=>{P(o)&&Hs.delete(o)});Hs.set(o,s)}Hs.get(o)?.then(s=>{this.$images.set(s||[])})}else if(N(t))try{this.$images.set(this.#o(t))}catch(i){this.#c(t,i)}else try{this.$images.set(this.#s(t))}catch(i){this.#c(t,i)}return()=>{this.$images.set([])}}}#o(e){let t=this.#a();return e.map((i,o)=>(Qe(i.url&&P(i.url),!1),Qe("startTime"in i&&ge(i.startTime),!1),{...i,url:P(i.url)?this.#l(i.url,t):i.url}))}#s(e){Qe(P(e.url),!1),Qe(N(e.tiles)&&e.tiles?.length,!1);let t=new URL(e.url),i=[],o="tile_width"in e?e.tile_width:e.tileWidth,s="tile_height"in e?e.tile_height:e.tileHeight;for(let n of e.tiles)i.push({url:t,startTime:"start"in n?n.start:n.startTime,width:o,height:s,coords:{x:n.x,y:n.y}});return i}#n(e){for(let o=0;o<e.length;o++){let s=e[o];Qe("startTime"in s&&ge(s.startTime),!1),Qe("text"in s&&P(s.text),!1)}let t=[],i=this.#a();for(let o of e){let[s,n]=o.text.split("#"),l=this.#u(n);t.push({url:this.#l(s,i),startTime:o.startTime,endTime:o.endTime,width:l?.w,height:l?.h,coords:l&&ge(l.x)&&ge(l.y)?{x:l.x,y:l.y}:void 0})}return t}#a(){let e=v(this.#t);return!P(e)||!/^https?:/.test(e)?location.href:e}#l(e,t){return/^https?:/.test(e)?new URL(e):new URL(e,t)}#u(e){if(!e)return{};let[t,i]=e.split("="),o=i?.split(","),s={};if(!t||!o)return null;for(let n=0;n<t.length;n++){let l=+o[n];isNaN(l)||(s[t[n]]=l)}return s}#c(e,t){}};var Fs=class extends b{static props={src:null,time:0,crossOrigin:null};static state=new ue({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#e;#t=[];onSetup(){this.media=h(),this.#e=Ns.create(this.$props.src,this.$state.crossOrigin),this.#r(),this.setAttributes({"data-loading":this.#a.bind(this),"data-error":this.#l.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":O(this.$state.hidden)})}onConnect(e){d(this.#i.bind(this)),d(this.#u.bind(this)),d(this.#r.bind(this)),d(this.#o.bind(this)),d(this.#c.bind(this)),d(this.#p.bind(this))}#i(){let e=this.$state.img();e&&(S(e,"load",this.#s.bind(this)),S(e,"error",this.#n.bind(this)))}#r(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i}=this.media.$state,o=e()!==null?e():i();t.set(o===!0?"anonymous":o)}#o(){let{src:e,loading:t,error:i}=this.$state;return e()&&(t.set(!0),i.set(null)),()=>{this.#m(),t.set(!1),i.set(null)}}#s(){let{loading:e,error:t}=this.$state;this.#p(),e.set(!1),t.set(null)}#n(e){let{loading:t,error:i}=this.$state;t.set(!1),i.set(e)}#a(){let{loading:e,hidden:t}=this.$state;return!t()&&e()}#l(){let{error:e}=this.$state;return!we(e())}#u(){let{hidden:e}=this.$state,{duration:t}=this.media.$state,i=this.#e.$images();e.set(this.#l()||!Number.isFinite(t())||i.length===0)}getTime(){return this.$props.time()}#c(){let e=this.#e.$images();if(!e.length)return;let t=this.getTime(),{src:i,activeThumbnail:o}=this.$state,s=-1,n=null;for(let l=e.length-1;l>=0;l--){let a=e[l];if(t>=a.startTime&&(!a.endTime||t<a.endTime)){s=l;break}}e[s]&&(n=e[s]),o.set(n),i.set(n?.url.href||"")}#p(){if(!this.scope||this.$state.hidden())return;let e=this.el,t=this.$state.img(),i=this.$state.activeThumbnail();if(!t||!i||!e)return;let o=i.width??t.naturalWidth,s=i?.height??t.naturalHeight,{maxWidth:n,maxHeight:l,minWidth:a,minHeight:u,width:c,height:f}=getComputedStyle(this.el);a==="100%"&&(a=parseFloat(c)+""),u==="100%"&&(u=parseFloat(f)+"");let g=Math.max(parseInt(a)/o,parseInt(u)/s),T=Math.min(Math.max(parseInt(a),parseInt(n))/o,Math.max(parseInt(u),parseInt(l))/s),C=!isNaN(T)&&T<1?T:g>1?g:1;this.#d(e,"--thumbnail-width",`${o*C}px`),this.#d(e,"--thumbnail-height",`${s*C}px`),this.#d(t,"width",`${t.naturalWidth*C}px`),this.#d(t,"height",`${t.naturalHeight*C}px`),this.#d(t,"transform",i.coords?`translate(-${i.coords.x*C}px, -${i.coords.y*C}px)`:""),this.#d(t,"max-width","none")}#d(e,t,i){e.style.setProperty(t,i),this.#t.push(()=>e.style.removeProperty(t))}#m(){for(let e of this.#t)e();this.#t=[]}};var Kc=ar('<img loading="eager" decoding="async" aria-hidden="true">'),di=class extends y(HTMLElement,Fs){static tagName="media-thumbnail";static attrs={crossOrigin:"crossorigin"};#e;#t=this.#i();onSetup(){this.#e=h(),this.$state.img.set(this.#t)}onConnect(){let{src:e,crossOrigin:t}=this.$state;this.#t.parentNode!==this&&this.prepend(this.#t),d(()=>{x(this.#t,"src",e()),x(this.#t,"crossorigin",t())})}#i(){return lr(Kc)}};var Bs=class extends di{static tagName="media-slider-thumbnail";#e;#t;onSetup(){super.onSetup(),this.#e=h(),this.#t=Le(Ie.state)}onConnect(){super.onConnect(),d(this.#i.bind(this))}#i(){let{duration:e,clipStartTime:t}=this.#e.$state;this.time=t()+this.#t.pointerRate()*e()}};var Gs=class extends b{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#e;#t;#i;onSetup(){this.#i=Le(Ie.state),this.#e=A(Fe),this.#t=w(this.getValueText.bind(this))}getValueText(){let{type:e,format:t,decimalPlaces:i,padHours:o,padMinutes:s,showHours:n,showMs:l}=this.$props,{value:a,pointerValue:u,min:c,max:f}=this.#i,g=t?.()??this.#e.default,T=e()==="current"?a():u();if(g==="percent"){let C=f()-c(),q=T/C*100;return(this.#e.percent??B)(q,i())+"%"}else return g==="time"?(this.#e.time??ut)(T,{padHrs:o(),padMins:s(),showHrs:n(),showMs:l()}):(this.#e.value?.(T)??T.toFixed(2))+""}};var Qs=class extends y(HTMLElement,Gs){static tagName="media-slider-value";static attrs={padMinutes:{converter:Tn}};onConnect(){d(()=>{this.textContent=this.getValueText()})}};var Ws=class extends b{static props={src:null,crossOrigin:null};static state=new ue({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});#e;#t;get video(){return this.$state.video()}onSetup(){this.#e=h(),this.#t=Le(Ie.state),this.#o(),this.setAttributes({"data-loading":this.#s.bind(this),"data-hidden":this.$state.hidden,"data-error":this.#n.bind(this),"aria-hidden":O(this.$state.hidden)})}onAttach(e){d(this.#i.bind(this)),d(this.#r.bind(this)),d(this.#o.bind(this)),d(this.#a.bind(this)),d(this.#l.bind(this)),d(this.#p.bind(this))}#i(){let e=this.$state.video();e&&(e.readyState>=2&&this.#u(),S(e,"canplay",this.#u.bind(this)),S(e,"error",this.#c.bind(this)))}#r(){let{src:e}=this.$state,{canLoad:t}=this.#e.$state;e.set(t()?this.$props.src():null)}#o(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i}=this.#e.$state,o=e()!==null?e():i();t.set(o===!0?"anonymous":o)}#s(){let{canPlay:e,hidden:t}=this.$state;return!e()&&!t()}#n(){let{error:e}=this.$state;return!we(e)}#a(){let{src:e,hidden:t}=this.$state,{canLoad:i,duration:o}=this.#e.$state;t.set(i()&&(!e()||this.#n()||!Number.isFinite(o())))}#l(){let{src:e,canPlay:t,error:i}=this.$state;e(),t.set(!1),i.set(null)}#u(e){let{canPlay:t,error:i}=this.$state;t.set(!0),i.set(null),this.dispatch("can-play",{trigger:e})}#c(e){let{canPlay:t,error:i}=this.$state;t.set(!1),i.set(e),this.dispatch("error",{trigger:e})}#p(){let{video:e,canPlay:t}=this.$state,{duration:i}=this.#e.$state,{pointerRate:o}=this.#t,s=e();t()&&s&&Number.isFinite(i())&&Number.isFinite(o())&&(s.currentTime=o()*i())}};var Uc=ar('<video muted playsinline preload="none" style="max-width: unset;"></video>'),Ks=class extends y(HTMLElement,Ws){static tagName="media-slider-video";#e;#t=this.#i();onSetup(){this.#e=h(),this.$state.video.set(this.#t)}onConnect(){let{canLoad:e}=this.#e.$state,{src:t,crossOrigin:i}=this.$state;this.#t.parentNode!==this&&this.prepend(this.#t),d(()=>{x(this.#t,"crossorigin",i()),x(this.#t,"preload",e()?"auto":"none"),x(this.#t,"src",t())})}#i(){return lr(Uc)}};var Us=class extends b{static props={...ie.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2};static state=Ce;#e;onSetup(){this.#e=h(),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:this.#s,isDisabled:this.#n.bind(this),aria:{valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#c.bind(this),onValueChange:this.#u.bind(this)}).attach(this),d(this.#r.bind(this)),d(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-speed-slider",""),L(e,"aria-label","Speed");let{canSetPlaybackRate:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":O(()=>!t())})}#t(){let{value:e}=this.$state;return e()}#i(){let{value:e}=this.$state;return e()+"x"}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}#o(){let{playbackRate:e}=this.#e.$state,t=e();this.$state.value.set(t),this.dispatch("value-change",{detail:t})}#s(e){return B(e,2)}#n(){let{disabled:e}=this.$props,{canSetPlaybackRate:t}=this.#e.$state;return e()||!t()}#a=Se(this.#l.bind(this),25);#l(e){if(!e.trigger)return;let t=e.detail;this.#e.remote.changePlaybackRate(t,e)}#u(e){this.#a(e)}#c(e){this.#a(e)}};var zs=class extends y(HTMLElement,Us){static tagName="media-speed-slider"};var Ys=class extends y(HTMLElement,li){static tagName="media-time-slider"};var js=class extends b{static props={...ie.props,keyStep:5,shiftKeyMultiplier:2};static state=Ce;#e;onSetup(){this.#e=h();let{audioGain:e}=this.#e.$state;W(Fe,{default:"percent",value(t){return(t*(e()??1)).toFixed(2)},percent(t){return Math.round(t*(e()??1))}}),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#o.bind(this),aria:{valueMax:this.#r.bind(this),valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#l.bind(this)}).attach(this),d(this.#s.bind(this))}onAttach(e){e.setAttribute("data-media-volume-slider",""),L(e,"aria-label","Volume");let{canSetVolume:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":O(()=>!t())})}#t(){let{value:e}=this.$state,{audioGain:t}=this.#e.$state;return Math.round(e()*(t()??1))}#i(){let{value:e,max:t}=this.$state,{audioGain:i}=this.#e.$state;return B(e()/t()*(i()??1)*100,2)+"%"}#r(){let{audioGain:e}=this.#e.$state;return this.$state.max()*(e()??1)}#o(){let{disabled:e}=this.$props,{canSetVolume:t}=this.#e.$state;return e()||!t()}#s(){let{muted:e,volume:t}=this.#e.$state,i=e()?0:t()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#n=Se(this.#a.bind(this),25);#a(e){if(!e.trigger)return;let t=B(e.detail/100,3);this.#e.remote.changeVolume(t,e)}#l(e){this.#n(e)}#u(e){this.#n(e)}};var Xs=class extends y(HTMLElement,js){static tagName="media-volume-slider"};var fa=class extends b{static props={size:96,trackWidth:8,fillPercent:50};onConnect(e){le(()=>{if(!this.connectScope)return;let t=e.querySelector("svg"),i=t.firstElementChild,o=i.nextElementSibling;d(this.#e.bind(this,t,i,o))})}#e(e,t,i){let{size:o,trackWidth:s,fillPercent:n}=this.$props;x(e,"width",o()),x(e,"height",o()),x(t,"stroke-width",s()),x(i,"stroke-width",s()),x(i,"stroke-dashoffset",100-n())}},Js=class extends y(ze,fa){static tagName="media-spinner";render(){return p`
      <svg fill="none" viewBox="0 0 120 120" aria-hidden="true" data-part="root">
        <circle cx="60" cy="60" r="54" stroke="currentColor" data-part="track"></circle>
        <circle
          cx="60"
          cy="60"
          r="54"
          stroke="currentColor"
          pathLength="100"
          stroke-dasharray="100"
          data-part="track-fill"
        ></circle>
      </svg>
    `}};var Zs=class extends b{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new ue({timeText:"",hidden:!1});#e;#t=E(null);#i=E(!0);#r=E(!0);onSetup(){this.#e=h(),this.#a();let{type:e}=this.$props;this.setAttributes({"data-type":e,"data-remainder":this.#c.bind(this)}),new ai({callback:this.#o.bind(this)}).attach(this)}onAttach(e){e.hasAttribute("role")||d(this.#l.bind(this)),d(this.#a.bind(this))}onConnect(e){$(sr(e,this.#i.set)),d(this.#s.bind(this)),d(this.#n.bind(this))}#o(e){this.#r.set(e[0].isIntersecting)}#s(){let{hidden:e}=this.$props;this.$state.hidden.set(e()||!this.#i()||!this.#r())}#n(){if(!this.$props.toggle()){this.#t.set(null);return}this.el&&ye(this.el,this.#p.bind(this))}#a(){let{hidden:e,timeText:t}=this.$state,{duration:i}=this.#e.$state;if(e())return;let{type:o,padHours:s,padMinutes:n,showHours:l}=this.$props,a=this.#u(o()),u=i(),c=this.#c();if(!Number.isFinite(a+u)){t.set("LIVE");return}let f=c?Math.max(0,u-a):a,g=ut(f,{padHrs:s(),padMins:n(),showHrs:l()});t.set((c?"-":"")+g)}#l(){if(!this.el)return;let{toggle:e}=this.$props;x(this.el,"role",e()?"timer":null),x(this.el,"tabindex",e()?0:null)}#u(e){let{bufferedEnd:t,duration:i,currentTime:o}=this.#e.$state;switch(e){case"buffered":return t();case"duration":return i();default:return o()}}#c(){return this.$props.remainder()&&this.#t()!==!1}#p(e){if(e.preventDefault(),this.#t()===null){this.#t.set(!this.$props.remainder());return}this.#t.set(t=>!t)}};var en=class extends y(HTMLElement,Zs){static tagName="media-time";onConnect(){d(()=>{this.textContent=this.$state.timeText()})}};var ga=class extends b{},tn=class extends y(HTMLElement,ga){static tagName="media-title";#e;onSetup(){this.#e=h()}onConnect(){d(this.#t.bind(this))}#t(){let{title:e}=this.#e.$state;this.textContent=e()}};var et=re();var rn=class extends b{static props={placement:"top center",offset:0,alignOffset:0};constructor(){super(),new X;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){this.#e(e),Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){this.#e(e);let t=A(et);$(()=>t.detachContent(e)),$(le(()=>{this.connectScope&&d(this.#t.bind(this))}))}#e(e){A(et).attachContent(e)}#t(){let{placement:e,offset:t,alignOffset:i}=this.$props;return dr(this.el,this.#i(),e(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:t()})}#i(){return A(et).trigger()}};var on=class extends y(HTMLElement,rn){static tagName="media-tooltip-content"};var zc=0,sn=class extends b{static props={showDelay:700};#e=`media-tooltip-${++zc}`;#t=E(null);#i=E(null);constructor(){super(),new X;let{showDelay:e}=this.$props;new si({trigger:this.#t,content:this.#i,showDelay:e,listen(t,i,o){S(t,"touchstart",s=>s.preventDefault(),{passive:!1}),d(()=>{Ti()&&S(t,"focus",i),S(t,"blur",o)}),S(t,"mouseenter",i),S(t,"mouseleave",o)},onChange:this.#a.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onSetup(){W(et,{trigger:this.#t,content:this.#i,attachTrigger:this.#r.bind(this),detachTrigger:this.#o.bind(this),attachContent:this.#s.bind(this),detachContent:this.#n.bind(this)})}#r(e){this.#t.set(e);let t=e.getAttribute("data-media-tooltip");t&&this.el?.setAttribute(`data-media-${t}-tooltip`,""),x(e,"data-describedby",this.#e)}#o(e){e.removeAttribute("data-describedby"),e.removeAttribute("aria-describedby"),this.#t.set(null)}#s(e){e.setAttribute("id",this.#e),e.style.display="none",L(e,"role","tooltip"),this.#i.set(e)}#n(e){e.removeAttribute("id"),e.removeAttribute("role"),this.#i.set(null)}#a(e){let t=this.#t(),i=this.#i();t&&x(t,"aria-describedby",e?this.#e:null);for(let o of[this.el,t,i])o&&x(o,"data-visible",e)}};var nn=class extends y(HTMLElement,sn){static tagName="media-tooltip"};var an=class extends b{constructor(){super(),new X}onConnect(e){$(le(()=>{if(!this.connectScope)return;this.#e();let t=A(et);$(()=>{let i=this.#t();i&&t.detachTrigger(i)})}))}#e(){let e=this.#t(),t=A(et);e&&t.attachTrigger(e)}#t(){let e=this.el.firstElementChild;return e?.localName==="button"||e?.getAttribute("role")==="button"?e:this.el}};var ln=class extends y(HTMLElement,an){static tagName="media-tooltip-trigger";onConnect(){this.style.display="contents"}};k(Jo);k(Uo);k(Yo);k(Ps);k(To);k(nn);k(ln);k(on);k(Oo);k(Ao);k(Co);k(Po);k(Vo);k(Ho);k(So);k(_o);k(Fo);k(Vs);k(ws);k(Xs);k(Ys);k(zs);k(Rs);k(Ds);k(qs);k(Os);k(Qs);k(Bs);k(Ks);k(cs);k(as);k(ys);k(gs);k(ms);k(is);k(os);k(Cs);k(es);k(bs);k(ns);k(Ss);k(Es);k(Xo);k(di);k(Qo);k(Lo);k(en);k(tn);k(Wo);k(Js);import"https://cdn.vidstack.io/icons";
