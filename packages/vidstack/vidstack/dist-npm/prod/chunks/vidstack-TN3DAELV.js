var p=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:(?:\?hash=|\?h=|\/)(.*))?/,r=new Map,n=new Map;function u(e){let o=e.match(p);return{videoId:o?.[1],hash:o?.[2]}}async function f(e,o,m){if(r.has(e))return r.get(e);if(n.has(e))return n.get(e);let i=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${e}`;m&&(i=i.concat(`?h=${m}`));let s=window.fetch(i,{mode:"cors",signal:o.signal}).then(t=>t.json()).then(t=>{let h=/vimeocdn.com\/video\/(.*)?_/,c=t?.thumbnail_url?.match(h)?.[1],l=c?`https://i.vimeocdn.com/video/${c}_1920x1080.webp`:"",a={title:t?.title??"",duration:t?.duration??0,poster:l,pro:t.account_type!=="basic"};return r.set(e,a),a}).finally(()=>n.delete(e));return n.set(e,s),s}export{u as a,f as b};
