var l=Symbol("SCOPE"),$=!1,K=!1,c=null,p=null,o=null,i=0,_=[],W={},St=()=>{},g=0,nt=1,w=2,k=3;function Ct(){$=!0,queueMicrotask(it)}function it(){if(!_.length){$=!1;return}K=!0;for(let t=0;t<_.length;t++)_[t]._state!==g&&$t(_[t]);_=[],$=!1,K=!1}function $t(t){let e=[t];for(;t=t[l];)t._effect&&t._state!==g&&e.push(t);for(let s=e.length-1;s>=0;s--)J(e[s])}function U(t){let e=y();return b(e,t.length?t.bind(null,u.bind(e)):t,null)}function wt(t){return b(c,t,null)}function B(t){return b(null,t,null)}function Ot(){K||it()}function T(){return c}function a(t,e){try{return b(e,t,null)}catch(s){Y(e,s);return}}function V(t,e=c){return e?._context[t]}function ot(t,e,s=c){s&&(s._context={...s._context,[t]:e})}function h(t){if(!t||!c)return t||St;let e=c;return e._disposal?Array.isArray(e._disposal)?e._disposal.push(t):e._disposal=[e._disposal,t]:e._disposal=t,function(){e._state!==k&&(t.call(null),v(e._disposal)?e._disposal=null:Array.isArray(e._disposal)&&e._disposal.splice(e._disposal.indexOf(t),1))}}function u(t=!0){if(this._state!==k){if(this._children)if(Array.isArray(this._children))for(let e=this._children.length-1;e>=0;e--)u.call(this._children[e]);else u.call(this._children);if(t){let e=this[l];e&&(Array.isArray(e._children)?e._children.splice(e._children.indexOf(this),1):e._children=null),kt(this)}}}function kt(t){t._state=k,t._disposal&&ct(t),t._sources&&q(t,0),t[l]=null,t._sources=null,t._observers=null,t._children=null,t._context=W,t._handlers=null}function ct(t){try{if(Array.isArray(t._disposal))for(let e=t._disposal.length-1;e>=0;e--){let s=t._disposal[e];s.call(s)}else t._disposal.call(t._disposal);t._disposal=null}catch(e){Y(t,e)}}function b(t,e,s){let r=c,n=p;c=t,p=s;try{return e.call(t)}finally{c=r,p=n}}function Y(t,e){if(!t||!t._handlers)throw e;let s=0,r=t._handlers.length,n=e;for(s=0;s<r;s++)try{t._handlers[s](n);break}catch(C){n=C}if(s===r)throw n}function P(){return this._state===k?this._value:(p&&!this._effect&&(!o&&p._sources&&p._sources[i]==this?i++:o?o.push(this):o=[this]),this._compute&&J(this),this._value)}function Z(t){let e=v(t)?t(this._value):t;if(this._changed(this._value,e)&&(this._value=e,this._observers))for(let s=0;s<this._observers.length;s++)at(this._observers[s],w);return this._value}var z=function(){this[l]=null,this._children=null,c&&c.append(this)},f=z.prototype;f._context=W;f._handlers=null;f._compute=null;f._disposal=null;f.append=function(t){t[l]=this,this._children?Array.isArray(this._children)?this._children.push(t):this._children=[this._children,t]:this._children=t,t._context=t._context===W?this._context:{...this._context,...t._context},this._handlers&&(t._handlers=t._handlers?[...t._handlers,...this._handlers]:this._handlers)};f.dispose=function(){u.call(this)};function y(){return new z}var lt=function(e,s,r){z.call(this),this._state=s?w:g,this._init=!1,this._effect=!1,this._sources=null,this._observers=null,this._value=e,this.id=r?.id??(this._compute?"computed":"signal"),s&&(this._compute=s),r&&r.dirty&&(this._changed=r.dirty)},G=lt.prototype;Object.setPrototypeOf(G,f);G._changed=Tt;G.call=P;function A(t,e,s){return new lt(t,e,s)}function Tt(t,e){return t!==e}function v(t){return typeof t=="function"}function J(t){if(t._state===nt)for(let e=0;e<t._sources.length&&(J(t._sources[e]),t._state!==w);e++);t._state===w?Q(t):t._state=g}function Pt(t){t._children&&u.call(t,!1),t._disposal&&ct(t),t._handlers=t[l]?t[l]._handlers:null}function Q(t){let e=o,s=i;o=null,i=0;try{Pt(t);let r=b(t,t._compute,t);st(t),!t._effect&&t._init?Z.call(t,r):(t._value=r,t._init=!0)}catch(r){!t._init&&typeof t._value>"u"&&console.error(`computed \`${t.id}\` threw error during first run, this can be fatal.

Solutions:

1. Set the \`initial\` option to silence this error`,"\n2. Or, use an `effect` if the return value is not being used",`

`,r),st(t),Y(t,r)}finally{o=e,i=s,t._state=g}}function st(t){if(o){if(t._sources&&q(t,i),t._sources&&i>0){t._sources.length=i+o.length;for(let s=0;s<o.length;s++)t._sources[i+s]=o[s]}else t._sources=o;let e;for(let s=i;s<t._sources.length;s++)e=t._sources[s],e._observers?e._observers.push(t):e._observers=[t]}else t._sources&&i<t._sources.length&&(q(t,i),t._sources.length=i)}function at(t,e){if(!(t._state>=e)&&(t._effect&&t._state===g&&(_.push(t),$||Ct()),t._state=e,t._observers))for(let s=0;s<t._observers.length;s++)at(t._observers[s],nt)}function q(t,e){let s,r;for(let n=e;n<t._sources.length;n++)s=t._sources[n],s._observers&&(r=s._observers.indexOf(t),s._observers[r]=s._observers[s._observers.length-1],s._observers.pop())}function x(...t){}function ut(t){return t===null}function m(t){return typeof t>"u"}function At(t){return ut(t)||m(t)}function xt(t){return t?.constructor===Object}function Dt(t){return typeof t=="number"&&!Number.isNaN(t)}function Nt(t){return typeof t=="string"}function Mt(t){return typeof t=="boolean"}function E(t){return typeof t=="function"}function Ft(t){return Array.isArray(t)}var rt,jt=Event,ht=Symbol("DOM_EVENT"),d=class extends jt{constructor(e,...s){super(e,s[0]),this[rt]=!0,this.triggers=new O,this.detail=s[0]?.detail;let r=s[0]?.trigger;r&&this.triggers.add(r)}static{rt=ht}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}},O=class{constructor(){this.chain=[]}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(e){this.chain.push(e),D(e)&&this.chain.push(...e.triggers)}remove(e){return this.chain.splice(this.chain.indexOf(e),1)[0]}has(e){return this.chain.some(s=>s===e)}hasType(e){return!!this.findType(e)}findType(e){return this.chain.find(s=>s.type===e)}walk(e){for(let s of this.chain){let r=e(s);if(r)return[s,r]}}[Symbol.iterator](){return this.chain.values()}};function D(t){return!!t?.[ht]}function Lt(t,e){if(D(t))return t.triggers.walk(e)}function ft(t,e){return D(t)?t.triggers.findType(e):void 0}function Rt(t,e){return!!ft(t,e)}function It(t,e){e&&t.triggers.add(e)}var H=class extends EventTarget{addEventListener(e,s,r){return super.addEventListener(e,s,r)}removeEventListener(e,s,r){return super.removeEventListener(e,s,r)}};function X(t,e,s,r){return t.addEventListener(e,s,r),h(()=>t.removeEventListener(e,s,r))}function Kt(t){return!!t?.type.startsWith("pointer")}function qt(t){return!!t?.type.startsWith("touch")}function Ht(t){return/^(click|mouse)/.test(t?.type??"")}function tt(t){return!!t?.type.startsWith("key")}function Wt(t){return tt(t)&&t.key==="Enter"}function Ut(t){return tt(t)&&(t.key==="Enter"||t.key===" ")}function Bt(t){return t instanceof Node}function N(t,e,s){if(t)if(!s&&s!==""&&s!==0)t.removeAttribute(e);else{let r=s===!0?"":s+"";t.getAttribute(e)!==r&&t.setAttribute(e,r)}else return}function M(t,e,s){if(t)!s&&s!==0?t.style.removeProperty(e):t.style.setProperty(e,s+"");else return}function Vt(t,e,s){t.classList[s?"add":"remove"](e)}function R(t,e){let s=A(t,null,e),r=P.bind(s);return r.node=s,r[l]=!0,r.set=Z.bind(s),r}function pt(t){return v(t)&&l in t}function dt(t,e){let s=A(e?.initial,t,e),r=P.bind(s);return r[l]=!0,r.node=s,r}function Yt(t,e){let s=A(null,function(){let n=t();return v(n)&&h(n),null},{id:e?.id??"effect"});return s._effect=!0,Q(s),function(){u.call(s,!0)}}function Zt(t){return pt(t)&&"set"in t}var F=Yt;function zt(t){return{id:Symbol(),provide:t}}function gt(t,e,s=T()){if(!s)throw Error("[maverick] attempting to provide context outside root");let r=!m(e);if(!r&&!t.provide)throw Error("[maverick] context can not be provided without a value or `provide` function");ot(t.id,r?e:t.provide?.(),s)}function mt(t){let e=V(t.id);if(m(e))throw Error("[maverick] attempting to use context without providing first");return e}function Gt(t){return!m(V(t.id))}var Jt=Symbol("PROPS"),Qt=Symbol("METHODS"),bt=Symbol("ON_DISPATCH"),_t,et={},j=class{constructor(e,s,r){this[_t]=null,this.$el=R(null),this._el=null,this._scope=null,this._attachScope=null,this._connectScope=null,this._component=null,this._destroyed=!1,this._props=et,this._attrs=null,this._styles=null,this._setupCallbacks=[],this._attachCallbacks=[],this._connectCallbacks=[],this._destroyCallbacks=[],this._scope=s,r?.scope&&r.scope.append(s);let n=e.state,C=e.props;if(n&&(this._$state=n.create(),this._state=new Proxy(this._$state,{get:(I,Et)=>this._$state[Et]()}),gt(n,this._$state)),C&&(this._props=Xt(C),r?.props))for(let I of Object.keys(r.props))this._props[I]?.set(r.props[I]);h(this._destroy.bind(this))}static{_t=bt}_setup(){a(()=>{for(let e of this._setupCallbacks)e()},this._scope)}_attach(e){this._el||(this._el=e,this.$el.set(e),e.$$COMPONENT_NAME=this._component?.constructor.name,a(()=>{this._attachScope=y(),a(()=>{for(let s of this._attachCallbacks)s(this._el);this._attachAttrs(),this._attachStyles()},this._attachScope)},this._scope),e.dispatchEvent(new Event("attached")))}_detach(){this._attachScope?.dispose(),this._attachScope=null,this._connectScope=null,this._el&&(this._el.$$COMPONENT_NAME=null),this._el=null,this.$el.set(null)}_connect(){!this._el||!this._attachScope||!this._connectCallbacks.length||a(()=>{this._connectScope=y(),a(()=>{for(let e of this._connectCallbacks)e(this._el)},this._connectScope)},this._attachScope)}_disconnect(){this._connectScope?.dispose(),this._connectScope=null}_destroy(){if(this._destroyed)return;this._destroyed=!0,a(()=>{for(let s of this._destroyCallbacks)s(this._el)},this._scope);let e=this._el;this._detach(),this._scope.dispose(),this._setupCallbacks.length=0,this._attachCallbacks.length=0,this._connectCallbacks.length=0,this._destroyCallbacks.length=0,this._component=null,this._attrs=null,this._styles=null,this._props=et,this._scope=null,this._state=et,this._$state=null,e&&delete e.$}_addHooks(e){e.onSetup&&this._setupCallbacks.push(e.onSetup.bind(e)),e.onAttach&&this._attachCallbacks.push(e.onAttach.bind(e)),e.onConnect&&this._connectCallbacks.push(e.onConnect.bind(e)),e.onDestroy&&this._destroyCallbacks.push(e.onDestroy.bind(e))}_attachAttrs(){if(this._attrs)for(let e of Object.keys(this._attrs))E(this._attrs[e])?F(this._setAttr.bind(this,e)):N(this._el,e,this._attrs[e])}_attachStyles(){if(this._styles)for(let e of Object.keys(this._styles))E(this._styles[e])?F(this._setStyle.bind(this,e)):M(this._el,e,this._styles[e])}_setAttr(e){N(this._el,e,this._attrs[e].call(this._component))}_setStyle(e){M(this._el,e,this._styles[e].call(this._component))}};function Xt(t){let e={};for(let s of Object.keys(t)){let r=t[s];e[s]=R(r,r)}return e}var S={$$:null};function te(t,e){return U(()=>{S.$$=new j(t,T(),e);let s=new t;return S.$$._component=s,S.$$=null,s})}var L=class extends EventTarget{constructor(){super(),S.$$&&this.attach(S)}get el(){return this.$$._el}get $el(){return this.$$.$el()}get scope(){return this.$$._scope}get attachScope(){return this.$$._attachScope}get connectScope(){return this.$$._connectScope}get $props(){return this.$$._props}get $state(){return this.$$._$state}get state(){return this.$$._state}attach({$$:e}){return this.$$=e,e._addHooks(this),this}addEventListener(e,s,r){if(!this.el){let n=this.constructor.name;console.warn(`[maverick] adding event listener to \`${n}\` before element is attached`)}this.listen(e,s,r)}removeEventListener(e,s,r){this.el?.removeEventListener(e,s,r)}setAttributes(e){this.$$._attrs||(this.$$._attrs={}),Object.assign(this.$$._attrs,e)}setStyles(e){this.$$._styles||(this.$$._styles={}),Object.assign(this.$$._styles,e)}setCSSVars(e){this.setStyles(e)}createEvent(e,...s){return new d(e,s[0])}dispatch(e,...s){if(!this.el)return!1;let r=e instanceof Event?e:new d(e,s[0]);return Object.defineProperty(r,"target",{get:()=>this.$$._component}),B(()=>(this.$$[bt]?.(r),this.el.dispatchEvent(r)))}dispatchEvent(e){return this.dispatch(e)}listen(e,s,r){return this.el?X(this.el,e,s,r):x}};var yt=class extends L{subscribe(e){if(!this.state){let s=this.constructor.name;throw Error(`[maverick] component \`${s}\` can not be subscribed to because it has no internal state`)}return a(()=>F(()=>e(this.state)),this.$$._scope)}destroy(){this.$$._destroy()}};var vt=class{constructor(e){this.id=Symbol("STATE"),this.record=e,this._descriptors=Object.getOwnPropertyDescriptors(e)}create(){let e={},s=new Proxy(e,{get:(r,n)=>e[n]()});for(let r of Object.keys(this.record)){let n=this._descriptors[r].get;e[r]=n?dt(n.bind(s)):R(this.record[r])}return e}reset(e,s){for(let r of Object.keys(e))!this._descriptors[r].get&&(!s||s(r))&&e[r].set(this.record[r])}};function _e(t){return mt(t)}function ee(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function se(t){return t.replace(/-./g,e=>e[1].toUpperCase())}function re(t){return t.charAt(0).toUpperCase()+t.slice(1)}function be(t,e){for(let s of t)s(e)}function je(t){return E(t)?t():t}function Le(t){return t?"true":"false"}function ne(){let t=new Set;return{add(...e){for(let s of e)t.add(s)},empty(){for(let e of t)e();t.clear()}}}function Re(){let t=ne();return h(t.empty),t}function Ie(t){return Object.keys(t)}function Ke(){let t,e;return{promise:new Promise((r,n)=>{t=r,e=n}),resolve:t,reject:e}}function qe(t){return new Promise(e=>setTimeout(e,t))}function He(t){let e=-1,s;function r(...n){s=n,!(e>=0)&&(e=window.requestAnimationFrame(()=>{t.apply(this,s),e=-1,s=void 0}))}return r}var ie=typeof window<"u"?"requestIdleCallback"in window?window.requestIdleCallback:t=>window.setTimeout(t,1):x;function We(t,e){return new Promise(s=>{ie(r=>{t?.(r),s()},e)})}export{wt as a,B as b,Ot as c,T as d,a as e,h as f,y as g,x as h,ut as i,m as j,At as k,xt as l,Dt as m,Nt as n,Mt as o,E as p,Ft as q,d as r,Lt as s,ft as t,Rt as u,It as v,H as w,X as x,Kt as y,qt as z,Ht as A,tt as B,Wt as C,Ut as D,Bt as E,N as F,M as G,Vt as H,R as I,dt as J,Zt as K,F as L,zt as M,gt as N,mt as O,Gt as P,Jt as Q,Qt as R,te as S,L as T,yt as U,vt as V,_e as W,be as X,ee as Y,se as Z,re as _,je as $,Le as aa,ne as ba,Re as ca,Ie as da,Ke as ea,qe as fa,He as ga,We as ha};
