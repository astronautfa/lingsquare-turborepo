import{a as st,c as O}from"./vidstack-EV5FVEL6.js";import{b as q}from"./vidstack-IMNMJXWE.js";import{c as rt}from"./vidstack-4QJFXBXL.js";import{a as Se,b as $}from"./vidstack-5IDZ3MKZ.js";import{b as h}from"./vidstack-HDVJ2P4K.js";import{b as Yt,c,d as D,e as be,f as kt,g as Dt,h as I,i as ge,j as Jt,n as ve,o as xe,t as Z}from"./vidstack-SKR3AJXQ.js";import{c as me}from"./vidstack-CRUGUF5W.js";import{a as V,b as fe,c as Xt}from"./vidstack-KCALJS55.js";import{d as ce}from"./vidstack-BQBKKLOB.js";import{B as ue,C as he,F as b,G as zt,I as S,J as Vt,K as pe,L as a,M as F,N as A,O as g,P as w,T as k,U as u,V as et,W as At,a as y,aa as J,c as Rt,f as x,ga as it,i as j,l as de,m as z,n as L,q as Y,x as P}from"./vidstack-XC7WIXLW.js";var It=class extends k{#t;constructor(t){super(),this.#t=t}onAttach(t){let{$props:e,ariaKeys:i}=h(),r=t.getAttribute("aria-keyshortcuts");if(r){i[this.#t]=r,x(()=>{delete i[this.#t]});return}let s=e.keyShortcuts()[this.#t];if(s){let n=Y(s)?s.join(" "):L(s)?s:s?.keys;t.setAttribute("aria-keyshortcuts",Y(n)?n.join(" "):n)}}};function Zt(o,t){let e=String(o),i=e.length;if(i<t){let s=t-i;return`${"0".repeat(s)}${o}`}return e}function Ce(o){let t=Math.trunc(o/3600),e=Math.trunc(o%3600/60),i=Math.trunc(o%60),r=Number((o-Math.trunc(o)).toPrecision(3));return{hours:t,minutes:e,seconds:i,fraction:r}}function ot(o,{padHrs:t=null,padMins:e=null,showHrs:i=!1,showMs:r=!1}={}){let{hours:s,minutes:n,seconds:l,fraction:d}=Ce(o),p=t?Zt(s,2):s,m=e||j(e)&&o>=3600?Zt(n,2):n,T=Zt(l,2),E=r&&d>0?`.${String(d).replace(/^0?\./,"")}`:"",R=`${m}:${T}${E}`;return s>0||i?`${p}:${R}`:R}function te(o){let t=[],{hours:e,minutes:i,seconds:r}=Ce(o);return e>0&&t.push(`${e} hour`),i>0&&t.push(`${i} min`),(r>0||t.length===0)&&t.push(`${r} sec`),t.join(" ")}var M=class extends k{static props={disabled:!1};#t;constructor(t){super(),this.#t=t,new O,t.keyShortcut&&new It(t.keyShortcut)}onSetup(){let{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.#t.isPresssed,"aria-pressed":this.#e.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){c(t,"tabindex","0"),c(t,"role","button"),c(t,"type","button")}onConnect(t){I(t,this.#r.bind(this));for(let e of["click","touchstart"])this.listen(e,this.#s.bind(this),{passive:!0})}#e(){return J(this.#t.isPresssed())}#i(t){pe(this.#t.isPresssed)&&this.#t.isPresssed.set(e=>!e)}#r(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.#t.onPress??this.#i).call(this,t)}#s(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}};var ye=class extends u{static props=M.props;#t;constructor(){super(),new M({isPresssed:this.#i.bind(this),onPress:this.#e.bind(this)})}onSetup(){this.#t=h();let{canAirPlay:t,isAirPlayConnected:e}=this.#t.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.#r.bind(this),"aria-hidden":$(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),D(t,this.#s.bind(this))}#e(t){this.#t.remote.requestAirPlay(t)}#i(){let{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()!=="disconnected"}#r(){let{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()}#s(){let{remotePlaybackState:t}=this.#t.$state;return`AirPlay ${t()}`}};var Ee=class extends u{static props=M.props;#t;constructor(){super(),new M({isPresssed:this.#i.bind(this),keyShortcut:"togglePaused",onPress:this.#e.bind(this)})}onSetup(){this.#t=h();let{paused:t,ended:e}=this.#t.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),D(t,"Play")}#e(t){let e=this.#t.remote;this.#i()?e.pause(t):e.play(t)}#i(){let{paused:t}=this.#t.$state;return!t()}};var Me=class extends u{static props=M.props;#t;constructor(){super(),new M({isPresssed:this.#i.bind(this),keyShortcut:"toggleCaptions",onPress:this.#e.bind(this)})}onSetup(){this.#t=h(),this.setAttributes({"data-active":this.#i.bind(this),"data-supported":()=>!this.#r(),"aria-hidden":$(this.#r.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),D(t,"Captions")}#e(t){this.#t.remote.toggleCaptions(t)}#i(){let{textTrack:t}=this.#t.$state,e=t();return!!e&&rt(e)}#r(){let{hasCaptions:t}=this.#t.$state;return!t()}};var Te=class extends u{static props={...M.props,target:"prefer-media"};#t;constructor(){super(),new M({isPresssed:this.#i.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#e.bind(this)})}onSetup(){this.#t=h();let{fullscreen:t}=this.#t.$state,e=this.#r.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":$(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),D(t,"Fullscreen")}#e(t){let e=this.#t.remote,i=this.$props.target();this.#i()?e.exitFullscreen(i,t):e.enterFullscreen(i,t)}#i(){let{fullscreen:t}=this.#t.$state;return t()}#r(){let{canFullscreen:t}=this.#t.$state;return t()}};var Pe=class extends u{static props=M.props;#t;constructor(){super(),new M({isPresssed:this.#i.bind(this),keyShortcut:"toggleMuted",onPress:this.#e.bind(this)})}onSetup(){this.#t=h(),this.setAttributes({"data-muted":this.#i.bind(this),"data-state":this.#r.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),D(t,"Mute")}#e(t){let e=this.#t.remote;this.#i()?e.unmute(t):e.mute(t)}#i(){let{muted:t,volume:e}=this.#t.$state;return t()||e()===0}#r(){let{muted:t,volume:e}=this.#t.$state,i=e();if(t()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}};var we=class extends u{static props=M.props;#t;constructor(){super(),new M({isPresssed:this.#i.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#e.bind(this)})}onSetup(){this.#t=h();let{pictureInPicture:t}=this.#t.$state,e=this.#r.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":$(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),D(t,"PiP")}#e(t){let e=this.#t.remote;this.#i()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}#i(){let{pictureInPicture:t}=this.#t.$state;return t()}#r(){let{canPictureInPicture:t}=this.#t.$state;return t()}};var $e=class extends u{static props={disabled:!1,seconds:30};#t;constructor(){super(),new O}onSetup(){this.#t=h();let{seeking:t}=this.#t.$state,{seconds:e}=this.$props,i=this.#e.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":i,"aria-hidden":$(()=>!i())})}onAttach(t){c(t,"tabindex","0"),c(t,"role","button"),c(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),D(t,this.#i.bind(this))}onConnect(t){I(t,this.#r.bind(this))}#e(){let{canSeek:t}=this.#t.$state;return t()}#i(){let{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}#r(t){let{seconds:e,disabled:i}=this.$props;if(i())return;let{currentTime:r}=this.#t.$state,s=r()+e();this.#t.remote.seek(s,t)}};var Re=class extends u{static props={disabled:!1};#t;constructor(){super(),new O}onSetup(){this.#t=h();let{disabled:t}=this.$props,{live:e,liveEdge:i}=this.#t.$state,r=()=>!e();this.setAttributes({"data-edge":i,"data-hidden":r,"aria-disabled":$(()=>t()||i()),"aria-hidden":$(r)})}onAttach(t){c(t,"tabindex","0"),c(t,"role","button"),c(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){I(t,this.#e.bind(this))}#e(t){let{disabled:e}=this.$props,{liveEdge:i}=this.#t.$state;e()||i()||this.#t.remote.seekToLiveEdge(t)}};var nt=new et({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Ve(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Ve(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Ve(o,t,e){let i=t-o,r=e-o;return i>0?r/i:0}var at=F(),tt=F();var lt=class extends k{#t;#e;constructor(t){super(),this.#t=t}onConnect(t){this.#e=new IntersectionObserver(e=>{this.#t.callback?.(e,this.#e)},this.#t),this.#e.observe(t),x(this.#i.bind(this))}#i(){this.#e?.disconnect(),this.#e=void 0}};function Ae(o,t,e,i){return Xt(o,V(e,fe(i)),t)}function ke(o,t,e,i){let r=Xt(0,e,1),s=t-o,n=s*r,l=n/i,d=i*Math.round(l);return o+d}var ee={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1},Lt=class extends k{#t;#e;#i;constructor(t,e){super(),this.#t=t,this.#e=e}onSetup(){w(tt)&&(this.#i=g(tt))}onConnect(){a(this.#u.bind(this)),a(this.#d.bind(this)),this.#t.swipeGesture&&a(this.#r.bind(this))}#r(){let{pointer:t}=this.#e.$state;if(t()!=="coarse"||!this.#t.swipeGesture()){this.#s=null;return}this.#s=this.#e.player.el?.querySelector("media-provider,[data-media-provider]"),this.#s&&(P(this.#s,"touchstart",this.#a.bind(this),{passive:!0}),P(this.#s,"touchmove",this.#l.bind(this),{passive:!1}))}#s=null;#n=null;#o=null;#a(t){this.#n=t.touches[0]}#l(t){if(j(this.#n)||ge(t))return;let e=t.touches[0],i=e.clientX-this.#n.clientX,r=e.clientY-this.#n.clientY,s=this.$state.dragging();!s&&Math.abs(r)>5||s||(t.preventDefault(),Math.abs(i)>20&&(this.#n=e,this.#o=this.$state.value(),this.#b(this.#o,t)))}#u(){let{hidden:t}=this.$props;this.listen("focus",this.#h.bind(this)),this.listen("keydown",this.#P.bind(this)),this.listen("keyup",this.#C.bind(this)),!(t()||this.#t.isDisabled())&&(this.listen("pointerenter",this.#S.bind(this)),this.listen("pointermove",this.#E.bind(this)),this.listen("pointerleave",this.#M.bind(this)),this.listen("pointerdown",this.#T.bind(this)))}#d(){this.#t.isDisabled()||!this.$state.dragging()||(P(document,"pointerup",this.#w.bind(this),{capture:!0}),P(document,"pointermove",this.#R.bind(this)),P(document,"touchmove",this.#$.bind(this),{passive:!1}))}#h(){this.#m(this.$state.value())}#p(t,e){let{value:i,min:r,max:s,dragging:n}=this.$state,l=Math.max(r(),Math.min(t,s()));i.set(l);let d=this.createEvent("value-change",{detail:l,trigger:e});if(this.dispatch(d),this.#t.onValueChange?.(d),n()){let p=this.createEvent("drag-value-change",{detail:l,trigger:e});this.dispatch(p),this.#t.onDragValueChange?.(p)}}#m(t,e){let{pointerValue:i,dragging:r}=this.$state;i.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),r()&&this.#p(t,e)}#f(t){let e,i=this.el.getBoundingClientRect(),{min:r,max:s}=this.$state;if(this.$props.orientation()==="vertical"){let{bottom:n,height:l}=i;e=(n-t.clientY)/l}else if(this.#n&&z(this.#o)){let{width:n}=this.#s.getBoundingClientRect(),l=(t.clientX-this.#n.clientX)/n,d=s()-r(),p=d*Math.abs(l);e=(l<0?this.#o-p:this.#o+p)/d}else{let{left:n,width:l}=i;e=(t.clientX-n)/l}return Math.max(r(),Math.min(s(),this.#t.roundValue(ke(r(),s(),e,this.#t.getStep()))))}#S(t){this.$state.pointing.set(!0)}#E(t){let{dragging:e}=this.$state;e()||this.#m(this.#f(t),t)}#M(t){this.$state.pointing.set(!1)}#T(t){if(t.button!==0)return;let e=this.#f(t);this.#b(e,t),this.#m(e,t)}#b(t,e){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.#e.remote.pauseControls(e);let r=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(r),this.#t.onDragStart?.(r),this.#i?.onDragStart?.()}#g(t,e){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.#e.remote.resumeControls(e);let r=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(r),this.#t.onDragEnd?.(r),this.#n=null,this.#o=null,this.#i?.onDragEnd?.()}#v;#c=!1;#P(t){if(!Object.keys(ee).includes(t.key))return;let{key:i}=t,r=this.#y(t);if(!j(r)){this.#m(r,t),this.#p(r,t);return}let s=this.#x(t);this.#c||(this.#c=i===this.#v,!this.$state.dragging()&&this.#c&&this.#b(s,t)),this.#m(s,t),this.#v=i}#C(t){if(!Object.keys(ee).includes(t.key)||!j(this.#y(t)))return;let i=this.#c?this.$state.pointerValue():this.#x(t);this.#p(i,t),this.#g(i,t),this.#v="",this.#c=!1}#y(t){let e=t.key,{min:i,max:r}=this.$state;return e==="Home"||e==="PageUp"?i():e==="End"||e==="PageDown"?r():!t.metaKey&&/^[0-9]$/.test(e)?(r()-i())/10*Number(e):null}#x(t){let{key:e,shiftKey:i}=t;t.preventDefault(),t.stopPropagation();let{shiftKeyMultiplier:r}=this.$props,{min:s,max:n,value:l,pointerValue:d}=this.$state,p=this.#t.getStep(),m=this.#t.getKeyStep(),T=i?m*r():m,E=Number(ee[e]),R=T*E,v=this.#c?d():this.#t.getValue?.()??l(),N=(v+R)/p;return Math.max(s(),Math.min(n(),Number((p*N).toFixed(3))))}#w(t){if(t.button!==0)return;t.preventDefault(),t.stopImmediatePropagation();let e=this.#f(t);this.#m(e,t),this.#g(e,t)}#$(t){t.preventDefault()}#R=st(t=>{this.#m(this.#f(t),t)},20,{leading:!0})};var K=F(()=>({}));var _=class extends k{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#t;#e;#i=S(!0);#r=S(!0);constructor(t){super(),this.#e=t}onSetup(){this.#t=h();let t=new O;t.attach(this),this.$state.focused=t.focused.bind(t),w(K)||A(K,{default:"value"}),A(at,{orientation:this.$props.orientation,disabled:this.#e.isDisabled,preview:S(null)}),a(this.#o.bind(this)),a(this.#a.bind(this)),a(this.#l.bind(this)),this.#d(),new Lt(this.#e,this.#t).attach(this),new lt({callback:this.#s.bind(this)}).attach(this)}onAttach(t){c(t,"role","slider"),c(t,"tabindex","0"),c(t,"autocomplete","off"),a(this.#h.bind(this))}onConnect(t){x(kt(t,this.#i.set)),a(this.#n.bind(this))}#s(t){this.#r.set(t[0].isIntersecting)}#n(){let{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#i()||!this.#r.bind(this))}#o(){let{dragging:t,value:e,min:i,max:r}=this.$state;y(t)||e.set(Ae(i(),r(),e(),this.#e.getStep()))}#a(){this.$state.step.set(this.#e.getStep())}#l(){if(!this.#e.isDisabled())return;let{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}#u(){return J(this.#e.isDisabled())}#d(){let{orientation:t}=this.$props,{dragging:e,active:i,pointing:r}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":r,"data-active":i,"aria-disabled":this.#u.bind(this),"aria-valuemin":this.#e.aria.valueMin??this.$state.min,"aria-valuemax":this.#e.aria.valueMax??this.$state.max,"aria-valuenow":this.#e.aria.valueNow,"aria-valuetext":this.#e.aria.valueText,"aria-orientation":t})}#h(){let{fillPercent:t,pointerPercent:e}=this.$state;this.#p(V(t(),3),V(e(),3))}#p=it((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")})};var dt=class extends u{static props={..._.props,min:0,max:100,value:0};static state=nt;constructor(){super(),new _({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#t.bind(this),valueText:this.#e.bind(this)}})}onSetup(){a(this.#i.bind(this)),a(this.#r.bind(this))}#t(){let{value:t}=this.$state;return Math.round(t())}#e(){let{value:t,max:e}=this.$state;return V(t()/e()*100,2)+"%"}#i(){let{value:t}=this.$props;this.$state.value.set(t())}#r(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}};var W=new Map,Ot=new Map,Je=void 0,Ht=class o{#t;#e;#i;$images=S([]);static create(t,e){let i=h();return new o(t,e,i)}constructor(t,e,i){this.#e=t,this.#i=e,this.#t=i,a(this.#r.bind(this))}#r(){let{canLoad:t}=this.#t.$state;if(!t())return;let e=this.#e();if(e){if(L(e)&&W.has(e)){let i=W.get(e);if(W.delete(e),W.set(e,i),W.size>99){let r=W.keys().next().value;W.delete(r)}this.$images.set(W.get(e))}else if(L(e)){let i=this.#i(),r=e+"::"+i;if(!Ot.has(r)){let s=new Promise(async(n,l)=>{try{let d=await fetch(e,{credentials:ce(i)});if(d.headers.get("content-type")==="application/json"){let m=await d.json();if(Y(m))if(m[0]&&"text"in m[0])n(this.#o(m));else{for(let T=0;T<m.length;T++){let E=m[T];q(de(E),!1),q("url"in E&&L(E.url),!1),q("startTime"in E&&z(E.startTime),!1)}n(m)}else n(this.#n(m));return}import("media-captions").then(async({parseResponse:m})=>{try{let{cues:T}=await m(d);n(this.#o(T))}catch(T){l(T)}})}catch(d){l(d)}}).then(n=>(W.set(r,n),n)).catch(n=>{this.#d(e,n)}).finally(()=>{L(r)&&Ot.delete(r)});Ot.set(r,s)}Ot.get(r)?.then(s=>{this.$images.set(s||[])})}else if(Y(e))try{this.$images.set(this.#s(e))}catch(i){this.#d(e,i)}else try{this.$images.set(this.#n(e))}catch(i){this.#d(e,i)}return()=>{this.$images.set([])}}}#s(t){let e=this.#a();return t.map((i,r)=>(q(i.url&&L(i.url),!1),q("startTime"in i&&z(i.startTime),!1),{...i,url:L(i.url)?this.#l(i.url,e):i.url}))}#n(t){q(L(t.url),!1),q(Y(t.tiles)&&t.tiles?.length,!1);let e=new URL(t.url),i=[],r="tile_width"in t?t.tile_width:t.tileWidth,s="tile_height"in t?t.tile_height:t.tileHeight;for(let n of t.tiles)i.push({url:e,startTime:"start"in n?n.start:n.startTime,width:r,height:s,coords:{x:n.x,y:n.y}});return i}#o(t){for(let r=0;r<t.length;r++){let s=t[r];q("startTime"in s&&z(s.startTime),!1),q("text"in s&&L(s.text),!1)}let e=[],i=this.#a();for(let r of t){let[s,n]=r.text.split("#"),l=this.#u(n);e.push({url:this.#l(s,i),startTime:r.startTime,endTime:r.endTime,width:l?.w,height:l?.h,coords:l&&z(l.x)&&z(l.y)?{x:l.x,y:l.y}:void 0})}return e}#a(){let t=y(this.#e);return!L(t)||!/^https?:/.test(t)?location.href:t}#l(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}#u(t){if(!t)return{};let[e,i]=t.split("="),r=i?.split(","),s={};if(!e||!r)return null;for(let n=0;n<e.length;n++){let l=+r[n];isNaN(l)||(s[e[n]]=l)}return s}#d(t,e){}};var De=class extends u{static props={src:null,time:0,crossOrigin:null};static state=new et({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#t;#e=[];onSetup(){this.media=h(),this.#t=Ht.create(this.$props.src,this.$state.crossOrigin),this.#r(),this.setAttributes({"data-loading":this.#a.bind(this),"data-error":this.#l.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":$(this.$state.hidden)})}onConnect(t){a(this.#i.bind(this)),a(this.#u.bind(this)),a(this.#r.bind(this)),a(this.#s.bind(this)),a(this.#d.bind(this)),a(this.#h.bind(this))}#i(){let t=this.$state.img();t&&(P(t,"load",this.#n.bind(this)),P(t,"error",this.#o.bind(this)))}#r(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i}=this.media.$state,r=t()!==null?t():i();e.set(r===!0?"anonymous":r)}#s(){let{src:t,loading:e,error:i}=this.$state;return t()&&(e.set(!0),i.set(null)),()=>{this.#m(),e.set(!1),i.set(null)}}#n(){let{loading:t,error:e}=this.$state;this.#h(),t.set(!1),e.set(null)}#o(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}#a(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}#l(){let{error:t}=this.$state;return!j(t())}#u(){let{hidden:t}=this.$state,{duration:e}=this.media.$state,i=this.#t.$images();t.set(this.#l()||!Number.isFinite(e())||i.length===0)}getTime(){return this.$props.time()}#d(){let t=this.#t.$images();if(!t.length)return;let e=this.getTime(),{src:i,activeThumbnail:r}=this.$state,s=-1,n=null;for(let l=t.length-1;l>=0;l--){let d=t[l];if(e>=d.startTime&&(!d.endTime||e<d.endTime)){s=l;break}}t[s]&&(n=t[s]),r.set(n),i.set(n?.url.href||"")}#h(){if(!this.scope||this.$state.hidden())return;let t=this.el,e=this.$state.img(),i=this.$state.activeThumbnail();if(!e||!i||!t)return;let r=i.width??e.naturalWidth,s=i?.height??e.naturalHeight,{maxWidth:n,maxHeight:l,minWidth:d,minHeight:p,width:m,height:T}=getComputedStyle(this.el);d==="100%"&&(d=parseFloat(m)+""),p==="100%"&&(p=parseFloat(T)+"");let E=Math.max(parseInt(d)/r,parseInt(p)/s),R=Math.min(Math.max(parseInt(d),parseInt(n))/r,Math.max(parseInt(p),parseInt(l))/s),v=!isNaN(R)&&R<1?R:E>1?E:1;this.#p(t,"--thumbnail-width",`${r*v}px`),this.#p(t,"--thumbnail-height",`${s*v}px`),this.#p(e,"width",`${e.naturalWidth*v}px`),this.#p(e,"height",`${e.naturalHeight*v}px`),this.#p(e,"transform",i.coords?`translate(-${i.coords.x*v}px, -${i.coords.y*v}px)`:""),this.#p(e,"max-width","none")}#p(t,e,i){t.style.setProperty(e,i),this.#e.push(()=>t.style.removeProperty(e))}#m(){for(let t of this.#e)t();this.#e=[]}};var Ie=class extends u{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#t;#e;#i;onSetup(){this.#i=At(dt.state),this.#t=g(K),this.#e=Vt(this.getValueText.bind(this))}getValueText(){let{type:t,format:e,decimalPlaces:i,padHours:r,padMinutes:s,showHours:n,showMs:l}=this.$props,{value:d,pointerValue:p,min:m,max:T}=this.#i,E=e?.()??this.#t.default,R=t()==="current"?d():p();if(E==="percent"){let v=T()-m(),N=R/v*100;return(this.#t.percent??V)(N,i())+"%"}else return E==="time"?(this.#t.time??ot)(R,{padHrs:r(),padMins:s(),showHrs:n(),showMs:l()}):(this.#t.value?.(R)??R.toFixed(2))+""}};var Le=class extends u{static props={offset:0,noClamp:!1};#t;onSetup(){this.#t=g(at);let{active:t}=At(dt.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){let{preview:e}=this.#t;e.set(t),x(()=>e.set(null)),a(this.#e.bind(this));let i=new ResizeObserver(this.#e.bind(this));i.observe(t),x(()=>i.disconnect())}#e=it(()=>{let{disabled:t,orientation:e}=this.#t;if(t())return;let i=this.el,{offset:r,noClamp:s}=this.$props;i&&Ze(i,{clamp:!s(),offset:r(),orientation:e()})})};function Ze(o,{clamp:t,offset:e,orientation:i}){let r=getComputedStyle(o),s=parseFloat(r.width),n=parseFloat(r.height),l={top:null,right:null,bottom:null,left:null};if(l[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${e}px))`,i==="horizontal"){let d=s/2;if(!t)l.left=`calc(var(--slider-pointer) - ${d}px)`;else{let p=`max(0px, calc(var(--slider-pointer) - ${d}px))`,m=`calc(100% - ${s}px)`;l.left=`min(${p}, ${m})`}}else{let d=n/2;if(!t)l.bottom=`calc(var(--slider-pointer) - ${d}px)`;else{let p=`max(${d}px, calc(var(--slider-pointer) - ${d}px))`,m=`calc(100% - ${n}px)`;l.bottom=`min(${p}, ${m})`}}Object.assign(o.style,l)}var Oe=class extends u{static props={..._.props,keyStep:5,shiftKeyMultiplier:2};static state=nt;#t;onSetup(){this.#t=h();let{audioGain:t}=this.#t.$state;A(K,{default:"percent",value(e){return(e*(t()??1)).toFixed(2)},percent(e){return Math.round(e*(t()??1))}}),new _({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#s.bind(this),aria:{valueMax:this.#r.bind(this),valueNow:this.#e.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#l.bind(this)}).attach(this),a(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),c(t,"aria-label","Volume");let{canSetVolume:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":$(()=>!e())})}#e(){let{value:t}=this.$state,{audioGain:e}=this.#t.$state;return Math.round(t()*(e()??1))}#i(){let{value:t,max:e}=this.$state,{audioGain:i}=this.#t.$state;return V(t()/e()*(i()??1)*100,2)+"%"}#r(){let{audioGain:t}=this.#t.$state;return this.$state.max()*(t()??1)}#s(){let{disabled:t}=this.$props,{canSetVolume:e}=this.#t.$state;return t()||!e()}#n(){let{muted:t,volume:e}=this.#t.$state,i=t()?0:e()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#o=st(this.#a.bind(this),25);#a(t){if(!t.trigger)return;let e=V(t.detail/100,3);this.#t.remote.changeVolume(e,t)}#l(t){this.#o(t)}#u(t){this.#o(t)}};var He=class extends u{static props={..._.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=nt;#t;#e;#i=S(null);constructor(){super();let{noSwipeGesture:t}=this.$props;new _({swipeGesture:()=>!t(),getValue:this.#S.bind(this),getStep:this.#E.bind(this),getKeyStep:this.#M.bind(this),roundValue:this.#T,isDisabled:this.#b.bind(this),aria:{valueNow:this.#g.bind(this),valueText:this.#v.bind(this)},onDragStart:this.#h.bind(this),onDragValueChange:this.#p.bind(this),onDragEnd:this.#m.bind(this),onValueChange:this.#f.bind(this)})}onSetup(){this.#t=h(),A(K,{default:"time",value:this.#C.bind(this),time:this.#y.bind(this)}),this.setAttributes({"data-chapters":this.#s.bind(this)}),this.setStyles({"--slider-progress":this.#r.bind(this)}),a(this.#o.bind(this)),a(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),c(t,"aria-label","Seek")}onConnect(t){a(this.#a.bind(this)),me(this.#t.textTracks,"chapters",this.#i.set)}#r(){let{bufferedEnd:t,duration:e}=this.#t.$state;return V(Math.min(t()/Math.max(e(),1),1)*100,3)+"%"}#s(){let{duration:t}=this.#t.$state;return this.#i()?.cues.length&&Number.isFinite(t())&&t()>0}#n(){this.#e=st(this.#l.bind(this),this.$props.seekingRequestThrottle())}#o(){if(this.$state.hidden())return;let{value:t,dragging:e}=this.$state,i=this.#S();y(e)||(t.set(i),this.dispatch("value-change",{detail:i}))}#a(){let t=this.#t.player.el,{preview:e}=g(at);t&&e()&&b(t,"data-preview",this.$state.active())}#l(t,e){this.#t.remote.seeking(t,e)}#u(t,e,i){this.#e.cancel();let{live:r}=this.#t.$state;if(r()&&e>=99){this.#t.remote.seekToLiveEdge(i);return}this.#t.remote.seek(t,i)}#d=!1;#h(t){let{pauseWhileDragging:e}=this.$props;if(e()){let{paused:i}=this.#t.$state;this.#d=!i(),this.#t.remote.pause(t)}}#p(t){this.#e(this.#c(t.detail),t)}#m(t){let{seeking:e}=this.#t.$state;y(e)||this.#l(this.#c(t.detail),t);let i=t.detail;this.#u(this.#c(i),i,t);let{pauseWhileDragging:r}=this.$props;r()&&this.#d&&(this.#t.remote.play(t),this.#d=!1)}#f(t){let{dragging:e}=this.$state;e()||!t.trigger||this.#m(t)}#S(){let{currentTime:t}=this.#t.$state;return this.#P(t())}#E(){let t=this.$props.step()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#M(){let t=this.$props.keyStep()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#T(t){return V(t,3)}#b(){let{disabled:t}=this.$props,{canSeek:e}=this.#t.$state;return t()||!e()}#g(){let{value:t}=this.$state;return Math.round(t())}#v(){let t=this.#c(this.$state.value()),{duration:e}=this.#t.$state;return Number.isFinite(t)?`${te(t)} out of ${te(e())}`:"live"}#c(t){let{duration:e}=this.#t.$state;return V(t/100*e(),5)}#P(t){let{liveEdge:e,duration:i}=this.#t.$state,r=Math.max(0,Math.min(1,e()?1:Math.min(t,i())/i()));return Number.isNaN(r)?0:Number.isFinite(r)?r*100:100}#C(t){let e=this.#c(t),{live:i,duration:r}=this.#t.$state;return Number.isFinite(e)?(i()?e-r():e).toFixed(0):"LIVE"}#y(t,e){let i=this.#c(t),{live:r,duration:s}=this.#t.$state,n=r()?i-s():i;return Number.isFinite(i)?`${n<0?"-":""}${ot(Math.abs(n),e)}`:"LIVE"}};var Bt=class extends k{#t;constructor(t){super(),this.#t=t,a(this.#e.bind(this))}onDestroy(){this.#s?.(),this.#s=null}#e(){let t=this.#t.trigger();if(!t){this.hide();return}let e=this.show.bind(this),i=this.hide.bind(this);this.#t.listen(t,e,i)}#i=-1;#r=-1;#s=null;show(t){this.#n(),window.cancelAnimationFrame(this.#r),this.#r=-1,this.#s?.(),this.#s=null,this.#i=window.setTimeout(()=>{this.#i=-1;let e=this.#t.content();e&&e.style.removeProperty("display"),y(()=>this.#t.onChange(!0,t))},this.#t.showDelay?.()??0)}hide(t){this.#n(),y(()=>this.#t.onChange(!1,t)),this.#r=requestAnimationFrame(()=>{this.#n(),this.#r=-1;let e=this.#t.content();if(e){let i=()=>{e.style.display="none",this.#s=null};if(xe(e)){this.#s?.();let s=P(e,"animationend",i,{once:!0});this.#s=s}else i()}})}#n(){window.clearTimeout(this.#i),this.#i=-1}};var C=F();var Be=o=>typeof o=="object"&&o!=null&&o.nodeType===1,Fe=(o,t)=>(!t||o!=="hidden")&&o!=="visible"&&o!=="clip",ie=(o,t)=>{if(o.clientHeight<o.scrollHeight||o.clientWidth<o.scrollWidth){let e=getComputedStyle(o,null);return Fe(e.overflowY,t)||Fe(e.overflowX,t)||(i=>{let r=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(o)}return!1},Ft=(o,t,e,i,r,s,n,l)=>s<o&&n>t||s>o&&n<t?0:s<=o&&l<=e||n>=t&&l>=e?s-o-i:n>t&&l<e||s<o&&l>e?n-t+r:0,ti=o=>{let t=o.parentElement;return t??(o.getRootNode().host||null)},_e=(o,t)=>{var e,i,r,s;if(typeof document>"u")return[];let{scrollMode:n,block:l,inline:d,boundary:p,skipOverflowHiddenElements:m}=t,T=typeof p=="function"?p:X=>X!==p;if(!Be(o))throw new TypeError("Invalid target");let E=document.scrollingElement||document.documentElement,R=[],v=o;for(;Be(v)&&T(v);){if(v=ti(v),v===E){R.push(v);break}v!=null&&v===document.body&&ie(v)&&!ie(document.documentElement)||v!=null&&ie(v,m)&&R.push(v)}let N=(i=(e=window.visualViewport)==null?void 0:e.width)!=null?i:innerWidth,ut=(s=(r=window.visualViewport)==null?void 0:r.height)!=null?s:innerHeight,{scrollX:ht,scrollY:pt}=window,{height:ct,width:mt,top:bt,right:Gt,bottom:Nt,left:gt}=o.getBoundingClientRect(),{top:re,right:se,bottom:oe,left:ne}=(X=>{let f=window.getComputedStyle(X);return{top:parseFloat(f.scrollMarginTop)||0,right:parseFloat(f.scrollMarginRight)||0,bottom:parseFloat(f.scrollMarginBottom)||0,left:parseFloat(f.scrollMarginLeft)||0}})(o),H=l==="start"||l==="nearest"?bt-re:l==="end"?Nt+oe:bt+ct/2-re+oe,B=d==="center"?gt+mt/2-ne+se:d==="end"?Gt+se:gt-ne,Kt=[];for(let X=0;X<R.length;X++){let f=R[X],{height:vt,width:xt,top:St,right:Wt,bottom:Ut,left:Ct}=f.getBoundingClientRect();if(n==="if-needed"&&bt>=0&&gt>=0&&Nt<=ut&&Gt<=N&&bt>=St&&Nt<=Ut&&gt>=Ct&&Gt<=Wt)return Kt;let yt=getComputedStyle(f),Et=parseInt(yt.borderLeftWidth,10),Mt=parseInt(yt.borderTopWidth,10),Tt=parseInt(yt.borderRightWidth,10),Pt=parseInt(yt.borderBottomWidth,10),U=0,Q=0,wt="offsetWidth"in f?f.offsetWidth-f.clientWidth-Et-Tt:0,$t="offsetHeight"in f?f.offsetHeight-f.clientHeight-Mt-Pt:0,Qt="offsetWidth"in f?f.offsetWidth===0?0:xt/f.offsetWidth:0,jt="offsetHeight"in f?f.offsetHeight===0?0:vt/f.offsetHeight:0;if(E===f)U=l==="start"?H:l==="end"?H-ut:l==="nearest"?Ft(pt,pt+ut,ut,Mt,Pt,pt+H,pt+H+ct,ct):H-ut/2,Q=d==="start"?B:d==="center"?B-N/2:d==="end"?B-N:Ft(ht,ht+N,N,Et,Tt,ht+B,ht+B+mt,mt),U=Math.max(0,U+pt),Q=Math.max(0,Q+ht);else{U=l==="start"?H-St-Mt:l==="end"?H-Ut+Pt+$t:l==="nearest"?Ft(St,Ut,vt,Mt,Pt+$t,H,H+ct,ct):H-(St+vt/2)+$t/2,Q=d==="start"?B-Ct-Et:d==="center"?B-(Ct+xt/2)+wt/2:d==="end"?B-Wt+Tt+wt:Ft(Ct,Wt,xt,Et,Tt+wt,B,B+mt,mt);let{scrollLeft:ae,scrollTop:le}=f;U=jt===0?0:Math.max(0,Math.min(le+U/jt,f.scrollHeight-vt/jt+$t)),Q=Qt===0?0:Math.max(0,Math.min(ae+Q/Qt,f.scrollWidth-xt/Qt+wt)),H+=le-U,B+=ae-Q}Kt.push({el:f,top:U,left:Q})}return Kt};function ei(o,t){let e=_e(o,t);for(let{el:i,top:r,left:s}of e)i.scroll({top:r,left:s,behavior:t.behavior})}function qe(o,t={}){ei(o,{scrollMode:"if-needed",block:"center",inline:"center",...t})}var ii=["a[href]","[tabindex]","input","select","button"].map(o=>`${o}:not([aria-hidden='true'])`).join(","),ri=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]),_t=class{#t=-1;#e=null;#i=[];#r;get items(){return this.#i}constructor(t){this.#r=t}attachMenu(t){P(t,"focus",this.#o.bind(this)),this.#e=t,x(()=>{this.#e=null})}listen(){this.#e&&(this.update(),P(this.#e,"keyup",this.#l.bind(this)),P(this.#e,"keydown",this.#u.bind(this)),x(()=>{this.#t=-1,this.#i=[]}))}update(){this.#t=0,this.#i=this.#h()}scroll(t=this.#n()){let e=this.#i[t];e&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{qe(e,{behavior:"smooth",boundary:i=>!i.hasAttribute("data-root")})})})}focusActive(t=!0){let e=this.#n();this.#s(e>=0?e:0,t)}#s(t,e=!0){this.#t=t,this.#i[t]?(this.#i[t].focus({preventScroll:!0}),e&&this.scroll(t)):this.#e?.focus({preventScroll:!0})}#n(){return this.#i.findIndex(t=>document.activeElement===t||t.getAttribute("role")==="menuitemradio"&&t.getAttribute("aria-checked")==="true")}#o(){this.#t>=0||(this.update(),this.focusActive())}#a(t){let e=t.target;if(he(t)&&e instanceof Element){let i=e.getAttribute("role");return!/a|input|select|button/.test(e.localName)&&!i}return ri.has(t.key)}#l(t){this.#a(t)&&(t.stopPropagation(),t.preventDefault())}#u(t){if(this.#a(t))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.#r.closeMenu(t);break;case"Tab":this.#s(this.#d(t.shiftKey?-1:1));break;case"ArrowUp":this.#s(this.#d(-1));break;case"ArrowDown":this.#s(this.#d(1));break;case"Home":case"PageUp":this.#s(0);break;case"End":case"PageDown":this.#s(this.#i.length-1);break}}#d(t){let e=this.#t;do e=(e+t+this.#i.length)%this.#i.length;while(this.#i[e]?.offsetParent===null);return e}#h(){if(!this.#e)return[];let t=this.#e.querySelectorAll(ii),e=[],i=r=>r.getAttribute("role")==="menu";for(let r of t)Z(r)&&r.offsetParent!==null&&Dt(this.#e,r,i)&&e.push(r);return e}};var si=0,Ge=class extends u{static props={showDelay:0};#t;#e;#i;#r=S(!1);#s=S(!1);#n=S(null);#o=S(null);#a;#l=new Set;#u=null;#d;#h;#p=!1;#m=S(!1);#f=new Set;get triggerElement(){return this.#n()}get contentElement(){return this.#o()}get isSubmenu(){return!!this.#a}constructor(){super();let{showDelay:t}=this.$props;this.#d=new Bt({trigger:this.#n,content:this.#o,showDelay:t,listen:(e,i,r)=>{I(e,n=>{this.#r()?r(n):i(n)});let s=this.#D();s&&I(s,n=>{n.stopPropagation(),r(n)})},onChange:this.#P.bind(this)})}onSetup(){this.#t=h();let t=++si;this.#e=`media-menu-${t}`,this.#i=`media-menu-button-${t}`,this.#h=new _t({closeMenu:this.close.bind(this)}),w(C)&&(this.#a=g(C)),this.#S(),this.setAttributes({"data-open":this.#r,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#x.bind(this)}),A(C,{button:this.#n,content:this.#o,expanded:this.#r,hint:S(""),submenu:!!this.#a,disable:this.#w.bind(this),attachMenuButton:this.#M.bind(this),attachMenuItems:this.#T.bind(this),attachObserver:this.#b.bind(this),disableMenuButton:this.#v.bind(this),addSubmenu:this.#L.bind(this),onTransitionEvent:e=>{this.#f.add(e),x(()=>{this.#f.delete(e)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){a(this.#E.bind(this)),this.isSubmenu&&this.#a?.addSubmenu(this)}onDestroy(){this.#n.set(null),this.#o.set(null),this.#u=null,this.#f.clear()}#S(){let t=-1,e=w(tt)?g(tt):null;A(tt,{onDragStart:()=>{e?.onDragStart?.(),window.clearTimeout(t),t=-1,this.#p=!0},onDragEnd:()=>{e?.onDragEnd?.(),t=window.setTimeout(()=>{this.#p=!1,t=-1},300)}})}#E(){let t=this.#y();this.isSubmenu||this.#A(),this.#g(t),t&&(a(()=>{let{height:e}=this.#t.$state,i=this.#o();i&&zt(i,"--player-height",e()+"px")}),this.#h.listen(),this.listen("pointerup",this.#$.bind(this)),P(window,"pointerup",this.#R.bind(this)))}#M(t){let e=t.el,i=this.isSubmenu,r=$(this.#x.bind(this));c(e,"tabindex",i?"-1":"0"),c(e,"role",i?"menuitem":"button"),b(e,"id",this.#i),b(e,"aria-haspopup","menu"),b(e,"aria-expanded","false"),b(e,"data-root",!this.isSubmenu),b(e,"data-submenu",this.isSubmenu),a(()=>{b(e,"data-open",this.#r()),b(e,"aria-disabled",r())}),this.#n.set(e),x(()=>{this.#n.set(null)})}#T(t){let e=t.el;e.style.setProperty("display","none"),b(e,"id",this.#e),c(e,"role","menu"),c(e,"tabindex","-1"),b(e,"data-root",!this.isSubmenu),b(e,"data-submenu",this.isSubmenu),this.#o.set(e),x(()=>this.#o.set(null)),a(()=>b(e,"data-open",this.#r())),this.#h.attachMenu(e),this.#g(!1);let r=this.#G.bind(this);this.isSubmenu?this.#a?.onTransitionEvent(r):(t.listen("transitionstart",r),t.listen("transitionend",r),t.listen("animationend",this.#A),t.listen("vds-menu-resize",this.#A))}#b(t){this.#u=t}#g(t){let e=y(this.#o);e&&b(e,"aria-hidden",J(!t))}#v(t){this.#m.set(t)}#c=!1;#P(t,e){if(this.#c=ue(e),e?.stopPropagation(),this.#r()===t)return;if(this.#x()){t&&this.#d.hide(e);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let i=this.#n(),r=this.#o();if(i&&(b(i,"aria-controls",t&&this.#e),b(i,"aria-expanded",J(t))),r&&b(r,"aria-labelledby",t&&this.#i),this.#r.set(t),this.#I(e),Rt(),this.#c){t?r?.focus():i?.focus();for(let s of[this.el,r])s&&s.setAttribute("data-keyboard","")}else for(let s of[this.el,r])s&&s.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:e}),t)!this.isSubmenu&&this.#t.activeMenu!==this&&(this.#t.activeMenu?.close(e),this.#t.activeMenu=this),this.#u?.onOpen?.(e);else{if(this.isSubmenu)for(let s of this.#l)s.close(e);else this.#t.activeMenu=null;this.#u?.onClose?.(e)}t&&requestAnimationFrame(this.#C.bind(this))}#C(){this.#k||this.#V||(this.#h.update(),requestAnimationFrame(()=>{this.#c?this.#h.focusActive():this.#h.scroll()}))}#y(){return!this.#x()&&this.#r()}#x(){return this.#s()||this.#m()}#w(t){this.#s.set(t)}#$(t){let e=this.#o();this.#p||e&&Yt(e,t)||t.stopPropagation()}#R(t){let e=this.#o();this.#p||e&&Yt(e,t)||this.close(t)}#D(){let t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&Dt(this.el,t,e=>e.getAttribute("role")==="menu")?t:null}#I(t){this.isSubmenu||(this.#r()?this.#t.remote.pauseControls(t):this.#t.remote.resumeControls(t))}#L(t){this.#l.add(t),P(t,"open",this.#B),P(t,"close",this.#_),x(this.#O)}#O=this.#H.bind(this);#H(t){this.#l.delete(t)}#V=!1;#B=this.#F.bind(this);#F(t){this.#V=!0;let e=this.#o();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(let i of this.#l)if(i!==t.target)for(let r of[i.el,i.triggerElement])r?.setAttribute("aria-hidden","true");if(e){let i=t.target.el;for(let r of e.children)r.contains(i)?r.setAttribute("data-open",""):r!==i&&r.setAttribute("data-hidden","")}}#_=this.#q.bind(this);#q(t){this.#V=!1;let e=this.#o();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(let i of this.#l)for(let r of[i.el,i.triggerElement])r?.setAttribute("aria-hidden","false");if(e)for(let i of e.children)i.removeAttribute("data-open"),i.removeAttribute("data-hidden")}#A=it(()=>{let t=y(this.#o);if(!t)return;let e=0,i=getComputedStyle(t),r=[...t.children];for(let s of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(i[s])||0;for(let s of r)if(Z(s)&&s.style.display==="contents")r.push(...s.children);else if(s.nodeType===3)e+=parseFloat(getComputedStyle(s).fontSize);else if(Z(s)){if(!be(s))continue;let n=getComputedStyle(s);e+=s.offsetHeight+(parseFloat(n.marginTop)||0)+(parseFloat(n.marginBottom)||0)}zt(t,"--menu-height",e+"px")});#k=!1;#G(t){let e=this.#o();e&&t.propertyName==="height"&&(this.#k=t.type==="transitionstart",b(e,"data-transition",this.#k?"height":null),this.#r()&&this.#C());for(let i of this.#f)i(t)}open(t){y(this.#r)||(this.#d.show(t),Rt())}close(t){y(this.#r)&&(this.#d.hide(t),Rt())}};var qt=class extends u{static props={disabled:!1};#t;#e=S(null);get expanded(){return this.#t?.expanded()??!1}constructor(){super(),new O}onSetup(){this.#t=g(C)}onAttach(t){this.#t.attachMenuButton(this),a(this.#i.bind(this)),c(t,"type","button")}onConnect(t){a(this.#r.bind(this)),this.#s();let e=new MutationObserver(this.#s.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),x(()=>e.disconnect()),I(t,i=>{this.dispatch("select",{trigger:i})})}#i(){this.#t.disableMenuButton(this.$props.disabled())}#r(){let t=this.#e();t&&a(()=>{let e=this.#t.hint();e&&(t.textContent=e)})}#s(){let t=this.el?.querySelector('[data-part="hint"]');this.#e.set(t??null)}};var Ne=class extends qt{};var Ke=class extends u{static props={container:null,disabled:!1};#t=null;#e;onSetup(){this.#e=h(),A(ft,{attach:this.#i.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.#t?.remove(),this.#t=null}#i(t){this.#s(!1),this.#t=t,Jt(()=>{Jt(()=>{this.connectScope&&a(this.#r.bind(this))})})}#r(){let{fullscreen:t}=this.#e.$state,{disabled:e}=this.$props;this.#s(e()==="fullscreen"?!t():!e())}#s(t){if(!this.#t)return;let e=this.#n(this.$props.container());if(!e)return;let i=this.#t.parentElement===e;b(this.#t,"data-portal",t),t?i||(this.#t.remove(),e.append(this.#t)):i&&this.#t.parentElement===e&&(this.#t.remove(),this.el?.append(this.#t))}#n(t){return Z(t)?t:t?document.querySelector(t):document.body}},ft=F();var We=class extends u{static props={placement:null,offset:0,alignOffset:0};#t;constructor(){super(),new O;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.#t=g(C),this.#t.attachMenuItems(this),w(ft)){let e=g(ft);e&&(A(ft,null),e.attach(t),x(()=>e.attach(null)))}}onConnect(t){a(this.#e.bind(this))}#e(){if(!this.el)return;let t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:e,alignOffset:i}=this.$props;return ve(this.el,this.#i(),t,{offsetVarName:"media-menu",xOffset:i(),yOffset:e()})}else this.el.removeAttribute("style"),this.el.style.display="none"}#i(){return this.#t.button()}};var Ue=F();var G=class extends k{#t=new Set;#e=S("");#i=null;onValueChange;get values(){return Array.from(this.#t).map(t=>t.value())}get value(){return this.#e()}set value(t){this.#o(t)}onSetup(){A(Ue,{add:this.#r.bind(this),remove:this.#s.bind(this)})}onAttach(t){w(C)||c(t,"role","radiogroup"),this.setAttributes({value:this.#e})}onDestroy(){this.#t.clear()}#r(t){this.#t.has(t)||(this.#t.add(t),t.onCheck=this.#n,t.check(t.value()===this.#e()))}#s(t){t.onCheck=null,this.#t.delete(t)}#n=this.#o.bind(this);#o(t,e){let i=y(this.#e);if(!t||t===i)return;let r=this.#a(i),s=this.#a(t);r?.check(!1,e),s?.check(!0,e),this.#e.set(t),this.onValueChange?.(t,e)}#a(t){for(let e of this.#t)if(t===y(e.value))return e;return null}};var Qe=class extends u{static props={emptyLabel:"Default"};#t;#e;#i;get value(){return this.#i.value}get disabled(){let{audioTracks:t}=this.#e.$state;return t().length<=1}constructor(){super(),this.#i=new G,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=h(),w(C)&&(this.#t=g(C))}onConnect(t){a(this.#r.bind(this)),a(this.#n.bind(this)),a(this.#s.bind(this))}getOptions(){let{audioTracks:t}=this.#e.$state;return t().map(e=>({track:e,label:e.label,value:e.label.toLowerCase()}))}#r(){this.#i.value=this.#o()}#s(){let{emptyLabel:t}=this.$props,{audioTrack:e}=this.#e.$state,i=e();this.#t?.hint.set(i?.label??t())}#n(){this.#t?.disable(this.disabled)}#o(){let{audioTrack:t}=this.#e.$state,e=t();return e?e.label.toLowerCase():""}#a(t,e){if(this.disabled)return;let i=this.#e.audioTracks.toArray().findIndex(r=>r.label.toLowerCase()===t);if(i>=0){let r=this.#e.audioTracks[i];this.#e.remote.changeAudioTrack(i,e),this.dispatch("change",{detail:r,trigger:e})}}};var je=class extends u{static props={offLabel:"Off"};#t;#e;#i;get value(){return this.#i.value}get disabled(){let{hasCaptions:t}=this.#t.$state;return!t()}constructor(){super(),this.#i=new G,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=h(),w(C)&&(this.#e=g(C))}onConnect(t){super.onConnect?.(t),a(this.#r.bind(this)),a(this.#n.bind(this)),a(this.#s.bind(this))}getOptions(){let{offLabel:t}=this.$props,{textTracks:e}=this.#t.$state;return[{value:"off",label:t},...e().filter(rt).map(i=>({track:i,label:i.label,value:this.#l(i)}))]}#r(){this.#i.value=this.#o()}#s(){let{offLabel:t}=this.$props,{textTrack:e}=this.#t.$state,i=e();this.#e?.hint.set(i&&rt(i)&&i.mode==="showing"?i.label:t())}#n(){this.#e?.disable(this.disabled)}#o(){let{textTrack:t}=this.#t.$state,e=t();return e&&rt(e)&&e.mode==="showing"?this.#l(e):"off"}#a(t,e){if(this.disabled)return;if(t==="off"){let r=this.#t.textTracks.selected;if(r){let s=this.#t.textTracks.indexOf(r);this.#t.remote.changeTextTrackMode(s,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}let i=this.#t.textTracks.toArray().findIndex(r=>this.#l(r)===t);if(i>=0){let r=this.#t.textTracks[i];this.#t.remote.changeTextTrackMode(i,"showing",e),this.dispatch("change",{detail:r,trigger:e})}}#l(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}};var oi=[.25,.5,.75,1,1.25,1.5,1.75,2],ze=class extends u{static props={normalLabel:"Normal",rates:oi};#t;#e;#i;get value(){return this.#i.value}get disabled(){let{rates:t}=this.$props,{canSetPlaybackRate:e}=this.#t.$state;return!e()||t().length===0}constructor(){super(),this.#i=new G,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=h(),w(C)&&(this.#e=g(C))}onConnect(t){a(this.#r.bind(this)),a(this.#s.bind(this)),a(this.#n.bind(this))}getOptions(){let{rates:t,normalLabel:e}=this.$props;return t().map(i=>({label:i===1?e:i+"\xD7",value:i.toString()}))}#r(){this.#i.value=this.#o()}#s(){let{normalLabel:t}=this.$props,{playbackRate:e}=this.#t.$state,i=e();this.#e?.hint.set(i===1?t():i+"\xD7")}#n(){this.#e?.disable(this.disabled)}#o(){let{playbackRate:t}=this.#t.$state;return t().toString()}#a(t,e){if(this.disabled)return;let i=+t;this.#t.remote.changePlaybackRate(i,e),this.dispatch("change",{detail:i,trigger:e})}};var Xe=class extends u{static props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"};#t;#e;#i;get value(){return this.#i.value}get disabled(){let{canSetQuality:t,qualities:e}=this.#t.$state;return!t()||e().length<=1}#r=Vt(()=>{let{sort:t}=this.$props,{qualities:e}=this.#t.$state;return Se(e(),t()==="descending")});constructor(){super(),this.#i=new G,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=h(),w(C)&&(this.#e=g(C))}onConnect(t){a(this.#s.bind(this)),a(this.#o.bind(this)),a(this.#n.bind(this))}getOptions(){let{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.#r().map(i=>{let r=i.bitrate&&i.bitrate>=0?`${V(i.bitrate/1e6,2)} Mbps`:null;return{quality:i,label:i.height+"p",value:this.#u(i),bitrate:()=>e()?null:r}})]}#s(){this.#i.value=this.#l()}#n(){let{autoLabel:t}=this.$props,{autoQuality:e,quality:i}=this.#t.$state,r=i()?i().height+"p":"";this.#e?.hint.set(e()?t()+(r?` (${r})`:""):r)}#o(){this.#e?.disable(this.disabled)}#a(t,e){if(this.disabled)return;if(t==="auto"){this.#t.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}let{qualities:i}=this.#t.$state,r=y(i).findIndex(s=>this.#u(s)===t);if(r>=0){let s=y(i)[r];this.#t.remote.changeQuality(r,e),this.dispatch("change",{detail:s,trigger:e})}}#l(){let{quality:t,autoQuality:e}=this.#t.$state;if(e())return"auto";let i=t();return i?this.#u(i):"auto"}#u(t){return t.height+"_"+t.bitrate}};var Ye=class extends u{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new et({timeText:"",hidden:!1});#t;#e=S(null);#i=S(!0);#r=S(!0);onSetup(){this.#t=h(),this.#a();let{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.#d.bind(this)}),new lt({callback:this.#s.bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||a(this.#l.bind(this)),a(this.#a.bind(this))}onConnect(t){x(kt(t,this.#i.set)),a(this.#n.bind(this)),a(this.#o.bind(this))}#s(t){this.#r.set(t[0].isIntersecting)}#n(){let{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#i()||!this.#r())}#o(){if(!this.$props.toggle()){this.#e.set(null);return}this.el&&I(this.el,this.#h.bind(this))}#a(){let{hidden:t,timeText:e}=this.$state,{duration:i}=this.#t.$state;if(t())return;let{type:r,padHours:s,padMinutes:n,showHours:l}=this.$props,d=this.#u(r()),p=i(),m=this.#d();if(!Number.isFinite(d+p)){e.set("LIVE");return}let T=m?Math.max(0,p-d):d,E=ot(T,{padHrs:s(),padMins:n(),showHrs:l()});e.set((m?"-":"")+E)}#l(){if(!this.el)return;let{toggle:t}=this.$props;b(this.el,"role",t()?"timer":null),b(this.el,"tabindex",t()?0:null)}#u(t){let{bufferedEnd:e,duration:i,currentTime:r}=this.#t.$state;switch(t){case"buffered":return e();case"duration":return i();default:return r()}}#d(){return this.$props.remainder()&&this.#e()!==!1}#h(t){if(t.preventDefault(),this.#e()===null){this.#e.set(!this.$props.remainder());return}this.#e.set(e=>!e)}};export{It as a,ot as b,te as c,Bt as d,M as e,ye as f,Ee as g,Me as h,Te as i,Pe as j,we as k,$e as l,Re as m,nt as n,at as o,K as p,_ as q,dt as r,Ht as s,De as t,Ie as u,Le as v,Ze as w,Oe as x,He as y,C as z,Ge as A,qt as B,Ne as C,Ke as D,ft as E,We as F,Ue as G,G as H,Qe as I,je as J,oi as K,ze as L,Xe as M,Ye as N};
