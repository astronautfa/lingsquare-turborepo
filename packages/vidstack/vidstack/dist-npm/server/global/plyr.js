import"../chunks/vidstack-F5N6XXFG.js";import{b as N}from"../chunks/vidstack-2YFF2FIR.js";import"../chunks/vidstack-WDRL4MPL.js";import"../chunks/vidstack-OOACSSH6.js";import"../chunks/vidstack-VSIJQOVT.js";import{h as F}from"../chunks/vidstack-B33PLL6T.js";import{h as R,i as O,k as $}from"../chunks/vidstack-KQL2U4PS.js";import{m as M}from"../chunks/vidstack-7I4ZKTF3.js";import"../chunks/vidstack-KCALJS55.js";import{$ as D,F as y,G as V,Y as q,n as v,o as I,r as _,x as T}from"../chunks/vidstack-SHDDQIF4.js";import"../chunks/vidstack-MEEMBG7T.js";import"../chunks/vidstack-TAZK6WWM.js";var g=null,d=N.record,Q=["playing","paused","ended","currentTime","seeking","duration","volume","muted","loop","poster"],B={ratechange:"rate-change",ready:"can-play",timeupdate:"time-update",volumechange:"volume-change"},W=["airplay","captions-off","captions-on","download","enter-fullscreen","exit-fullscreen","fast-forward","muted","pause","pip","play","restart","rewind","settings","volume"],j=class x{constructor(e,t={}){this.target=e;this.config=t;throw Error("[plyr] can not create player on server.");if(n)try{t={...t,...JSON.parse(n)}}catch{}}static setup(e,t){return v(e)&&(e=document.querySelectorAll(e)),[...e].map(n=>new x(n,t))}static supported(e,t){return!0}player;provider;layout;fullscreen=new k(this);playing=d.playing;paused=d.paused;ended=d.ended;currentTime=d.currentTime;seeking=d.seeking;duration=d.duration;volume=d.volume;muted=d.muted;loop=d.loop;poster=d.poster;get type(){return this.player.provider?.type??""}get isHTML5(){return/audio|video|hls/.test(this.type)}get isEmbed(){return/youtube|vimeo/.test(this.type)}get buffered(){let{bufferedEnd:e,seekableEnd:t}=this.player.state;return t>0?e/t:0}get stopped(){return this.paused&&this.currentTime===0}get hasAudio(){if(!this.isHTML5)return!0;let e=this.player.provider.media;return!!(e.mozHasAudio||e.webkitAudioDecodedByteCount||e.audioTracks?.length||this.player.audioTracks.length)}get speed(){return this.player.playbackRate}set speed(e){this.player.remoteControl.changePlaybackRate(e)}get currentTrack(){return this.player.textTracks.selectedIndex}set currentTrack(e){this.player.remoteControl.changeTextTrackMode(e,"showing")}get pip(){return this.player.state.pictureInPicture}set pip(e){e?this.player.enterPictureInPicture():this.player.exitPictureInPicture()}get quality(){return this.player.state.quality?.height??null}set quality(e){let t=this.player.qualities,n=-1;if(e!==null){let s=1/0;for(let i=0;i<t.length;i++){let l=Math.abs(t[i].height-e);l<s&&(n=i,s=l)}}this.player.remoteControl.changeQuality(n)}#t=null;get source(){return this.#t}set source(e){let{type:t="video",sources:n="",title:s="",poster:i="",thumbnails:l="",tracks:c=[]}=e??{};this.player.src=n,this.player.viewType=t,this.player.title=s,this.player.poster=i,this.layout.thumbnails=l,this.player.textTracks.clear();for(let o of c)this.player.textTracks.add(o);this.#t=e}#e=null;get ratio(){return this.#e}set ratio(e){e&&(e=e.replace(/\s*:\s*/," / ")),V(this.player,"aspect-ratio",e??"unset"),this.#e=e}get download(){return this.layout.download}set download(e){this.layout.download=e}#i=D();#n(){g!==this&&g?.pause(),g=this}#s(){this.currentTime=0,this.paused=!0}play(){return this.player.play()}pause(){return this.player.pause()}togglePlay(e=this.paused){return e?this.player.play():this.player.pause()}toggleCaptions(e=!this.player.textTracks.selected){let t=this.player.remoteControl;e?t.showCaptions():t.disableCaptions()}toggleControls(e=!this.player.controls.showing){let t=this.player.controls;e?t.show():t.hide()}restart(){this.currentTime=0}stop(){this.pause(),this.player.currentTime=0}forward(e=this.config.seekTime??10){this.currentTime+=e}rewind(e=this.config.seekTime??10){this.currentTime-=e}increaseVolume(e=5){this.volume+=e}decreaseVolume(e=5){this.volume-=e}airplay(){return this.player.requestAirPlay()}on(e,t){this.#o(e,t)}once(e,t){this.#o(e,t,{once:!0})}off(e,t){this.#o(e,t,{remove:!0})}#r=[];#o(e,t,n={}){let s=e,i=null;switch(e){case"captionsenabled":case"captionsdisabled":s="text-track-change",i=e==="captionsenabled";break;case"controlsshown":case"controlshidden":s="controls-change",i=e==="controlsshown";break;case"enterfullscreen":case"exitfullscreen":s="fullscreen-change",i=e==="enterfullscreen";break;default:}let l=B[s]??s,c=o=>{if(!(I(i)&&!!o.detail!==i)){if(l!==e){t(new _(e,{...o,trigger:o}));return}t(o)}};if(n.remove){let o=-1;do if(o=this.#r.findIndex(h=>h.type===e&&h.callback===t),o>=0){let{listener:h}=this.#r[o];this.player.removeEventListener(l,h),this.#r.splice(o,1)}while(o>=0)}else this.#r.push({type:e,callback:t,listener:c}),this.player.addEventListener(l,c,{once:n.once})}supports(e){return!!e&&F(null,e)}destroy(){for(let{type:e,listener:t}of this.#r)this.player.removeEventListener(B[e]??e,t);this.#t=null,this.#r.length=0,g===this&&(g=null),this.#i.empty(),this.player.destroy()}},k=class{#t;constructor(e){this.#t=e}get#e(){return this.#t.player}get enabled(){return this.#e.state.canFullscreen}get active(){return this.#e.state.fullscreen}enter(){return this.#e.requestFullscreen()}exit(){return this.#e.exitFullscreen()}toggle(){return this.active?this.exit():this.enter()}};export{j as Plyr,k as PlyrFullscreenAdapter};
