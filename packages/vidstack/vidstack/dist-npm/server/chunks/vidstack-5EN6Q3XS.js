import{b as g}from"./vidstack-VSIJQOVT.js";import{F as d,K as p,M as c,S as i,T as h,U as m,i as l,x as a}from"./vidstack-SHDDQIF4.js";var f=p();function u(){return c(f)}var y=class extends h{static props={src:null,alt:null,crossOrigin:null};static state=new m({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#t;onSetup(){this.#t=u(),this.#s(),this.#o(),this.#a(),this.#r()}onAttach(t){t.style.setProperty("pointer-events","none"),i(this.#p.bind(this)),i(this.#s.bind(this)),i(this.#o.bind(this)),i(this.#a.bind(this)),i(this.#r.bind(this));let{started:e}=this.#t.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.#d.bind(this),"data-error":this.#e.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){i(this.#l.bind(this)),i(this.#c.bind(this))}#e(){let{error:t}=this.$state;return!l(t())}#l(){let{canLoadPoster:t,poster:e}=this.#t.$state;!t()&&e()&&g(e(),"preconnect")}#r(){let{src:t}=this.$props,{poster:e,nativeControls:r}=this.#t.$state;this.el&&d(this.el,"display",r()?"none":null),this.$state.hidden.set(this.#e()||!(t()||e())||r())}#d(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}#p(){let t=this.$state.img();t&&(a(t,"load",this.#n.bind(this)),a(t,"error",this.#h.bind(this)),t.complete&&this.#n())}#i="";#s(){let{poster:t}=this.#t.$props,{canLoadPoster:e,providedPoster:r,inferredPoster:o}=this.#t.$state,s=this.$props.src()||"",n=s||t()||o();this.#i===r()&&r.set(s),this.$state.src.set(e()&&n.length?n:null),this.#i=s}#o(){let{src:t}=this.$props,{alt:e}=this.$state,{poster:r}=this.#t.$state;e.set(t()||r()?this.$props.alt():null)}#a(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:r,poster:o}=this.#t.$state,s=t()!==null?t():r();e.set(/ytimg\.com|vimeo/.test(o()||"")?null:s===!0?"anonymous":s)}#c(){let{loading:t,error:e}=this.$state,{canLoadPoster:r,poster:o}=this.#t.$state;t.set(r()&&!!o()),e.set(null)}#n(){let{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}#h(t){let{loading:e,error:r}=this.$state;e.set(!1),r.set(t)}};export{f as a,u as b,y as c};
