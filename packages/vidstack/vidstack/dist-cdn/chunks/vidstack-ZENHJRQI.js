import{g as R,h as Xe}from"./vidstack-26BNP4EZ.js";import{b as Ce,c as g,d as D,e as Ge,f as It,g as Ot,h as O,i as Ke,j as xt,k as We,l as Ue,m as Qe,n as je,o as ze,t as it}from"./vidstack-2VHLSK4R.js";import{a as Ne,b as p,e as h}from"./vidstack-5WSKX3LK.js";import{b as q}from"./vidstack-IMNMJXWE.js";import{a as H,b as qe,c as ye}from"./vidstack-KCALJS55.js";import{c as at}from"./vidstack-YP5YT6OR.js";import{c as _e}from"./vidstack-KPDKTTLZ.js";import{d as Fe}from"./vidstack-DHW3MMHQ.js";import{B as f,C as Me,E as b,F as Dt,G as Be,H as a,I as F,J as V,K as x,L as $,P as k,U as u,V as ot,W as st,Y as et,a as P,c as Lt,ca as nt,f as M,i as z,l as De,m as X,n as L,q as tt,t as C,x as Ie,y as Oe}from"./vidstack-BQB2M2TQ.js";var Bt=class extends k{#t;constructor(t){super(),this.#t=t}onAttach(t){let{$props:e,ariaKeys:i}=h(),r=t.getAttribute("aria-keyshortcuts");if(r){i[this.#t]=r,M(()=>{delete i[this.#t]});return}let s=e.keyShortcuts()[this.#t];if(s){let n=tt(s)?s.join(" "):L(s)?s:s?.keys;t.setAttribute("aria-keyshortcuts",tt(n)?n.join(" "):n)}}};var Ee=b(!1);C(document,"pointerdown",()=>{Ee.set(!1)}),C(document,"keydown",o=>{o.metaKey||o.altKey||o.ctrlKey||Ee.set(!0)});var I=class extends k{#t=b(!1);onConnect(t){a(()=>{if(!Ee()){this.#t.set(!1),Nt(t,!1),this.listen("pointerenter",this.#r.bind(this)),this.listen("pointerleave",this.#o.bind(this));return}let e=document.activeElement===t;this.#t.set(e),Nt(t,e),this.listen("focus",this.#e.bind(this)),this.listen("blur",this.#i.bind(this))})}focused(){return this.#t()}#e(){this.#t.set(!0),Nt(this.el,!0)}#i(){this.#t.set(!1),Nt(this.el,!1)}#r(){Ye(this.el,!0)}#o(){Ye(this.el,!1)}};function Nt(o,t){f(o,"data-focus",t),f(o,"data-hocus",t)}function Ye(o,t){f(o,"data-hocus",t),f(o,"data-hover",t)}var w=class extends k{static props={disabled:!1};#t;constructor(t){super(),this.#t=t,new I,t.keyShortcut&&new Bt(t.keyShortcut)}onSetup(){let{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.#t.isPresssed,"aria-pressed":this.#e.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){g(t,"tabindex","0"),g(t,"role","button"),g(t,"type","button")}onConnect(t){O(t,this.#r.bind(this));for(let e of["click","touchstart"])this.listen(e,this.#o.bind(this),{passive:!0})}#e(){return et(this.#t.isPresssed())}#i(t){Be(this.#t.isPresssed)&&this.#t.isPresssed.set(e=>!e)}#r(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.#t.onPress??this.#i).call(this,t)}#o(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}};var Ft=class extends u{static props=w.props;#t;constructor(){super(),new w({isPresssed:this.#i.bind(this),onPress:this.#e.bind(this)})}onSetup(){this.#t=h();let{canAirPlay:t,isAirPlayConnected:e}=this.#t.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.#r.bind(this),"aria-hidden":R(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),D(t,this.#o.bind(this))}#e(t){this.#t.remote.requestAirPlay(t)}#i(){let{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()!=="disconnected"}#r(){let{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()}#o(){let{remotePlaybackState:t}=this.#t.$state;return`AirPlay ${t()}`}};var Je=class extends p(HTMLElement,Ft){static tagName="media-airplay-button"};var _t=class extends u{static props=w.props;#t;constructor(){super(),new w({isPresssed:this.#i.bind(this),keyShortcut:"toggleCaptions",onPress:this.#e.bind(this)})}onSetup(){this.#t=h(),this.setAttributes({"data-active":this.#i.bind(this),"data-supported":()=>!this.#r(),"aria-hidden":R(this.#r.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),D(t,"Captions")}#e(t){this.#t.remote.toggleCaptions(t)}#i(){let{textTrack:t}=this.#t.$state,e=t();return!!e&&at(e)}#r(){let{hasCaptions:t}=this.#t.$state;return!t()}};var Ze=class extends p(HTMLElement,_t){static tagName="media-caption-button"};var qt=class extends u{static props={...w.props,target:"prefer-media"};#t;constructor(){super(),new w({isPresssed:this.#i.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#e.bind(this)})}onSetup(){this.#t=h();let{fullscreen:t}=this.#t.$state,e=this.#r.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":R(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),D(t,"Fullscreen")}#e(t){let e=this.#t.remote,i=this.$props.target();this.#i()?e.exitFullscreen(i,t):e.enterFullscreen(i,t)}#i(){let{fullscreen:t}=this.#t.$state;return t()}#r(){let{canFullscreen:t}=this.#t.$state;return t()}};var ti=class extends p(HTMLElement,qt){static tagName="media-fullscreen-button"};var Gt=class extends u{static props={disabled:!1};#t;constructor(){super(),new I}onSetup(){this.#t=h();let{disabled:t}=this.$props,{live:e,liveEdge:i}=this.#t.$state,r=()=>!e();this.setAttributes({"data-edge":i,"data-hidden":r,"aria-disabled":R(()=>t()||i()),"aria-hidden":R(r)})}onAttach(t){g(t,"tabindex","0"),g(t,"role","button"),g(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){O(t,this.#e.bind(this))}#e(t){let{disabled:e}=this.$props,{liveEdge:i}=this.#t.$state;e()||i()||this.#t.remote.seekToLiveEdge(t)}};var ei=class extends p(HTMLElement,Gt){static tagName="media-live-button"};var Kt=class extends u{static props=w.props;#t;constructor(){super(),new w({isPresssed:this.#i.bind(this),keyShortcut:"toggleMuted",onPress:this.#e.bind(this)})}onSetup(){this.#t=h(),this.setAttributes({"data-muted":this.#i.bind(this),"data-state":this.#r.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),D(t,"Mute")}#e(t){let e=this.#t.remote;this.#i()?e.unmute(t):e.mute(t)}#i(){let{muted:t,volume:e}=this.#t.$state;return t()||e()===0}#r(){let{muted:t,volume:e}=this.#t.$state,i=e();if(t()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}};var ii=class extends p(HTMLElement,Kt){static tagName="media-mute-button"};var Wt=class extends u{static props=w.props;#t;constructor(){super(),new w({isPresssed:this.#i.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#e.bind(this)})}onSetup(){this.#t=h();let{pictureInPicture:t}=this.#t.$state,e=this.#r.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":R(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),D(t,"PiP")}#e(t){let e=this.#t.remote;this.#i()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}#i(){let{pictureInPicture:t}=this.#t.$state;return t()}#r(){let{canPictureInPicture:t}=this.#t.$state;return t()}};var ri=class extends p(HTMLElement,Wt){static tagName="media-pip-button"};var Ut=class extends u{static props=w.props;#t;constructor(){super(),new w({isPresssed:this.#i.bind(this),keyShortcut:"togglePaused",onPress:this.#e.bind(this)})}onSetup(){this.#t=h();let{paused:t,ended:e}=this.#t.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),D(t,"Play")}#e(t){let e=this.#t.remote;this.#i()?e.pause(t):e.play(t)}#i(){let{paused:t}=this.#t.$state;return!t()}};var oi=class extends p(HTMLElement,Ut){static tagName="media-play-button"};var Qt=class extends u{static props={disabled:!1,seconds:30};#t;constructor(){super(),new I}onSetup(){this.#t=h();let{seeking:t}=this.#t.$state,{seconds:e}=this.$props,i=this.#e.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":i,"aria-hidden":R(()=>!i())})}onAttach(t){g(t,"tabindex","0"),g(t,"role","button"),g(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),D(t,this.#i.bind(this))}onConnect(t){O(t,this.#r.bind(this))}#e(){let{canSeek:t}=this.#t.$state;return t()}#i(){let{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}#r(t){let{seconds:e,disabled:i}=this.$props;if(i())return;let{currentTime:r}=this.#t.$state,s=r()+e();this.#t.remote.seek(s,t)}};var si=class extends p(HTMLElement,Qt){static tagName="media-seek-button"};var E=F();var ni=F();var G=class extends k{#t=new Set;#e=b("");#i=null;onValueChange;get values(){return Array.from(this.#t).map(t=>t.value())}get value(){return this.#e()}set value(t){this.#s(t)}onSetup(){V(ni,{add:this.#r.bind(this),remove:this.#o.bind(this)})}onAttach(t){$(E)||g(t,"role","radiogroup"),this.setAttributes({value:this.#e})}onDestroy(){this.#t.clear()}#r(t){this.#t.has(t)||(this.#t.add(t),t.onCheck=this.#n,t.check(t.value()===this.#e()))}#o(t){t.onCheck=null,this.#t.delete(t)}#n=this.#s.bind(this);#s(t,e){let i=P(this.#e);if(!t||t===i)return;let r=this.#a(i),s=this.#a(t);r?.check(!1,e),s?.check(!0,e),this.#e.set(t),this.onValueChange?.(t,e)}#a(t){for(let e of this.#t)if(t===P(e.value))return e;return null}};var jt=class extends u{static props={emptyLabel:"Default"};#t;#e;#i;get value(){return this.#i.value}get disabled(){let{audioTracks:t}=this.#e.$state;return t().length<=1}constructor(){super(),this.#i=new G,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=h(),$(E)&&(this.#t=x(E))}onConnect(t){a(this.#r.bind(this)),a(this.#n.bind(this)),a(this.#o.bind(this))}getOptions(){let{audioTracks:t}=this.#e.$state;return t().map(e=>({track:e,label:e.label,value:e.label.toLowerCase()}))}#r(){this.#i.value=this.#s()}#o(){let{emptyLabel:t}=this.$props,{audioTrack:e}=this.#e.$state,i=e();this.#t?.hint.set(i?.label??t())}#n(){this.#t?.disable(this.disabled)}#s(){let{audioTrack:t}=this.#e.$state,e=t();return e?e.label.toLowerCase():""}#a(t,e){if(this.disabled)return;let i=this.#e.audioTracks.toArray().findIndex(r=>r.label.toLowerCase()===t);if(i>=0){let r=this.#e.audioTracks[i];this.#e.remote.changeAudioTrack(i,e),this.dispatch("change",{detail:r,trigger:e})}}};function Y(o,t){xt(()=>{if(!o.connectScope)return;let e=o.querySelector("template");e&&a(()=>{let i=o.getOptions();We(e,i.length,(r,s)=>{let{label:n,value:l}=i[s],d=r.querySelector('[data-part="label"]');r.setAttribute("value",l),d&&(L(n)?d.textContent=n:a(()=>{d.textContent=n()})),t?.(r,i[s],s)})})})}var ai=class extends p(HTMLElement,jt){static tagName="media-audio-radio-group";onConnect(){Y(this)}};var zt=class extends u{static props={offLabel:"Off"};#t;#e;#i;get value(){return this.#i.value}get disabled(){let{hasCaptions:t}=this.#t.$state;return!t()}constructor(){super(),this.#i=new G,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=h(),$(E)&&(this.#e=x(E))}onConnect(t){super.onConnect?.(t),a(this.#r.bind(this)),a(this.#n.bind(this)),a(this.#o.bind(this))}getOptions(){let{offLabel:t}=this.$props,{textTracks:e}=this.#t.$state;return[{value:"off",label:t},...e().filter(at).map(i=>({track:i,label:i.label,value:this.#l(i)}))]}#r(){this.#i.value=this.#s()}#o(){let{offLabel:t}=this.$props,{textTrack:e}=this.#t.$state,i=e();this.#e?.hint.set(i&&at(i)&&i.mode==="showing"?i.label:t())}#n(){this.#e?.disable(this.disabled)}#s(){let{textTrack:t}=this.#t.$state,e=t();return e&&at(e)&&e.mode==="showing"?this.#l(e):"off"}#a(t,e){if(this.disabled)return;if(t==="off"){let r=this.#t.textTracks.selected;if(r){let s=this.#t.textTracks.indexOf(r);this.#t.remote.changeTextTrackMode(s,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}let i=this.#t.textTracks.toArray().findIndex(r=>this.#l(r)===t);if(i>=0){let r=this.#t.textTracks[i];this.#t.remote.changeTextTrackMode(i,"showing",e),this.dispatch("change",{detail:r,trigger:e})}}#l(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}};var li=class extends p(HTMLElement,zt){static tagName="media-captions-radio-group";onConnect(){Y(this)}};var lt=class extends u{static props={disabled:!1};#t;#e=b(null);get expanded(){return this.#t?.expanded()??!1}constructor(){super(),new I}onSetup(){this.#t=x(E)}onAttach(t){this.#t.attachMenuButton(this),a(this.#i.bind(this)),g(t,"type","button")}onConnect(t){a(this.#r.bind(this)),this.#o();let e=new MutationObserver(this.#o.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),M(()=>e.disconnect()),O(t,i=>{this.dispatch("select",{trigger:i})})}#i(){this.#t.disableMenuButton(this.$props.disabled())}#r(){let t=this.#e();t&&a(()=>{let e=this.#t.hint();e&&(t.textContent=e)})}#o(){let t=this.el?.querySelector('[data-part="hint"]');this.#e.set(t??null)}};var di=class extends p(HTMLElement,lt){static tagName="media-menu-button"};var Xt=class extends k{#t;constructor(t){super(),this.#t=t,a(this.#e.bind(this))}onDestroy(){this.#o?.(),this.#o=null}#e(){let t=this.#t.trigger();if(!t){this.hide();return}let e=this.show.bind(this),i=this.hide.bind(this);this.#t.listen(t,e,i)}#i=-1;#r=-1;#o=null;show(t){this.#n(),window.cancelAnimationFrame(this.#r),this.#r=-1,this.#o?.(),this.#o=null,this.#i=window.setTimeout(()=>{this.#i=-1;let e=this.#t.content();e&&e.style.removeProperty("display"),P(()=>this.#t.onChange(!0,t))},this.#t.showDelay?.()??0)}hide(t){this.#n(),P(()=>this.#t.onChange(!1,t)),this.#r=requestAnimationFrame(()=>{this.#n(),this.#r=-1;let e=this.#t.content();if(e){let i=()=>{e.style.display="none",this.#o=null};if(ze(e)){this.#o?.();let s=C(e,"animationend",i,{once:!0});this.#o=s}else i()}})}#n(){window.clearTimeout(this.#i),this.#i=-1}};var dt=F(),rt=F();var ui=o=>typeof o=="object"&&o!=null&&o.nodeType===1,hi=(o,t)=>(!t||o!=="hidden")&&o!=="visible"&&o!=="clip",Te=(o,t)=>{if(o.clientHeight<o.scrollHeight||o.clientWidth<o.scrollWidth){let e=getComputedStyle(o,null);return hi(e.overflowY,t)||hi(e.overflowX,t)||(i=>{let r=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(o)}return!1},Yt=(o,t,e,i,r,s,n,l)=>s<o&&n>t||s>o&&n<t?0:s<=o&&l<=e||n>=t&&l>=e?s-o-i:n>t&&l<e||s<o&&l>e?n-t+r:0,Ai=o=>{let t=o.parentElement;return t??(o.getRootNode().host||null)},pi=(o,t)=>{var e,i,r,s;if(typeof document>"u")return[];let{scrollMode:n,block:l,inline:d,boundary:c,skipOverflowHiddenElements:m}=t,T=typeof c=="function"?c:Z=>Z!==c;if(!ui(o))throw new TypeError("Invalid target");let y=document.scrollingElement||document.documentElement,A=[],S=o;for(;ui(S)&&T(S);){if(S=Ai(S),S===y){A.push(S);break}S!=null&&S===document.body&&Te(S)&&!Te(document.documentElement)||S!=null&&Te(S,m)&&A.push(S)}let K=(i=(e=window.visualViewport)==null?void 0:e.width)!=null?i:innerWidth,ct=(s=(r=window.visualViewport)==null?void 0:r.height)!=null?s:innerHeight,{scrollX:ft,scrollY:gt}=window,{height:bt,width:vt,top:Mt,right:ce,bottom:fe,left:yt}=o.getBoundingClientRect(),{top:Re,right:Ae,bottom:He,left:Ve}=(Z=>{let v=window.getComputedStyle(Z);return{top:parseFloat(v.scrollMarginTop)||0,right:parseFloat(v.scrollMarginRight)||0,bottom:parseFloat(v.scrollMarginBottom)||0,left:parseFloat(v.scrollMarginLeft)||0}})(o),B=l==="start"||l==="nearest"?Mt-Re:l==="end"?fe+He:Mt+bt/2-Re+He,N=d==="center"?yt+vt/2-Ve+Ae:d==="end"?ce+Ae:yt-Ve,ge=[];for(let Z=0;Z<A.length;Z++){let v=A[Z],{height:Ct,width:Et,top:Tt,right:be,bottom:ve,left:Pt}=v.getBoundingClientRect();if(n==="if-needed"&&Mt>=0&&yt>=0&&fe<=ct&&ce<=K&&Mt>=Tt&&fe<=ve&&yt>=Pt&&ce<=be)return ge;let wt=getComputedStyle(v),$t=parseInt(wt.borderLeftWidth,10),Rt=parseInt(wt.borderTopWidth,10),At=parseInt(wt.borderRightWidth,10),Ht=parseInt(wt.borderBottomWidth,10),Q=0,j=0,Vt="offsetWidth"in v?v.offsetWidth-v.clientWidth-$t-At:0,kt="offsetHeight"in v?v.offsetHeight-v.clientHeight-Rt-Ht:0,xe="offsetWidth"in v?v.offsetWidth===0?0:Et/v.offsetWidth:0,Se="offsetHeight"in v?v.offsetHeight===0?0:Ct/v.offsetHeight:0;if(y===v)Q=l==="start"?B:l==="end"?B-ct:l==="nearest"?Yt(gt,gt+ct,ct,Rt,Ht,gt+B,gt+B+bt,bt):B-ct/2,j=d==="start"?N:d==="center"?N-K/2:d==="end"?N-K:Yt(ft,ft+K,K,$t,At,ft+N,ft+N+vt,vt),Q=Math.max(0,Q+gt),j=Math.max(0,j+ft);else{Q=l==="start"?B-Tt-Rt:l==="end"?B-ve+Ht+kt:l==="nearest"?Yt(Tt,ve,Ct,Rt,Ht+kt,B,B+bt,bt):B-(Tt+Ct/2)+kt/2,j=d==="start"?N-Pt-$t:d==="center"?N-(Pt+Et/2)+Vt/2:d==="end"?N-be+At+Vt:Yt(Pt,be,Et,$t,At+Vt,N,N+vt,vt);let{scrollLeft:ke,scrollTop:Le}=v;Q=Se===0?0:Math.max(0,Math.min(Le+Q/Se,v.scrollHeight-Ct/Se+kt)),j=xe===0?0:Math.max(0,Math.min(ke+j/xe,v.scrollWidth-Et/xe+Vt)),B+=Le-Q,N+=ke-j}ge.push({el:v,top:Q,left:j})}return ge};function Hi(o,t){let e=pi(o,t);for(let{el:i,top:r,left:s}of e)i.scroll({top:r,left:s,behavior:t.behavior})}function mi(o,t={}){Hi(o,{scrollMode:"if-needed",block:"center",inline:"center",...t})}var Vi=["a[href]","[tabindex]","input","select","button"].map(o=>`${o}:not([aria-hidden='true'])`).join(","),ki=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]),Jt=class{#t=-1;#e=null;#i=[];#r;get items(){return this.#i}constructor(t){this.#r=t}attachMenu(t){C(t,"focus",this.#s.bind(this)),this.#e=t,M(()=>{this.#e=null})}listen(){this.#e&&(this.update(),C(this.#e,"keyup",this.#l.bind(this)),C(this.#e,"keydown",this.#u.bind(this)),M(()=>{this.#t=-1,this.#i=[]}))}update(){this.#t=0,this.#i=this.#h()}scroll(t=this.#n()){let e=this.#i[t];e&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{mi(e,{behavior:"smooth",boundary:i=>!i.hasAttribute("data-root")})})})}focusActive(t=!0){let e=this.#n();this.#o(e>=0?e:0,t)}#o(t,e=!0){this.#t=t,this.#i[t]?(this.#i[t].focus({preventScroll:!0}),e&&this.scroll(t)):this.#e?.focus({preventScroll:!0})}#n(){return this.#i.findIndex(t=>document.activeElement===t||t.getAttribute("role")==="menuitemradio"&&t.getAttribute("aria-checked")==="true")}#s(){this.#t>=0||(this.update(),this.focusActive())}#a(t){let e=t.target;if(Oe(t)&&e instanceof Element){let i=e.getAttribute("role");return!/a|input|select|button/.test(e.localName)&&!i}return ki.has(t.key)}#l(t){this.#a(t)&&(t.stopPropagation(),t.preventDefault())}#u(t){if(this.#a(t))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.#r.closeMenu(t);break;case"Tab":this.#o(this.#d(t.shiftKey?-1:1));break;case"ArrowUp":this.#o(this.#d(-1));break;case"ArrowDown":this.#o(this.#d(1));break;case"Home":case"PageUp":this.#o(0);break;case"End":case"PageDown":this.#o(this.#i.length-1);break}}#d(t){let e=this.#t;do e=(e+t+this.#i.length)%this.#i.length;while(this.#i[e]?.offsetParent===null);return e}#h(){if(!this.#e)return[];let t=this.#e.querySelectorAll(Vi),e=[],i=r=>r.getAttribute("role")==="menu";for(let r of t)it(r)&&r.offsetParent!==null&&Ot(this.#e,r,i)&&e.push(r);return e}};var Li=0,Zt=class extends u{static props={showDelay:0};#t;#e;#i;#r=b(!1);#o=b(!1);#n=b(null);#s=b(null);#a;#l=new Set;#u=null;#d;#h;#p=!1;#c=b(!1);#f=new Set;get triggerElement(){return this.#n()}get contentElement(){return this.#s()}get isSubmenu(){return!!this.#a}constructor(){super();let{showDelay:t}=this.$props;this.#d=new Xt({trigger:this.#n,content:this.#s,showDelay:t,listen:(e,i,r)=>{O(e,n=>{this.#r()?r(n):i(n)});let s=this.#k();s&&O(s,n=>{n.stopPropagation(),r(n)})},onChange:this.#P.bind(this)})}onSetup(){this.#t=h();let t=++Li;this.#e=`media-menu-${t}`,this.#i=`media-menu-button-${t}`,this.#h=new Jt({closeMenu:this.close.bind(this)}),$(E)&&(this.#a=x(E)),this.#S(),this.setAttributes({"data-open":this.#r,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#x.bind(this)}),V(E,{button:this.#n,content:this.#s,expanded:this.#r,hint:b(""),submenu:!!this.#a,disable:this.#w.bind(this),attachMenuButton:this.#E.bind(this),attachMenuItems:this.#T.bind(this),attachObserver:this.#g.bind(this),disableMenuButton:this.#v.bind(this),addSubmenu:this.#D.bind(this),onTransitionEvent:e=>{this.#f.add(e),M(()=>{this.#f.delete(e)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){a(this.#C.bind(this)),this.isSubmenu&&this.#a?.addSubmenu(this)}onDestroy(){this.#n.set(null),this.#s.set(null),this.#u=null,this.#f.clear()}#S(){let t=-1,e=$(rt)?x(rt):null;V(rt,{onDragStart:()=>{e?.onDragStart?.(),window.clearTimeout(t),t=-1,this.#p=!0},onDragEnd:()=>{e?.onDragEnd?.(),t=window.setTimeout(()=>{this.#p=!1,t=-1},300)}})}#C(){let t=this.#y();this.isSubmenu||this.#H(),this.#b(t),t&&(a(()=>{let{height:e}=this.#t.$state,i=this.#s();i&&Me(i,"--player-height",e()+"px")}),this.#h.listen(),this.listen("pointerup",this.#$.bind(this)),C(window,"pointerup",this.#R.bind(this)))}#E(t){let e=t.el,i=this.isSubmenu,r=R(this.#x.bind(this));g(e,"tabindex",i?"-1":"0"),g(e,"role",i?"menuitem":"button"),f(e,"id",this.#i),f(e,"aria-haspopup","menu"),f(e,"aria-expanded","false"),f(e,"data-root",!this.isSubmenu),f(e,"data-submenu",this.isSubmenu),a(()=>{f(e,"data-open",this.#r()),f(e,"aria-disabled",r())}),this.#n.set(e),M(()=>{this.#n.set(null)})}#T(t){let e=t.el;e.style.setProperty("display","none"),f(e,"id",this.#e),g(e,"role","menu"),g(e,"tabindex","-1"),f(e,"data-root",!this.isSubmenu),f(e,"data-submenu",this.isSubmenu),this.#s.set(e),M(()=>this.#s.set(null)),a(()=>f(e,"data-open",this.#r())),this.#h.attachMenu(e),this.#b(!1);let r=this.#q.bind(this);this.isSubmenu?this.#a?.onTransitionEvent(r):(t.listen("transitionstart",r),t.listen("transitionend",r),t.listen("animationend",this.#H),t.listen("vds-menu-resize",this.#H))}#g(t){this.#u=t}#b(t){let e=P(this.#s);e&&f(e,"aria-hidden",et(!t))}#v(t){this.#c.set(t)}#m=!1;#P(t,e){if(this.#m=Ie(e),e?.stopPropagation(),this.#r()===t)return;if(this.#x()){t&&this.#d.hide(e);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let i=this.#n(),r=this.#s();if(i&&(f(i,"aria-controls",t&&this.#e),f(i,"aria-expanded",et(t))),r&&f(r,"aria-labelledby",t&&this.#i),this.#r.set(t),this.#L(e),Lt(),this.#m){t?r?.focus():i?.focus();for(let s of[this.el,r])s&&s.setAttribute("data-keyboard","")}else for(let s of[this.el,r])s&&s.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:e}),t)!this.isSubmenu&&this.#t.activeMenu!==this&&(this.#t.activeMenu?.close(e),this.#t.activeMenu=this),this.#u?.onOpen?.(e);else{if(this.isSubmenu)for(let s of this.#l)s.close(e);else this.#t.activeMenu=null;this.#u?.onClose?.(e)}t&&requestAnimationFrame(this.#M.bind(this))}#M(){this.#V||this.#A||(this.#h.update(),requestAnimationFrame(()=>{this.#m?this.#h.focusActive():this.#h.scroll()}))}#y(){return!this.#x()&&this.#r()}#x(){return this.#o()||this.#c()}#w(t){this.#o.set(t)}#$(t){let e=this.#s();this.#p||e&&Ce(e,t)||t.stopPropagation()}#R(t){let e=this.#s();this.#p||e&&Ce(e,t)||this.close(t)}#k(){let t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&Ot(this.el,t,e=>e.getAttribute("role")==="menu")?t:null}#L(t){this.isSubmenu||(this.#r()?this.#t.remote.pauseControls(t):this.#t.remote.resumeControls(t))}#D(t){this.#l.add(t),C(t,"open",this.#B),C(t,"close",this.#F),M(this.#I)}#I=this.#O.bind(this);#O(t){this.#l.delete(t)}#A=!1;#B=this.#N.bind(this);#N(t){this.#A=!0;let e=this.#s();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(let i of this.#l)if(i!==t.target)for(let r of[i.el,i.triggerElement])r?.setAttribute("aria-hidden","true");if(e){let i=t.target.el;for(let r of e.children)r.contains(i)?r.setAttribute("data-open",""):r!==i&&r.setAttribute("data-hidden","")}}#F=this.#_.bind(this);#_(t){this.#A=!1;let e=this.#s();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(let i of this.#l)for(let r of[i.el,i.triggerElement])r?.setAttribute("aria-hidden","false");if(e)for(let i of e.children)i.removeAttribute("data-open"),i.removeAttribute("data-hidden")}#H=nt(()=>{let t=P(this.#s);if(!t)return;let e=0,i=getComputedStyle(t),r=[...t.children];for(let s of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(i[s])||0;for(let s of r)if(it(s)&&s.style.display==="contents")r.push(...s.children);else if(s.nodeType===3)e+=parseFloat(getComputedStyle(s).fontSize);else if(it(s)){if(!Ge(s))continue;let n=getComputedStyle(s);e+=s.offsetHeight+(parseFloat(n.marginTop)||0)+(parseFloat(n.marginBottom)||0)}Me(t,"--menu-height",e+"px")});#V=!1;#q(t){let e=this.#s();e&&t.propertyName==="height"&&(this.#V=t.type==="transitionstart",f(e,"data-transition",this.#V?"height":null),this.#r()&&this.#M());for(let i of this.#f)i(t)}open(t){P(this.#r)||(this.#d.show(t),Lt())}close(t){P(this.#r)&&(this.#d.hide(t),Lt())}};var ci=class extends p(HTMLElement,Zt){static tagName="media-menu"};var te=class extends lt{};var fi=class extends p(HTMLElement,te){static tagName="media-menu-item"};var gi=class extends u{static props={container:null,disabled:!1};#t=null;#e;onSetup(){this.#e=h(),V(St,{attach:this.#i.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.#t?.remove(),this.#t=null}#i(t){this.#o(!1),this.#t=t,xt(()=>{xt(()=>{this.connectScope&&a(this.#r.bind(this))})})}#r(){let{fullscreen:t}=this.#e.$state,{disabled:e}=this.$props;this.#o(e()==="fullscreen"?!t():!e())}#o(t){if(!this.#t)return;let e=this.#n(this.$props.container());if(!e)return;let i=this.#t.parentElement===e;f(this.#t,"data-portal",t),t?i||(this.#t.remove(),e.append(this.#t)):i&&this.#t.parentElement===e&&(this.#t.remove(),this.el?.append(this.#t))}#n(t){return it(t)?t:t?document.querySelector(t):document.body}},St=F();var ee=class extends u{static props={placement:null,offset:0,alignOffset:0};#t;constructor(){super(),new I;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.#t=x(E),this.#t.attachMenuItems(this),$(St)){let e=x(St);e&&(V(St,null),e.attach(t),M(()=>e.attach(null)))}}onConnect(t){a(this.#e.bind(this))}#e(){if(!this.el)return;let t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:e,alignOffset:i}=this.$props;return je(this.el,this.#i(),t,{offsetVarName:"media-menu",xOffset:i(),yOffset:e()})}else this.el.removeAttribute("style"),this.el.style.display="none"}#i(){return this.#t.button()}};var bi=class extends p(HTMLElement,ee){static tagName="media-menu-items"};var ie=class extends u{static props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"};#t;#e;#i;get value(){return this.#i.value}get disabled(){let{canSetQuality:t,qualities:e}=this.#t.$state;return!t()||e().length<=1}#r=Dt(()=>{let{sort:t}=this.$props,{qualities:e}=this.#t.$state;return Xe(e(),t()==="descending")});constructor(){super(),this.#i=new G,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=h(),$(E)&&(this.#e=x(E))}onConnect(t){a(this.#o.bind(this)),a(this.#s.bind(this)),a(this.#n.bind(this))}getOptions(){let{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.#r().map(i=>{let r=i.bitrate&&i.bitrate>=0?`${H(i.bitrate/1e6,2)} Mbps`:null;return{quality:i,label:i.height+"p",value:this.#u(i),bitrate:()=>e()?null:r}})]}#o(){this.#i.value=this.#l()}#n(){let{autoLabel:t}=this.$props,{autoQuality:e,quality:i}=this.#t.$state,r=i()?i().height+"p":"";this.#e?.hint.set(e()?t()+(r?` (${r})`:""):r)}#s(){this.#e?.disable(this.disabled)}#a(t,e){if(this.disabled)return;if(t==="auto"){this.#t.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}let{qualities:i}=this.#t.$state,r=P(i).findIndex(s=>this.#u(s)===t);if(r>=0){let s=P(i)[r];this.#t.remote.changeQuality(r,e),this.dispatch("change",{detail:s,trigger:e})}}#l(){let{quality:t,autoQuality:e}=this.#t.$state;if(e())return"auto";let i=t();return i?this.#u(i):"auto"}#u(t){return t.height+"_"+t.bitrate}};var vi=class extends p(HTMLElement,ie){static tagName="media-quality-radio-group";onConnect(){Y(this,(t,e)=>{let i=e.bitrate,r=t.querySelector('[data-part="bitrate"]');i&&r&&a(()=>{r.textContent=i()||""})})}};var Di=[.25,.5,.75,1,1.25,1.5,1.75,2],re=class extends u{static props={normalLabel:"Normal",rates:Di};#t;#e;#i;get value(){return this.#i.value}get disabled(){let{rates:t}=this.$props,{canSetPlaybackRate:e}=this.#t.$state;return!e()||t().length===0}constructor(){super(),this.#i=new G,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=h(),$(E)&&(this.#e=x(E))}onConnect(t){a(this.#r.bind(this)),a(this.#o.bind(this)),a(this.#n.bind(this))}getOptions(){let{rates:t,normalLabel:e}=this.$props;return t().map(i=>({label:i===1?e:i+"\xD7",value:i.toString()}))}#r(){this.#i.value=this.#s()}#o(){let{normalLabel:t}=this.$props,{playbackRate:e}=this.#t.$state,i=e();this.#e?.hint.set(i===1?t():i+"\xD7")}#n(){this.#e?.disable(this.disabled)}#s(){let{playbackRate:t}=this.#t.$state;return t().toString()}#a(t,e){if(this.disabled)return;let i=+t;this.#t.remote.changePlaybackRate(i,e),this.dispatch("change",{detail:i,trigger:e})}};var xi=class extends p(HTMLElement,re){static tagName="media-speed-radio-group";onConnect(){Y(this)}};var ut=new ot({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Si(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Si(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Si(o,t,e){let i=t-o,r=e-o;return i>0?r/i:0}var ht=class extends k{#t;#e;constructor(t){super(),this.#t=t}onConnect(t){this.#e=new IntersectionObserver(e=>{this.#t.callback?.(e,this.#e)},this.#t),this.#e.observe(t),M(this.#i.bind(this))}#i(){this.#e?.disconnect(),this.#e=void 0}};var pt=Ii;function Ii(o,t,e){var i=null,r=null,s=e&&e.leading,n=e&&e.trailing;s==null&&(s=!0),n==null&&(n=!s),s==!0&&(n=!1);var l=function(){i&&(clearTimeout(i),i=null)},d=function(){var m=r;l(),m&&m()},c=function(){var m=s&&!i,T=this,y=arguments;if(r=function(){return o.apply(T,y)},i||(i=setTimeout(function(){if(i=null,n)return r()},t)),m)return m=!1,r()};return c.cancel=l,c.flush=d,c}function Mi(o,t,e,i){return ye(o,H(e,qe(i)),t)}function yi(o,t,e,i){let r=ye(0,e,1),s=t-o,n=s*r,l=n/i,d=i*Math.round(l);return o+d}var Pe={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1},oe=class extends k{#t;#e;#i;constructor(t,e){super(),this.#t=t,this.#e=e}onSetup(){$(rt)&&(this.#i=x(rt))}onConnect(){a(this.#u.bind(this)),a(this.#d.bind(this)),this.#t.swipeGesture&&a(this.#r.bind(this))}#r(){let{pointer:t}=this.#e.$state;if(t()!=="coarse"||!this.#t.swipeGesture()){this.#o=null;return}this.#o=this.#e.player.el?.querySelector("media-provider,[data-media-provider]"),this.#o&&(C(this.#o,"touchstart",this.#a.bind(this),{passive:!0}),C(this.#o,"touchmove",this.#l.bind(this),{passive:!1}))}#o=null;#n=null;#s=null;#a(t){this.#n=t.touches[0]}#l(t){if(z(this.#n)||Ke(t))return;let e=t.touches[0],i=e.clientX-this.#n.clientX,r=e.clientY-this.#n.clientY,s=this.$state.dragging();!s&&Math.abs(r)>5||s||(t.preventDefault(),Math.abs(i)>20&&(this.#n=e,this.#s=this.$state.value(),this.#g(this.#s,t)))}#u(){let{hidden:t}=this.$props;this.listen("focus",this.#h.bind(this)),this.listen("keydown",this.#P.bind(this)),this.listen("keyup",this.#M.bind(this)),!(t()||this.#t.isDisabled())&&(this.listen("pointerenter",this.#S.bind(this)),this.listen("pointermove",this.#C.bind(this)),this.listen("pointerleave",this.#E.bind(this)),this.listen("pointerdown",this.#T.bind(this)))}#d(){this.#t.isDisabled()||!this.$state.dragging()||(C(document,"pointerup",this.#w.bind(this),{capture:!0}),C(document,"pointermove",this.#R.bind(this)),C(document,"touchmove",this.#$.bind(this),{passive:!1}))}#h(){this.#c(this.$state.value())}#p(t,e){let{value:i,min:r,max:s,dragging:n}=this.$state,l=Math.max(r(),Math.min(t,s()));i.set(l);let d=this.createEvent("value-change",{detail:l,trigger:e});if(this.dispatch(d),this.#t.onValueChange?.(d),n()){let c=this.createEvent("drag-value-change",{detail:l,trigger:e});this.dispatch(c),this.#t.onDragValueChange?.(c)}}#c(t,e){let{pointerValue:i,dragging:r}=this.$state;i.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),r()&&this.#p(t,e)}#f(t){let e,i=this.el.getBoundingClientRect(),{min:r,max:s}=this.$state;if(this.$props.orientation()==="vertical"){let{bottom:n,height:l}=i;e=(n-t.clientY)/l}else if(this.#n&&X(this.#s)){let{width:n}=this.#o.getBoundingClientRect(),l=(t.clientX-this.#n.clientX)/n,d=s()-r(),c=d*Math.abs(l);e=(l<0?this.#s-c:this.#s+c)/d}else{let{left:n,width:l}=i;e=(t.clientX-n)/l}return Math.max(r(),Math.min(s(),this.#t.roundValue(yi(r(),s(),e,this.#t.getStep()))))}#S(t){this.$state.pointing.set(!0)}#C(t){let{dragging:e}=this.$state;e()||this.#c(this.#f(t),t)}#E(t){this.$state.pointing.set(!1)}#T(t){if(t.button!==0)return;let e=this.#f(t);this.#g(e,t),this.#c(e,t)}#g(t,e){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.#e.remote.pauseControls(e);let r=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(r),this.#t.onDragStart?.(r),this.#i?.onDragStart?.()}#b(t,e){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.#e.remote.resumeControls(e);let r=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(r),this.#t.onDragEnd?.(r),this.#n=null,this.#s=null,this.#i?.onDragEnd?.()}#v;#m=!1;#P(t){if(!Object.keys(Pe).includes(t.key))return;let{key:i}=t,r=this.#y(t);if(!z(r)){this.#c(r,t),this.#p(r,t);return}let s=this.#x(t);this.#m||(this.#m=i===this.#v,!this.$state.dragging()&&this.#m&&this.#g(s,t)),this.#c(s,t),this.#v=i}#M(t){if(!Object.keys(Pe).includes(t.key)||!z(this.#y(t)))return;let i=this.#m?this.$state.pointerValue():this.#x(t);this.#p(i,t),this.#b(i,t),this.#v="",this.#m=!1}#y(t){let e=t.key,{min:i,max:r}=this.$state;return e==="Home"||e==="PageUp"?i():e==="End"||e==="PageDown"?r():!t.metaKey&&/^[0-9]$/.test(e)?(r()-i())/10*Number(e):null}#x(t){let{key:e,shiftKey:i}=t;t.preventDefault(),t.stopPropagation();let{shiftKeyMultiplier:r}=this.$props,{min:s,max:n,value:l,pointerValue:d}=this.$state,c=this.#t.getStep(),m=this.#t.getKeyStep(),T=i?m*r():m,y=Number(Pe[e]),A=T*y,S=this.#m?d():this.#t.getValue?.()??l(),K=(S+A)/c;return Math.max(s(),Math.min(n(),Number((c*K).toFixed(3))))}#w(t){if(t.button!==0)return;t.preventDefault(),t.stopImmediatePropagation();let e=this.#f(t);this.#c(e,t),this.#b(e,t)}#$(t){t.preventDefault()}#R=pt(t=>{this.#c(this.#f(t),t)},20,{leading:!0})};var W=F(()=>({}));var _=class extends k{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#t;#e;#i=b(!0);#r=b(!0);constructor(t){super(),this.#e=t}onSetup(){this.#t=h();let t=new I;t.attach(this),this.$state.focused=t.focused.bind(t),$(W)||V(W,{default:"value"}),V(dt,{orientation:this.$props.orientation,disabled:this.#e.isDisabled,preview:b(null)}),a(this.#s.bind(this)),a(this.#a.bind(this)),a(this.#l.bind(this)),this.#d(),new oe(this.#e,this.#t).attach(this),new ht({callback:this.#o.bind(this)}).attach(this)}onAttach(t){g(t,"role","slider"),g(t,"tabindex","0"),g(t,"autocomplete","off"),a(this.#h.bind(this))}onConnect(t){M(It(t,this.#i.set)),a(this.#n.bind(this))}#o(t){this.#r.set(t[0].isIntersecting)}#n(){let{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#i()||!this.#r.bind(this))}#s(){let{dragging:t,value:e,min:i,max:r}=this.$state;P(t)||e.set(Mi(i(),r(),e(),this.#e.getStep()))}#a(){this.$state.step.set(this.#e.getStep())}#l(){if(!this.#e.isDisabled())return;let{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}#u(){return et(this.#e.isDisabled())}#d(){let{orientation:t}=this.$props,{dragging:e,active:i,pointing:r}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":r,"data-active":i,"aria-disabled":this.#u.bind(this),"aria-valuemin":this.#e.aria.valueMin??this.$state.min,"aria-valuemax":this.#e.aria.valueMax??this.$state.max,"aria-valuenow":this.#e.aria.valueNow,"aria-valuetext":this.#e.aria.valueText,"aria-orientation":t})}#h(){let{fillPercent:t,pointerPercent:e}=this.$state;this.#p(H(t(),3),H(e(),3))}#p=nt((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")})};var J=class extends u{static props={..._.props,min:0,max:100,value:0};static state=ut;constructor(){super(),new _({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#t.bind(this),valueText:this.#e.bind(this)}})}onSetup(){a(this.#i.bind(this)),a(this.#r.bind(this))}#t(){let{value:t}=this.$state;return Math.round(t())}#e(){let{value:t,max:e}=this.$state;return H(t()/e()*100,2)+"%"}#i(){let{value:t}=this.$props;this.$state.value.set(t())}#r(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}};var se=class extends u{static props={offset:0,noClamp:!1};#t;onSetup(){this.#t=x(dt);let{active:t}=st(J.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){let{preview:e}=this.#t;e.set(t),M(()=>e.set(null)),a(this.#e.bind(this));let i=new ResizeObserver(this.#e.bind(this));i.observe(t),M(()=>i.disconnect())}#e=nt(()=>{let{disabled:t,orientation:e}=this.#t;if(t())return;let i=this.el,{offset:r,noClamp:s}=this.$props;i&&Oi(i,{clamp:!s(),offset:r(),orientation:e()})})};function Oi(o,{clamp:t,offset:e,orientation:i}){let r=getComputedStyle(o),s=parseFloat(r.width),n=parseFloat(r.height),l={top:null,right:null,bottom:null,left:null};if(l[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${e}px))`,i==="horizontal"){let d=s/2;if(!t)l.left=`calc(var(--slider-pointer) - ${d}px)`;else{let c=`max(0px, calc(var(--slider-pointer) - ${d}px))`,m=`calc(100% - ${s}px)`;l.left=`min(${c}, ${m})`}}else{let d=n/2;if(!t)l.bottom=`calc(var(--slider-pointer) - ${d}px)`;else{let c=`max(${d}px, calc(var(--slider-pointer) - ${d}px))`,m=`calc(100% - ${n}px)`;l.bottom=`min(${c}, ${m})`}}Object.assign(o.style,l)}var Ci=class extends p(HTMLElement,se){static tagName="media-slider-preview"};var U=new Map,ne=new Map,Bi=void 0,ae=class o{#t;#e;#i;$images=b([]);static create(t,e){let i=h();return new o(t,e,i)}constructor(t,e,i){this.#e=t,this.#i=e,this.#t=i,a(this.#r.bind(this))}#r(){let{canLoad:t}=this.#t.$state;if(!t())return;let e=this.#e();if(e){if(L(e)&&U.has(e)){let i=U.get(e);if(U.delete(e),U.set(e,i),U.size>99){let r=U.keys().next().value;U.delete(r)}this.$images.set(U.get(e))}else if(L(e)){let i=this.#i(),r=e+"::"+i;if(!ne.has(r)){let s=new Promise(async(n,l)=>{try{let d=await fetch(e,{credentials:Fe(i)});if(d.headers.get("content-type")==="application/json"){let m=await d.json();if(tt(m))if(m[0]&&"text"in m[0])n(this.#s(m));else{for(let T=0;T<m.length;T++){let y=m[T];q(De(y),!1),q("url"in y&&L(y.url),!1),q("startTime"in y&&X(y.startTime),!1)}n(m)}else n(this.#n(m));return}import("https://cdn.vidstack.io/captions").then(async({parseResponse:m})=>{try{let{cues:T}=await m(d);n(this.#s(T))}catch(T){l(T)}})}catch(d){l(d)}}).then(n=>(U.set(r,n),n)).catch(n=>{this.#d(e,n)}).finally(()=>{L(r)&&ne.delete(r)});ne.set(r,s)}ne.get(r)?.then(s=>{this.$images.set(s||[])})}else if(tt(e))try{this.$images.set(this.#o(e))}catch(i){this.#d(e,i)}else try{this.$images.set(this.#n(e))}catch(i){this.#d(e,i)}return()=>{this.$images.set([])}}}#o(t){let e=this.#a();return t.map((i,r)=>(q(i.url&&L(i.url),!1),q("startTime"in i&&X(i.startTime),!1),{...i,url:L(i.url)?this.#l(i.url,e):i.url}))}#n(t){q(L(t.url),!1),q(tt(t.tiles)&&t.tiles?.length,!1);let e=new URL(t.url),i=[],r="tile_width"in t?t.tile_width:t.tileWidth,s="tile_height"in t?t.tile_height:t.tileHeight;for(let n of t.tiles)i.push({url:e,startTime:"start"in n?n.start:n.startTime,width:r,height:s,coords:{x:n.x,y:n.y}});return i}#s(t){for(let r=0;r<t.length;r++){let s=t[r];q("startTime"in s&&X(s.startTime),!1),q("text"in s&&L(s.text),!1)}let e=[],i=this.#a();for(let r of t){let[s,n]=r.text.split("#"),l=this.#u(n);e.push({url:this.#l(s,i),startTime:r.startTime,endTime:r.endTime,width:l?.w,height:l?.h,coords:l&&X(l.x)&&X(l.y)?{x:l.x,y:l.y}:void 0})}return e}#a(){let t=P(this.#e);return!L(t)||!/^https?:/.test(t)?location.href:t}#l(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}#u(t){if(!t)return{};let[e,i]=t.split("="),r=i?.split(","),s={};if(!e||!r)return null;for(let n=0;n<e.length;n++){let l=+r[n];isNaN(l)||(s[e[n]]=l)}return s}#d(t,e){}};var le=class extends u{static props={src:null,time:0,crossOrigin:null};static state=new ot({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#t;#e=[];onSetup(){this.media=h(),this.#t=ae.create(this.$props.src,this.$state.crossOrigin),this.#r(),this.setAttributes({"data-loading":this.#a.bind(this),"data-error":this.#l.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":R(this.$state.hidden)})}onConnect(t){a(this.#i.bind(this)),a(this.#u.bind(this)),a(this.#r.bind(this)),a(this.#o.bind(this)),a(this.#d.bind(this)),a(this.#h.bind(this))}#i(){let t=this.$state.img();t&&(C(t,"load",this.#n.bind(this)),C(t,"error",this.#s.bind(this)))}#r(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i}=this.media.$state,r=t()!==null?t():i();e.set(r===!0?"anonymous":r)}#o(){let{src:t,loading:e,error:i}=this.$state;return t()&&(e.set(!0),i.set(null)),()=>{this.#c(),e.set(!1),i.set(null)}}#n(){let{loading:t,error:e}=this.$state;this.#h(),t.set(!1),e.set(null)}#s(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}#a(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}#l(){let{error:t}=this.$state;return!z(t())}#u(){let{hidden:t}=this.$state,{duration:e}=this.media.$state,i=this.#t.$images();t.set(this.#l()||!Number.isFinite(e())||i.length===0)}getTime(){return this.$props.time()}#d(){let t=this.#t.$images();if(!t.length)return;let e=this.getTime(),{src:i,activeThumbnail:r}=this.$state,s=-1,n=null;for(let l=t.length-1;l>=0;l--){let d=t[l];if(e>=d.startTime&&(!d.endTime||e<d.endTime)){s=l;break}}t[s]&&(n=t[s]),r.set(n),i.set(n?.url.href||"")}#h(){if(!this.scope||this.$state.hidden())return;let t=this.el,e=this.$state.img(),i=this.$state.activeThumbnail();if(!e||!i||!t)return;let r=i.width??e.naturalWidth,s=i?.height??e.naturalHeight,{maxWidth:n,maxHeight:l,minWidth:d,minHeight:c,width:m,height:T}=getComputedStyle(this.el);d==="100%"&&(d=parseFloat(m)+""),c==="100%"&&(c=parseFloat(T)+"");let y=Math.max(parseInt(d)/r,parseInt(c)/s),A=Math.min(Math.max(parseInt(d),parseInt(n))/r,Math.max(parseInt(c),parseInt(l))/s),S=!isNaN(A)&&A<1?A:y>1?y:1;this.#p(t,"--thumbnail-width",`${r*S}px`),this.#p(t,"--thumbnail-height",`${s*S}px`),this.#p(e,"width",`${e.naturalWidth*S}px`),this.#p(e,"height",`${e.naturalHeight*S}px`),this.#p(e,"transform",i.coords?`translate(-${i.coords.x*S}px, -${i.coords.y*S}px)`:""),this.#p(e,"max-width","none")}#p(t,e,i){t.style.setProperty(e,i),this.#e.push(()=>t.style.removeProperty(e))}#c(){for(let t of this.#e)t();this.#e=[]}};var Ni=Ue('<img loading="eager" decoding="async" aria-hidden="true">'),de=class extends p(HTMLElement,le){static tagName="media-thumbnail";static attrs={crossOrigin:"crossorigin"};#t;#e=this.#i();onSetup(){this.#t=h(),this.$state.img.set(this.#e)}onConnect(){let{src:t,crossOrigin:e}=this.$state;this.#e.parentNode!==this&&this.prepend(this.#e),a(()=>{f(this.#e,"src",t()),f(this.#e,"crossorigin",e())})}#i(){return Qe(Ni)}};var Ei=class extends de{static tagName="media-slider-thumbnail";#t;#e;onSetup(){super.onSetup(),this.#t=h(),this.#e=st(J.state)}onConnect(){super.onConnect(),a(this.#i.bind(this))}#i(){let{duration:t,clipStartTime:e}=this.#t.$state;this.time=e()+this.#e.pointerRate()*t()}};function we(o,t){let e=String(o),i=e.length;if(i<t){let s=t-i;return`${"0".repeat(s)}${o}`}return e}function Ti(o){let t=Math.trunc(o/3600),e=Math.trunc(o%3600/60),i=Math.trunc(o%60),r=Number((o-Math.trunc(o)).toPrecision(3));return{hours:t,minutes:e,seconds:i,fraction:r}}function mt(o,{padHrs:t=null,padMins:e=null,showHrs:i=!1,showMs:r=!1}={}){let{hours:s,minutes:n,seconds:l,fraction:d}=Ti(o),c=t?we(s,2):s,m=e||z(e)&&o>=3600?we(n,2):n,T=we(l,2),y=r&&d>0?`.${String(d).replace(/^0?\./,"")}`:"",A=`${m}:${T}${y}`;return s>0||i?`${c}:${A}`:A}function $e(o){let t=[],{hours:e,minutes:i,seconds:r}=Ti(o);return e>0&&t.push(`${e} hour`),i>0&&t.push(`${i} min`),(r>0||t.length===0)&&t.push(`${r} sec`),t.join(" ")}var ue=class extends u{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#t;#e;#i;onSetup(){this.#i=st(J.state),this.#t=x(W),this.#e=Dt(this.getValueText.bind(this))}getValueText(){let{type:t,format:e,decimalPlaces:i,padHours:r,padMinutes:s,showHours:n,showMs:l}=this.$props,{value:d,pointerValue:c,min:m,max:T}=this.#i,y=e?.()??this.#t.default,A=t()==="current"?d():c();if(y==="percent"){let S=T()-m(),K=A/S*100;return(this.#t.percent??H)(K,i())+"%"}else return y==="time"?(this.#t.time??mt)(A,{padHrs:r(),padMins:s(),showHrs:n(),showMs:l()}):(this.#t.value?.(A)??A.toFixed(2))+""}};var Pi=class extends p(HTMLElement,ue){static tagName="media-slider-value";static attrs={padMinutes:{converter:Ne}};onConnect(){a(()=>{this.textContent=this.getValueText()})}};var he=class extends u{static props={..._.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=ut;#t;#e;#i=b(null);constructor(){super();let{noSwipeGesture:t}=this.$props;new _({swipeGesture:()=>!t(),getValue:this.#S.bind(this),getStep:this.#C.bind(this),getKeyStep:this.#E.bind(this),roundValue:this.#T,isDisabled:this.#g.bind(this),aria:{valueNow:this.#b.bind(this),valueText:this.#v.bind(this)},onDragStart:this.#h.bind(this),onDragValueChange:this.#p.bind(this),onDragEnd:this.#c.bind(this),onValueChange:this.#f.bind(this)})}onSetup(){this.#t=h(),V(W,{default:"time",value:this.#M.bind(this),time:this.#y.bind(this)}),this.setAttributes({"data-chapters":this.#o.bind(this)}),this.setStyles({"--slider-progress":this.#r.bind(this)}),a(this.#s.bind(this)),a(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),g(t,"aria-label","Seek")}onConnect(t){a(this.#a.bind(this)),_e(this.#t.textTracks,"chapters",this.#i.set)}#r(){let{bufferedEnd:t,duration:e}=this.#t.$state;return H(Math.min(t()/Math.max(e(),1),1)*100,3)+"%"}#o(){let{duration:t}=this.#t.$state;return this.#i()?.cues.length&&Number.isFinite(t())&&t()>0}#n(){this.#e=pt(this.#l.bind(this),this.$props.seekingRequestThrottle())}#s(){if(this.$state.hidden())return;let{value:t,dragging:e}=this.$state,i=this.#S();P(e)||(t.set(i),this.dispatch("value-change",{detail:i}))}#a(){let t=this.#t.player.el,{preview:e}=x(dt);t&&e()&&f(t,"data-preview",this.$state.active())}#l(t,e){this.#t.remote.seeking(t,e)}#u(t,e,i){this.#e.cancel();let{live:r}=this.#t.$state;if(r()&&e>=99){this.#t.remote.seekToLiveEdge(i);return}this.#t.remote.seek(t,i)}#d=!1;#h(t){let{pauseWhileDragging:e}=this.$props;if(e()){let{paused:i}=this.#t.$state;this.#d=!i(),this.#t.remote.pause(t)}}#p(t){this.#e(this.#m(t.detail),t)}#c(t){let{seeking:e}=this.#t.$state;P(e)||this.#l(this.#m(t.detail),t);let i=t.detail;this.#u(this.#m(i),i,t);let{pauseWhileDragging:r}=this.$props;r()&&this.#d&&(this.#t.remote.play(t),this.#d=!1)}#f(t){let{dragging:e}=this.$state;e()||!t.trigger||this.#c(t)}#S(){let{currentTime:t}=this.#t.$state;return this.#P(t())}#C(){let t=this.$props.step()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#E(){let t=this.$props.keyStep()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#T(t){return H(t,3)}#g(){let{disabled:t}=this.$props,{canSeek:e}=this.#t.$state;return t()||!e()}#b(){let{value:t}=this.$state;return Math.round(t())}#v(){let t=this.#m(this.$state.value()),{duration:e}=this.#t.$state;return Number.isFinite(t)?`${$e(t)} out of ${$e(e())}`:"live"}#m(t){let{duration:e}=this.#t.$state;return H(t/100*e(),5)}#P(t){let{liveEdge:e,duration:i}=this.#t.$state,r=Math.max(0,Math.min(1,e()?1:Math.min(t,i())/i()));return Number.isNaN(r)?0:Number.isFinite(r)?r*100:100}#M(t){let e=this.#m(t),{live:i,duration:r}=this.#t.$state;return Number.isFinite(e)?(i()?e-r():e).toFixed(0):"LIVE"}#y(t,e){let i=this.#m(t),{live:r,duration:s}=this.#t.$state,n=r()?i-s():i;return Number.isFinite(i)?`${n<0?"-":""}${mt(Math.abs(n),e)}`:"LIVE"}};var wi=class extends p(HTMLElement,he){static tagName="media-time-slider"};var pe=class extends u{static props={..._.props,keyStep:5,shiftKeyMultiplier:2};static state=ut;#t;onSetup(){this.#t=h();let{audioGain:t}=this.#t.$state;V(W,{default:"percent",value(e){return(e*(t()??1)).toFixed(2)},percent(e){return Math.round(e*(t()??1))}}),new _({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#o.bind(this),aria:{valueMax:this.#r.bind(this),valueNow:this.#e.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#l.bind(this)}).attach(this),a(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),g(t,"aria-label","Volume");let{canSetVolume:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":R(()=>!e())})}#e(){let{value:t}=this.$state,{audioGain:e}=this.#t.$state;return Math.round(t()*(e()??1))}#i(){let{value:t,max:e}=this.$state,{audioGain:i}=this.#t.$state;return H(t()/e()*(i()??1)*100,2)+"%"}#r(){let{audioGain:t}=this.#t.$state;return this.$state.max()*(t()??1)}#o(){let{disabled:t}=this.$props,{canSetVolume:e}=this.#t.$state;return t()||!e()}#n(){let{muted:t,volume:e}=this.#t.$state,i=t()?0:e()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#s=pt(this.#a.bind(this),25);#a(t){if(!t.trigger)return;let e=H(t.detail/100,3);this.#t.remote.changeVolume(e,t)}#l(t){this.#s(t)}#u(t){this.#s(t)}};var $i=class extends p(HTMLElement,pe){static tagName="media-volume-slider"};var me=class extends u{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new ot({timeText:"",hidden:!1});#t;#e=b(null);#i=b(!0);#r=b(!0);onSetup(){this.#t=h(),this.#a();let{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.#d.bind(this)}),new ht({callback:this.#o.bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||a(this.#l.bind(this)),a(this.#a.bind(this))}onConnect(t){M(It(t,this.#i.set)),a(this.#n.bind(this)),a(this.#s.bind(this))}#o(t){this.#r.set(t[0].isIntersecting)}#n(){let{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#i()||!this.#r())}#s(){if(!this.$props.toggle()){this.#e.set(null);return}this.el&&O(this.el,this.#h.bind(this))}#a(){let{hidden:t,timeText:e}=this.$state,{duration:i}=this.#t.$state;if(t())return;let{type:r,padHours:s,padMinutes:n,showHours:l}=this.$props,d=this.#u(r()),c=i(),m=this.#d();if(!Number.isFinite(d+c)){e.set("LIVE");return}let T=m?Math.max(0,c-d):d,y=mt(T,{padHrs:s(),padMins:n(),showHrs:l()});e.set((m?"-":"")+y)}#l(){if(!this.el)return;let{toggle:t}=this.$props;f(this.el,"role",t()?"timer":null),f(this.el,"tabindex",t()?0:null)}#u(t){let{bufferedEnd:e,duration:i,currentTime:r}=this.#t.$state;switch(t){case"buffered":return e();case"duration":return i();default:return r()}}#d(){return this.$props.remainder()&&this.#e()!==!1}#h(t){if(t.preventDefault(),this.#e()===null){this.#e.set(!this.$props.remainder());return}this.#e.set(e=>!e)}};var Ri=class extends p(HTMLElement,me){static tagName="media-time";onConnect(){a(()=>{this.textContent=this.$state.timeText()})}};export{pt as a,Ee as b,I as c,mt as d,$e as e,Bt as f,w as g,Je as h,Ze as i,ti as j,ei as k,ii as l,ri as m,oi as n,si as o,E as p,ni as q,G as r,Y as s,ai as t,li as u,di as v,Xt as w,ci as x,fi as y,gi as z,bi as A,vi as B,xi as C,ut as D,W as E,_ as F,he as G,J as H,Ci as I,de as J,Ei as K,Pi as L,wi as M,$i as N,Ri as O};
