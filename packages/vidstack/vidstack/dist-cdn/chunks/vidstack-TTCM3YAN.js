import{A as Rt,B as Dt,C as Nt,D as V,E as qt,F as $,G as Bt,H as Y,I as It,J as Ft,K as Qt,L as Wt,M as Ut,N as zt,O as Xt,a as K,b as Tt,c as L,d as Ct,e as j,g as O,h as xt,i as vt,j as bt,k as Et,l as Mt,m as St,n as yt,o as Pt,p as w,q as Ue,r as N,s as X,t as $t,u as At,v as Ht,w as Lt,x as wt,y as Vt,z as kt}from"./vidstack-SESSUVBC.js";import{a as M,b as Gt,c as Kt,h as jt}from"./vidstack-IW3NNMLJ.js";import{c as v,d as mt,h as ht,i as ct,j as y,k as z,l as ut,m as ft,n as gt,t as We}from"./vidstack-2VHLSK4R.js";import{a as Ot}from"./vidstack-ONXR3WS4.js";import{b as a,c as l,e as c}from"./vidstack-5WSKX3LK.js";import{a as P}from"./vidstack-KCALJS55.js";import{c as pt}from"./vidstack-YP5YT6OR.js";import{b as lt,c as U,d as dt}from"./vidstack-KPDKTTLZ.js";import{B as g,C as H,E as x,F as k,H as o,I as ot,J as Q,K as E,L as G,S as st,U as d,V as W,W as D,Z as nt,a as T,c as _e,ca as at,e as I,f as S,g as Je,i as Ze,m as et,n as R,o as tt,r as it,t as C,u as Qe,v as F,w as rt}from"./vidstack-BQB2M2TQ.js";var _=class extends d{static props={translations:null};static state=new W({label:null,busy:!1});#e;#t=!1;onSetup(){this.#e=c()}onAttach(e){e.style.display="contents"}onConnect(e){e.setAttribute("data-media-announcer",""),v(e,"role","status"),v(e,"aria-live","polite");let{busy:t}=this.$state;this.setAttributes({"aria-busy":()=>t()?"true":null}),this.#t=!0,o(this.#i.bind(this)),o(this.#s.bind(this)),o(this.#a.bind(this)),o(this.#r.bind(this)),o(this.#o.bind(this)),o(this.#d.bind(this)),o(this.#h.bind(this)),_e(),this.#t=!1}#i(){let{paused:e}=this.#e.$state;this.#m(e()?"Pause":"Play")}#r(){let{fullscreen:e}=this.#e.$state;this.#m(e()?"Enter Fullscreen":"Exit Fullscreen")}#o(){let{pictureInPicture:e}=this.#e.$state;this.#m(e()?"Enter PiP":"Exit PiP")}#a(){let{textTrack:e}=this.#e.$state;this.#m(e()?"Closed-Captions On":"Closed-Captions Off")}#s(){let{muted:e,volume:t,audioGain:i}=this.#e.$state;this.#m(e()||t()===0?"Mute":`${Math.round(t()*(i()??1)*100)}% ${this.#p("Volume")}`)}#n=-1;#l=-1;#d(){let{seeking:e,currentTime:t}=this.#e.$state,i=e();this.#n>0?(window.clearTimeout(this.#l),this.#l=window.setTimeout(()=>{if(!this.scope)return;let r=T(t),n=Math.abs(r-this.#n);if(n>=1){let p=r>=this.#n,h=j(n);this.#m(`${this.#p(p?"Seek Forward":"Seek Backward")} ${h}`)}this.#n=-1,this.#l=-1},300)):i&&(this.#n=T(t))}#p(e){let{translations:t}=this.$props;return t?.()?.[e||""]??e}#h(){let{label:e,busy:t}=this.$state,i=this.#p(e());if(this.#t)return;t.set(!0);let r=window.setTimeout(()=>void t.set(!1),150);return this.el&&g(this.el,"aria-label",i),R(i)&&this.dispatch("change",{detail:i}),()=>window.clearTimeout(r)}#m(e){let{label:t}=this.$state;t.set(e)}};var J=class extends a(HTMLElement,_){static tagName="media-announcer"};var Z=class extends d{static props=O.props;#e;constructor(){super(),new O({isPresssed:this.#i.bind(this),onPress:this.#t.bind(this)})}onSetup(){this.#e=c();let{canGoogleCast:e,isGoogleCastConnected:t}=this.#e.$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":this.#r.bind(this),"aria-hidden":M(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","google-cast"),mt(e,this.#o.bind(this))}#t(e){this.#e.remote.requestGoogleCast(e)}#i(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="google-cast"&&t()!=="disconnected"}#r(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="google-cast"&&t()}#o(){let{remotePlaybackState:e}=this.#e.$state;return`Google Cast ${e()}`}};var ee=class extends a(HTMLElement,Z){static tagName="media-google-cast-button"};var te=class extends d{static props={disabled:!1,defaultPressed:!1};#e=x(!1);get pressed(){return this.#e()}constructor(){super(),new O({isPresssed:this.#e})}};var ie=class extends a(HTMLElement,te){static tagName="media-toggle-button"};var re=class{priority=10;#e=null;#t=nt();#i;constructor(e){this.#i=e}attach(){}canRender(){return!0}detach(){this.#t.empty(),this.#i.reset(),this.#e=null}changeTrack(e){!e||this.#e===e||(this.#t.empty(),e.readyState<2?(this.#i.reset(),this.#t.add(C(e,"load",()=>this.#r(e),{once:!0}))):this.#r(e),this.#t.add(C(e,"add-cue",t=>{this.#i.addCue(t.detail)}),C(e,"remove-cue",t=>{this.#i.removeCue(t.detail)})),this.#e=e)}#r(e){this.#i.changeTrack({cues:[...e.cues],regions:[...e.regions]})}};var oe=class s extends d{static props={textDir:"ltr",exampleText:"Captions look like this."};#e;static lib=x(null);onSetup(){this.#e=c(),this.setAttributes({"aria-hidden":M(this.#t.bind(this))})}onAttach(e){e.style.setProperty("pointer-events","none")}onConnect(e){s.lib()||import("https://cdn.vidstack.io/captions").then(t=>s.lib.set(t)),o(this.#i.bind(this))}#t(){let{textTrack:e,remotePlaybackState:t,iOSControls:i}=this.#e.$state,r=e();return i()||t()==="connected"||!r||!pt(r)}#i(){if(!s.lib())return;let{viewType:e}=this.#e.$state;return e()==="audio"?this.#r():this.#n()}#r(){return o(this.#o.bind(this)),this.#p(null),()=>{this.el.textContent=""}}#o(){if(this.#t())return;this.#a();let{textTrack:e}=this.#e.$state;C(e(),"cue-change",this.#a.bind(this)),o(this.#s.bind(this))}#a(){this.el.textContent="",this.#c>=0&&this.#f();let{realCurrentTime:e,textTrack:t}=this.#e.$state,{renderVTTCueString:i}=s.lib(),r=T(e),n=T(t).activeCues;for(let p of n){let h=this.#T(),m=this.#u();m.innerHTML=i(p,r),h.append(m),this.el.append(m)}}#s(){let{realCurrentTime:e}=this.#e.$state,{updateTimedVTTCueNodes:t}=s.lib();t(this.el,e())}#n(){let{CaptionsRenderer:e}=s.lib(),t=new e(this.el),i=new re(t);return this.#e.textRenderers.add(i),o(this.#l.bind(this,t)),o(this.#d.bind(this,t)),this.#p(t),()=>{this.el.textContent="",this.#e.textRenderers.remove(i),t.destroy()}}#l(e){e.dir=this.$props.textDir()}#d(e){if(this.#t())return;let{realCurrentTime:t,textTrack:i}=this.#e.$state;e.currentTime=t(),this.#c>=0&&i()?.activeCues[0]&&this.#f()}#p(e){let t=this.#e.player;if(!t)return;let i=this.#h.bind(this,e);C(t,"vds-font-change",i)}#h(e){if(this.#c>=0){this.#g();return}let{textTrack:t}=this.#e.$state;t()?.activeCues[0]?e?.update(!0):this.#m()}#m(){let e=this.#T();g(e,"data-example","");let t=this.#u();g(t,"data-example",""),t.textContent=this.$props.exampleText(),e?.append(t),this.el?.append(e),this.el?.setAttribute("data-example",""),this.#g()}#c=-1;#g(){window.clearTimeout(this.#c),this.#c=window.setTimeout(this.#f.bind(this),2500)}#f(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.#c=-1}#T(){let e=document.createElement("div");return g(e,"data-part","cue-display"),e}#u(){let e=document.createElement("div");return g(e,"data-part","cue"),e}};var se=class extends a(HTMLElement,oe){static tagName="media-captions"};var ze=class extends d{static props={defaultText:""}},ne=class extends a(HTMLElement,ze){static tagName="media-chapter-title";#e;#t;onSetup(){this.#e=c(),this.#t=x("")}onConnect(){let e=this.#e.textTracks;dt(e,"chapters",this.#t.set),o(this.#i.bind(this))}#i(){let{defaultText:e}=this.$props;this.textContent=this.#t()||e()}};var ae=class extends d{static props={hideDelay:2e3,hideOnMouseLeave:!1};#e;onSetup(){this.#e=c(),o(this.#i.bind(this))}onAttach(e){let{pictureInPicture:t,fullscreen:i}=this.#e.$state;H(e,"pointer-events","none"),v(e,"role","group"),this.setAttributes({"data-visible":this.#r.bind(this),"data-fullscreen":i,"data-pip":t}),o(()=>{this.dispatch("change",{detail:this.#r()})}),o(this.#t.bind(this)),o(()=>{let r=i();for(let n of["top","right","bottom","left"])H(e,`padding-${n}`,r&&`env(safe-area-inset-${n})`)})}#t(){if(!this.el)return;let{nativeControls:e}=this.#e.$state,t=e();g(this.el,"aria-hidden",t?"true":null),H(this.el,"display",t?"none":null)}#i(){let{controls:e}=this.#e.player,{hideDelay:t,hideOnMouseLeave:i}=this.$props;e.defaultDelay=t()===2e3?this.#e.$props.controlsDelay():t(),e.hideOnMouseLeave=i()}#r(){let{controlsVisible:e}=this.#e.$state;return e()}};var le=class extends a(HTMLElement,ae){static tagName="media-controls"};var de=class extends d{onAttach(e){e.style.pointerEvents||H(e,"pointer-events","auto")}};var pe=class extends a(HTMLElement,de){static tagName="media-controls-group"};var me=class extends d{static props={disabled:!1,event:void 0,action:void 0};#e;#t=null;onSetup(){this.#e=c();let{event:e,action:t}=this.$props;this.setAttributes({event:e,action:t})}onAttach(e){e.setAttribute("data-media-gesture",""),e.style.setProperty("pointer-events","none")}onConnect(e){this.#t=this.#e.player.el?.querySelector("[data-media-provider]"),o(this.#i.bind(this))}#i(){let e=this.$props.event(),t=this.$props.disabled();!this.#t||!e||t||(/^dbl/.test(e)&&(e=e.split(/^dbl/)[1]),(e==="pointerup"||e==="pointerdown")&&this.#e.$state.pointer()==="coarse"&&(e=e==="pointerup"?"touchend":"touchstart"),C(this.#t,e,this.#a.bind(this),{passive:!1}))}#r=0;#o=-1;#a(e){if(this.$props.disabled()||Qe(e)&&(e.button!==0||this.#e.activeMenu)||F(e)&&this.#e.activeMenu||ct(e)||!this.#n(e))return;if(e.MEDIA_GESTURE=!0,e.preventDefault(),!T(this.$props.event)?.startsWith("dbl"))this.#r===0&&setTimeout(()=>{this.#r===1&&this.#s(e)},250);else if(this.#r===1){queueMicrotask(()=>this.#s(e)),clearTimeout(this.#o),this.#r=0;return}this.#r===0&&(this.#o=window.setTimeout(()=>{this.#r=0},275)),this.#r++}#s(e){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.#l()&&this.#d(T(this.$props.action),e),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}#n(e){if(!this.el)return!1;if(Qe(e)||rt(e)||F(e)){let t=F(e)?e.changedTouches[0]??e.touches[0]:void 0,i=t?.clientX??e.clientX,r=t?.clientY??e.clientY,n=this.el.getBoundingClientRect(),p=r>=n.top&&r<=n.bottom&&i>=n.left&&i<=n.right;return e.type.includes("leave")?!p:p}return!0}#l(){let e=this.#e.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(e).sort((t,i)=>+getComputedStyle(i).zIndex-+getComputedStyle(t).zIndex)[0]===this.el}#d(e,t){if(!e)return;let i=new it("will-trigger",{detail:e,cancelable:!0,trigger:t});if(this.dispatchEvent(i),i.defaultPrevented)return;let[r,n]=e.replace(/:([a-z])/,"-$1").split(":");e.includes(":fullscreen")?this.#e.remote.toggleFullscreen("prefer-media",t):e.includes("seek:")?this.#e.remote.seek(T(this.#e.$state.currentTime)+(+n||0),t):this.#e.remote[st(r)](t),this.dispatch("trigger",{detail:e,trigger:t})}};var he=class extends a(HTMLElement,me){static tagName="media-gesture"};var Ke=class extends d{static props={when:!1}},ce=class extends a(HTMLElement,Ke){static tagName="media-layout";#e;onSetup(){this.#e=c()}onConnect(){o(this.#t.bind(this))}#t(){let e=this.firstElementChild,t=e?.localName==="template",i=this.$props.when();if(!(tt(i)?i:k(()=>i(this.#e.player.state))())){t?(this.textContent="",this.appendChild(e)):We(e)&&(e.style.display="none");return}t?this.append(e.content.cloneNode(!0)):We(e)&&(e.style.display="")}};var _t=[1,1.25,1.5,1.75,2,2.5,3,4],ue=class extends d{static props={normalLabel:"Disabled",gains:_t};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{gains:e}=this.$props,{canSetAudioGain:t}=this.#e.$state;return!t()||e().length===0}constructor(){super(),this.#i=new N,this.#i.onValueChange=this.#n.bind(this)}onSetup(){this.#e=c(),G(w)&&(this.#t=E(w))}onConnect(e){o(this.#r.bind(this)),o(this.#o.bind(this)),o(this.#a.bind(this))}getOptions(){let{gains:e,normalLabel:t}=this.$props;return e().map(i=>({label:i===1||i===null?t:String(i*100)+"%",value:i.toString()}))}#r(){this.#i.value=this.#s()}#o(){let{normalLabel:e}=this.$props,{audioGain:t}=this.#e.$state,i=t();this.#t?.hint.set(i===1||i==null?e():String(i*100)+"%")}#a(){this.#t?.disable(this.disabled)}#s(){let{audioGain:e}=this.#e.$state;return e()?.toString()??"1"}#n(e,t){if(this.disabled)return;let i=+e;this.#e.remote.changeAudioGain(i,t),this.dispatch("change",{detail:i,trigger:t})}};var fe=class extends a(HTMLElement,ue){static tagName="media-audio-gain-radio-group";onConnect(){X(this)}};var ge=class extends d{static props={thumbnails:null};#e;#t;#i;#r=x(null);#o=x([]);get value(){return this.#i.value}get disabled(){return!this.#o()?.length}constructor(){super(),this.#i=new N,this.#i.onValueChange=this.#p.bind(this)}onSetup(){this.#e=c(),G(w)&&(this.#t=E(w));let{thumbnails:e}=this.$props;this.setAttributes({"data-thumbnails":()=>!!e()})}onAttach(e){this.#t?.attachObserver({onOpen:this.#a.bind(this)})}getOptions(){let{clipStartTime:e,clipEndTime:t}=this.#e.$state,i=e(),r=t()||1/0;return this.#o().map((n,p)=>({cue:n,value:p.toString(),label:n.text,startTime:Ct(Math.max(0,n.startTime-i)),duration:j(Math.min(r,n.endTime)-Math.max(i,n.startTime))}))}#a(){T(()=>this.#l())}onConnect(e){o(this.#l.bind(this)),o(this.#d.bind(this)),o(this.#s.bind(this)),U(this.#e.textTracks,"chapters",this.#r.set)}#s(){let e=this.#r();if(!e)return;let t=this.#n.bind(this,e);return t(),C(e,"add-cue",t),C(e,"remove-cue",t),()=>{this.#o.set([])}}#n(e){let{clipStartTime:t,clipEndTime:i}=this.#e.$state,r=t(),n=i()||1/0;this.#o.set([...e.cues].filter(p=>p.startTime<=n&&p.endTime>=r))}#l(){if(!this.#t?.expanded())return;if(!this.#r()){this.#i.value="-1";return}let{realCurrentTime:t,clipStartTime:i,clipEndTime:r}=this.#e.$state,n=i(),p=r()||1/0,h=t(),m=this.#o().findIndex(f=>lt(f,h));this.#i.value=m.toString(),m>=0&&y(()=>{if(!this.connectScope)return;let f=this.#o()[m],u=this.el.querySelector("[aria-checked='true']"),b=Math.max(n,f.startTime),q=Math.min(p,f.endTime)-b,B=Math.max(0,h-b)/q*100;u&&H(u,"--progress",P(B,3)+"%")})}#d(){this.#t?.disable(this.disabled)}#p(e,t){if(this.disabled||!t)return;let i=+e,r=this.#o(),{clipStartTime:n}=this.#e.$state;et(i)&&r?.[i]&&(this.#i.value=i.toString(),this.#e.remote.seek(r[i].startTime-n(),t),this.dispatch("change",{detail:r[i],trigger:t}))}};var Te=class extends a(HTMLElement,ge){static tagName="media-chapters-radio-group";onConnect(){X(this,(e,t)=>{let{cue:i,startTime:r,duration:n}=t,p=e.querySelector(".vds-thumbnail,media-thumbnail"),h=e.querySelector('[data-part="start-time"]'),m=e.querySelector('[data-part="duration"]');h&&(h.textContent=r),m&&(m.textContent=n),p&&(p.setAttribute("time",i.startTime+""),o(()=>{let f=this.$props.thumbnails();"src"in p?p.src=f:R(f)&&p.setAttribute("src",f)}))})}};var Ce=class extends a(HTMLElement,kt){static tagName="media-menu-portal";static attrs={disabled:{converter(e){return R(e)?e:e!==null}}}};var xe=class extends d{static props={value:""};#e=x(!1);#t={value:this.$props.value,check:this.#s.bind(this),onCheck:null};get checked(){return this.#e()}constructor(){super(),new L}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.#e,"aria-checked":M(this.#e)})}onAttach(e){let t=G(w);v(e,"tabindex",t?"-1":"0"),v(e,"role",t?"menuitemradio":"radio"),o(this.#o.bind(this))}onConnect(e){this.#r(),ht(e,this.#a.bind(this)),S(this.#i.bind(this))}#i(){I(()=>{E(Ue).remove(this.#t)},this.connectScope)}#r(){E(Ue).add(this.#t)}#o(){let{value:e}=this.$props,t=e();T(this.#e)&&this.#t.onCheck?.(t)}#a(e){T(this.#e)||(this.#n(!0,e),this.#l(e),this.#t.onCheck?.(T(this.$props.value),e))}#s(e,t){T(this.#e)!==e&&this.#n(e,t)}#n(e,t){this.#e.set(e),this.dispatch("change",{detail:e,trigger:t})}#l(e){this.dispatch("select",{trigger:e})}};var ve=class extends a(HTMLElement,xe){static tagName="media-radio"};var be=class extends d{static props={value:""};#e;get values(){return this.#e.values}get value(){return this.#e.value}set value(e){this.#e.value=e}constructor(){super(),this.#e=new N,this.#e.onValueChange=this.#i.bind(this)}onSetup(){o(this.#t.bind(this))}#t(){this.#e.value=this.$props.value()}#i(e,t){let i=this.createEvent("change",{detail:e,trigger:t});this.dispatch(i)}};var Ee=class extends a(HTMLElement,be){static tagName="media-radio-group"};var Me=class extends d{static props={...$.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300};static state=V;#e;onSetup(){this.#e=c(),Q(qt,{default:"percent",percent:(e,t)=>P(this.$state.value(),t)+"%"}),new $({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#a.bind(this),aria:{valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#l.bind(this),onValueChange:this.#n.bind(this)}).attach(this),o(this.#r.bind(this)),o(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-audio-gain-slider",""),v(e,"aria-label","Audio Boost");let{canSetAudioGain:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":M(()=>!t())})}#t(){let{value:e}=this.$state;return Math.round(e())}#i(){let{value:e}=this.$state;return e()+"%"}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}#o(){let{audioGain:e}=this.#e.$state,t=((e()??1)-1)*100;this.$state.value.set(t),this.dispatch("value-change",{detail:t})}#a(){let{disabled:e}=this.$props,{canSetAudioGain:t}=this.#e.$state;return e()||!t()}#s(e){if(!e.trigger)return;let t=P(1+e.detail/100,2);this.#e.remote.changeAudioGain(t,e)}#n(e){this.#s(e)}#l(e){this.#s(e)}};var Se=class extends a(HTMLElement,Me){static tagName="media-audio-gain-slider"};var ye=class extends d{static props={...$.props,step:1,keyStep:1,shiftKeyMultiplier:1};static state=V;#e;#t=k(()=>{let{qualities:e}=this.#e.$state;return Gt(e())});onSetup(){this.#e=c(),new $({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#s.bind(this),aria:{valueNow:this.#i.bind(this),valueText:this.#r.bind(this)},onDragValueChange:this.#p.bind(this),onValueChange:this.#d.bind(this)}).attach(this),o(this.#o.bind(this)),o(this.#a.bind(this))}onAttach(e){e.setAttribute("data-media-quality-slider",""),v(e,"aria-label","Video Quality");let{qualities:t,canSetQuality:i}=this.#e.$state,r=k(()=>i()&&t().length>0);this.setAttributes({"data-supported":r,"aria-hidden":M(()=>!r())})}#i(){let{value:e}=this.$state;return e()}#r(){let{quality:e}=this.#e.$state;if(!e())return"";let{height:t,bitrate:i}=e(),r=i&&i>0?`${(i/1e6).toFixed(2)} Mbps`:null;return t?`${t}p${r?` (${r})`:""}`:"Auto"}#o(){let e=this.#t();this.$state.max.set(Math.max(0,e.length-1))}#a(){let{quality:e}=this.#e.$state,t=this.#t(),i=Math.max(0,t.indexOf(e()));this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#s(){let{disabled:e}=this.$props,{canSetQuality:t,qualities:i}=this.#e.$state;return e()||i().length<=1||!t()}#n=K(this.#l.bind(this),25);#l(e){if(!e.trigger)return;let{qualities:t}=this.#e,i=T(this.#t)[e.detail];this.#e.remote.changeQuality(t.indexOf(i),e)}#d(e){this.#n(e)}#p(e){this.#n(e)}};var Pe=class extends a(HTMLElement,ye){static tagName="media-quality-slider"};var Yt=Jt;function Jt(s,e,t){var i=null,r=null,n=function(){i&&(clearTimeout(i),r=null,i=null)},p=function(){var m=r;n(),m&&m()},h=function(){if(!e)return s.apply(this,arguments);var m=this,f=arguments,u=t&&!i;if(n(),r=function(){s.apply(m,f)},i=setTimeout(function(){if(i=null,!u){var b=r;return r=null,b()}},e),u)return r()};return h.cancel=n,h.flush=p,h}var $e=class extends d{static props={disabled:!1};#e;#t;#i;#r=null;#o=[];#a=x(null);#s=x([]);#n=x(-1);#l=x(-1);#d=0;get cues(){return this.#s()}get activeCue(){return this.#s()[this.#n()]||null}get activePointerCue(){return this.#s()[this.#l()]||null}onSetup(){this.#e=c(),this.#t=D(Bt.state)}onAttach(e){U(this.#e.textTracks,"chapters",this.#p.bind(this)),o(this.#A.bind(this))}onConnect(){S(()=>this.#h.bind(this))}onDestroy(){this.#p(null)}setRefs(e){if(this.#o=e,this.#i?.dispose(),this.#o.length===1){let t=this.#o[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.#o.length>0&&I(()=>this.#m(),this.#i=Je())}#p(e){T(this.#a)!==e&&(this.#h(),this.#a.set(e))}#h(){this.#o=[],this.#s.set([]),this.#n.set(-1),this.#l.set(-1),this.#d=0,this.#i?.dispose()}#m(){this.#o.length&&o(this.#c.bind(this))}#c(){let{hidden:e}=this.#t;e()||(o(this.#g.bind(this)),o(this.#f.bind(this)),o(this.#T.bind(this)),o(this.#M.bind(this)))}#g(){let e=this.#s();if(!e.length)return;let t,{clipStartTime:i,clipEndTime:r}=this.#e.$state,n=i(),p=r()||e[e.length-1].endTime,h=p-n,m=100;for(let f=0;f<e.length;f++)if(t=e[f],this.#o[f]){let u=f===e.length-1?m:P((t.endTime-Math.max(n,t.startTime))/h*100,3);this.#o[f].style.width=u+"%",m-=u}}#f(){let{liveEdge:e,clipStartTime:t,duration:i}=this.#e.$state,{fillPercent:r,value:n}=this.#t,p=this.#s(),h=e(),m=T(this.#n),f=p[m],u=h?this.#s.length-1:this.#b(f&&f.startTime/i()*100<=T(n)?m:0,r());h||!f?this.#u(0,p.length,100):u>m?this.#u(m,u,100):u<m&&this.#u(u+1,m+1,0);let b=h?100:this.#x(p[u],r(),t(),this.#C(p));this.#v(this.#o[u],b),this.#n.set(u)}#T(){let{pointing:e,pointerPercent:t}=this.#t;if(!e()){this.#l.set(-1);return}let i=this.#b(0,t());this.#l.set(i)}#u(e,t,i){for(let r=e;r<t;r++)this.#v(this.#o[r],i)}#v(e,t){e&&(e.style.setProperty("--chapter-fill",t+"%"),g(e,"data-active",t>0&&t<100),g(e,"data-ended",t===100))}#b(e,t){let i=0,r=this.#s();if(t===0)return 0;if(t===100)return r.length-1;let{clipStartTime:n}=this.#e.$state,p=n(),h=this.#C(r);for(let m=e;m<r.length;m++)if(i=this.#x(r[m],t,p,h),i>=0&&i<100)return m;return 0}#M(){this.#S(this.#y())}#S=at(e=>{let t,i=this.#s(),{clipStartTime:r}=this.#e.$state,n=r(),p=this.#C(i);for(let h=this.#d;h<this.#o.length;h++)if(t=this.#x(i[h],e,n,p),this.#o[h]?.style.setProperty("--chapter-progress",t+"%"),t<100){this.#d=h;break}});#y=k(this.#P.bind(this));#P(){let{bufferedEnd:e,duration:t}=this.#e.$state;return P(Math.min(e()/Math.max(t(),1),1),3)*100}#C(e){let{clipEndTime:t}=this.#e.$state,i=t();return i>0?i:e[e.length-1]?.endTime||0}#x(e,t,i,r){if(this.#s().length===0)return 0;let p=r-i,h=Math.max(0,e.startTime-i),m=Math.min(r,e.endTime)-i,f=h/p,u=f*100,b=Math.min(1,f+(m-h)/p)*100;return Math.max(0,P(t>=b?100:(t-u)/(b-u)*100,3))}#$(e){let t=[],{clipStartTime:i,clipEndTime:r,duration:n}=this.#e.$state,p=i(),h=r()||1/0;e=e.filter(u=>u.startTime<=h&&u.endTime>=p);let m=e[0];m&&m.startTime>p&&t.push(new window.VTTCue(p,m.startTime,""));for(let u=0;u<e.length-1;u++){let b=e[u],q=e[u+1];if(t.push(b),q){let B=q.startTime-b.endTime;B>0&&t.push(new window.VTTCue(b.endTime,b.endTime+B,""))}}let f=e[e.length-1];if(f){t.push(f);let u=n();u>=0&&u-f.endTime>1&&t.push(new window.VTTCue(f.endTime,n(),""))}return t}#A(){let{source:e}=this.#e.$state;e(),this.#H()}#H(){if(!this.scope)return;let{disabled:e}=this.$props;if(e()){this.#s.set([]),this.#n.set(0),this.#d=0;return}let t=this.#a();if(t){let i=this.#E.bind(this);i(),S(C(t,"add-cue",i)),S(C(t,"remove-cue",i)),o(this.#L.bind(this))}return this.#r=this.#k(),this.#r&&o(this.#w.bind(this)),()=>{this.#r&&(this.#r.textContent="",this.#r=null)}}#L(){this.#e.$state.duration(),this.#E()}#E=Yt(()=>{let e=T(this.#a);!this.scope||!e||!e.cues.length||(this.#s.set(this.#$(e.cues)),this.#n.set(0),this.#d=0)},150,!0);#w(){let e=this.activePointerCue||this.activeCue;this.#r&&(this.#r.textContent=e?.text||"")}#V(){let e=this.el;for(;e&&e.getAttribute("role")!=="slider";)e=e.parentElement;return e}#k(){let e=this.#V();return e?e.querySelector('[data-part="chapter-title"]'):null}};var Ae=class extends a(HTMLElement,$e){static tagName="media-slider-chapters";#e=null;onConnect(){y(()=>{if(!this.connectScope)return;let e=this.querySelector("template");e&&(this.#e=e,o(this.#t.bind(this)))})}#t(){if(!this.#e)return;let e=z(this.#e,this.cues.length||1);this.setRefs(e)}};var He=class extends a(HTMLElement,Y){static tagName="media-slider"};var je=class extends d{},Le=class extends a(HTMLElement,je){static tagName="media-slider-steps";#e=null;onConnect(e){y(()=>{this.connectScope&&(this.#e=e.querySelector("template"),this.#e&&o(this.#t.bind(this)))})}#t(){if(!this.#e)return;let{min:e,max:t,step:i}=D(V),r=(t()-e())/i();z(this.#e,Math.floor(r)+1)}};var we=class extends d{static props={src:null,crossOrigin:null};static state=new W({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});#e;#t;get video(){return this.$state.video()}onSetup(){this.#e=c(),this.#t=D(Y.state),this.#o(),this.setAttributes({"data-loading":this.#a.bind(this),"data-hidden":this.$state.hidden,"data-error":this.#s.bind(this),"aria-hidden":M(this.$state.hidden)})}onAttach(e){o(this.#i.bind(this)),o(this.#r.bind(this)),o(this.#o.bind(this)),o(this.#n.bind(this)),o(this.#l.bind(this)),o(this.#h.bind(this))}#i(){let e=this.$state.video();e&&(e.readyState>=2&&this.#d(),C(e,"canplay",this.#d.bind(this)),C(e,"error",this.#p.bind(this)))}#r(){let{src:e}=this.$state,{canLoad:t}=this.#e.$state;e.set(t()?this.$props.src():null)}#o(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i}=this.#e.$state,r=e()!==null?e():i();t.set(r===!0?"anonymous":r)}#a(){let{canPlay:e,hidden:t}=this.$state;return!e()&&!t()}#s(){let{error:e}=this.$state;return!Ze(e)}#n(){let{src:e,hidden:t}=this.$state,{canLoad:i,duration:r}=this.#e.$state;t.set(i()&&(!e()||this.#s()||!Number.isFinite(r())))}#l(){let{src:e,canPlay:t,error:i}=this.$state;e(),t.set(!1),i.set(null)}#d(e){let{canPlay:t,error:i}=this.$state;t.set(!0),i.set(null),this.dispatch("can-play",{trigger:e})}#p(e){let{canPlay:t,error:i}=this.$state;t.set(!1),i.set(e),this.dispatch("error",{trigger:e})}#h(){let{video:e,canPlay:t}=this.$state,{duration:i}=this.#e.$state,{pointerRate:r}=this.#t,n=e();t()&&n&&Number.isFinite(i())&&Number.isFinite(r())&&(n.currentTime=r()*i())}};var Zt=ut('<video muted playsinline preload="none" style="max-width: unset;"></video>'),Ve=class extends a(HTMLElement,we){static tagName="media-slider-video";#e;#t=this.#i();onSetup(){this.#e=c(),this.$state.video.set(this.#t)}onConnect(){let{canLoad:e}=this.#e.$state,{src:t,crossOrigin:i}=this.$state;this.#t.parentNode!==this&&this.prepend(this.#t),o(()=>{g(this.#t,"crossorigin",i()),g(this.#t,"preload",e()?"auto":"none"),g(this.#t,"src",t())})}#i(){return ft(Zt)}};var ke=class extends d{static props={...$.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2};static state=V;#e;onSetup(){this.#e=c(),new $({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:this.#a,isDisabled:this.#s.bind(this),aria:{valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#p.bind(this),onValueChange:this.#d.bind(this)}).attach(this),o(this.#r.bind(this)),o(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-speed-slider",""),v(e,"aria-label","Speed");let{canSetPlaybackRate:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":M(()=>!t())})}#t(){let{value:e}=this.$state;return e()}#i(){let{value:e}=this.$state;return e()+"x"}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}#o(){let{playbackRate:e}=this.#e.$state,t=e();this.$state.value.set(t),this.dispatch("value-change",{detail:t})}#a(e){return P(e,2)}#s(){let{disabled:e}=this.$props,{canSetPlaybackRate:t}=this.#e.$state;return e()||!t()}#n=K(this.#l.bind(this),25);#l(e){if(!e.trigger)return;let t=e.detail;this.#e.remote.changePlaybackRate(t,e)}#d(e){this.#n(e)}#p(e){this.#n(e)}};var Re=class extends a(HTMLElement,ke){static tagName="media-speed-slider"};var Xe=class extends d{static props={size:96,trackWidth:8,fillPercent:50};onConnect(e){y(()=>{if(!this.connectScope)return;let t=e.querySelector("svg"),i=t.firstElementChild,r=i.nextElementSibling;o(this.#e.bind(this,t,i,r))})}#e(e,t,i){let{size:r,trackWidth:n,fillPercent:p}=this.$props;g(e,"width",r()),g(e,"height",r()),g(t,"stroke-width",n()),g(i,"stroke-width",n()),g(i,"stroke-dashoffset",100-p())}},Ge=class extends a(jt,Xe){static tagName="media-spinner";render(){return Kt`
      <svg fill="none" viewBox="0 0 120 120" aria-hidden="true" data-part="root">
        <circle cx="60" cy="60" r="54" stroke="currentColor" data-part="track"></circle>
        <circle
          cx="60"
          cy="60"
          r="54"
          stroke="currentColor"
          pathLength="100"
          stroke-dasharray="100"
          data-part="track-fill"
        ></circle>
      </svg>
    `}};var Ye=class extends d{},De=class extends a(HTMLElement,Ye){static tagName="media-title";#e;onSetup(){this.#e=c()}onConnect(){o(this.#t.bind(this))}#t(){let{title:e}=this.#e.$state;this.textContent=e()}};var A=ot();var Ne=class extends d{static props={placement:"top center",offset:0,alignOffset:0};constructor(){super(),new L;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){this.#e(e),Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){this.#e(e);let t=E(A);S(()=>t.detachContent(e)),S(y(()=>{this.connectScope&&o(this.#t.bind(this))}))}#e(e){E(A).attachContent(e)}#t(){let{placement:e,offset:t,alignOffset:i}=this.$props;return gt(this.el,this.#i(),e(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:t()})}#i(){return E(A).trigger()}};var Oe=class extends a(HTMLElement,Ne){static tagName="media-tooltip-content"};var ei=0,qe=class extends d{static props={showDelay:700};#e=`media-tooltip-${++ei}`;#t=x(null);#i=x(null);constructor(){super(),new L;let{showDelay:e}=this.$props;new Lt({trigger:this.#t,content:this.#i,showDelay:e,listen(t,i,r){C(t,"touchstart",n=>n.preventDefault(),{passive:!1}),o(()=>{Tt()&&C(t,"focus",i),C(t,"blur",r)}),C(t,"mouseenter",i),C(t,"mouseleave",r)},onChange:this.#n.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onSetup(){Q(A,{trigger:this.#t,content:this.#i,attachTrigger:this.#r.bind(this),detachTrigger:this.#o.bind(this),attachContent:this.#a.bind(this),detachContent:this.#s.bind(this)})}#r(e){this.#t.set(e);let t=e.getAttribute("data-media-tooltip");t&&this.el?.setAttribute(`data-media-${t}-tooltip`,""),g(e,"data-describedby",this.#e)}#o(e){e.removeAttribute("data-describedby"),e.removeAttribute("aria-describedby"),this.#t.set(null)}#a(e){e.setAttribute("id",this.#e),e.style.display="none",v(e,"role","tooltip"),this.#i.set(e)}#s(e){e.removeAttribute("id"),e.removeAttribute("role"),this.#i.set(null)}#n(e){let t=this.#t(),i=this.#i();t&&g(t,"aria-describedby",e?this.#e:null);for(let r of[this.el,t,i])r&&g(r,"data-visible",e)}};var Be=class extends a(HTMLElement,qe){static tagName="media-tooltip"};var Ie=class extends d{constructor(){super(),new L}onConnect(e){S(y(()=>{if(!this.connectScope)return;this.#e();let t=E(A);S(()=>{let i=this.#t();i&&t.detachTrigger(i)})}))}#e(){let e=this.#t(),t=E(A);e&&t.attachTrigger(e)}#t(){let e=this.el.firstElementChild;return e?.localName==="button"||e?.getAttribute("role")==="button"?e:this.el}};var Fe=class extends a(HTMLElement,Ie){static tagName="media-tooltip-trigger";onConnect(){this.style.display="contents"}};l(ce);l(le);l(pe);l(Ot);l(J);l(Be);l(Fe);l(Oe);l(yt);l(Mt);l(vt);l(bt);l(St);l(Pt);l(xt);l(ee);l(ie);l(He);l(Se);l(zt);l(Ut);l(Re);l(Pe);l(Ae);l(Le);l(It);l(Wt);l(Qt);l(Ve);l(wt);l(Ht);l(Ce);l(Rt);l(Vt);l($t);l(At);l(Nt);l(fe);l(Dt);l(Te);l(Ee);l(ve);l(he);l(Ft);l(se);l(Et);l(Xt);l(De);l(ne);l(Ge);export{Yt as a};
