import{b as Ts,c as w,d as de,e as Ln,f as hi,g as mi,h as ye,i as fi,j as Rn,k as An,l as Vn,m as Dn,n as In,o as qn,p as $e}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-PMBDVM72.js";import{a as pi,b as we}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-IMNMJXWE.js";import{a as X,b as $n,c as Lt}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-KCALJS55.js";import{a as ge}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-NTONOYHO.js";import{a as N,b as Pl,c as _l,d as wn,e as kl,f as Xe,g as B,h as Cl}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-LLP3FAFZ.js";import{a as k}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-WJVXB6YB.js";import{a as ut,b as Es,c as je,d as Sl,e as Sn}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-MADEMBP7.js";import{b as Ce,d as ct,e as Cn}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-LEW5I5Y5.js";import{a as bn,b as li,c as En,e as di,f as Tn,g as ui,k as xn,l as ci,m as Mn,n as Pn,o as _n,p as wt,q as $t,r as kn}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-NLZVXD7M.js";import{$ as vn,A as Pe,B as S,C as re,D as hn,E as u,F as se,G as z,H as V,I as Y,J as ys,K as vs,L as mn,M as F,N as fn,O as oi,P as gn,Q as yn,R as b,S as xe,T as dt,U as Ye,V as ai,Y as bs,_ as le,a as m,b as We,c as me,e as kt,f as x,h as gs,i as ke,j as an,l as ln,m as fe,n as E,o as dn,q as W,r as R,s as un,t as y,v as ze,w as cn,x as Ct,y as pn,z as v}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-6254FMD7.js";var xs=s=>s===null?"":s+"",Qo=s=>s===null?null:s+"",Ko=s=>s===null?0:Number(s);var Ms=s=>s!==null,Uo=()=>null,Wo=s=>s===null?[]:JSON.parse(s),zo=s=>s===null?{}:JSON.parse(s);function Yo(s){if(s===null)return Qo;switch(typeof s){case"undefined":return xs;case"string":return xs;case"boolean":return Ms;case"number":return Ko;case"function":return Uo;case"object":return W(s)?Wo:zo;default:return xs}}var Fe=Symbol("ATTRS"),On=Symbol("SETUP"),Je=Symbol("SETUP_STATE"),Rt=Symbol("SETUP_CALLBACKS");function T(s,e){var t,i,r;let o=class o extends s{constructor(...a){if(super(...a),this[i]=0,this[r]=null,this.keepAlive=!1,this.forwardKeepAlive=!0,this.$=kt(()=>mn(e),null),this.$.$$._addHooks(this),e.props){let d=this.$props,c=Object.getOwnPropertyDescriptors(this);for(let p of Object.keys(c))p in e.props&&(d[p].set(this[p]),delete this[p])}}static get observedAttributes(){if(!this[Fe]&&e.props){let a=new Map;for(let d of Object.keys(e.props)){let c=this.attrs?.[d],p=E(c)?c:c&&c?.attr;p!==!1&&(p||(p=oi(d)),a.set(p,{_prop:d,_converter:c&&!E(c)&&c?.converter||Yo(e.props[d])}))}this[Fe]=a}return this[Fe]?Array.from(this[Fe].keys()):[]}get scope(){return this.$.$$._scope}get attachScope(){return this.$.$$._attachScope}get connectScope(){return this.$.$$._connectScope}get $props(){return this.$.$$._props}get $state(){return this.$.$$._$state}get state(){return this.$.state}attributeChangedCallback(a,d,c){let p=this.constructor;if(!p[Fe]){super.attributeChangedCallback?.(a,d,c);return}let h=p[Fe].get(a);h&&(this[h._prop]=h._converter(c))}connectedCallback(){let a=this.$?.$$;if(!a||a._destroyed)return;if(this[Je]!==2){Xo.call(this);return}if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),a._connect(),W(this[Rt])&&fn(this[Rt],this),this[Rt]=null;let d=super.connectedCallback;d&&kt(()=>d.call(this),this.connectScope)}disconnectedCallback(){let a=this.$?.$$;if(!a||a._destroyed)return;a._disconnect();let d=super.disconnectedCallback;d&&d.call(this),!this.keepAlive&&!this.hasAttribute("keep-alive")&&setTimeout(()=>{requestAnimationFrame(()=>{this.isConnected||a._destroy()})},0)}[(t=Fe,i=Je,r=Rt,On)](){let a=this.$.$$,d=this.constructor;if(a._destroyed&&console.warn(`[maverick] attempted attaching to destroyed element \`${this.tagName}\``),a._destroyed)return;let c=d[Fe];if(c)for(let p of this.attributes){let h=c.get(p.name);h&&h._converter&&a._props[h._prop].set(h._converter(this.getAttribute(p.name)))}a._setup(),a._attach(this),this[Je]=2,this.connectedCallback()}subscribe(a){return this.$.subscribe(a)}destroy(){this.disconnectedCallback(),this.$.destroy()}};o[t]=null;let n=o;return jo(n,e),n}function jo(s,e){let t=s.prototype,i=e.prototype;if(e.props)for(let r of Object.keys(e.props))Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get(){return this.$props[r]()},set(n){this.$props[r].set(n)}});if(i[ys])for(let r of i[ys])Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get(){return this.$[r]},set(n){this.$[r]=n}});if(i[vs])for(let r of i[vs])t[r]=function(...n){return this.$[r](...n)}}function Xo(){if(this[Je]!==0)return;this[Je]=1;let s=Zo(this),e=s&&window.customElements.get(s.localName),t=s&&s[Je]===2;if(s&&(!e||!t)){Jo.call(this,s);return}Hn.call(this,s)}async function Jo(s){await window.customElements.whenDefined(s.localName),s[Je]!==2&&await new Promise(e=>(s[Rt]??=[]).push(e)),Hn.call(this,s)}function Hn(s){if(this.isConnected){if(s){s.keepAlive&&s.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));let e=this.$.$$._scope;e&&s.$.$$._attachScope.append(e)}this[On]()}}function Zo(s){let e=s.parentNode,t=s.localName.split("-",1)[0]+"-";for(;e;){if(e.nodeType===1&&e.localName.startsWith(t))return e;e=e.parentNode}return null}function A(s,e=!1){(e||!window.customElements.get(s.tagName))&&window.customElements.define(s.tagName,s)}var gi=Symbol(0),Nn=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"];var yi=se();function g(){return V(yi)}function Ss(s){return s instanceof HTMLAudioElement}function Ps(s){return s instanceof HTMLVideoElement}function Fn(s){return Ss(s)||Ps(s)}function Bn(s){return s instanceof HTMLIFrameElement}var ee=class extends F{};var _s={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},vi=new Set(["Shift","Alt","Meta","Ctrl"]),ea='button, [role="button"]',Gn='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]',bi=class extends ee{#e;constructor(e){super(),this.#e=e}onConnect(){u(this.#t.bind(this))}#t(){let{keyDisabled:e,keyTarget:t}=this.$props;if(e())return;let i=t()==="player"?this.el:document,r=S(!1);i===this.el?(this.listen("focusin",()=>r.set(!0)),this.listen("focusout",n=>{this.el.contains(n.target)||r.set(!1)})):(m(r)||r.set(document.querySelector("[data-media-player]")===this.el),y(document,"focusin",n=>{let o=n.composedPath().find(l=>l instanceof Element&&l.localName==="media-player");o!==void 0&&r.set(this.el===o)})),u(()=>{r()&&(y(i,"keyup",this.#i.bind(this)),y(i,"keydown",this.#r.bind(this)),y(i,"keydown",this.#s.bind(this),{capture:!0}))})}#i(e){let t=document.activeElement;if(!e.key||!this.$state.canSeek()||t?.matches(Gn))return;let{method:i,value:r}=this.#n(e);if(!E(r)&&!W(r)){r?.onKeyUp?.({event:e,player:this.#e.player,remote:this.#e.remote}),r?.callback?.(e,this.#e.remote);return}i?.startsWith("seek")&&(e.preventDefault(),e.stopPropagation(),this.#l?(this.#u(e,i==="seekForward"),this.#l=null):(this.#e.remote.seek(this.#o,e),this.#o=void 0)),i?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}))}#r(e){if(!e.key||vi.has(e.key))return;let t=document.activeElement;if(t?.matches(Gn)||Ct(e)&&t?.matches(ea))return;let{method:i,value:r}=this.#n(e),n=!e.metaKey&&/^[0-9]$/.test(e.key);if(!E(r)&&!W(r)&&!n){r?.onKeyDown?.({event:e,player:this.#e.player,remote:this.#e.remote}),r?.callback?.(e,this.#e.remote);return}if(!i&&n){e.preventDefault(),e.stopPropagation(),this.#e.remote.seek(this.$state.duration()/10*Number(e.key),e);return}if(i){switch(e.preventDefault(),e.stopPropagation(),i){case"seekForward":case"seekBackward":this.#p(e,i,i==="seekForward");break;case"volumeUp":case"volumeDown":let o=this.el.querySelector("[data-media-volume-slider]");if(o)o.dispatchEvent(new KeyboardEvent("keydown",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}));else{let a=e.shiftKey?.1:.05;this.#e.remote.changeVolume(this.$state.volume()+(i==="volumeUp"?+a:-a),e)}break;case"toggleFullscreen":this.#e.remote.toggleFullscreen("prefer-media",e);break;case"speedUp":case"slowDown":let l=this.$state.playbackRate();this.#e.remote.changePlaybackRate(Math.max(.25,Math.min(2,l+(i==="speedUp"?.25:-.25))),e);break;default:this.#e.remote[i]?.(e)}this.$state.lastKeyboardAction.set({action:i,event:e})}}#s(e){Fn(e.target)&&this.#n(e).method&&e.preventDefault()}#n(e){let t={...this.$props.keyShortcuts(),...this.#e.ariaKeys},i=Object.keys(t).find(r=>{let n=t[r],o=W(n)?n.join(" "):E(n)?n:n?.keys;return(W(o)?o:o?.split(" "))?.map(a=>ia(a).replace(/Control/g,"Ctrl").split("+"))?.some(a=>{let d=new Set(a.filter(c=>vi.has(c)));for(let c of vi){let p=c.toLowerCase()+"Key";if(!d.has(c)&&e[p])return!1}return a.every(c=>vi.has(c)?e[c.toLowerCase()+"Key"]:e.key===c.replace("Space"," "))})});return{method:i,value:i?t[i]:null}}#o;#a(e,t){let i=e.shiftKey?10:5;return this.#o=Math.max(0,Math.min((this.#o??this.$state.currentTime())+(t==="seekForward"?+i:-i),this.$state.duration()))}#l=null;#u(e,t){this.#l?.dispatchEvent(new KeyboardEvent(e.type,{key:t?"Right":"Left",shiftKey:e.shiftKey,trigger:e}))}#p(e,t,i){this.$state.canSeek()&&(this.#l||(this.#l=this.el.querySelector("[data-media-time-slider]")),this.#l?this.#u(e,i):this.#e.remote.seeking(this.#a(e,t),e))}},ta=["!","@","#","$","%","^","&","*","(",")"];function ia(s){return s.replace(/Shift\+(\d)/g,(e,t)=>ta[t-1])}var Qn={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:_s,storage:null};var ve={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Kn=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Un=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Wn=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],ue=typeof window<"u"&&typeof window.document<"u"?window.document:{},Me="fullscreenEnabled"in ue&&Object.keys(ve)||Kn[0]in ue&&Kn||Un[0]in ue&&Un||Wn[0]in ue&&Wn||[],ra={requestFullscreen:function(s){return s[Me[ve.requestFullscreen]]()},requestFullscreenFunction:function(s){return s[Me[ve.requestFullscreen]]},get exitFullscreen(){return ue[Me[ve.exitFullscreen]].bind(ue)},get fullscreenPseudoClass(){return":"+Me[ve.fullscreen]},addEventListener:function(s,e,t){return ue.addEventListener(Me[ve[s]],e,t)},removeEventListener:function(s,e,t){return ue.removeEventListener(Me[ve[s]],e,t)},get fullscreenEnabled(){return!!ue[Me[ve.fullscreenEnabled]]},set fullscreenEnabled(s){},get fullscreenElement(){return ue[Me[ve.fullscreenElement]]},set fullscreenElement(s){},get onfullscreenchange(){return ue[("on"+Me[ve.fullscreenchange]).toLowerCase()]},set onfullscreenchange(s){return ue[("on"+Me[ve.fullscreenchange]).toLowerCase()]=s},get onfullscreenerror(){return ue[("on"+Me[ve.fullscreenerror]).toLowerCase()]},set onfullscreenerror(s){return ue[("on"+Me[ve.fullscreenerror]).toLowerCase()]=s}},Le=ra;var At=new xe({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new ut,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:di(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return li&&this.mediaType==="video"&&(!this.playsInline||!Le.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new ut,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new ut,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(B).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){let s=Es(this.buffered)??0;return Math.max(0,s-this.clipStartTime)},get bufferedEnd(){let s=je(this.buffered)??0;return Math.min(this.duration,Math.max(0,s-this.clipStartTime))},get seekableStart(){let s=Es(this.seekable)??0;return Math.max(0,s-this.clipStartTime)},get seekableEnd(){let s=this.canPlay?je(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,s-this.clipStartTime)):s},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,savedState:null}),zn=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),sa=new Set([...zn,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function ks(s,e=!1){let t=e?zn:sa;At.reset(s,i=>t.has(i)),me()}var pt=class extends un{items=[];[k.readonly]=!1;get length(){return this.items.length}get readonly(){return this[k.readonly]}indexOf(e){return this.items.indexOf(e)}getById(e){return e===""?null:this.items.find(t=>t.id===e)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[k.add](e,t){let i=this.items.length;""+i in this||Object.defineProperty(this,i,{get(){return this.items[i]}}),!this.items.includes(e)&&(this.items.push(e),this.dispatchEvent(new R("add",{detail:e,trigger:t})))}[k.remove](e,t){let i=this.items.indexOf(e);i>=0&&(this[k.onRemove]?.(e,t),this.items.splice(i,1),this.dispatchEvent(new R("remove",{detail:e,trigger:t})))}[k.reset](e){for(let t of[...this.items])this[k.remove](t,e);this.items=[],this[k.setReadonly](!1,e),this[k.onReset]?.()}[k.setReadonly](e,t){this[k.readonly]!==e&&(this[k.readonly]=e,this.dispatchEvent(new R("readonly-change",{detail:e,trigger:t})))}};var Vt=Symbol(0),ht=class extends pt{get selected(){return this.items.find(e=>e.selected)??null}get selectedIndex(){return this.items.findIndex(e=>e.selected)}[k.onRemove](e,t){this[k.select](e,!1,t)}[k.add](e,t){e[Vt]=!1,Object.defineProperty(e,"selected",{get(){return this[Vt]},set:i=>{this.readonly||(this[k.onUserSelect]?.(),this[k.select](e,i))}}),super[k.add](e,t)}[k.select](e,t,i){if(t===e?.[Vt])return;let r=this.selected;e&&(e[Vt]=t),(t?r!==e:r===e)&&(r&&(r[Vt]=!1),this.dispatchEvent(new R("change",{detail:{prev:r,current:this.selected},trigger:i})))}};var Ei=class extends ht{#e=!1;switch="current";get auto(){return this.#e||this.readonly}[ge.enableAuto];[k.onUserSelect](){this[ge.setAuto](!1)}[k.onReset](e){this[ge.enableAuto]=void 0,this[ge.setAuto](!1,e)}autoSelect(e){this.readonly||this.#e||!this[ge.enableAuto]||(this[ge.enableAuto]?.(e),this[ge.setAuto](!0,e))}getBySrc(e){return this.items.find(t=>t.src===e)}[ge.setAuto](e,t){this.#e!==e&&(this.#e=e,this.dispatchEvent(new R("auto-change",{detail:e,trigger:t})))}};var Dt=class extends ee{#e;#t;constructor(e,t){super(),this.#e=e,this.#t=t}async onAttach(e){let t=this.$props[this.#e]();if(t==="eager")requestAnimationFrame(this.#t);else if(t==="idle")vn(this.#t);else if(t==="visible"){let i,r=new IntersectionObserver(n=>{this.scope&&n[0].isIntersecting&&(i?.(),i=void 0,this.#t())});r.observe(e),i=x(()=>r.disconnect())}}};var Ti=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}notify(e,...t){this.#e(new R(e,{detail:t?.[0],trigger:t?.[1]}))}async ready(e,t){return We(async()=>{let{logger:i}=this.#t,{autoPlay:r,canPlay:n,started:o,duration:l,seekable:a,buffered:d,remotePlaybackInfo:c,playsInline:p,savedState:h,source:f}=this.#t.$state;if(n())return;let M={duration:e?.duration??l(),seekable:e?.seekable??a(),buffered:e?.buffered??d(),provider:this.#t.$provider()};this.notify("can-play",M,t),me();let L=this.#t.$provider(),{storage:C,qualities:K}=this.#t,{muted:ne,volume:be,clipStartTime:U,playbackRate:pe}=this.#t.$props;await C?.onLoad?.(f());let D=h()?.currentTime,J=h()?.paused,oe=await C?.getTime(),he=D??oe??U(),Ee=J||J!==!1&&!o()&&r();if(L){L.setVolume(await C?.getVolume()??be()),L.setMuted(ne()||!!await C?.getMuted());let Te=await C?.getAudioGain()??1;Te>1&&L.audioGain?.setGain?.(Te),L.setPlaybackRate?.(await C?.getPlaybackRate()??pe()),L.setPlaysInline?.(p()),he>0&&L.setCurrentTime(he)}let ie=await C?.getVideoQuality();if(ie&&K.length){let Te=null,ae=1/0;for(let Z of K){let lt=Math.abs(ie.width-Z.width)+Math.abs(ie.height-Z.height)+(ie.bitrate?Math.abs(ie.bitrate-(Z.bitrate??0)):0);lt<ae&&(Te=Z,ae=lt)}Te&&(Te.selected=!0)}n()&&Ee?await this.#i(t):oe&&oe>0&&this.notify("started",void 0,t),c.set(null)})}async#i(e){let{player:t,$state:{autoPlaying:i,muted:r}}=this.#t;i.set(!0);let n=new R("auto-play-attempt",{trigger:e});try{await t.play(n)}catch{}}};var ws=Le.fullscreenEnabled,xi=class extends F{#e=!1;#t=!1;get active(){return this.#t}get supported(){return ws}onConnect(){y(Le,"fullscreenchange",this.#r.bind(this)),y(Le,"fullscreenerror",this.#s.bind(this)),x(this.#i.bind(this))}async#i(){ws&&await this.exit()}#r(e){let t=Cs(this.el);t!==this.#t&&(t||(this.#e=!1),this.#t=t,this.dispatch("fullscreen-change",{detail:t,trigger:e}))}#s(e){this.#e&&(this.dispatch("fullscreen-error",{detail:null,trigger:e}),this.#e=!1)}async enter(){try{return this.#e=!0,!this.el||Cs(this.el)?void 0:(Yn(),Le.requestFullscreen(this.el))}catch(e){throw this.#e=!1,e}}async exit(){if(!(!this.el||!Cs(this.el)))return Yn(),Le.exitFullscreen()}};function Cs(s){if(Le.fullscreenElement===s)return!0;try{return s.matches(Le.fullscreenPseudoClass)}catch{return!1}}function Yn(){if(!ws)throw Error("[vidstack] no fullscreen API")}var mt=class s extends F{#e=S(this.#o());#t=S(!1);#i;get type(){return this.#e()}get locked(){return this.#t()}get portrait(){return this.#e().startsWith("portrait")}get landscape(){return this.#e().startsWith("landscape")}static supported=di();get supported(){return s.supported}onConnect(){if(this.supported)y(screen.orientation,"change",this.#s.bind(this));else{let e=window.matchMedia("(orientation: landscape)");e.onchange=this.#s.bind(this),x(()=>e.onchange=null)}x(this.#r.bind(this))}async#r(){this.supported&&this.#t()&&await this.unlock()}#s(e){this.#e.set(this.#o()),this.dispatch("orientation-change",{detail:{orientation:m(this.#e),lock:this.#i},trigger:e})}async lock(e){m(this.#t)||this.#i===e||(this.#n(),await screen.orientation.lock(e),this.#t.set(!0),this.#i=e)}async unlock(){m(this.#t)&&(this.#n(),this.#i=void 0,await screen.orientation.unlock(),this.#t.set(!1))}#n(){if(!this.supported)throw Error("[vidstack] no orientation API")}#o(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};var Mi=class{#e=new Map;enqueue(e,t){this.#e.set(e,t)}serve(e){let t=this.peek(e);return this.#e.delete(e),t}peek(e){return this.#e.get(e)}delete(e){this.#e.delete(e)}clear(){this.#e.clear()}};var ft=class{#e=!1;#t=bs();#i=new Map;get size(){return this.#i.size}get isServing(){return this.#e}async waitForFlush(){this.#e||await this.#t.promise}enqueue(e,t){if(this.#e){t();return}this.#i.delete(e),this.#i.set(e,t)}serve(e){this.#i.get(e)?.(),this.#i.delete(e)}start(){this.#r(),this.#e=!0,this.#i.size>0&&this.#r()}stop(){this.#e=!1}reset(){this.stop(),this.#i.clear(),this.#s()}#r(){for(let e of this.#i.keys())this.serve(e);this.#s()}#s(){this.#t.resolve(),this.#t=bs()}};var It=class extends ee{#e=-2;#t=!1;#i=S(!1);#r=S(!1);#s=null;#n=S(!0);defaultDelay=2e3;get canIdle(){return this.#n()}set canIdle(e){this.#n.set(e)}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:e}=this.$props;return this.#i()||e()}set hideOnMouseLeave(e){this.#i.set(e)}get showing(){return this.$state.controlsVisible()}show(e=0,t){this.#h(),this.#t||this.#g(!0,e,t)}hide(e=this.defaultDelay,t){this.#h(),this.#t||this.#g(!1,e,t)}pause(e){this.#t=!0,this.#h(),this.#g(!0,0,e)}resume(e){this.#t=!1,!this.$state.paused()&&this.#g(!1,this.defaultDelay,e)}onConnect(){u(this.#o.bind(this))}#o(){let{viewType:e}=this.$state;if(!this.#n())return;if(e()==="audio"){this.show();return}u(this.#a.bind(this)),u(this.#l.bind(this));let t=this.#u.bind(this),i=this.#p.bind(this);this.listen("can-play",r=>this.show(0,r)),this.listen("play",t),this.listen("pause",i),this.listen("auto-play-fail",i)}#a(){let{started:e,pointer:t,paused:i}=this.$state;if(!e()||t()!=="fine")return;let r=this.hideOnMouseLeave;(!r||!this.#r())&&u(()=>{i()||this.listen("pointermove",this.#f.bind(this))}),r&&(this.listen("mouseenter",this.#c.bind(this)),this.listen("mouseleave",this.#d.bind(this)))}#l(){let{paused:e,started:t,autoPlayError:i}=this.$state;if(e()||i()&&!t())return;let r=this.#f.bind(this);u(()=>{let n=this.$state.pointer(),o=n==="coarse",l=[o?"touchend":"pointerup","keydown"];for(let a of l)this.listen(a,r,{passive:!1})})}#u(e){this.show(0,e),this.hide(void 0,e)}#p(e){this.show(0,e)}#c(e){this.#r.set(!1),this.show(0,e),this.hide(void 0,e)}#d(e){this.#r.set(!0),this.hide(0,e)}#h(){window.clearTimeout(this.#e),this.#e=-1}#f(e){e.MEDIA_GESTURE||this.#t||fi(e)||(ze(e)&&(e.key==="Escape"?(this.el?.focus(),this.#s=null):this.#s&&(e.preventDefault(),requestAnimationFrame(()=>{this.#s?.focus(),this.#s=null}))),this.show(0,e),this.hide(this.defaultDelay,e))}#g(e,t,i){if(t===0){this.#y(e,i);return}this.#e=window.setTimeout(()=>{this.scope&&this.#y(e&&!this.#t,i)},t)}#y(e,t){this.$state.controlsVisible()!==e&&(this.$state.controlsVisible.set(e),!e&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#s=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:e,trigger:t}))}};var Si=class extends ee{#e;#t;#i;controls;#r;#s;#n;#o=new ft;constructor(e,t,i){super(),this.#e=e,this.#t=t,this.#i=i,this.#n=i.$provider,this.controls=new It,this.#r=new xi,this.#s=new mt}onAttach(){this.listen("fullscreen-change",this.#x.bind(this))}onConnect(){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),t=this.#u.bind(this);for(let i of e)i.startsWith("media-")&&this.listen(i,t);this.#a(),u(this.#l.bind(this)),u(this.#f.bind(this)),u(this.#g.bind(this)),u(this.#y.bind(this)),u(this.#M.bind(this)),u(this.#E.bind(this)),u(this.#T.bind(this))}onDestroy(){try{let e=this.createEvent("destroy"),{pictureInPicture:t,fullscreen:i}=this.$state;i()&&this.exitFullscreen("prefer-media",e),t()&&this.exitPictureInPicture(e)}catch{}this.#o.reset()}#a(){let{load:e}=this.$props,{canLoad:t}=this.$state;if(e()!=="play"||t())return;let i=this.listen("media-play-request",r=>{this.#p(r),i()})}#l(){let e=this.#n(),t=this.$state.canPlay();return e&&t&&this.#o.start(),()=>{this.#o.stop()}}#u(e){e.stopPropagation(),!e.defaultPrevented&&this[e.type]&&(m(this.#n)?this[e.type](e):this.#o.enqueue(e.type,()=>{m(this.#n)&&this[e.type](e)}))}async play(e){let{canPlay:t,paused:i,autoPlaying:r}=this.$state;if(this.#p(e)||!m(i))return;e&&this.#t.queue.enqueue("media-play-request",e);let n=m(r);try{let o=m(this.#n);return $s(o,m(t)),await o.play()}catch(o){let l=this.createEvent("play-fail",{detail:pi(o),trigger:e});throw l.autoPlay=n,this.#e.handle(l),o}}#p(e){let{load:t}=this.$props,{canLoad:i}=this.$state;if(t()==="play"&&!i()){let r=this.createEvent("media-start-loading",{trigger:e});return this.dispatchEvent(r),this.#o.enqueue("media-play-request",async()=>{try{await this.play(r)}catch{}}),!0}return!1}async pause(e){let{canPlay:t,paused:i}=this.$state;if(!m(i)){e&&this.#t.queue.enqueue("media-pause-request",e);try{let r=m(this.#n);return $s(r,m(t)),await r.pause()}catch(r){throw this.#t.queue.delete("media-pause-request"),r}}}setAudioGain(e,t){let{audioGain:i,canSetAudioGain:r}=this.$state;if(i()===e)return;let n=this.#n();if(!n?.audioGain||!r())throw Error("[vidstack] audio gain api not available");t&&this.#t.queue.enqueue("media-audio-gain-change-request",t),n.audioGain.setGain(e)}seekToLiveEdge(e){let{canPlay:t,live:i,liveEdge:r,canSeek:n,liveSyncPosition:o,seekableEnd:l,userBehindLiveEdge:a}=this.$state;if(a.set(!1),m(()=>!i()||r()||!n()))return;let d=m(this.#n);$s(d,m(t)),e&&this.#t.queue.enqueue("media-seek-request",e);let c=l()-2;d.setCurrentTime(Math.min(c,o()??c))}#c=!1;async enterFullscreen(e="prefer-media",t){let i=this.#d(e);if(jn(e,i),!i.active)return m(this.$state.pictureInPicture)&&(this.#c=!0,await this.exitPictureInPicture(t)),t&&this.#t.queue.enqueue("media-enter-fullscreen-request",t),i.enter()}async exitFullscreen(e="prefer-media",t){let i=this.#d(e);if(jn(e,i),!!i.active){t&&this.#t.queue.enqueue("media-exit-fullscreen-request",t);try{let r=await i.exit();return this.#c&&m(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),r}finally{this.#c=!1}}}#d(e){let t=m(this.#n);return e==="prefer-media"&&this.#r.supported||e==="media"?this.#r:t?.fullscreen}async enterPictureInPicture(e){if(this.#h(),!this.$state.pictureInPicture())return e&&this.#t.queue.enqueue("media-enter-pip-request",e),await this.#n().pictureInPicture.enter()}async exitPictureInPicture(e){if(this.#h(),!!this.$state.pictureInPicture())return e&&this.#t.queue.enqueue("media-exit-pip-request",e),await this.#n().pictureInPicture.exit()}#h(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#f(){this.controls.defaultDelay=this.$props.controlsDelay()}#g(){let{canSetAudioGain:e}=this.$state,t=!!this.#n()?.audioGain?.supported;e.set(t)}#y(){let{canAirPlay:e}=this.$state,t=!!this.#n()?.airPlay?.supported;e.set(t)}#M(){let{canGoogleCast:e,source:t}=this.$state,i=En&&!bn&&kn(t());e.set(i)}#E(){let{canFullscreen:e}=this.$state,t=this.#r.supported||!!this.#n()?.fullscreen?.supported;e.set(t)}#T(){let{canPictureInPicture:e}=this.$state,t=!!this.#n()?.pictureInPicture?.supported;e.set(t)}async"media-airplay-request"(e){try{await this.requestAirPlay(e)}catch{}}async requestAirPlay(e){try{let t=this.#n()?.airPlay;if(!t?.supported)throw Error("No AirPlay adapter.");return e&&this.#t.queue.enqueue("media-airplay-request",e),await t.prompt()}catch(t){throw this.#t.queue.delete("media-airplay-request"),t}}async"media-google-cast-request"(e){try{await this.requestGoogleCast(e)}catch{}}#v;async requestGoogleCast(e){try{let{canGoogleCast:t}=this.$state;if(!m(t)){let r=Error("Cast not available.");throw r.code="CAST_NOT_AVAILABLE",r}if(Ce("https://www.gstatic.com"),!this.#v){let r=await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-2CP6TF55.js");this.#v=new r.GoogleCastLoader}await this.#v.prompt(this.#i),e&&this.#t.queue.enqueue("media-google-cast-request",e);let i=m(this.$state.remotePlaybackState)!=="disconnected";i&&this.$state.savedState.set({paused:m(this.$state.paused),currentTime:m(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(i?this.#v:null)}catch(t){throw this.#t.queue.delete("media-google-cast-request"),t}}"media-clip-start-change-request"(e){let{clipStartTime:t}=this.$state;t.set(e.detail)}"media-clip-end-change-request"(e){let{clipEndTime:t}=this.$state;t.set(e.detail),this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-duration-change-request"(e){let{providedDuration:t,clipEndTime:i}=this.$state;t.set(e.detail),i()<=0&&this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-audio-track-change-request"(e){let{logger:t,audioTracks:i}=this.#i;if(i.readonly)return;let r=e.detail,n=i[r];if(n){let o=e.type;this.#t.queue.enqueue(o,e),n.selected=!0}}async"media-enter-fullscreen-request"(e){try{await this.enterFullscreen(e.detail,e)}catch(t){this.#m(t,e)}}async"media-exit-fullscreen-request"(e){try{await this.exitFullscreen(e.detail,e)}catch(t){this.#m(t,e)}}async#x(e){let t=m(this.$props.fullscreenOrientation),i=e.detail;if(!(an(t)||t==="none"||!this.#s.supported))if(i){if(this.#s.locked)return;this.dispatch("media-orientation-lock-request",{detail:t,trigger:e})}else this.#s.locked&&this.dispatch("media-orientation-unlock-request",{trigger:e})}#m(e,t){this.#e.handle(this.createEvent("fullscreen-error",{detail:pi(e)}))}async"media-orientation-lock-request"(e){let t=e.type;try{this.#t.queue.enqueue(t,e),await this.#s.lock(e.detail)}catch{this.#t.queue.delete(t)}}async"media-orientation-unlock-request"(e){let t=e.type;try{this.#t.queue.enqueue(t,e),await this.#s.unlock()}catch{this.#t.queue.delete(t)}}async"media-enter-pip-request"(e){try{await this.enterPictureInPicture(e)}catch(t){this.#b(t,e)}}async"media-exit-pip-request"(e){try{await this.exitPictureInPicture(e)}catch(t){this.#b(t,e)}}#b(e,t){this.#e.handle(this.createEvent("picture-in-picture-error",{detail:pi(e)}))}"media-live-edge-request"(e){let{live:t,liveEdge:i,canSeek:r}=this.$state;if(!(!t()||i()||!r())){this.#t.queue.enqueue("media-seek-request",e);try{this.seekToLiveEdge()}catch{this.#t.queue.delete("media-seek-request")}}}async"media-loop-request"(e){try{this.#t.looping=!0,this.#t.replaying=!0,await this.play(e)}catch{this.#t.looping=!1}}"media-user-loop-change-request"(e){this.$state.userPrefersLoop.set(e.detail)}async"media-pause-request"(e){if(!this.$state.paused())try{await this.pause(e)}catch{}}async"media-play-request"(e){if(this.$state.paused())try{await this.play(e)}catch{}}"media-rate-change-request"(e){let{playbackRate:t,canSetPlaybackRate:i}=this.$state;if(t()===e.detail||!i())return;let r=this.#n();r?.setPlaybackRate&&(this.#t.queue.enqueue("media-rate-change-request",e),r.setPlaybackRate(e.detail))}"media-audio-gain-change-request"(e){try{this.setAudioGain(e.detail,e)}catch{}}"media-quality-change-request"(e){let{qualities:t,storage:i,logger:r}=this.#i;if(t.readonly)return;this.#t.queue.enqueue("media-quality-change-request",e);let n=e.detail;if(n<0)t.autoSelect(e),e.isOriginTrusted&&i?.setVideoQuality?.(null);else{let o=t[n];o&&(o.selected=!0,e.isOriginTrusted&&i?.setVideoQuality?.({id:o.id,width:o.width,height:o.height,bitrate:o.bitrate}))}}"media-pause-controls-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.controls.pause(e)}"media-resume-controls-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.controls.resume(e)}"media-seek-request"(e){let{seekableStart:t,seekableEnd:i,ended:r,canSeek:n,live:o,userBehindLiveEdge:l,clipStartTime:a}=this.$state,d=e.detail;r()&&(this.#t.replaying=!0);let c=e.type;this.#t.seeking=!1,this.#t.queue.delete(c);let p=d+a(),h=Math.floor(p)===Math.floor(i()),f=h?i():Math.min(Math.max(t()+.1,p),i()-.1);!Number.isFinite(f)||!n()||(this.#t.queue.enqueue(c,e),this.#n().setCurrentTime(f),o()&&e.isOriginTrusted&&Math.abs(i()-f)>=2&&l.set(!0))}"media-seeking-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.$state.seeking.set(!0),this.#t.seeking=!0}"media-start-loading"(e){if(this.$state.canLoad())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#e.handle(this.createEvent("can-load"))}"media-poster-start-loading"(e){if(this.$state.canLoadPoster())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#e.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(e){let{index:t,mode:i}=e.detail,r=this.#i.textTracks[t];if(r){let n=e.type;this.#t.queue.enqueue(n,e),r.setMode(i,e)}}"media-mute-request"(e){if(this.$state.muted())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#n().setMuted(!0)}"media-unmute-request"(e){let{muted:t,volume:i}=this.$state;if(!t())return;let r=e.type;this.#t.queue.enqueue(r,e),this.#i.$provider().setMuted(!1),i()===0&&(this.#t.queue.enqueue(r,e),this.#n().setVolume(.25))}"media-volume-change-request"(e){let{muted:t,volume:i}=this.$state,r=e.detail;if(i()===r)return;let n=e.type;this.#t.queue.enqueue(n,e),this.#n().setVolume(r),r>0&&t()&&(this.#t.queue.enqueue(n,e),this.#n().setMuted(!1))}#S(e,t,i){}};function $s(s,e){if(!(s&&e))throw Error("[vidstack] media not ready")}function jn(s,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}var Pi=class{seeking=!1;looping=!1;replaying=!1;queue=new Mi};var _i=na;function na(s,e,t){var i=null,r=null,n=function(){i&&(clearTimeout(i),r=null,i=null)},o=function(){var a=r;n(),a&&a()},l=function(){if(!e)return s.apply(this,arguments);var a=this,d=arguments,c=t&&!i;if(n(),r=function(){s.apply(a,d)},i=setTimeout(function(){if(i=null,!c){var p=r;return r=null,p()}},e),c)return r()};return l.cancel=n,l.flush=o,l}var Re=oa;function oa(s,e,t){var i=null,r=null,n=t&&t.leading,o=t&&t.trailing;n==null&&(n=!0),o==null&&(o=!n),n==!0&&(o=!1);var l=function(){i&&(clearTimeout(i),i=null)},a=function(){var c=r;l(),c&&c()},d=function(){var c=n&&!i,p=this,h=arguments;if(r=function(){return s.apply(p,h)},i||(i=setTimeout(function(){if(i=null,o)return r()},e)),c)return c=!1,r()};return d.cancel=l,d.flush=a,d}function qt(s){return!E(s)&&"width"in s&&"height"in s&&fe(s.width)&&fe(s.height)}var Xn=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);var ki=class extends ee{#e;#t;#i=new Map;#r=!1;#s=[];#n=[-1,-1];#o=!1;#a;constructor(e,t){super(),this.#e=e,this.#t=t}onAttach(e){e.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(e){u(this.#w.bind(this)),this.#h(),this.#f(),this.#g(),this.#u(),x(this.#p.bind(this))}onDestroy(){let{audioTracks:e,qualities:t,textTracks:i}=this.#t;e[k.reset](),t[k.reset](),i[k.reset](),this.#P()}handle(e){if(!this.scope)return;let t=e.type;We(()=>this[e.type]?.(e)),Xn.has(t)&&this.#i.set(t,e),this.dispatch(e)}#l=!1;#u(){this.#l&&(requestAnimationFrame(()=>{this.scope&&this.#t.remote.play(new R("dom-connect"))}),this.#l=!1)}#p(){this.#l||(this.#l=!this.$state.paused(),this.#t.$provider()?.pause())}#c(){this.#V(),this.#r=!1,this.#e.replaying=!1,this.#e.looping=!1,this.#o=!1,this.#a=void 0,this.#i.clear()}#d(e,t){let i=this.#e.queue.serve(e);i&&(t.request=i,t.triggers.add(i))}#h(){this.#y(),this.#M();let e=this.#t.textTracks;y(e,"add",this.#y.bind(this)),y(e,"remove",this.#y.bind(this)),y(e,"mode-change",this.#M.bind(this))}#f(){let e=this.#t.qualities;y(e,"add",this.#v.bind(this)),y(e,"remove",this.#v.bind(this)),y(e,"change",this.#x.bind(this)),y(e,"auto-change",this.#m.bind(this)),y(e,"readonly-change",this.#_.bind(this))}#g(){let e=this.#t.audioTracks;y(e,"add",this.#E.bind(this)),y(e,"remove",this.#E.bind(this)),y(e,"change",this.#T.bind(this))}#y(e){let{textTracks:t}=this.$state;t.set(this.#t.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:t(),trigger:e})}#M(e){e&&this.#d("media-text-track-change-request",e);let t=this.#t.textTracks.selected,{textTrack:i}=this.$state;i()!==t&&(i.set(t),this.dispatch("text-track-change",{detail:t,trigger:e}))}#E(e){let{audioTracks:t}=this.$state;t.set(this.#t.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:t(),trigger:e})}#T(e){let{audioTrack:t}=this.$state;t.set(this.#t.audioTracks.selected),e&&this.#d("media-audio-track-change-request",e),this.dispatch("audio-track-change",{detail:t(),trigger:e})}#v(e){let{qualities:t}=this.$state;t.set(this.#t.qualities.toArray()),this.dispatch("qualities-change",{detail:t(),trigger:e})}#x(e){let{quality:t}=this.$state;t.set(this.#t.qualities.selected),e&&this.#d("media-quality-change-request",e),this.dispatch("quality-change",{detail:t(),trigger:e})}#m(){let{qualities:e}=this.#t,t=e.auto;this.$state.autoQuality.set(t),t||this.#P()}#b=null;#S(){this.#P(),this.#b=u(()=>{let{qualities:e}=this.#t,{mediaWidth:t,mediaHeight:i}=this.$state,r=t(),n=i();if(r===0||n===0)return;let o=null,l=1/0;for(let a of e){let d=Math.abs(a.width-r)+Math.abs(a.height-n);d<l&&(l=d,o=a)}o&&e[k.select](o,!0,new R("resize",{detail:{width:r,height:n}}))})}#P(){this.#b?.(),this.#b=null}#_(){this.$state.canSetQuality.set(!this.#t.qualities.readonly)}#w(){let{canSetVolume:e,isGoogleCastConnected:t}=this.$state;if(t()){e.set(!1);return}xn().then(e.set)}"provider-change"(e){let t=this.#t.$provider(),i=e.detail;t?.type!==i?.type&&(t?.destroy?.(),t?.scope?.dispose(),this.#t.$provider.set(e.detail),t&&e.detail===null&&this.#C(e))}"provider-loader-change"(e){}"auto-play"(e){this.$state.autoPlayError.set(null)}"auto-play-fail"(e){this.$state.autoPlayError.set(e.detail),this.#c()}"can-load"(e){this.$state.canLoad.set(!0),this.#i.set("can-load",e),this.#t.textTracks[N.canLoad](),this.#d("media-start-loading",e)}"can-load-poster"(e){this.$state.canLoadPoster.set(!0),this.#i.set("can-load-poster",e),this.#d("media-poster-start-loading",e)}"media-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.$state.viewType();this.$state.mediaType.set(e.detail);let r=this.$state.providedViewType(),n=r==="unknown"?e.detail:r;i!==n&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(e.detail),this.dispatch("view-type-change",{detail:n,trigger:e}))})},0)}"stream-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let{streamType:i,inferredStreamType:r}=this.$state;r.set(e.detail),e.detail=i()}"rate-change"(e){let{storage:t}=this.#t,{canPlay:i}=this.$state;this.$state.playbackRate.set(e.detail),this.#d("media-rate-change-request",e),i()&&t?.setPlaybackRate?.(e.detail)}"remote-playback-change"(e){let{remotePlaybackState:t,remotePlaybackType:i}=this.$state,{type:r,state:n}=e.detail,o=n==="connected";i.set(r),t.set(n);let l=r==="airplay"?"media-airplay-request":"media-google-cast-request";if(o)this.#d(l,e);else{let a=this.#e.queue.peek(l);a&&(e.request=a,e.triggers.add(a))}}"sources-change"(e){let t=this.$state.sources(),i=e.detail;this.$state.sources.set(i),this.#$(t,i,e)}#$(e,t,i){let{qualities:r}=this.#t,n=!1,o=!1;for(let l of e){if(!qt(l))continue;if(!t.some(d=>d.src===l.src)){let d=r.getBySrc(l.src);d&&(r[k.remove](d,i),o=!0)}}o&&!r.length&&(this.$state.savedState.set(null),r[k.reset](i));for(let l of t){if(!qt(l)||r.getBySrc(l.src))continue;let a={id:l.id??l.height+"p",bitrate:null,codec:null,...l,selected:!1};r[k.add](a,i),n=!0}n&&!r[ge.enableAuto]&&(this.#S(),r[ge.enableAuto]=this.#S.bind(this),r[ge.setAuto](!0,i))}"source-change"(e){e.isQualityChange=e.originEvent?.type==="quality-change";let t=e.detail;this.#C(e,e.isQualityChange),this.#i.set(e.type,e),this.$state.source.set(t),this.el?.setAttribute("aria-busy","true")}#C(e,t=!1){let{audioTracks:i,qualities:r}=this.#t;if(!t){this.#s=[],this.#n=[-1,-1],i[k.reset](e),r[k.reset](e),ks(this.$state,t),this.#c();return}ks(this.$state,t),this.#c()}abort(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.#i.get("can-load");i&&!e.triggers.hasType("can-load")&&e.triggers.add(i)}"load-start"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t)}error(e){this.$state.error.set(e.detail);let t=this.#i.get("abort");t&&e.triggers.add(t)}"loaded-metadata"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"loaded-data"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"can-play"(e){let t=this.#i.get("loaded-metadata");t&&e.triggers.add(t),this.#L(e.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(e){this.#L(e.detail);let t=this.#i.get("can-play");t&&e.triggers.add(t)}#L(e){let{seekable:t,buffered:i,intrinsicDuration:r,canPlay:n}=this.$state;n.set(!0),i.set(e.buffered),t.set(e.seekable);let o=je(e.seekable)??1/0;r.set(o)}"duration-change"(e){let{live:t,intrinsicDuration:i,providedDuration:r,clipEndTime:n,ended:o}=this.$state,l=e.detail;if(!t()){let a=Number.isNaN(l)?0:l;i.set(a),o()&&this.#A(e)}(r()>0||n()>0)&&e.stopImmediatePropagation()}progress(e){let{buffered:t,bufferedEnd:i,seekable:r,seekableEnd:n,live:o,intrinsicDuration:l}=this.$state,{buffered:a,seekable:d}=e.detail,c=je(a)??1/0,p=a.length!==t().length,h=c>i(),f=je(d)??1/0,M=d.length!==r().length,L=f>n();(p||h)&&t.set(a),(M||L)&&r.set(d),o()&&(l.set(f),this.dispatch("duration-change",{detail:f,trigger:e}))}play(e){let{paused:t,autoPlayError:i,ended:r,autoPlaying:n,playsInline:o,pointer:l,muted:a,viewType:d,live:c,userBehindLiveEdge:p}=this.$state;if(this.#R(),!t()){e.stopImmediatePropagation();return}e.autoPlay=n();let h=this.#i.get("waiting");h&&e.triggers.add(h),this.#d("media-play-request",e),this.#i.set("play",e),t.set(!1),i.set(null),e.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:a()},trigger:e})),n.set(!1)),(r()||this.#e.replaying)&&(this.#e.replaying=!1,r.set(!1),this.handle(this.createEvent("replay",{trigger:e}))),!o()&&d()==="video"&&l()==="coarse"&&this.#t.remote.enterFullscreen("prefer-media",e),c()&&!p()&&this.#t.remote.seekToLiveEdge(e)}#R(e){if(!m(this.#t.$provider))return;let{ended:i,seekableStart:r,clipStartTime:n,clipEndTime:o,realCurrentTime:l,duration:a}=this.$state,d=l()<n()||o()>0&&l()>=o()||Math.abs(l()-a())<.1||i();return d&&this.dispatch("media-seek-request",{detail:(n()>0?0:r())+.1,trigger:e}),d}"play-fail"(e){let{muted:t,autoPlaying:i}=this.$state,r=this.#i.get("play");r&&e.triggers.add(r),this.#d("media-play-request",e);let{paused:n,playing:o}=this.$state;n.set(!0),o.set(!1),this.#c(),this.#i.set("play-fail",e),e.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:t(),error:e.detail},trigger:e})),i.set(!1))}playing(e){let t=this.#i.get("play"),i=this.#i.get("seeked");t?e.triggers.add(t):i&&e.triggers.add(i),setTimeout(()=>this.#c(),0);let{paused:r,playing:n,live:o,liveSyncPosition:l,seekableEnd:a,started:d,currentTime:c,seeking:p,ended:h}=this.$state;if(r.set(!1),n.set(!0),p.set(!1),h.set(!1),this.#e.looping){this.#e.looping=!1;return}if(o()&&!d()&&c()===0){let f=l()??a()-2;Number.isFinite(f)&&this.#t.$provider().setCurrentTime(f)}this.started(e)}started(e){let{started:t}=this.$state;t()||(t.set(!0),this.handle(this.createEvent("started",{trigger:e})))}pause(e){this.el?.isConnected||(this.#l=!0),this.#d("media-pause-request",e);let t=this.#i.get("seeked");t&&e.triggers.add(t);let{paused:i,playing:r}=this.$state;i.set(!0),r.set(!1),this.#r&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:e})),this.#r=!1},0),this.#c()}"time-change"(e){if(this.#e.looping){e.stopImmediatePropagation();return}let{waiting:t,played:i,clipEndTime:r,realCurrentTime:n,currentTime:o}=this.$state,l=e.detail,a=r();n.set(l),this.#D(),t.set(!1);for(let d of this.#t.textTracks)d[N.updateActiveCues](l,e);a>0&&l>=a&&(this.#r=!0,this.dispatch("media-pause-request",{trigger:e})),this.#I(),this.dispatch("time-update",{detail:{currentTime:o(),played:i()},trigger:e})}#D(){let{currentTime:e,played:t,paused:i}=this.$state;i()||(this.#n=Sn(this.#s,this.#n,e()),t.set(new ut(this.#s)))}#A(e){let{clipStartTime:t,clipEndTime:i,duration:r}=this.$state;t()>0||i()>0||this.handle(this.createEvent("time-change",{detail:r(),trigger:e}))}#I(){let{storage:e}=this.#t,{canPlay:t,realCurrentTime:i}=this.$state;t()&&e?.setTime?.(i())}"audio-gain-change"(e){let{storage:t}=this.#t,{canPlay:i,audioGain:r}=this.$state;r.set(e.detail),this.#d("media-audio-gain-change-request",e),i()&&t?.setAudioGain?.(r())}"volume-change"(e){let{storage:t}=this.#t,{volume:i,muted:r,canPlay:n}=this.$state,o=e.detail;i.set(o.volume),r.set(o.muted||o.volume===0),this.#d("media-volume-change-request",e),this.#d(o.muted?"media-mute-request":"media-unmute-request",e),n()&&(t?.setVolume?.(i()),t?.setMuted?.(r()))}seeking=Re(e=>{let{seeking:t,realCurrentTime:i,paused:r}=this.$state;t.set(!0),i.set(e.detail),this.#d("media-seeking-request",e),r()&&(this.#a=e,this.#k()),this.#n=[-1,-1]},150,{leading:!0});seeked(e){let{seeking:t,currentTime:i,realCurrentTime:r,paused:n,seekableEnd:o,ended:l}=this.$state;if(this.#e.seeking)t.set(!0),e.stopImmediatePropagation();else if(t()){let a=this.#i.get("waiting");a&&e.triggers.add(a);let d=this.#i.get("seeking");d&&!e.triggers.has(d)&&e.triggers.add(d),n()&&this.#V(),t.set(!1),r.set(e.detail),this.#d("media-seek-request",e);let c=e?.originEvent;c?.isTrusted&&!(c instanceof MessageEvent)&&!/seek/.test(c.type)&&this.started(e)}Math.floor(i())!==Math.floor(o())?l.set(!1):this.end(e)}waiting(e){this.#o||this.#e.seeking||(e.stopImmediatePropagation(),this.#a=e,this.#k())}#k=_i(()=>{if(!this.#a)return;this.#o=!0;let{waiting:e,playing:t}=this.$state;e.set(!0),t.set(!1);let i=this.createEvent("waiting",{trigger:this.#a});this.#i.set("waiting",i),this.dispatch(i),this.#a=void 0,this.#o=!1},300);end(e){let{loop:t,ended:i}=this.$state;if(!(!t()&&i())){if(t()){setTimeout(()=>{requestAnimationFrame(()=>{this.#R(e),this.dispatch("media-loop-request",{trigger:e})})},10);return}setTimeout(()=>this.#q(e),0)}}#q(e){let{storage:t}=this.#t,{paused:i,seeking:r,ended:n,duration:o}=this.$state;this.#A(e),i()||this.dispatch("pause",{trigger:e}),r()&&this.dispatch("seeked",{detail:o(),trigger:e}),n.set(!0),this.#c(),t?.setTime?.(o(),!0),this.dispatch("ended",{trigger:e})}#V(){this.#k.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(e){let t=e.detail;this.$state.fullscreen.set(t),this.#d(t?"media-enter-fullscreen-request":"media-exit-fullscreen-request",e)}"fullscreen-error"(e){this.#d("media-enter-fullscreen-request",e),this.#d("media-exit-fullscreen-request",e)}"orientation-change"(e){let t=e.detail.lock;this.#d(t?"media-orientation-lock-request":"media-orientation-unlock-request",e)}"picture-in-picture-change"(e){let t=e.detail;this.$state.pictureInPicture.set(t),this.#d(t?"media-enter-pip-request":"media-exit-pip-request",e)}"picture-in-picture-error"(e){this.#d("media-enter-pip-request",e),this.#d("media-exit-pip-request",e)}"title-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredTitle.set(e.detail))}"poster-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredPoster.set(e.detail))}};var Ci=class extends ee{onSetup(){this.#e();let e=[this.#r,this.#n,this.#d,this.#h,this.#a,this.#u,this.#p,this.#f,this.#y,this.#g,this.#o,this.#c,this.#l,this.#t,this.#s];for(let t of e)u(t.bind(this))}#e(){let e={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},t=new Set(["currentTime","paused","playbackRate","volume"]);for(let i of Object.keys(this.$props))t.has(i)||this.$state[e[i]??i]?.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}#t(){let{viewType:e,streamType:t,title:i,poster:r,loop:n}=this.$props,o=this.$state;o.providedPoster.set(r()),o.providedStreamType.set(t()),o.providedViewType.set(e()),o.providedTitle.set(i()),o.providedLoop.set(n())}#i(){}#r(){let{artist:e,artwork:t}=this.$props;this.$state.artist.set(e()),this.$state.artwork.set(t())}#s(){let{title:e}=this.$state;this.dispatch("title-change",{detail:e()})}#n(){let e=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(e),this.dispatch("auto-play-change",{detail:e})}#o(){let e=this.$state.loop();this.dispatch("loop-change",{detail:e})}#a(){let e=this.$props.controls();this.$state.controls.set(e)}#l(){let{poster:e}=this.$state;this.dispatch("poster-change",{detail:e()})}#u(){let e=this.$props.crossOrigin()??this.$props.crossorigin(),t=e===!0?"":e;this.$state.crossOrigin.set(t)}#p(){let{duration:e}=this.$props;this.dispatch("media-duration-change-request",{detail:e()})}#c(){let e=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(e),this.dispatch("plays-inline-change",{detail:e})}#d(){let{clipStartTime:e}=this.$props;this.dispatch("media-clip-start-change-request",{detail:e()})}#h(){let{clipEndTime:e}=this.$props;this.dispatch("media-clip-end-change-request",{detail:e()})}#f(){this.dispatch("live-change",{detail:this.$state.live()})}#g(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#y(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}};var Ot=class{playerId="vds-player";mediaId=null;#e={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#e.volume}async setVolume(e){this.#e.volume=e,this.save()}async getMuted(){return this.#e.muted}async setMuted(e){this.#e.muted=e,this.save()}async getTime(){return this.#e.time}async setTime(e,t){let i=e<0;this.#e.time=i?null:e,i||t?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#e.lang}async setLang(e){this.#e.lang=e,this.save()}async getCaptions(){return this.#e.captions}async setCaptions(e){this.#e.captions=e,this.save()}async getPlaybackRate(){return this.#e.rate}async setPlaybackRate(e){this.#e.rate=e,this.save()}async getAudioGain(){return this.#e.audioGain}async setAudioGain(e){this.#e.audioGain=e,this.save()}async getVideoQuality(){return this.#e.quality}async setVideoQuality(e){this.#e.quality=e,this.save()}onChange(e,t,i="vds-player"){let r=i?localStorage.getItem(i):null,n=t?localStorage.getItem(t):null;this.playerId=i,this.mediaId=t,this.#e={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...r?JSON.parse(r):{},time:n?+n:null}}save(){if(!this.playerId)return;let e=JSON.stringify({...this.#e,time:void 0});localStorage.setItem(this.playerId,e)}saveTimeThrottled=Re(this.saveTime.bind(this),1e3);saveTime(){if(!this.mediaId)return;let e=(this.#e.time??0).toString();localStorage.setItem(this.mediaId,e)}};var Jn=["play","pause","seekforward","seekbackward","seekto"],wi=class extends ee{onConnect(){u(this.#t.bind(this)),u(this.#i.bind(this));let e=this.#r.bind(this);for(let t of Jn)navigator.mediaSession.setActionHandler(t,e);x(this.#e.bind(this))}#e(){for(let e of Jn)navigator.mediaSession.setActionHandler(e,null)}#t(){let{title:e,artist:t,artwork:i,poster:r}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:e(),artist:t(),artwork:i()??[{src:r()}]})}#i(){let{canPlay:e,paused:t}=this.$state;navigator.mediaSession.playbackState=e()?t()?"paused":"playing":"none"}#r(e){let t=new R("media-session-action",{detail:e});switch(e.action){case"play":this.dispatch("media-play-request",{trigger:t});break;case"pause":this.dispatch("media-pause-request",{trigger:t});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:fe(e.seekTime)?e.seekTime:this.$state.currentTime()+(e.seekOffset??10),trigger:t});break}}};var Ht=class{#e=null;#t=null;#i=-1;#r;constructor(e=void 0){this.#r=e}setTarget(e){this.#e=e}getPlayer(e){return this.#t?this.#t:((e??this.#e)?.dispatchEvent(new R("find-media-player",{detail:t=>void(this.#t=t),bubbles:!0,composed:!0})),this.#t)}setPlayer(e){this.#t=e}startLoading(e){this.#s("media-start-loading",e)}startLoadingPoster(e){this.#s("media-poster-start-loading",e)}requestAirPlay(e){this.#s("media-airplay-request",e)}requestGoogleCast(e){this.#s("media-google-cast-request",e)}play(e){this.#s("media-play-request",e)}pause(e){this.#s("media-pause-request",e)}mute(e){this.#s("media-mute-request",e)}unmute(e){this.#s("media-unmute-request",e)}enterFullscreen(e,t){this.#s("media-enter-fullscreen-request",t,e)}exitFullscreen(e,t){this.#s("media-exit-fullscreen-request",t,e)}lockScreenOrientation(e,t){this.#s("media-orientation-lock-request",t,e)}unlockScreenOrientation(e){this.#s("media-orientation-unlock-request",e)}enterPictureInPicture(e){this.#s("media-enter-pip-request",e)}exitPictureInPicture(e){this.#s("media-exit-pip-request",e)}seeking(e,t){this.#s("media-seeking-request",t,e)}seek(e,t){this.#s("media-seek-request",t,e)}seekToLiveEdge(e){this.#s("media-live-edge-request",e)}changeDuration(e,t){this.#s("media-duration-change-request",t,e)}changeClipStart(e,t){this.#s("media-clip-start-change-request",t,e)}changeClipEnd(e,t){this.#s("media-clip-end-change-request",t,e)}changeVolume(e,t){this.#s("media-volume-change-request",t,Math.max(0,Math.min(1,e)))}changeAudioTrack(e,t){this.#s("media-audio-track-change-request",t,e)}changeQuality(e,t){this.#s("media-quality-change-request",t,e)}requestAutoQuality(e){this.changeQuality(-1,e)}changeTextTrackMode(e,t,i){this.#s("media-text-track-change-request",i,{index:e,mode:t})}changePlaybackRate(e,t){this.#s("media-rate-change-request",t,e)}changeAudioGain(e,t){this.#s("media-audio-gain-change-request",t,e)}resumeControls(e){this.#s("media-resume-controls-request",e)}pauseControls(e){this.#s("media-pause-controls-request",e)}togglePaused(e){let t=this.getPlayer(e?.target);t&&(t.state.paused?this.play(e):this.pause(e))}toggleControls(e){let t=this.getPlayer(e?.target);t&&(t.controls.showing?t.controls.hide(0,e):t.controls.show(0,e))}toggleMuted(e){let t=this.getPlayer(e?.target);t&&(t.state.muted?this.unmute(e):this.mute(e))}toggleFullscreen(e,t){let i=this.getPlayer(t?.target);i&&(i.state.fullscreen?this.exitFullscreen(e,t):this.enterFullscreen(e,t))}togglePictureInPicture(e){let t=this.getPlayer(e?.target);t&&(t.state.pictureInPicture?this.exitPictureInPicture(e):this.enterPictureInPicture(e))}showCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,r=this.#i;(!i[r]||!B(i[r]))&&(r=-1),r===-1&&(r=i.findIndex(n=>B(n)&&n.default)),r===-1&&(r=i.findIndex(n=>B(n))),r>=0&&this.changeTextTrackMode(r,"showing",e),this.#i=-1}disableCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,r=t.state.textTrack;if(r){let n=i.indexOf(r);this.changeTextTrackMode(n,"disabled",e),this.#i=n}}toggleCaptions(e){let t=this.getPlayer(e?.target);t&&(t.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(e,t){this.#s("media-user-loop-change-request",t,e)}#s(e,t,i){let r=new R(e,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:t}),n=t?.target||null;n&&n instanceof b&&(n=n.el),n=!n||n===document||n===window||n===document.body||this.#t?.el&&n instanceof Node&&!this.#t.el.contains(n)?this.#e??this.getPlayer()?.el:n??this.#e,this.#t?e==="media-play-request"&&!this.#t.state.canLoad?n?.dispatchEvent(r):this.#t.canPlayQueue.enqueue(e,()=>n?.dispatchEvent(r)):n?.dispatchEvent(r)}#n(e){}};var $i=class extends ht{};var Li=class{priority=0;#e=!0;#t=null;#i=null;#r=new Set;canRender(e,t){return!!t}attach(e){this.#t=e,e&&(e.textTracks.onchange=this.#a.bind(this))}addTrack(e){this.#r.add(e),this.#s(e)}removeTrack(e){e[N.native]?.remove?.(),e[N.native]=null,this.#r.delete(e)}changeTrack(e){let t=e?.[N.native];t&&t.track.mode!=="showing"&&(t.track.mode="showing"),this.#i=e}setDisplay(e){this.#e=e,this.#a()}detach(){this.#t&&(this.#t.textTracks.onchange=null);for(let e of this.#r)this.removeTrack(e);this.#r.clear(),this.#t=null,this.#i=null}#s(e){if(!this.#t)return;let t=e[N.native]??=this.#n(e);$e(t)&&(this.#t.append(t),t.track.mode=t.default?"showing":"disabled")}#n(e){let t=document.createElement("track"),i=e.default||e.mode==="showing",r=e.src&&e.type==="vtt";return t.id=e.id,t.src=r?e.src:"",t.label=e.label,t.kind=e.kind,t.default=i,e.language&&(t.srclang=e.language),i&&!r&&this.#o(e,t.track),t}#o(e,t){if(!(e.src&&e.type==="vtt"||t.cues?.length))for(let i of e.cues)t.addCue(i)}#a(e){for(let t of this.#r){let i=t[N.native];if(!i)continue;if(!this.#e){i.track.mode=i.managed?"hidden":"disabled";continue}let r=i.track.mode==="showing";r&&this.#o(t,i.track),t.setMode(r?"showing":"disabled",e)}}};var Ri=class{#e=null;#t;#i=[];#r;#s=!1;#n=null;#o=null;constructor(e){this.#r=e;let t=e.textTracks;this.#t=t,u(this.#a.bind(this)),x(this.#h.bind(this)),y(t,"add",this.#p.bind(this)),y(t,"remove",this.#c.bind(this)),y(t,"mode-change",this.#d.bind(this))}#a(){let{nativeControls:e}=this.#r.$state;this.#s=e(),this.#d()}add(e){this.#i.push(e),We(this.#d.bind(this))}remove(e){e.detach(),this.#i.splice(this.#i.indexOf(e),1),We(this.#d.bind(this))}attachVideo(e){requestAnimationFrame(()=>{if(this.#e=e,e){this.#n=new Li,this.#n.attach(e);for(let t of this.#t)this.#l(t)}this.#d()})}#l(e){B(e)&&this.#n?.addTrack(e)}#u(e){B(e)&&this.#n?.removeTrack(e)}#p(e){this.#l(e.detail)}#c(e){this.#u(e.detail)}#d(){let e=this.#t.selected;if(this.#e&&(this.#s||e?.[N.nativeHLS])){this.#o?.changeTrack(null),this.#n?.setDisplay(!0),this.#n?.changeTrack(e);return}if(this.#n?.setDisplay(!1),this.#n?.changeTrack(null),!e){this.#o?.changeTrack(null);return}let t=this.#i.sort((i,r)=>i.priority-r.priority).find(i=>i.canRender(e,this.#e));this.#o!==t&&(this.#o?.detach(),t?.attach(this.#e),this.#o=t??null),t?.changeTrack(e)}#h(){this.#n?.detach(),this.#n=null,this.#o?.detach(),this.#o=null}};var Ai=class extends pt{#e=!1;#t={};#i=null;#r=null;[N.crossOrigin];constructor(){super()}get selected(){return this.items.find(t=>t.mode==="showing"&&B(t))??null}get selectedIndex(){let e=this.selected;return e?this.indexOf(e):-1}get preferredLang(){return this.#r}set preferredLang(e){this.#r=e,this.#u(e)}add(e,t){let i=e instanceof Xe,r=i?e:new Xe(e),n=e.kind==="captions"||e.kind==="subtitles"?"captions":e.kind;return this.#t[n]&&e.default&&delete e.default,r.addEventListener("mode-change",this.#o),this[k.add](r,t),r[N.crossOrigin]=this[N.crossOrigin],this.#e&&r[N.canLoad](),e.default&&(this.#t[n]=r),this.#s(),this}remove(e,t){if(this.#n=e,!!this.items.includes(e))return e===this.#t[e.kind]&&delete this.#t[e.kind],e.mode="disabled",e[N.onModeChange]=null,e.removeEventListener("mode-change",this.#o),this[k.remove](e,t),this.#n=null,this}clear(e){for(let t of[...this.items])this.remove(t,e);return this}getByKind(e){let t=Array.isArray(e)?e:[e];return this.items.filter(i=>t.includes(i.kind))}[N.canLoad](){if(!this.#e){for(let e of this.items)e[N.canLoad]();this.#e=!0,this.#s()}}#s=_i(async()=>{if(!this.#e)return;!this.#r&&this.#i&&(this.#r=await this.#i.getLang());let e=await this.#i?.getCaptions(),t=[["captions","subtitles"],"chapters","descriptions","metadata"];for(let i of t){let r=this.getByKind(i);if(r.find(d=>d.mode==="showing"))continue;let n=this.#r?r.find(d=>d.language===this.#r):null,o=W(i)?this.#t[i.find(d=>this.#t[d])||""]:this.#t[i],l=n??o,a=l&&B(l);l&&(!a||e!==!1)&&(l.mode="showing",a&&this.#l(l))}},300);#n=null;#o=this.#a.bind(this);#a(e){let t=e.detail;if(this.#i&&B(t)&&t!==this.#n&&this.#l(t),t.mode==="showing"){let i=B(t)?["captions","subtitles"]:[t.kind];for(let r of this.items)r.mode==="showing"&&r!=t&&i.includes(r.kind)&&(r.mode="disabled")}this.dispatchEvent(new R("mode-change",{detail:e.detail,trigger:e}))}#l(e){e.mode!=="disabled"&&this.#u(e.language),this.#i?.setCaptions?.(e.mode==="showing")}#u(e){this.#i?.setLang?.(this.#r=e)}setStorage(e){this.#i=e}};var Ls=S(!1);y(document,"pointerdown",()=>{Ls.set(!1)}),y(document,"keydown",s=>{s.metaKey||s.altKey||s.ctrlKey||Ls.set(!0)});var te=class extends F{#e=S(!1);onConnect(e){u(()=>{if(!Ls()){this.#e.set(!1),Vi(e,!1),this.listen("pointerenter",this.#r.bind(this)),this.listen("pointerleave",this.#s.bind(this));return}let t=document.activeElement===e;this.#e.set(t),Vi(e,t),this.listen("focus",this.#t.bind(this)),this.listen("blur",this.#i.bind(this))})}focused(){return this.#e()}#t(){this.#e.set(!0),Vi(this.el,!0)}#i(){this.#e.set(!1),Vi(this.el,!1)}#r(){Zn(this.el,!0)}#s(){Zn(this.el,!1)}};function Vi(s,e){v(s,"data-focus",e),v(s,"data-hocus",e)}function Zn(s,e){v(s,"data-hocus",e),v(s,"data-hover",e)}var Di=class s extends b{static props=Qn;static state=At;#e;#t;#i;canPlayQueue=new ft;remoteControl;get#r(){return this.#e.$provider()}get#s(){return this.$props}constructor(){super(),new Ci;let e={player:this,qualities:new Ei,audioTracks:new $i,storage:null,$provider:S(null),$providerSetup:S(!1),$props:this.$props,$state:this.$state};e.remote=this.remoteControl=new Ht(void 0),e.remote.setPlayer(this),e.textTracks=new Ai,e.textTracks[N.crossOrigin]=this.$state.crossOrigin,e.textRenderers=new Ri(e),e.ariaKeys={},this.#e=e,z(yi,e),this.orientation=new mt,new te,new bi(e);let t=new Pi;this.#t=new ki(t,e),this.#i=new Si(this.#t,t,e),e.delegate=new Ti(this.#t.handle.bind(this.#t),e),e.notify=e.delegate.notify.bind(e.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new wi,new Dt("load",this.startLoading.bind(this)),new Dt("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){this.#u(),u(this.#l.bind(this)),u(this.#g.bind(this)),u(this.#h.bind(this)),u(this.#T.bind(this)),u(this.#M.bind(this)),u(this.#b.bind(this)),u(this.#x.bind(this))}onAttach(e){e.setAttribute("data-media-player",""),w(e,"tabindex","0"),w(e,"role","region"),u(this.#P.bind(this)),u(this.#o.bind(this)),u(this.#a.bind(this)),y(e,"find-media-player",this.#p.bind(this))}onConnect(e){li&&v(e,"data-iphone","");let t=window.matchMedia("(pointer: coarse)");this.#d(t),t.onchange=this.#d.bind(this);let i=new ResizeObserver(le(this.#c.bind(this)));i.observe(e),u(this.#c.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),x(()=>{i.disconnect(),t.onchange=null})}onDestroy(){this.#e.player=null,this.canPlayQueue.reset()}#n=!1;#o(){let e=this.$el,{title:t,live:i,viewType:r,providedTitle:n}=this.$state,o=i(),l=yn(r()),a=l!=="Unknown"?`${o?"Live ":""}${l}`:o?"Live":"Media",d=t();v(this.el,"aria-label",`${a} Player`+(d?` - ${d}`:"")),e?.hasAttribute("title")&&(this.#n=!0,e?.removeAttribute("title"))}#a(){let e=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(e),v(this.el,"data-orientation",e),this.#c()}#l(){this.$state.canPlay()&&this.#r?this.canPlayQueue.start():this.canPlayQueue.stop()}#u(){if(s[gi]){this.setAttributes(s[gi]);return}let e={"data-load":function(){return this.$props.load()},"data-captions":function(){let i=this.$state.textTrack();return!!i&&B(i)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:i,canPlay:r,waiting:n}=this.$state;return i()&&(!r()||n())},"data-error":function(){let{error:i}=this.$state;return!!i()},"data-autoplay-error":function(){let{autoPlayError:i}=this.$state;return!!i()}},t={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let i of Nn){let r="data-"+(t[i]??oi(i));e[r]=function(){return this.$state[i]()}}delete e.title,s[gi]=e,this.setAttributes(e)}#p(e){e.detail(this)}#c(){if(!this.el)return;let e=this.el.clientWidth,t=this.el.clientHeight;this.$state.width.set(e),this.$state.height.set(t),Pe(this.el,"--player-width",e+"px"),Pe(this.el,"--player-height",t+"px")}#d(e){let t=e.matches?"coarse":"fine";v(this.el,"data-pointer",t),this.$state.pointer.set(t),this.#c()}get provider(){return this.#r}get controls(){return this.#i.controls}set controls(e){this.#s.controls.set(e)}orientation;get title(){return m(this.$state.providedTitle)}set title(e){if(this.#n){this.#n=!1;return}this.$state.providedTitle.set(e)}get qualities(){return this.#e.qualities}get audioTracks(){return this.#e.audioTracks}get textTracks(){return this.#e.textTracks}get textRenderers(){return this.#e.textRenderers}get duration(){return this.$state.duration()}set duration(e){this.#s.duration.set(e)}get paused(){return m(this.$state.paused)}set paused(e){this.#f(e)}#h(){this.#f(this.$props.paused())}#f(e){e?this.canPlayQueue.enqueue("paused",()=>this.#i.pause()):this.canPlayQueue.enqueue("paused",()=>this.#i.play())}get muted(){return m(this.$state.muted)}set muted(e){this.#y(e)}#g(){this.#y(this.$props.muted())}#y(e){this.canPlayQueue.enqueue("muted",()=>{this.#r&&this.#r.setMuted(e)})}get currentTime(){return m(this.$state.currentTime)}set currentTime(e){this.#E(e)}#M(){this.#E(this.$props.currentTime())}#E(e){this.canPlayQueue.enqueue("currentTime",()=>{let{currentTime:t,clipStartTime:i,seekableStart:r,seekableEnd:n}=this.$state;e!==m(t)&&m(()=>{if(!this.#r)return;let o=e+i(),l=Math.floor(o)===Math.floor(n()),a=l?n():Math.min(Math.max(r()+.1,o),n()-.1);Number.isFinite(a)&&this.#r.setCurrentTime(a)})})}get volume(){return m(this.$state.volume)}set volume(e){this.#v(e)}#T(){this.#v(this.$props.volume())}#v(e){let t=Lt(0,e,1);this.canPlayQueue.enqueue("volume",()=>{this.#r&&this.#r.setVolume(t)})}get playbackRate(){return m(this.$state.playbackRate)}set playbackRate(e){this.#m(e)}#x(){this.#m(this.$props.playbackRate())}#m(e){this.canPlayQueue.enqueue("rate",()=>{this.#r&&this.#r.setPlaybackRate?.(e)})}#b(){this.#S(this.$props.playsInline())}#S(e){this.canPlayQueue.enqueue("playsinline",()=>{this.#r&&this.#r.setPlaysInline?.(e)})}#P(){let e=this.$props.storage(),t=E(e)?new Ot:e;if(t?.onChange){let{source:i}=this.$state,r=E(e)?e:this.el?.id,n=re(this.#_.bind(this));u(()=>t.onChange(i(),n(),r||void 0))}this.#e.storage=t,this.#e.textTracks.setStorage(t),x(()=>{t?.onDestroy?.(),this.#e.storage=null,this.#e.textTracks.setStorage(null)})}#_(){let{clipStartTime:e,clipEndTime:t}=this.$props,{source:i}=this.$state,r=i();return r.src?`${r.src}:${e()}:${t()}`:null}async play(e){return this.#i.play(e)}async pause(e){return this.#i.pause(e)}async enterFullscreen(e,t){return this.#i.enterFullscreen(e,t)}async exitFullscreen(e,t){return this.#i.exitFullscreen(e,t)}enterPictureInPicture(e){return this.#i.enterPictureInPicture(e)}exitPictureInPicture(e){return this.#i.exitPictureInPicture(e)}seekToLiveEdge(e){this.#i.seekToLiveEdge(e)}startLoading(e){this.#e.notify("can-load",void 0,e)}startLoadingPoster(e){this.#e.notify("can-load-poster",void 0,e)}requestAirPlay(e){return this.#i.requestAirPlay(e)}requestGoogleCast(e){return this.#i.requestGoogleCast(e)}setAudioGain(e,t){return this.#i.setAudioGain(e,t)}destroy(){super.destroy(),this.#e.remote.setPlayer(null),this.dispatch("destroy")}};var Ii=class extends T(HTMLElement,Di){static tagName="media-player";static attrs={autoPlay:"autoplay",crossOrigin:"crossorigin",playsInline:"playsinline",preferNativeHLS:"prefer-native-hls",minLiveDVRWindow:"min-live-dvr-window"}};var qi=class{name="audio";target;canPlay(e){return Pn(e)?!E(e.src)||e.type==="?"||Tn(this.target,e.type):!1}mediaType(){return"audio"}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-audio.js")).AudioProvider(this.target,e)}};var Be=class{name="video";target;canPlay(e){return _n(e)?!E(e.src)||e.type==="?"||ui(this.target,e.type):!1}mediaType(){return"video"}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-video.js")).VideoProvider(this.target,e)}};var Oi=class s extends Be{static supported=Mn();name="dash";canPlay(e){return s.supported&&$t(e)}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-dash.js")).DASHProvider(this.target,e)}};var Hi=class s extends Be{static supported=ci();name="hls";canPlay(e){return s.supported&&wt(e)}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-hls.js")).HLSProvider(this.target,e)}};var Ni=class{name="vimeo";target;preconnect(){let e=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(let t of e)Ce(t)}canPlay(e){return E(e.src)&&e.type==="video/vimeo"}mediaType(){return"video"}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-vimeo.js")).VimeoProvider(this.target,e)}async loadPoster(e,t,i){let{resolveVimeoVideoId:r,getVimeoVideoInfo:n}=await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-JUYOWWVN.js");if(!E(e.src))return null;let{videoId:o,hash:l}=r(e.src);return o?n(o,i,l).then(a=>a?a.poster:null):null}};var Fi=class{name="youtube";target;preconnect(){let e=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(let t of e)Ce(t)}canPlay(e){return E(e.src)&&e.type==="video/youtube"}mediaType(){return"video"}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-youtube.js")).YouTubeProvider(this.target,e)}async loadPoster(e,t,i){let{findYouTubePoster:r,resolveYouTubeVideoId:n}=await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-PK326JNQ.js"),o=E(e.src)&&n(e.src);return o?r(o,i):null}};function eo(s,e){return fetch(s,e).then(t=>t.text()).then(t=>/type="static"/.test(t)?"on-demand":"live")}function Rs(s,e){return fetch(s,e).then(t=>t.text()).then(t=>{let i=aa(t);if(i)return Rs(/^https?:/.test(i)?i:new URL(i,s).href,e);let r=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(t)?"on-demand":"live";return r==="live"&&la(t)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(t)||t.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":r})}function aa(s){let e=s.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split(`
`)[1].trim():null}function la(s){let e=s.split(`
`);for(let t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){let i=parseFloat(t.split(":")[1]);if(!isNaN(i))return i}return-1}var As=new Map,Bi=class{#e=!1;#t;#i;#r;#s;constructor(e,t,i,r=[]){this.#i=e,this.#r=t,this.#s=i;let n=new Oi,o=new Hi,l=new Be,a=new qi,d=new Fi,c=new Ni,p=[d,c];this.#t=re(()=>{let f=t.$state.remotePlaybackLoader(),M=t.$props.preferNativeHLS()?[l,a,n,o,...p,...r]:[o,l,a,n,...p,...r];return f?[f,...M]:M});let{$state:h}=t;h.sources.set(to(t.$props.src()));for(let f of h.sources()){let M=this.#t().find(C=>C.canPlay(f));if(!M)continue;let L=M.mediaType(f);t.$state.source.set(f),t.$state.mediaType.set(L),t.$state.inferredViewType.set(L),this.#s.set(M),this.#e=!0;break}}connect(){let e=this.#s();this.#e&&(this.#l(this.#r.$state.source(),e),this.#u(e),this.#e=!1),u(this.#n.bind(this)),u(this.#o.bind(this)),u(this.#p.bind(this)),u(this.#c.bind(this)),u(this.#d.bind(this))}#n(){this.#r.notify("sources-change",[...to(this.#r.$props.src()),...this.#i()])}#o(){let{$state:e}=this.#r,t=e.sources(),i=m(e.source),r=this.#a(i,t);if(t[0]?.src&&!r.src&&!r.type){let{crossOrigin:o}=e,l=ct(o()),a=new AbortController;return Promise.all(t.map(d=>E(d.src)&&d.type==="?"?fetch(d.src,{method:"HEAD",credentials:l,signal:a.signal}).then(c=>(d.type=c.headers.get("content-type")||"??",As.set(d.src,d.type),d)).catch(()=>d):d)).then(d=>{if(a.signal.aborted)return;let c=this.#a(m(e.source),d);me(),c.src||this.#r.notify("error",{message:"Failed to load resource.",code:4})}),()=>a.abort()}me()}#a(e,t){let i={src:"",type:""},r=null,n=new R("sources-change",{detail:{sources:t}}),o=this.#t(),{started:l,paused:a,currentTime:d,quality:c,savedState:p}=this.#r.$state;for(let h of t){let f=o.find(M=>M.canPlay(h));if(f){i=h,r=f;break}}if(qt(i)){let h=c(),f=t.find(M=>M.src===h?.src);m(l)?p.set({paused:m(a),currentTime:m(d)}):p.set(null),f&&(i=f,n=new R("quality-change",{detail:{quality:h}}))}return ro(e,i)||this.#l(i,r,n),r!==m(this.#s)&&this.#u(r,n),i}#l(e,t,i){this.#r.notify("source-change",e,i),this.#r.notify("media-type-change",t?.mediaType(e)||"unknown",i)}#u(e,t){this.#r.$providerSetup.set(!1),this.#r.notify("provider-change",null,t),e&&m(()=>e.preconnect?.(this.#r)),this.#s.set(e),this.#r.notify("provider-loader-change",e,t)}#p(){let e=this.#r.$provider();if(!(!e||m(this.#r.$providerSetup))){if(this.#r.$state.canLoad()){kt(()=>e.setup(),e.scope),this.#r.$providerSetup.set(!0);return}m(()=>e.preconnect?.())}}#c(){if(!this.#r.$providerSetup())return;let e=this.#r.$provider(),t=this.#r.$state.source(),i=m(this.#r.$state.crossOrigin),r=m(this.#r.$props.preferNativeHLS);if(!ro(e?.currentSrc,t)){if(this.#r.$state.canLoad()){let n=new AbortController;return wt(t)?(r||!ci())&&Rs(t.src,{credentials:ct(i),signal:n.signal}).then(o=>{this.#r.notify("stream-type-change",o)}).catch(gs):$t(t)?eo(t.src,{credentials:ct(i),signal:n.signal}).then(o=>{this.#r.notify("stream-type-change",o)}).catch(gs):this.#r.notify("stream-type-change","on-demand"),m(()=>{let o=m(this.#r.$state.preload);return e?.loadSource(t,o).catch(l=>{})}),()=>n.abort()}try{E(t.src)&&Ce(new URL(t.src).origin)}catch{}}}#d(){let e=this.#s(),{providedPoster:t,source:i,canLoadPoster:r}=this.#r.$state;if(!e||!e.loadPoster||!i()||!r()||t())return;let n=new AbortController,o=new R("source-change",{detail:i});return e.loadPoster(i(),this.#r,n).then(l=>{this.#r.notify("poster-change",l||"",o)}).catch(()=>{this.#r.notify("poster-change","",o)}),()=>{n.abort()}}};function to(s){return(W(s)?s:[s]).map(e=>E(e)?{src:e,type:io(e)}:{...e,type:io(e.src,e.type)})}function io(s,e){return E(e)&&e.length?e:E(s)&&As.has(s)?As.get(s):!e&&wt({src:s,type:""})?"application/x-mpegurl":!e&&$t({src:s,type:""})?"application/dash+xml":!E(s)||s.startsWith("blob:")?"video/object":s.includes("youtube")||s.includes("youtu.be")?"video/youtube":s.includes("vimeo")&&!s.includes("progressive_redirect")&&!s.includes(".m3u8")?"video/vimeo":"?"}function ro(s,e){return s?.src===e?.src&&s?.type===e?.type}var Gi=class{#e;#t;#i=[];constructor(e,t){this.#e=e,this.#t=t,u(this.#r.bind(this))}#r(){let e=this.#e();for(let t of this.#i)if(!e.some(i=>i.id===t.id)){let i=t.id&&this.#t.textTracks.getById(t.id);i&&this.#t.textTracks.remove(i)}for(let t of e){let i=t.id||Xe.createId(t);this.#t.textTracks.getById(i)||(t.id=i,this.#t.textTracks.add(t))}this.#i=e}};var Qi=class extends b{static props={loaders:[]};static state=new xe({loader:null});#e;#t;#i=S([]);#r=S([]);#s=null;onSetup(){this.#e=g(),this.#t=new Bi(this.#i,this.#e,this.$state.loader,this.$props.loaders())}onAttach(e){e.setAttribute("data-media-provider","")}onConnect(e){this.#t.connect(),new Gi(this.#r,this.#e);let t=new ResizeObserver(le(this.#l.bind(this)));t.observe(e);let i=new MutationObserver(this.#u.bind(this));i.observe(e,{attributes:!0,childList:!0}),this.#l(),this.#u(),x(()=>{t.disconnect(),i.disconnect()})}#n=-1;load(e){e?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(this.#n),this.#n=requestAnimationFrame(()=>this.#o(e)),x(()=>{window.cancelAnimationFrame(this.#n)})}#o(e){if(!this.scope)return;let t=this.$state.loader(),{$provider:i}=this.#e;this.#s===t&&t?.target===e&&m(i)||(this.#a(),this.#s=t,t&&(t.target=e||null),!(!t||!e)&&t.load(this.#e).then(r=>{this.scope&&m(this.$state.loader)===t&&this.#e.notify("provider-change",r)}))}onDestroy(){this.#s=null,this.#a()}#a(){this.#e?.notify("provider-change",null)}#l(){if(!this.el)return;let{player:e,$state:t}=this.#e,i=this.el.offsetWidth,r=this.el.offsetHeight;e&&(t.mediaWidth.set(i),t.mediaHeight.set(r),e.el&&(Pe(e.el,"--media-width",i+"px"),Pe(e.el,"--media-height",r+"px")))}#u(){let e=[],t=[],i=this.el.children;for(let r of i)if(!r.hasAttribute("data-vds")){if(r instanceof HTMLSourceElement){let n={id:r.id,src:r.src,type:r.type};for(let o of["id","src","width","height","bitrate","codec"]){let l=r.getAttribute(`data-${o}`);E(l)&&(n[o]=/id|src|codec/.test(o)?l:Number(l))}e.push(n)}else if(r instanceof HTMLTrackElement){let n={src:r.src,kind:r.track.kind,language:r.srclang,label:r.label,default:r.default,type:r.getAttribute("data-type")};t.push({id:r.id||Xe.createId(n),...n})}}this.#i.set(e),this.#r.set(t),me()}};var Ki=class extends T(HTMLElement,Qi){static tagName="media-provider";#e;#t=null;#i=null;onSetup(){this.#e=g(),this.setAttribute("keep-alive","")}onDestroy(){this.#i?.remove(),this.#i=null,this.#t?.remove(),this.#t=null}onConnect(){u(()=>{let e=this.$state.loader(),t=e?.name==="youtube",i=e?.name==="vimeo",r=t||i,n=e?.name==="google-cast",o=e?n?this.#o():r?this.#n():e.mediaType()==="audio"?this.#r():this.#s():null;if(this.#t!==o){let l=this.#t?.parentElement??this;this.#t?.remove(),this.#t=o,o&&l.prepend(o),r&&o&&u(()=>{let{nativeControls:a,viewType:d}=this.#e.$state,c=a(),p=d()==="audio";!c&&!p?(this.#i=this.querySelector(".vds-blocker"),this.#i||(this.#i=document.createElement("div"),this.#i.classList.add("vds-blocker"),o.after(this.#i))):(this.#i?.remove(),this.#i=null),v(o,"data-no-controls",!c)})}t?o?.classList.add("vds-youtube"):i&&o?.classList.add("vds-vimeo"),r||(this.#i?.remove(),this.#i=null),this.load(o)})}#r(){let e=this.#t instanceof HTMLAudioElement?this.#t:document.createElement("audio"),{controls:t,crossOrigin:i}=this.#e.$state;return u(()=>{v(e,"controls",t()),v(e,"crossorigin",i())}),e}#s(){let e=this.#t instanceof HTMLVideoElement?this.#t:document.createElement("video"),{crossOrigin:t,poster:i,nativeControls:r}=this.#e.$state,n=re(()=>r()?"true":null),o=re(()=>i()&&r()?i():null);return u(()=>{v(e,"controls",n()),v(e,"crossorigin",t()),v(e,"poster",o())}),e}#n(){let e=this.#t instanceof HTMLIFrameElement?this.#t:document.createElement("iframe"),{nativeControls:t}=this.#e.$state;return u(()=>v(e,"tabindex",t()?null:-1)),e}#o(){if(this.#t?.classList.contains("vds-google-cast"))return this.#t;let e=document.createElement("div");return e.classList.add("vds-google-cast"),import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-DX5QIM6D.js").then(({insertContent:t})=>{t(e,this.#e.$state)}),e}};A(Ii);A(Ki);function da(s){return s?"true":"false"}function j(s){return()=>da(s())}var Nt=class extends F{#e;constructor(e){super(),this.#e=e}onAttach(e){let{$props:t,ariaKeys:i}=g(),r=e.getAttribute("aria-keyshortcuts");if(r){i[this.#e]=r,x(()=>{delete i[this.#e]});return}let n=t.keyShortcuts()[this.#e];if(n){let o=W(n)?n.join(" "):E(n)?n:n?.keys;e.setAttribute("aria-keyshortcuts",W(o)?o.join(" "):o)}}};var Q=class extends F{static props={disabled:!1};#e;constructor(e){super(),this.#e=e,new te,e.keyShortcut&&new Nt(e.keyShortcut)}onSetup(){let{disabled:e}=this.$props;this.setAttributes({"data-pressed":this.#e.isPresssed,"aria-pressed":this.#t.bind(this),"aria-disabled":()=>e()?"true":null})}onAttach(e){w(e,"tabindex","0"),w(e,"role","button"),w(e,"type","button")}onConnect(e){ye(e,this.#r.bind(this));for(let t of["click","touchstart"])this.listen(t,this.#s.bind(this),{passive:!0})}#t(){return Ye(this.#e.isPresssed())}#i(e){hn(this.#e.isPresssed)&&this.#e.isPresssed.set(t=>!t)}#r(e){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){e.preventDefault(),e.stopImmediatePropagation();return}e.preventDefault(),(this.#e.onPress??this.#i).call(this,e)}#s(e){this.$props.disabled()&&(e.preventDefault(),e.stopImmediatePropagation())}};var Ui=class extends b{static props=Q.props;#e;constructor(){super(),new Q({isPresssed:this.#i.bind(this),onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{canAirPlay:e,isAirPlayConnected:t}=this.#e.$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":this.#r.bind(this),"aria-hidden":j(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","airplay"),de(e,this.#s.bind(this))}#t(e){this.#e.remote.requestAirPlay(e)}#i(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="airplay"&&t()!=="disconnected"}#r(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="airplay"&&t()}#s(){let{remotePlaybackState:e}=this.#e.$state;return`AirPlay ${e()}`}};var Wi=class extends T(HTMLElement,Ui){static tagName="media-airplay-button"};var zi=class extends b{static props=Q.props;#e;constructor(){super(),new Q({isPresssed:this.#i.bind(this),keyShortcut:"toggleCaptions",onPress:this.#t.bind(this)})}onSetup(){this.#e=g(),this.setAttributes({"data-active":this.#i.bind(this),"data-supported":()=>!this.#r(),"aria-hidden":j(this.#r.bind(this))})}onAttach(e){e.setAttribute("data-media-tooltip","caption"),de(e,"Captions")}#t(e){this.#e.remote.toggleCaptions(e)}#i(){let{textTrack:e}=this.#e.$state,t=e();return!!t&&B(t)}#r(){let{hasCaptions:e}=this.#e.$state;return!e()}};var Yi=class extends T(HTMLElement,zi){static tagName="media-caption-button"};var ji=class extends b{static props={...Q.props,target:"prefer-media"};#e;constructor(){super(),new Q({isPresssed:this.#i.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{fullscreen:e}=this.#e.$state,t=this.#r.bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":j(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","fullscreen"),de(e,"Fullscreen")}#t(e){let t=this.#e.remote,i=this.$props.target();this.#i()?t.exitFullscreen(i,e):t.enterFullscreen(i,e)}#i(){let{fullscreen:e}=this.#e.$state;return e()}#r(){let{canFullscreen:e}=this.#e.$state;return e()}};var Xi=class extends T(HTMLElement,ji){static tagName="media-fullscreen-button"};var Ji=class extends b{static props={disabled:!1};#e;constructor(){super(),new te}onSetup(){this.#e=g();let{disabled:e}=this.$props,{live:t,liveEdge:i}=this.#e.$state,r=()=>!t();this.setAttributes({"data-edge":i,"data-hidden":r,"aria-disabled":j(()=>e()||i()),"aria-hidden":j(r)})}onAttach(e){w(e,"tabindex","0"),w(e,"role","button"),w(e,"type","button"),e.setAttribute("data-media-tooltip","live")}onConnect(e){ye(e,this.#t.bind(this))}#t(e){let{disabled:t}=this.$props,{liveEdge:i}=this.#e.$state;t()||i()||this.#e.remote.seekToLiveEdge(e)}};var Zi=class extends T(HTMLElement,Ji){static tagName="media-live-button"};var er=class extends b{static props=Q.props;#e;constructor(){super(),new Q({isPresssed:this.#i.bind(this),keyShortcut:"toggleMuted",onPress:this.#t.bind(this)})}onSetup(){this.#e=g(),this.setAttributes({"data-muted":this.#i.bind(this),"data-state":this.#r.bind(this)})}onAttach(e){e.setAttribute("data-media-mute-button",""),e.setAttribute("data-media-tooltip","mute"),de(e,"Mute")}#t(e){let t=this.#e.remote;this.#i()?t.unmute(e):t.mute(e)}#i(){let{muted:e,volume:t}=this.#e.$state;return e()||t()===0}#r(){let{muted:e,volume:t}=this.#e.$state,i=t();if(e()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}};var tr=class extends T(HTMLElement,er){static tagName="media-mute-button"};var ir=class extends b{static props=Q.props;#e;constructor(){super(),new Q({isPresssed:this.#i.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{pictureInPicture:e}=this.#e.$state,t=this.#r.bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":j(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","pip"),de(e,"PiP")}#t(e){let t=this.#e.remote;this.#i()?t.exitPictureInPicture(e):t.enterPictureInPicture(e)}#i(){let{pictureInPicture:e}=this.#e.$state;return e()}#r(){let{canPictureInPicture:e}=this.#e.$state;return e()}};var rr=class extends T(HTMLElement,ir){static tagName="media-pip-button"};var sr=class extends b{static props=Q.props;#e;constructor(){super(),new Q({isPresssed:this.#i.bind(this),keyShortcut:"togglePaused",onPress:this.#t.bind(this)})}onSetup(){this.#e=g();let{paused:e,ended:t}=this.#e.$state;this.setAttributes({"data-paused":e,"data-ended":t})}onAttach(e){e.setAttribute("data-media-tooltip","play"),de(e,"Play")}#t(e){let t=this.#e.remote;this.#i()?t.pause(e):t.play(e)}#i(){let{paused:e}=this.#e.$state;return!e()}};var nr=class extends T(HTMLElement,sr){static tagName="media-play-button"};var or=class extends b{static props={disabled:!1,seconds:30};#e;constructor(){super(),new te}onSetup(){this.#e=g();let{seeking:e}=this.#e.$state,{seconds:t}=this.$props,i=this.#t.bind(this);this.setAttributes({seconds:t,"data-seeking":e,"data-supported":i,"aria-hidden":j(()=>!i())})}onAttach(e){w(e,"tabindex","0"),w(e,"role","button"),w(e,"type","button"),e.setAttribute("data-media-tooltip","seek"),de(e,this.#i.bind(this))}onConnect(e){ye(e,this.#r.bind(this))}#t(){let{canSeek:e}=this.#e.$state;return e()}#i(){let{seconds:e}=this.$props;return`Seek ${e()>0?"forward":"backward"} ${e()} seconds`}#r(e){let{seconds:t,disabled:i}=this.$props;if(i())return;let{currentTime:r}=this.#e.$state,n=r()+t();this.#e.remote.seek(n,e)}};var ar=class extends T(HTMLElement,or){static tagName="media-seek-button"};var Vs=se();function I(){return V(Vs)}var so={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]};var lr=class extends b{static props=so;#e;onSetup(){this.#e=g(),z(Vs,{...this.$props,previewTime:S(0)})}};function no(s,e){let{canAirPlay:t,canFullscreen:i,canPictureInPicture:r,controlsHidden:n,currentTime:o,fullscreen:l,hasCaptions:a,isAirPlayConnected:d,paused:c,pictureInPicture:p,playing:h,pointer:f,poster:M,textTrack:L,viewType:C,waiting:K}=e.$state;s.classList.add("plyr"),s.classList.add("plyr--full-ui");let ne={"plyr--airplay-active":d,"plyr--airplay-supported":t,"plyr--fullscreen-active":l,"plyr--fullscreen-enabled":i,"plyr--hide-controls":n,"plyr--is-touch":()=>f()==="coarse","plyr--loading":K,"plyr--paused":c,"plyr--pip-active":p,"plyr--pip-enabled":r,"plyr--playing":h,"plyr__poster-enabled":M,"plyr--stopped":()=>c()&&o()===0,"plyr--captions-active":L,"plyr--captions-enabled":a},be=ai();for(let U of Object.keys(ne))be.add(u(()=>void s.classList.toggle(U,!!ne[U]())));return be.add(u(()=>{let U=`plyr--${C()}`;return s.classList.add(U),()=>s.classList.remove(U)}),u(()=>{let{$provider:U}=e,pe=U()?.type,D=`plyr--${ua(pe)?"html5":pe}`;return s.classList.toggle(D,!!pe),()=>s.classList.remove(D)})),()=>be.empty()}function ua(s){return s==="audio"||s==="video"}var Ds,Is,qs,Os;var ce=window,P=s=>{ce.emitLitDebugLogEvents&&ce.dispatchEvent(new CustomEvent("lit-debug",{detail:s}))},ca=0,dr;(Ds=ce.litIssuedWarnings)!==null&&Ds!==void 0||(ce.litIssuedWarnings=new Set),dr=(s,e)=>{e+=s?` See https://lit.dev/msg/${s} for more information.`:"",ce.litIssuedWarnings.has(e)||(console.warn(e),ce.litIssuedWarnings.add(e))},dr("dev-mode","Lit is in dev mode. Not recommended for production!");var Se=!((Is=ce.ShadyDOM)===null||Is===void 0)&&Is.inUse&&((qs=ce.ShadyDOM)===null||qs===void 0?void 0:qs.noPatch)===!0?ce.ShadyDOM.wrap:s=>s,gt=ce.trustedTypes,oo=gt?gt.createPolicy("lit-html",{createHTML:s=>s}):void 0,pa=s=>s,vr=(s,e,t)=>pa,ha=s=>{if(it!==vr)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");it=s},ma=()=>{it=vr},Qs=(s,e,t)=>it(s,e,t),ur="$lit$",Ae=`lit$${String(Math.random()).slice(9)}$`,Ks="?"+Ae,fa=`<${Ks}>`,et=document,Bt=()=>et.createComment(""),Gt=s=>s===null||typeof s!="object"&&typeof s!="function",mo=Array.isArray,fo=s=>mo(s)||typeof s?.[Symbol.iterator]=="function",Hs=`[ 	
\f\r]`,ga=`[^ 	
\f\r"'\`<>=]`,ya=`[^\\s"'>=/]`,Ft=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ao=1,Ns=2,va=3,lo=/-->/g,uo=/>/g,Ge=new RegExp(`>|${Hs}(?:(${ya}+)(${Hs}*=${Hs}*(?:${ga}|("|')|))|$)`,"g"),ba=0,co=1,Ea=2,po=3,Fs=/'/g,Bs=/"/g,go=/^(?:script|style|textarea|title)$/i,yo=1,cr=2,Us=1,pr=2,Ta=3,xa=4,Ma=5,Ws=6,Sa=7,vo=s=>(e,...t)=>(e.some(i=>i===void 0)&&console.warn(`Some template strings are undefined.
This is probably caused by illegal octal escape sequences.`),{_$litType$:s,strings:e,values:t}),_=vo(yo),hm=vo(cr),tt=Symbol.for("lit-noChange"),q=Symbol.for("lit-nothing"),ho=new WeakMap,Ze=et.createTreeWalker(et,129,null,!1),it=vr;function bo(s,e){if(!Array.isArray(s)||!s.hasOwnProperty("raw")){let t="invalid template strings array";throw t=`
          Internal Error: expected template strings to be an array
          with a 'raw' field. Faking a template strings array by
          calling html or svg like an ordinary function is effectively
          the same as calling unsafeHtml and can lead to major security
          issues, e.g. opening your code up to XSS attacks.
          If you're using the html or svg tagged template functions normally
          and still seeing this error, please file a bug at
          https://github.com/lit/lit/issues/new?template=bug_report.md
          and include information about your build tooling, if any.
        `.trim().replace(/\n */g,`
`),new Error(t)}return oo!==void 0?oo.createHTML(e):e}var Eo=(s,e)=>{let t=s.length-1,i=[],r=e===cr?"<svg>":"",n,o=Ft;for(let a=0;a<t;a++){let d=s[a],c=-1,p,h=0,f;for(;h<d.length&&(o.lastIndex=h,f=o.exec(d),f!==null);)if(h=o.lastIndex,o===Ft){if(f[ao]==="!--")o=lo;else if(f[ao]!==void 0)o=uo;else if(f[Ns]!==void 0)go.test(f[Ns])&&(n=new RegExp(`</${f[Ns]}`,"g")),o=Ge;else if(f[va]!==void 0)throw new Error("Bindings in tag names are not supported. Please use static templates instead. See https://lit.dev/docs/templates/expressions/#static-expressions")}else o===Ge?f[ba]===">"?(o=n??Ft,c=-1):f[co]===void 0?c=-2:(c=o.lastIndex-f[Ea].length,p=f[co],o=f[po]===void 0?Ge:f[po]==='"'?Bs:Fs):o===Bs||o===Fs?o=Ge:o===lo||o===uo?o=Ft:(o=Ge,n=void 0);console.assert(c===-1||o===Ge||o===Fs||o===Bs,"unexpected parse state B");let M=o===Ge&&s[a+1].startsWith("/>")?" ":"";r+=o===Ft?d+fa:c>=0?(i.push(p),d.slice(0,c)+ur+d.slice(c)+Ae+M):d+Ae+(c===-2?(i.push(void 0),a):M)}let l=r+(s[t]||"<?>")+(e===cr?"</svg>":"");return[bo(s,l),i]},Qt=class s{constructor({strings:e,["_$litType$"]:t},i){this.parts=[];let r,n=0,o=0,l=e.length-1,a=this.parts,[d,c]=Eo(e,t);if(this.el=s.createElement(d,i),Ze.currentNode=this.el.content,t===cr){let p=this.el.content,h=p.firstChild;h.remove(),p.append(...h.childNodes)}for(;(r=Ze.nextNode())!==null&&a.length<l;){if(r.nodeType===1){{let p=r.localName;if(/^(?:textarea|template)$/i.test(p)&&r.innerHTML.includes(Ae)){let h=`Expressions are not supported inside \`${p}\` elements. See https://lit.dev/msg/expression-in-${p} for more information.`;if(p==="template")throw new Error(h);dr("",h)}}if(r.hasAttributes()){let p=[];for(let h of r.getAttributeNames())if(h.endsWith(ur)||h.startsWith(Ae)){let f=c[o++];if(p.push(h),f!==void 0){let L=r.getAttribute(f.toLowerCase()+ur).split(Ae),C=/([.?@])?(.*)/.exec(f);a.push({type:Us,index:n,name:C[2],strings:L,ctor:C[1]==="."?mr:C[1]==="?"?fr:C[1]==="@"?gr:st})}else a.push({type:Ws,index:n})}for(let h of p)r.removeAttribute(h)}if(go.test(r.tagName)){let p=r.textContent.split(Ae),h=p.length-1;if(h>0){r.textContent=gt?gt.emptyScript:"";for(let f=0;f<h;f++)r.append(p[f],Bt()),Ze.nextNode(),a.push({type:pr,index:++n});r.append(p[h],Bt())}}}else if(r.nodeType===8)if(r.data===Ks)a.push({type:pr,index:n});else{let h=-1;for(;(h=r.data.indexOf(Ae,h+1))!==-1;)a.push({type:Sa,index:n}),h+=Ae.length-1}n++}P?.({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){let i=et.createElement("template");return i.innerHTML=e,i}};function rt(s,e,t=s,i){var r,n,o,l;if(e===tt)return e;let a=i!==void 0?(r=t.__directives)===null||r===void 0?void 0:r[i]:t.__directive,d=Gt(e)?void 0:e._$litDirective$;return a?.constructor!==d&&((n=a?._$notifyDirectiveConnectionChanged)===null||n===void 0||n.call(a,!1),d===void 0?a=void 0:(a=new d(s),a._$initialize(s,t,i)),i!==void 0?((o=(l=t).__directives)!==null&&o!==void 0?o:l.__directives=[])[i]=a:t.__directive=a),a!==void 0&&(e=rt(s,a._$resolve(s,e.values),a,i)),e}var hr=class{constructor(e,t){this._$parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){var t;let{el:{content:i},parts:r}=this._$template,n=((t=e?.creationScope)!==null&&t!==void 0?t:et).importNode(i,!0);Ze.currentNode=n;let o=Ze.nextNode(),l=0,a=0,d=r[0];for(;d!==void 0;){if(l===d.index){let c;d.type===pr?c=new yt(o,o.nextSibling,this,e):d.type===Us?c=new d.ctor(o,d.name,d.strings,this,e):d.type===Ws&&(c=new yr(o,this,e)),this._$parts.push(c),d=r[++a]}l!==d?.index&&(o=Ze.nextNode(),l++)}return Ze.currentNode=et,n}_update(e){let t=0;for(let i of this._$parts)i!==void 0&&(P?.({kind:"set part",part:i,value:e[t],valueIndex:t,values:e,templateInstance:this}),i.strings!==void 0?(i._$setValue(e,i,t),t+=i.strings.length-2):i._$setValue(e[t])),t++}},yt=class s{constructor(e,t,i,r){var n;this.type=pr,this._$committedValue=q,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=i,this.options=r,this.__isConnected=(n=r?.isConnected)!==null&&n!==void 0?n:!0,this._textSanitizer=void 0}get _$isConnected(){var e,t;return(t=(e=this._$parent)===null||e===void 0?void 0:e._$isConnected)!==null&&t!==void 0?t:this.__isConnected}get parentNode(){let e=Se(this._$startNode).parentNode,t=this._$parent;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){var i;if(this.parentNode===null)throw new Error("This `ChildPart` has no `parentNode` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's `innerHTML` or `textContent` can do this.");if(e=rt(this,e,t),Gt(e))e===q||e==null||e===""?(this._$committedValue!==q&&(P?.({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=q):e!==this._$committedValue&&e!==tt&&this._commitText(e);else if(e._$litType$!==void 0)this._commitTemplateResult(e);else if(e.nodeType!==void 0){if(((i=this.options)===null||i===void 0?void 0:i.host)===e){this._commitText("[probable mistake: rendered a template's host in itself (commonly caused by writing ${this} in a template]"),console.warn("Attempted to render the template host",e,"inside itself. This is almost always a mistake, and in dev mode ","we render some warning text. In production however, we'll ","render it, which will usually result in an error, and sometimes ","in the element disappearing from the DOM.");return}this._commitNode(e)}else fo(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return Se(Se(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){var t;if(this._$committedValue!==e){if(this._$clear(),it!==vr){let i=(t=this._$startNode.parentNode)===null||t===void 0?void 0:t.nodeName;if(i==="STYLE"||i==="SCRIPT"){let r="Forbidden";throw i==="STYLE"?r="Lit does not support binding inside style nodes. This is a security risk, as style injection attacks can exfiltrate data and spoof UIs. Consider instead using css`...` literals to compose styles, and make do dynamic styling with css custom properties, ::parts, <slot>s, and by mutating the DOM rather than stylesheets.":r="Lit does not support binding inside script nodes. This is a security risk, as it could allow arbitrary code execution.",new Error(r)}}P?.({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e)}}_commitText(e){if(this._$committedValue!==q&&Gt(this._$committedValue)){let t=Se(this._$startNode).nextSibling;this._textSanitizer===void 0&&(this._textSanitizer=Qs(t,"data","property")),e=this._textSanitizer(e),P?.({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else{let t=et.createTextNode("");this._commitNode(t),this._textSanitizer===void 0&&(this._textSanitizer=Qs(t,"data","property")),e=this._textSanitizer(e),P?.({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}this._$committedValue=e}_commitTemplateResult(e){var t;let{values:i,["_$litType$"]:r}=e,n=typeof r=="number"?this._$getTemplate(e):(r.el===void 0&&(r.el=Qt.createElement(bo(r.h,r.h[0]),this.options)),r);if(((t=this._$committedValue)===null||t===void 0?void 0:t._$template)===n)P?.({kind:"template updating",template:n,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:i}),this._$committedValue._update(i);else{let o=new hr(n,this),l=o._clone(this.options);P?.({kind:"template instantiated",template:n,instance:o,parts:o._$parts,options:this.options,fragment:l,values:i}),o._update(i),P?.({kind:"template instantiated and updated",template:n,instance:o,parts:o._$parts,options:this.options,fragment:l,values:i}),this._commitNode(l),this._$committedValue=o}}_$getTemplate(e){let t=ho.get(e.strings);return t===void 0&&ho.set(e.strings,t=new Qt(e)),t}_commitIterable(e){mo(this._$committedValue)||(this._$committedValue=[],this._$clear());let t=this._$committedValue,i=0,r;for(let n of e)i===t.length?t.push(r=new s(this._insert(Bt()),this._insert(Bt()),this,this.options)):r=t[i],r._$setValue(n),i++;i<t.length&&(this._$clear(r&&Se(r._$endNode).nextSibling,i),t.length=i)}_$clear(e=Se(this._$startNode).nextSibling,t){var i;for((i=this._$notifyConnectionChanged)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$endNode;){let r=Se(e).nextSibling;Se(e).remove(),e=r}}setConnected(e){var t;if(this._$parent===void 0)this.__isConnected=e,(t=this._$notifyConnectionChanged)===null||t===void 0||t.call(this,e);else throw new Error("part.setConnected() may only be called on a RootPart returned from render().")}},st=class{constructor(e,t,i,r,n){this.type=Us,this._$committedValue=q,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=r,this.options=n,i.length>2||i[0]!==""||i[1]!==""?(this._$committedValue=new Array(i.length-1).fill(new String),this.strings=i):this._$committedValue=q,this._sanitizer=void 0}get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e,t=this,i,r){let n=this.strings,o=!1;if(n===void 0)e=rt(this,e,t,0),o=!Gt(e)||e!==this._$committedValue&&e!==tt,o&&(this._$committedValue=e);else{let l=e;e=n[0];let a,d;for(a=0;a<n.length-1;a++)d=rt(this,l[i+a],t,a),d===tt&&(d=this._$committedValue[a]),o||(o=!Gt(d)||d!==this._$committedValue[a]),d===q?e=q:e!==q&&(e+=(d??"")+n[a+1]),this._$committedValue[a]=d}o&&!r&&this._commitValue(e)}_commitValue(e){e===q?Se(this.element).removeAttribute(this.name):(this._sanitizer===void 0&&(this._sanitizer=it(this.element,this.name,"attribute")),e=this._sanitizer(e??""),P?.({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),Se(this.element).setAttribute(this.name,e??""))}},mr=class extends st{constructor(){super(...arguments),this.type=Ta}_commitValue(e){this._sanitizer===void 0&&(this._sanitizer=it(this.element,this.name,"property")),e=this._sanitizer(e),P?.({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===q?void 0:e}},Pa=gt?gt.emptyScript:"",fr=class extends st{constructor(){super(...arguments),this.type=xa}_commitValue(e){P?.({kind:"commit boolean attribute",element:this.element,name:this.name,value:!!(e&&e!==q),options:this.options}),e&&e!==q?Se(this.element).setAttribute(this.name,Pa):Se(this.element).removeAttribute(this.name)}},gr=class extends st{constructor(e,t,i,r,n){if(super(e,t,i,r,n),this.type=Ma,this.strings!==void 0)throw new Error(`A \`<${e.localName}>\` has a \`@${t}=...\` listener with invalid content. Event listeners in templates must have exactly one expression and no surrounding text.`)}_$setValue(e,t=this){var i;if(e=(i=rt(this,e,t,0))!==null&&i!==void 0?i:q,e===tt)return;let r=this._$committedValue,n=e===q&&r!==q||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==q&&(r===q||n);P?.({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:n,addListener:o,oldListener:r}),n&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){var t,i;typeof this._$committedValue=="function"?this._$committedValue.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$committedValue.handleEvent(e)}},yr=class{constructor(e,t,i){this.element=e,this.type=Ws,this._$disconnectableChildren=void 0,this._$parent=t,this.options=i}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){P?.({kind:"commit to element binding",element:this.element,value:e,options:this.options}),rt(this,e)}},To={_boundAttributeSuffix:ur,_marker:Ae,_markerMatch:Ks,_HTML_RESULT:yo,_getTemplateHtml:Eo,_TemplateInstance:hr,_isIterable:fo,_resolveDirective:rt,_ChildPart:yt,_AttributePart:st,_BooleanAttributePart:fr,_EventPart:gr,_PropertyPart:mr,_ElementPart:yr},Gs=ce.litHtmlPolyfillSupportDevMode;Gs?.(Qt,yt);((Os=ce.litHtmlVersions)!==null&&Os!==void 0?Os:ce.litHtmlVersions=[]).push("2.8.0");ce.litHtmlVersions.length>1&&dr("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.");var Ie=(s,e,t)=>{var i,r;if(e==null)throw new TypeError(`The container to render into may not be ${e}`);let n=ca++,o=(i=t?.renderBefore)!==null&&i!==void 0?i:e,l=o._$litPart$;if(P?.({kind:"begin render",id:n,value:s,container:e,options:t,part:l}),l===void 0){let a=(r=t?.renderBefore)!==null&&r!==void 0?r:null;o._$litPart$=l=new yt(e.insertBefore(Bt(),a),a,void 0,t??{})}return l._$setValue(s),P?.({kind:"end render",id:n,value:s,container:e,options:t,part:l}),l};Ie.setSanitizer=ha,Ie.createSanitizer=Qs,Ie._testOnlyClearSanitizerFactoryDoNotCallOrElse=ma;var zs,Ys,{_ChildPart:gm}=To,_a=!0,ym=_a&&(!((zs=window.ShadyDOM)===null||zs===void 0)&&zs.inUse)&&((Ys=window.ShadyDOM)===null||Ys===void 0?void 0:Ys.noPatch)===!0?window.ShadyDOM.wrap:s=>s;var xo=s=>s.strings===void 0;var nt={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},bt=s=>(...e)=>({_$litDirective$:s,values:e}),vt=class{constructor(e){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(e,t,i){this.__part=e,this._$parent=t,this.__attributeIndex=i}_$resolve(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};var ka=!0,Kt=(s,e)=>{var t,i;let r=s._$disconnectableChildren;if(r===void 0)return!1;for(let n of r)(i=(t=n)._$notifyDirectiveConnectionChanged)===null||i===void 0||i.call(t,e,!1),Kt(n,e);return!0},br=s=>{let e,t;do{if((e=s._$parent)===void 0)break;t=e._$disconnectableChildren,t.delete(s),s=e}while(t?.size===0)},Mo=s=>{for(let e;e=s._$parent;s=e){let t=e._$disconnectableChildren;if(t===void 0)e._$disconnectableChildren=t=new Set;else if(t.has(s))break;t.add(s),$a(e)}};function Ca(s){this._$disconnectableChildren!==void 0?(br(this),this._$parent=s,Mo(this)):this._$parent=s}function wa(s,e=!1,t=0){let i=this._$committedValue,r=this._$disconnectableChildren;if(!(r===void 0||r.size===0))if(e)if(Array.isArray(i))for(let n=t;n<i.length;n++)Kt(i[n],!1),br(i[n]);else i!=null&&(Kt(i,!1),br(i));else Kt(this,s)}var $a=s=>{var e,t,i,r;s.type==nt.CHILD&&((e=(i=s)._$notifyConnectionChanged)!==null&&e!==void 0||(i._$notifyConnectionChanged=wa),(t=(r=s)._$reparentDisconnectables)!==null&&t!==void 0||(r._$reparentDisconnectables=Ca))},Er=class extends vt{constructor(){super(...arguments),this._$disconnectableChildren=void 0}_$initialize(e,t,i){super._$initialize(e,t,i),Mo(this),this.isConnected=e._$isConnected}_$notifyDirectiveConnectionChanged(e,t=!0){var i,r;e!==this.isConnected&&(this.isConnected=e,e?(i=this.reconnected)===null||i===void 0||i.call(this):(r=this.disconnected)===null||r===void 0||r.call(this)),t&&(Kt(this,e),br(this))}setValue(e){if(xo(this.__part))this.__part._$setValue(e,this);else{if(ka&&this.__attributeIndex===void 0)throw new Error("Expected this.__attributeIndex to be a number");let t=[...this.__part._$committedValue];t[this.__attributeIndex]=e,this.__part._$setValue(t,this,0)}}disconnected(){}reconnected(){}};var Tr=s=>s??q;var js=class extends Er{#e=null;#t=!1;#i=null;constructor(e){super(e),this.#t=e.type===nt.ATTRIBUTE||e.type===nt.BOOLEAN_ATTRIBUTE}render(e){return e!==this.#e&&(this.disconnected(),this.#e=e,this.isConnected&&this.#r()),this.#e?this.#s(m(this.#e)):q}reconnected(){this.#r()}disconnected(){this.#i?.(),this.#i=null}#r(){this.#e&&(this.#i=u(this.#o.bind(this)))}#s(e){return this.#t?Tr(e):e}#n(e){this.setValue(this.#s(e))}#o(){if(0)try{}catch(e){}else this.#n(this.#e?.())}};function $(s){return bt(js)(re(s))}var xr=class extends HTMLElement{rootPart=null;connectedCallback(){this.rootPart=Ie(this.render(),this,{renderBefore:this.firstChild}),this.rootPart.setConnected(!0)}disconnectedCallback(){this.rootPart?.setConnected(!1),this.rootPart=null,Ie(null,this)}};var Et=class{#e;#t;elements=new Set;constructor(e,t){this.#e=e,this.#t=t}connect(){this.#r();let e=new MutationObserver(this.#i);for(let t of this.#e)e.observe(t,{childList:!0,subtree:!0});x(()=>e.disconnect()),x(this.disconnect.bind(this))}disconnect(){this.elements.clear()}assign(e,t){pn(e)?(t.textContent="",t.append(e)):(Ie(null,t),Ie(e,t)),t.style.display||(t.style.display="contents");let i=t.firstElementChild;if(!i)return;let r=t.getAttribute("data-class");r&&i.classList.add(...r.split(" "))}#i=le(this.#r.bind(this));#r(e){if(e&&!e.some(r=>r.addedNodes.length))return;let t=!1,i=this.#e.flatMap(r=>[...r.querySelectorAll("slot")]);for(let r of i)!r.hasAttribute("name")||this.elements.has(r)||(this.elements.add(r),t=!0);t&&this.#t(this.elements)}};var La=0,Mr="data-slot-id",Sr=class{#e;slots;constructor(e){this.#e=e,this.slots=new Et(e,this.#i.bind(this))}connect(){this.slots.connect(),this.#i();let e=new MutationObserver(this.#t);for(let t of this.#e)e.observe(t,{childList:!0});x(()=>e.disconnect())}#t=le(this.#i.bind(this));#i(){for(let e of this.#e)for(let t of e.children){if(t.nodeType!==1)continue;let i=t.getAttribute("slot");if(!i)continue;t.style.display="none";let r=t.getAttribute(Mr);r||t.setAttribute(Mr,r=++La+"");for(let n of this.slots.elements){if(n.getAttribute("name")!==i||n.getAttribute(Mr)===r)continue;let o=document.importNode(t,!0);i.includes("-icon")&&o.classList.add("vds-icon"),o.style.display="",o.removeAttribute("slot"),this.slots.assign(o,n),n.setAttribute(Mr,r)}}}};var Ra=1,ot=class extends vt{constructor(e){if(super(e),this._value=q,e.type!==nt.CHILD)throw new Error(`${this.constructor.directiveName}() can only be used in child bindings`)}render(e){if(e===q||e==null)return this._templateResult=void 0,this._value=e;if(e===tt)return e;if(typeof e!="string")throw new Error(`${this.constructor.directiveName}() called with a non-string value`);if(e===this._value)return this._templateResult;this._value=e;let t=[e];return t.raw=t,this._templateResult={_$litType$:this.constructor.resultType,strings:t,values:[]}}};ot.directiveName="unsafeHTML";ot.resultType=Ra;var Xs=bt(ot);var Aa=2,Ut=class extends ot{};Ut.directiveName="unsafeSVG";Ut.resultType=Aa;var So=bt(Ut);function Po({name:s,class:e,state:t,paths:i,viewBox:r="0 0 32 32"}){return _`<svg
    class="${"vds-icon"+(e?` ${e}`:"")}"
    viewBox="${r}"
    fill="none"
    aria-hidden="true"
    focusable="false"
    xmlns="http://www.w3.org/2000/svg"
    data-icon=${Tr(s??t)}
  >
    ${E(i)?So(i):$(i)}
  </svg>`}var Pr=class{#e={};#t=!1;slots;constructor(e){this.slots=new Et(e,this.#r.bind(this))}connect(){this.slots.connect()}load(){this.loadIcons().then(e=>{this.#e=e,this.#t=!0,this.#r()})}*#i(){for(let e of Object.keys(this.#e)){let t=`${e}-icon`;for(let i of this.slots.elements)i.name===t&&(yield{icon:this.#e[e],slot:i})}}#r(){if(this.#t)for(let{icon:e,slot:t}of this.#i())this.slots.assign(e,t)}};var _r=class extends Pr{connect(){super.connect();let{player:e}=g();if(!e.el)return;let t,i=new IntersectionObserver(r=>{r[0]?.isIntersecting&&(t?.(),t=void 0,this.load())});i.observe(e.el),t=x(()=>i.disconnect())}};var kr=class extends _r{async loadIcons(){let e=(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-235QJEHX.js")).icons,t={};for(let i of Object.keys(e))t[i]=Po({name:i,paths:e[i],viewBox:"0 0 18 18"});return t}};function Wt(s,e){return s()?.[e]??e}function ko(){return Ia()}function Co(){let s=g(),{load:e}=s.$props,{canLoad:t}=s.$state;return re(()=>e()==="play"&&!t())()?[wo(),_o()]:[Va(),Da(),_o(),qa(),Ja(),Za()]}function wo(){let s=g(),{translations:e}=I(),{title:t}=s.$state,i=$(()=>`${Wt(e,"Play")}, ${t()}`);return _`
    <media-play-button
      class="plyr__control plyr__control--overlaid"
      aria-label=${i}
      data-plyr="play"
    >
      <slot name="play-icon"></slot>
    </button>
  `}function Va(){let{controls:s}=I();return $(()=>s().includes("play-large")?wo():null)}function Da(){let{thumbnails:s,previewTime:e}=I();return _`
    <media-thumbnail
      .src=${$(s)}
      class="plyr__preview-scrubbing"
      time=${$(()=>e())}
    ></media-thumbnail>
  `}function _o(){let s=g(),{poster:e}=s.$state,t=$(()=>`background-image: url("${e()}");`);return _`<div class="plyr__poster" style=${t}></div>`}function Ia(){let s=new Set(["captions","pip","airplay","fullscreen"]),{controls:e}=I(),t=$(()=>e().filter(i=>!s.has(i)).map($o));return _`<div class="plyr__controls">${t}</div>`}function qa(){let{controls:s}=I(),e=$(()=>s().map($o));return _`<div class="plyr__controls">${e}</div>`}function $o(s){switch(s){case"airplay":return Oa();case"captions":return Ha();case"current-time":return ja();case"download":return Xa();case"duration":return Lo();case"fast-forward":return Ua();case"fullscreen":return Na();case"mute":case"volume":case"mute+volume":return za(s);case"pip":return Ba();case"play":return Ga();case"progress":return Wa();case"restart":return Qa();case"rewind":return Ka();case"settings":return el();default:return null}}function Oa(){let{translations:s}=I();return _`
    <media-airplay-button class="plyr__controls__item plyr__control" data-plyr="airplay">
      <slot name="airplay-icon"></slot>
      <span class="plyr__tooltip">${O(s,"AirPlay")}</span>
    </media-airplay-button>
  `}function Ha(){let{translations:s}=I(),e=O(s,"Disable captions"),t=O(s,"Enable captions");return _`
    <media-caption-button
      class="plyr__controls__item plyr__control"
      data-no-label
      data-plyr="captions"
    >
      <slot name="captions-on-icon" data-class="icon--pressed"></slot>
      <slot name="captions-off-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-caption-button>
  `}function Na(){let{translations:s}=I(),e=O(s,"Enter Fullscreen"),t=O(s,"Exit Fullscreen");return _`
    <media-fullscreen-button
      class="plyr__controls__item plyr__control"
      data-no-label
      data-plyr="fullscreen"
    >
      <slot name="enter-fullscreen-icon" data-class="icon--pressed"></slot>
      <slot name="exit-fullscreen-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-fullscreen-button>
  `}function Fa(){let{translations:s}=I(),e=O(s,"Mute"),t=O(s,"Unmute");return _`
    <media-mute-button class="plyr__control" data-no-label data-plyr="mute">
      <slot name="muted-icon" data-class="icon--pressed"></slot>
      <slot name="volume-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-mute-button>
  `}function Ba(){let{translations:s}=I(),e=O(s,"Enter PiP"),t=O(s,"Exit PiP");return _`
    <media-pip-button class="plyr__controls__item plyr__control" data-no-label data-plyr="pip">
      <slot name="pip-icon"></slot>
      <slot name="enter-pip-icon" data-class="icon--pressed"></slot>
      <slot name="exit-pip-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-pip-button>
  `}function Ga(){let{translations:s}=I(),e=O(s,"Play"),t=O(s,"Pause");return _`
    <media-play-button class="plyr__controls__item plyr__control" data-no-label data-plyr="play">
      <slot name="pause-icon" data-class="icon--pressed"></slot>
      <slot name="play-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-play-button>
  `}function Qa(){let{translations:s}=I(),{remote:e}=g(),t=O(s,"Restart");function i(r){ze(r)&&!Ct(r)||e.seek(0,r)}return _`
    <button
      type="button"
      class="plyr__control"
      data-plyr="restart"
      @pointerup=${i}
      @keydown=${i}
    >
      <slot name="restart-icon"></slot>
      <span class="plyr__tooltip">${t}</span>
    </button>
  `}function Ka(){let{translations:s,seekTime:e}=I(),t=$(()=>`${Wt(s,"Rewind")} ${e()}s`),i=$(()=>-1*e());return _`
    <media-seek-button
      class="plyr__controls__item plyr__control"
      seconds=${i}
      data-no-label
      data-plyr="rewind"
    >
      <slot name="rewind-icon"></slot>
      <span class="plyr__tooltip">${t}</span>
    </media-seek-button>
  `}function Ua(){let{translations:s,seekTime:e}=I(),t=$(()=>`${Wt(s,"Forward")} ${e()}s`),i=$(e);return _`
    <media-seek-button
      class="plyr__controls__item plyr__control"
      seconds=${i}
      data-no-label
      data-plyr="fast-forward"
    >
      <slot name="fast-forward-icon"></slot>
      <span class="plyr__tooltip">${t}</span>
    </media-seek-button>
  `}function Wa(){let s=g(),{duration:e,viewType:t}=s.$state,{translations:i,markers:r,thumbnails:n,seekTime:o,previewTime:l}=I(),a=O(i,"Seek"),d=S(null),c=$(()=>{let C=d();return C?_`<span class="plyr__progress__marker-label">${Xs(C.label)}<br /></span>`:null});function p(C){l.set(C.detail)}function h(){d.set(this)}function f(){d.set(null)}function M(){let C=n(),K=$(()=>t()==="audio");return C?_`
          <media-slider-preview class="plyr__slider__preview" ?no-clamp=${K}>
            <media-slider-thumbnail .src=${C} class="plyr__slider__preview__thumbnail">
              <span class="plyr__slider__preview__time-container">
                ${c}
                <media-slider-value class="plyr__slider__preview__time"></media-slider-value>
              </span>
            </media-slider-thumbnail>
          </media-slider-preview>
        `:_`
          <span class="plyr__tooltip">
            ${c}
            <media-slider-value></media-slider-value>
          </span>
        `}function L(){let C=e();return Number.isFinite(C)?r()?.map(K=>_`
        <span
          class="plyr__progress__marker"
          @mouseenter=${h.bind(K)}
          @mouseleave=${f}
          style=${`left: ${K.time/C*100}%;`}
        ></span>
      `):null}return _`
    <div class="plyr__controls__item plyr__progress__container">
      <div class="plyr__progress">
        <media-time-slider
          class="plyr__slider"
          data-plyr="seek"
          pause-while-dragging
          key-step=${$(o)}
          aria-label=${a}
          @media-seeking-request=${p}
        >
          <div class="plyr__slider__track"></div>
          <div class="plyr__slider__thumb"></div>
          <div class="plyr__slider__buffer"></div>
          ${$(M)}${$(L)}
        </media-time-slider>
      </div>
    </div>
  `}function za(s){return $(()=>{let e=s==="mute"||s==="mute+volume",t=s==="volume"||s==="mute+volume";return _`
      <div class="plyr__controls__item plyr__volume">
        ${[e?Fa():null,t?Ya():null]}
      </div>
    `})}function Ya(){let{translations:s}=I(),e=O(s,"Volume");return _`
    <media-volume-slider class="plyr__slider" data-plyr="volume" aria-label=${e}>
      <div class="plyr__slider__track"></div>
      <div class="plyr__slider__thumb"></div>
    </media-volume-slider>
  `}function ja(){let s=g(),{translations:e,invertTime:t,toggleTime:i,displayDuration:r}=I(),n=S(m(t));function o(a){!i()||r()||ze(a)&&!Ct(a)||n.set(d=>!d)}function l(){return $(()=>r()?Lo():null)}return $(()=>{let{streamType:a}=s.$state,d=O(e,"LIVE"),c=O(e,"Current time"),p=$(()=>!r()&&n());return a()==="live"||a()==="ll-live"?_`
          <media-live-button
            class="plyr__controls__item plyr__control plyr__live-button"
            data-plyr="live"
          >
            <span class="plyr__live-button__text">${d}</span>
          </media-live-button>
        `:_`
          <media-time
            type="current"
            class="plyr__controls__item plyr__time plyr__time--current"
            tabindex="0"
            role="timer"
            aria-label=${c}
            ?remainder=${p}
            @pointerup=${o}
            @keydown=${o}
          ></media-time>
          ${l()}
        `})}function Lo(){let{translations:s}=I(),e=O(s,"Duration");return _`
    <media-time
      type="duration"
      class="plyr__controls__item plyr__time plyr__time--duration"
      role="timer"
      tabindex="0"
      aria-label=${e}
    ></media-time>
  `}function Xa(){return $(()=>{let s=g(),{translations:e,download:t}=I(),{title:i,source:r}=s.$state,n=r(),o=t(),l=Cn({title:i(),src:n,download:o}),a=O(e,"Download");return l?_`
          <a
            class="plyr__controls__item plyr__control"
            href=${l.url+`?download=${l.name}`}
            download=${l.name}
            target="_blank"
          >
            <slot name="download-icon" />
            <span class="plyr__tooltip">${a}</span>
          </a>
        `:null})}function Ja(){return $(()=>{let{clickToPlay:s,clickToFullscreen:e}=I();return[s()?_`
            <media-gesture
              class="plyr__gesture"
              event="pointerup"
              action="toggle:paused"
            ></media-gesture>
          `:null,e()?_`
            <media-gesture
              class="plyr__gesture"
              event="dblpointerup"
              action="toggle:fullscreen"
            ></media-gesture>
          `:null]})}function Za(){let s=g(),e=S(void 0),t=$(()=>Xs(e()?.text));return u(()=>{let i=s.$state.textTrack();if(!i)return;function r(){e.set(i?.activeCues[0])}return r(),y(i,"cue-change",r)}),_`
    <div class="plyr__captions" dir="auto">
      <span class="plyr__caption">${t}</span>
    </div>
  `}function el(){let{translations:s}=I(),e=O(s,"Settings");return _`
    <div class="plyr__controls__item plyr__menu">
      <media-menu>
        <media-menu-button class="plyr__control" data-plyr="settings">
          <slot name="settings-icon" />
          <span class="plyr__tooltip">${e}</span>
        </media-menu-button>
        <media-menu-items class="plyr__menu__container" placement="top end">
          <div><div>${[il(),ol(),ll(),sl()]}</div></div>
        </media-menu-items>
      </media-menu>
    </div>
  `}function Cr({label:s,children:e}){let t=S(!1);return _`
    <media-menu @open=${()=>t.set(!0)} @close=${()=>t.set(!1)}>
      ${tl({label:s,open:t})}
      <media-menu-items>${e}</media-menu-items>
    </media-menu>
  `}function tl({open:s,label:e}){let{translations:t}=I(),i=$(()=>`plyr__control plyr__control--${s()?"back":"forward"}`);function r(){let n=O(t,"Go back to previous menu");return $(()=>s()?_`<span class="plyr__sr-only">${n}</span>`:null)}return _`
    <media-menu-button class=${i} data-plyr="settings">
      <span class="plyr__menu__label" aria-hidden=${ul(s)}>
        ${O(t,e)}
      </span>
      <span class="plyr__menu__value" data-part="hint"></span>
      ${r()}
    </media-menu-button>
  `}function il(){return Cr({label:"Audio",children:rl()})}function rl(){let{translations:s}=I();return _`
    <media-audio-radio-group empty-label=${O(s,"Default")}>
      <template>
        <media-radio class="plyr__control" data-plyr="audio">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-audio-radio-group>
  `}function sl(){return Cr({label:"Speed",children:nl()})}function nl(){let{translations:s,speed:e}=I();return _`
    <media-speed-radio-group .rates=${e} normal-label=${O(s,"Normal")}>
      <template>
        <media-radio class="plyr__control" data-plyr="speed">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-speed-radio-group>
  `}function ol(){return Cr({label:"Captions",children:al()})}function al(){let{translations:s}=I();return _`
    <media-captions-radio-group off-label=${O(s,"Disabled")}>
      <template>
        <media-radio class="plyr__control" data-plyr="captions">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-captions-radio-group>
  `}function ll(){return Cr({label:"Quality",children:dl()})}function dl(){let{translations:s}=I();return _`
    <media-quality-radio-group auto-label=${O(s,"Auto")}>
      <template>
        <media-radio class="plyr__control" data-plyr="quality">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-quality-radio-group>
  `}function ul(s){return $(()=>s()?"true":"false")}function O(s,e){return $(()=>Wt(s,e))}var wr=class extends T(xr,lr){static tagName="media-plyr-layout";#e;onSetup(){this.forwardKeepAlive=!1,this.#e=g()}onConnect(){this.#e.player.el?.setAttribute("data-layout","plyr"),x(()=>this.#e.player.el?.removeAttribute("data-layout")),no(this,this.#e),u(()=>{this.$props.customIcons()?new Sr([this]).connect():new kr([this]).connect()})}render(){return $(this.#t.bind(this))}#t(){let{viewType:e}=this.#e.$state;return e()==="audio"?ko():e()==="video"?Co():null}};var G=se();var Ro=se();var Ve=class extends F{#e=new Set;#t=S("");#i=null;onValueChange;get values(){return Array.from(this.#e).map(e=>e.value())}get value(){return this.#t()}set value(e){this.#o(e)}onSetup(){z(Ro,{add:this.#r.bind(this),remove:this.#s.bind(this)})}onAttach(e){Y(G)||w(e,"role","radiogroup"),this.setAttributes({value:this.#t})}onDestroy(){this.#e.clear()}#r(e){this.#e.has(e)||(this.#e.add(e),e.onCheck=this.#n,e.check(e.value()===this.#t()))}#s(e){e.onCheck=null,this.#e.delete(e)}#n=this.#o.bind(this);#o(e,t){let i=m(this.#t);if(!e||e===i)return;let r=this.#a(i),n=this.#a(e);r?.check(!1,t),n?.check(!0,t),this.#t.set(e),this.onValueChange?.(e,t)}#a(e){for(let t of this.#e)if(e===m(t.value))return t;return null}};var $r=class extends b{static props={emptyLabel:"Default"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{audioTracks:e}=this.#t.$state;return e().length<=1}constructor(){super(),this.#i=new Ve,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#t=g(),Y(G)&&(this.#e=V(G))}onConnect(e){u(this.#r.bind(this)),u(this.#n.bind(this)),u(this.#s.bind(this))}getOptions(){let{audioTracks:e}=this.#t.$state;return e().map(t=>({track:t,label:t.label,value:t.label.toLowerCase()}))}#r(){this.#i.value=this.#o()}#s(){let{emptyLabel:e}=this.$props,{audioTrack:t}=this.#t.$state,i=t();this.#e?.hint.set(i?.label??e())}#n(){this.#e?.disable(this.disabled)}#o(){let{audioTrack:e}=this.#t.$state,t=e();return t?t.label.toLowerCase():""}#a(e,t){if(this.disabled)return;let i=this.#t.audioTracks.toArray().findIndex(r=>r.label.toLowerCase()===e);if(i>=0){let r=this.#t.audioTracks[i];this.#t.remote.changeAudioTrack(i,t),this.dispatch("change",{detail:r,trigger:t})}}};function Qe(s,e){Rn(()=>{if(!s.connectScope)return;let t=s.querySelector("template");t&&u(()=>{let i=s.getOptions();An(t,i.length,(r,n)=>{let{label:o,value:l}=i[n],a=r.querySelector('[data-part="label"]');r.setAttribute("value",l),a&&(E(o)?a.textContent=o:u(()=>{a.textContent=o()})),e?.(r,i[n],n)})})})}var Lr=class extends T(HTMLElement,$r){static tagName="media-audio-radio-group";onConnect(){Qe(this)}};var Rr=class extends b{static props={offLabel:"Off"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{hasCaptions:e}=this.#e.$state;return!e()}constructor(){super(),this.#i=new Ve,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=g(),Y(G)&&(this.#t=V(G))}onConnect(e){super.onConnect?.(e),u(this.#r.bind(this)),u(this.#n.bind(this)),u(this.#s.bind(this))}getOptions(){let{offLabel:e}=this.$props,{textTracks:t}=this.#e.$state;return[{value:"off",label:e},...t().filter(B).map(i=>({track:i,label:i.label,value:this.#l(i)}))]}#r(){this.#i.value=this.#o()}#s(){let{offLabel:e}=this.$props,{textTrack:t}=this.#e.$state,i=t();this.#t?.hint.set(i&&B(i)&&i.mode==="showing"?i.label:e())}#n(){this.#t?.disable(this.disabled)}#o(){let{textTrack:e}=this.#e.$state,t=e();return t&&B(t)&&t.mode==="showing"?this.#l(t):"off"}#a(e,t){if(this.disabled)return;if(e==="off"){let r=this.#e.textTracks.selected;if(r){let n=this.#e.textTracks.indexOf(r);this.#e.remote.changeTextTrackMode(n,"disabled",t),this.dispatch("change",{detail:null,trigger:t})}return}let i=this.#e.textTracks.toArray().findIndex(r=>this.#l(r)===e);if(i>=0){let r=this.#e.textTracks[i];this.#e.remote.changeTextTrackMode(i,"showing",t),this.dispatch("change",{detail:r,trigger:t})}}#l(e){return e.id+":"+e.kind+"-"+e.label.toLowerCase()}};var Ar=class extends T(HTMLElement,Rr){static tagName="media-captions-radio-group";onConnect(){Qe(this)}};var Tt=class extends b{static props={disabled:!1};#e;#t=S(null);get expanded(){return this.#e?.expanded()??!1}constructor(){super(),new te}onSetup(){this.#e=V(G)}onAttach(e){this.#e.attachMenuButton(this),u(this.#i.bind(this)),w(e,"type","button")}onConnect(e){u(this.#r.bind(this)),this.#s();let t=new MutationObserver(this.#s.bind(this));t.observe(e,{attributeFilter:["data-part"],childList:!0,subtree:!0}),x(()=>t.disconnect()),ye(e,i=>{this.dispatch("select",{trigger:i})})}#i(){this.#e.disableMenuButton(this.$props.disabled())}#r(){let e=this.#t();e&&u(()=>{let t=this.#e.hint();t&&(e.textContent=t)})}#s(){let e=this.el?.querySelector('[data-part="hint"]');this.#t.set(e??null)}};var Vr=class extends T(HTMLElement,Tt){static tagName="media-menu-button"};var Dr=class extends F{#e;constructor(e){super(),this.#e=e,u(this.#t.bind(this))}onDestroy(){this.#s?.(),this.#s=null}#t(){let e=this.#e.trigger();if(!e){this.hide();return}let t=this.show.bind(this),i=this.hide.bind(this);this.#e.listen(e,t,i)}#i=-1;#r=-1;#s=null;show(e){this.#n(),window.cancelAnimationFrame(this.#r),this.#r=-1,this.#s?.(),this.#s=null,this.#i=window.setTimeout(()=>{this.#i=-1;let t=this.#e.content();t&&t.style.removeProperty("display"),m(()=>this.#e.onChange(!0,e))},this.#e.showDelay?.()??0)}hide(e){this.#n(),m(()=>this.#e.onChange(!1,e)),this.#r=requestAnimationFrame(()=>{this.#n(),this.#r=-1;let t=this.#e.content();if(t){let i=()=>{t.style.display="none",this.#s=null};if(qn(t)){this.#s?.();let n=y(t,"animationend",i,{once:!0});this.#s=n}else i()}})}#n(){window.clearTimeout(this.#i),this.#i=-1}};var xt=se(),at=se();var Ao=s=>typeof s=="object"&&s!=null&&s.nodeType===1,Vo=(s,e)=>(!e||s!=="hidden")&&s!=="visible"&&s!=="clip",Js=(s,e)=>{if(s.clientHeight<s.scrollHeight||s.clientWidth<s.scrollWidth){let t=getComputedStyle(s,null);return Vo(t.overflowY,e)||Vo(t.overflowX,e)||(i=>{let r=(n=>{if(!n.ownerDocument||!n.ownerDocument.defaultView)return null;try{return n.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(s)}return!1},Ir=(s,e,t,i,r,n,o,l)=>n<s&&o>e||n>s&&o<e?0:n<=s&&l<=t||o>=e&&l>=t?n-s-i:o>e&&l<t||n<s&&l>t?o-e+r:0,cl=s=>{let e=s.parentElement;return e??(s.getRootNode().host||null)},Do=(s,e)=>{var t,i,r,n;if(typeof document>"u")return[];let{scrollMode:o,block:l,inline:a,boundary:d,skipOverflowHiddenElements:c}=e,p=typeof d=="function"?d:Ue=>Ue!==d;if(!Ao(s))throw new TypeError("Invalid target");let h=document.scrollingElement||document.documentElement,f=[],M=s;for(;Ao(M)&&p(M);){if(M=cl(M),M===h){f.push(M);break}M!=null&&M===document.body&&Js(M)&&!Js(document.documentElement)||M!=null&&Js(M,c)&&f.push(M)}let L=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,C=(n=(r=window.visualViewport)==null?void 0:r.height)!=null?n:innerHeight,{scrollX:K,scrollY:ne}=window,{height:be,width:U,top:pe,right:D,bottom:J,left:oe}=s.getBoundingClientRect(),{top:he,right:Ee,bottom:ie,left:Te}=(Ue=>{let H=window.getComputedStyle(Ue);return{top:parseFloat(H.scrollMarginTop)||0,right:parseFloat(H.scrollMarginRight)||0,bottom:parseFloat(H.scrollMarginBottom)||0,left:parseFloat(H.scrollMarginLeft)||0}})(s),ae=l==="start"||l==="nearest"?pe-he:l==="end"?J+ie:pe+be/2-he+ie,Z=a==="center"?oe+U/2-Te+Ee:a==="end"?D+Ee:oe-Te,lt=[];for(let Ue=0;Ue<f.length;Ue++){let H=f[Ue],{height:Yt,width:jt,top:Xt,right:ps,bottom:hs,left:Jt}=H.getBoundingClientRect();if(o==="if-needed"&&pe>=0&&oe>=0&&J<=C&&D<=L&&pe>=Xt&&J<=hs&&oe>=Jt&&D<=ps)return lt;let Zt=getComputedStyle(H),ei=parseInt(Zt.borderLeftWidth,10),ti=parseInt(Zt.borderTopWidth,10),ii=parseInt(Zt.borderRightWidth,10),ri=parseInt(Zt.borderBottomWidth,10),He=0,Ne=0,si="offsetWidth"in H?H.offsetWidth-H.clientWidth-ei-ii:0,ni="offsetHeight"in H?H.offsetHeight-H.clientHeight-ti-ri:0,ms="offsetWidth"in H?H.offsetWidth===0?0:jt/H.offsetWidth:0,fs="offsetHeight"in H?H.offsetHeight===0?0:Yt/H.offsetHeight:0;if(h===H)He=l==="start"?ae:l==="end"?ae-C:l==="nearest"?Ir(ne,ne+C,C,ti,ri,ne+ae,ne+ae+be,be):ae-C/2,Ne=a==="start"?Z:a==="center"?Z-L/2:a==="end"?Z-L:Ir(K,K+L,L,ei,ii,K+Z,K+Z+U,U),He=Math.max(0,He+ne),Ne=Math.max(0,Ne+K);else{He=l==="start"?ae-Xt-ti:l==="end"?ae-hs+ri+ni:l==="nearest"?Ir(Xt,hs,Yt,ti,ri+ni,ae,ae+be,be):ae-(Xt+Yt/2)+ni/2,Ne=a==="start"?Z-Jt-ei:a==="center"?Z-(Jt+jt/2)+si/2:a==="end"?Z-ps+ii+si:Ir(Jt,ps,jt,ei,ii+si,Z,Z+U,U);let{scrollLeft:nn,scrollTop:on}=H;He=fs===0?0:Math.max(0,Math.min(on+He/fs,H.scrollHeight-Yt/fs+ni)),Ne=ms===0?0:Math.max(0,Math.min(nn+Ne/ms,H.scrollWidth-jt/ms+si)),ae+=on-He,Z+=nn-Ne}lt.push({el:H,top:He,left:Ne})}return lt};function pl(s,e){let t=Do(s,e);for(let{el:i,top:r,left:n}of t)i.scroll({top:r,left:n,behavior:e.behavior})}function Io(s,e={}){pl(s,{scrollMode:"if-needed",block:"center",inline:"center",...e})}var hl=["a[href]","[tabindex]","input","select","button"].map(s=>`${s}:not([aria-hidden='true'])`).join(","),ml=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]),qr=class{#e=-1;#t=null;#i=[];#r;get items(){return this.#i}constructor(e){this.#r=e}attachMenu(e){y(e,"focus",this.#o.bind(this)),this.#t=e,x(()=>{this.#t=null})}listen(){this.#t&&(this.update(),y(this.#t,"keyup",this.#l.bind(this)),y(this.#t,"keydown",this.#u.bind(this)),x(()=>{this.#e=-1,this.#i=[]}))}update(){this.#e=0,this.#i=this.#c()}scroll(e=this.#n()){let t=this.#i[e];t&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{Io(t,{behavior:"smooth",boundary:i=>!i.hasAttribute("data-root")})})})}focusActive(e=!0){let t=this.#n();this.#s(t>=0?t:0,e)}#s(e,t=!0){this.#e=e,this.#i[e]?(this.#i[e].focus({preventScroll:!0}),t&&this.scroll(e)):this.#t?.focus({preventScroll:!0})}#n(){return this.#i.findIndex(e=>document.activeElement===e||e.getAttribute("role")==="menuitemradio"&&e.getAttribute("aria-checked")==="true")}#o(){this.#e>=0||(this.update(),this.focusActive())}#a(e){let t=e.target;if(cn(e)&&t instanceof Element){let i=t.getAttribute("role");return!/a|input|select|button/.test(t.localName)&&!i}return ml.has(e.key)}#l(e){this.#a(e)&&(e.stopPropagation(),e.preventDefault())}#u(e){if(this.#a(e))switch(e.stopPropagation(),e.preventDefault(),e.key){case"Escape":this.#r.closeMenu(e);break;case"Tab":this.#s(this.#p(e.shiftKey?-1:1));break;case"ArrowUp":this.#s(this.#p(-1));break;case"ArrowDown":this.#s(this.#p(1));break;case"Home":case"PageUp":this.#s(0);break;case"End":case"PageDown":this.#s(this.#i.length-1);break}}#p(e){let t=this.#e;do t=(t+e+this.#i.length)%this.#i.length;while(this.#i[t]?.offsetParent===null);return t}#c(){if(!this.#t)return[];let e=this.#t.querySelectorAll(hl),t=[],i=r=>r.getAttribute("role")==="menu";for(let r of e)$e(r)&&r.offsetParent!==null&&mi(this.#t,r,i)&&t.push(r);return t}};var fl=0,Or=class extends b{static props={showDelay:0};#e;#t;#i;#r=S(!1);#s=S(!1);#n=S(null);#o=S(null);#a;#l=new Set;#u=null;#p;#c;#d=!1;#h=S(!1);#f=new Set;get triggerElement(){return this.#n()}get contentElement(){return this.#o()}get isSubmenu(){return!!this.#a}constructor(){super();let{showDelay:e}=this.$props;this.#p=new Dr({trigger:this.#n,content:this.#o,showDelay:e,listen:(t,i,r)=>{ye(t,o=>{this.#r()?r(o):i(o)});let n=this.#L();n&&ye(n,o=>{o.stopPropagation(),r(o)})},onChange:this.#b.bind(this)})}onSetup(){this.#e=g();let e=++fl;this.#t=`media-menu-${e}`,this.#i=`media-menu-button-${e}`,this.#c=new qr({closeMenu:this.close.bind(this)}),Y(G)&&(this.#a=V(G)),this.#g(),this.setAttributes({"data-open":this.#r,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#_.bind(this)}),z(G,{button:this.#n,content:this.#o,expanded:this.#r,hint:S(""),submenu:!!this.#a,disable:this.#w.bind(this),attachMenuButton:this.#M.bind(this),attachMenuItems:this.#E.bind(this),attachObserver:this.#T.bind(this),disableMenuButton:this.#x.bind(this),addSubmenu:this.#D.bind(this),onTransitionEvent:t=>{this.#f.add(t),x(()=>{this.#f.delete(t)})}})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){u(this.#y.bind(this)),this.isSubmenu&&this.#a?.addSubmenu(this)}onDestroy(){this.#n.set(null),this.#o.set(null),this.#u=null,this.#f.clear()}#g(){let e=-1,t=Y(at)?V(at):null;z(at,{onDragStart:()=>{t?.onDragStart?.(),window.clearTimeout(e),e=-1,this.#d=!0},onDragEnd:()=>{t?.onDragEnd?.(),e=window.setTimeout(()=>{this.#d=!1,e=-1},300)}})}#y(){let e=this.#P();this.isSubmenu||this.#O(),this.#v(e),e&&(u(()=>{let{height:t}=this.#e.$state,i=this.#o();i&&Pe(i,"--player-height",t()+"px")}),this.#c.listen(),this.listen("pointerup",this.#$.bind(this)),y(window,"pointerup",this.#C.bind(this)))}#M(e){let t=e.el,i=this.isSubmenu,r=j(this.#_.bind(this));w(t,"tabindex",i?"-1":"0"),w(t,"role",i?"menuitem":"button"),v(t,"id",this.#i),v(t,"aria-haspopup","menu"),v(t,"aria-expanded","false"),v(t,"data-root",!this.isSubmenu),v(t,"data-submenu",this.isSubmenu),u(()=>{v(t,"data-open",this.#r()),v(t,"aria-disabled",r())}),this.#n.set(t),x(()=>{this.#n.set(null)})}#E(e){let t=e.el;t.style.setProperty("display","none"),v(t,"id",this.#t),w(t,"role","menu"),w(t,"tabindex","-1"),v(t,"data-root",!this.isSubmenu),v(t,"data-submenu",this.isSubmenu),this.#o.set(t),x(()=>this.#o.set(null)),u(()=>v(t,"data-open",this.#r())),this.#c.attachMenu(t),this.#v(!1);let r=this.#B.bind(this);this.isSubmenu?this.#a?.onTransitionEvent(r):(e.listen("transitionstart",r),e.listen("transitionend",r),e.listen("animationend",this.#O),e.listen("vds-menu-resize",this.#O))}#T(e){this.#u=e}#v(e){let t=m(this.#o);t&&v(t,"aria-hidden",Ye(!e))}#x(e){this.#h.set(e)}#m=!1;#b(e,t){if(this.#m=ze(t),t?.stopPropagation(),this.#r()===e)return;if(this.#_()){e&&this.#p.hide(t);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let i=this.#n(),r=this.#o();if(i&&(v(i,"aria-controls",e&&this.#t),v(i,"aria-expanded",Ye(e))),r&&v(r,"aria-labelledby",e&&this.#i),this.#r.set(e),this.#R(t),me(),this.#m){e?r?.focus():i?.focus();for(let n of[this.el,r])n&&n.setAttribute("data-keyboard","")}else for(let n of[this.el,r])n&&n.removeAttribute("data-keyboard");if(this.dispatch(e?"open":"close",{trigger:t}),e)!this.isSubmenu&&this.#e.activeMenu!==this&&(this.#e.activeMenu?.close(t),this.#e.activeMenu=this),this.#u?.onOpen?.(t);else{if(this.isSubmenu)for(let n of this.#l)n.close(t);else this.#e.activeMenu=null;this.#u?.onClose?.(t)}e&&requestAnimationFrame(this.#S.bind(this))}#S(){this.#H||this.#k||(this.#c.update(),requestAnimationFrame(()=>{this.#m?this.#c.focusActive():this.#c.scroll()}))}#P(){return!this.#_()&&this.#r()}#_(){return this.#s()||this.#h()}#w(e){this.#s.set(e)}#$(e){let t=this.#o();this.#d||t&&Ts(t,e)||e.stopPropagation()}#C(e){let t=this.#o();this.#d||t&&Ts(t,e)||this.close(e)}#L(){let e=this.el?.querySelector('[data-part="close-target"]');return this.el&&e&&mi(this.el,e,t=>t.getAttribute("role")==="menu")?e:null}#R(e){this.isSubmenu||(this.#r()?this.#e.remote.pauseControls(e):this.#e.remote.resumeControls(e))}#D(e){this.#l.add(e),y(e,"open",this.#q),y(e,"close",this.#N),x(this.#A)}#A=this.#I.bind(this);#I(e){this.#l.delete(e)}#k=!1;#q=this.#V.bind(this);#V(e){this.#k=!0;let t=this.#o();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(let i of this.#l)if(i!==e.target)for(let r of[i.el,i.triggerElement])r?.setAttribute("aria-hidden","true");if(t){let i=e.target.el;for(let r of t.children)r.contains(i)?r.setAttribute("data-open",""):r!==i&&r.setAttribute("data-hidden","")}}#N=this.#F.bind(this);#F(e){this.#k=!1;let t=this.#o();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(let i of this.#l)for(let r of[i.el,i.triggerElement])r?.setAttribute("aria-hidden","false");if(t)for(let i of t.children)i.removeAttribute("data-open"),i.removeAttribute("data-hidden")}#O=le(()=>{let e=m(this.#o);if(!e)return;let t=0,i=getComputedStyle(e),r=[...e.children];for(let n of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])t+=parseFloat(i[n])||0;for(let n of r)if($e(n)&&n.style.display==="contents")r.push(...n.children);else if(n.nodeType===3)t+=parseFloat(getComputedStyle(n).fontSize);else if($e(n)){if(!Ln(n))continue;let o=getComputedStyle(n);t+=n.offsetHeight+(parseFloat(o.marginTop)||0)+(parseFloat(o.marginBottom)||0)}Pe(e,"--menu-height",t+"px")});#H=!1;#B(e){let t=this.#o();t&&e.propertyName==="height"&&(this.#H=e.type==="transitionstart",v(t,"data-transition",this.#H?"height":null),this.#r()&&this.#S());for(let i of this.#f)i(e)}open(e){m(this.#r)||(this.#p.show(e),me())}close(e){m(this.#r)&&(this.#p.hide(e),me())}};var Hr=class extends T(HTMLElement,Or){static tagName="media-menu"};var Nr=class extends Tt{};var Fr=class extends T(HTMLElement,Nr){static tagName="media-menu-item"};var Br=se();var Gr=class extends b{static props={placement:null,offset:0,alignOffset:0};#e;constructor(){super(),new te;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){if(this.#e=V(G),this.#e.attachMenuItems(this),Y(Br)){let t=V(Br);t&&(z(Br,null),t.attach(e),x(()=>t.attach(null)))}}onConnect(e){u(this.#t.bind(this))}#t(){if(!this.el)return;let e=this.$props.placement();if(e){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:t,alignOffset:i}=this.$props;return In(this.el,this.#i(),e,{offsetVarName:"media-menu",xOffset:i(),yOffset:t()})}else this.el.removeAttribute("style"),this.el.style.display="none"}#i(){return this.#e.button()}};var Qr=class extends T(HTMLElement,Gr){static tagName="media-menu-items"};function qo(s,e){return[...s].sort(e?yl:gl)}function gl(s,e){return s.height===e.height?(s.bitrate??0)-(e.bitrate??0):s.height-e.height}function yl(s,e){return e.height===s.height?(e.bitrate??0)-(s.bitrate??0):e.height-s.height}var Kr=class extends b{static props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{canSetQuality:e,qualities:t}=this.#e.$state;return!e()||t().length<=1}#r=re(()=>{let{sort:e}=this.$props,{qualities:t}=this.#e.$state;return qo(t(),e()==="descending")});constructor(){super(),this.#i=new Ve,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=g(),Y(G)&&(this.#t=V(G))}onConnect(e){u(this.#s.bind(this)),u(this.#o.bind(this)),u(this.#n.bind(this))}getOptions(){let{autoLabel:e,hideBitrate:t}=this.$props;return[{value:"auto",label:e},...this.#r().map(i=>{let r=i.bitrate&&i.bitrate>=0?`${X(i.bitrate/1e6,2)} Mbps`:null;return{quality:i,label:i.height+"p",value:this.#u(i),bitrate:()=>t()?null:r}})]}#s(){this.#i.value=this.#l()}#n(){let{autoLabel:e}=this.$props,{autoQuality:t,quality:i}=this.#e.$state,r=i()?i().height+"p":"";this.#t?.hint.set(t()?e()+(r?` (${r})`:""):r)}#o(){this.#t?.disable(this.disabled)}#a(e,t){if(this.disabled)return;if(e==="auto"){this.#e.remote.changeQuality(-1,t),this.dispatch("change",{detail:"auto",trigger:t});return}let{qualities:i}=this.#e.$state,r=m(i).findIndex(n=>this.#u(n)===e);if(r>=0){let n=m(i)[r];this.#e.remote.changeQuality(r,t),this.dispatch("change",{detail:n,trigger:t})}}#l(){let{quality:e,autoQuality:t}=this.#e.$state;if(t())return"auto";let i=e();return i?this.#u(i):"auto"}#u(e){return e.height+"_"+e.bitrate}};var Ur=class extends T(HTMLElement,Kr){static tagName="media-quality-radio-group";onConnect(){Qe(this,(e,t)=>{let i=t.bitrate,r=e.querySelector('[data-part="bitrate"]');i&&r&&u(()=>{r.textContent=i()||""})})}};var vl=[.25,.5,.75,1,1.25,1.5,1.75,2],Wr=class extends b{static props={normalLabel:"Normal",rates:vl};#e;#t;#i;get value(){return this.#i.value}get disabled(){let{rates:e}=this.$props,{canSetPlaybackRate:t}=this.#e.$state;return!t()||e().length===0}constructor(){super(),this.#i=new Ve,this.#i.onValueChange=this.#a.bind(this)}onSetup(){this.#e=g(),Y(G)&&(this.#t=V(G))}onConnect(e){u(this.#r.bind(this)),u(this.#s.bind(this)),u(this.#n.bind(this))}getOptions(){let{rates:e,normalLabel:t}=this.$props;return e().map(i=>({label:i===1?t:i+"\xD7",value:i.toString()}))}#r(){this.#i.value=this.#o()}#s(){let{normalLabel:e}=this.$props,{playbackRate:t}=this.#e.$state,i=t();this.#t?.hint.set(i===1?e():i+"\xD7")}#n(){this.#t?.disable(this.disabled)}#o(){let{playbackRate:e}=this.#e.$state;return e().toString()}#a(e,t){if(this.disabled)return;let i=+e;this.#e.remote.changePlaybackRate(i,t),this.dispatch("change",{detail:i,trigger:t})}};var zr=class extends T(HTMLElement,Wr){static tagName="media-speed-radio-group";onConnect(){Qe(this)}};var Yr=class extends b{static props={src:null,alt:null,crossOrigin:null};static state=new xe({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#e;onSetup(){this.#e=g(),this.#a(),this.#l(),this.#u(),this.#r()}onAttach(e){e.style.setProperty("pointer-events","none"),u(this.#n.bind(this)),u(this.#a.bind(this)),u(this.#l.bind(this)),u(this.#u.bind(this)),u(this.#r.bind(this));let{started:t}=this.#e.$state;this.setAttributes({"data-visible":()=>!t()&&!this.$state.hidden(),"data-loading":this.#s.bind(this),"data-error":this.#t.bind(this),"data-hidden":this.$state.hidden})}onConnect(e){u(this.#i.bind(this)),u(this.#p.bind(this))}#t(){let{error:e}=this.$state;return!ke(e())}#i(){let{canLoadPoster:e,poster:t}=this.#e.$state;!e()&&t()&&Ce(t(),"preconnect")}#r(){let{src:e}=this.$props,{poster:t,nativeControls:i}=this.#e.$state;this.el&&v(this.el,"display",i()?"none":null),this.$state.hidden.set(this.#t()||!(e()||t())||i())}#s(){let{loading:e,hidden:t}=this.$state;return!t()&&e()}#n(){let e=this.$state.img();e&&(y(e,"load",this.#c.bind(this)),y(e,"error",this.#d.bind(this)),e.complete&&this.#c())}#o="";#a(){let{poster:e}=this.#e.$props,{canLoadPoster:t,providedPoster:i,inferredPoster:r}=this.#e.$state,n=this.$props.src()||"",o=n||e()||r();this.#o===i()&&i.set(n),this.$state.src.set(t()&&o.length?o:null),this.#o=n}#l(){let{src:e}=this.$props,{alt:t}=this.$state,{poster:i}=this.#e.$state;t.set(e()||i()?this.$props.alt():null)}#u(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i,poster:r}=this.#e.$state,n=e()!==null?e():i();t.set(/ytimg\.com|vimeo/.test(r()||"")?null:n===!0?"anonymous":n)}#p(){let{loading:e,error:t}=this.$state,{canLoadPoster:i,poster:r}=this.#e.$state;e.set(i()&&!!r()),t.set(null)}#c(){let{loading:e,error:t}=this.$state;e.set(!1),t.set(null)}#d(e){let{loading:t,error:i}=this.$state;t.set(!1),i.set(e)}};var jr=class extends T(HTMLElement,Yr){static tagName="media-poster";static attrs={crossOrigin:"crossorigin"};#e=document.createElement("img");onSetup(){this.$state.img.set(this.#e)}onConnect(){let{src:e,alt:t,crossOrigin:i}=this.$state;u(()=>{let{loading:r,hidden:n}=this.$state;this.#e.style.display=r()||n()?"none":""}),u(()=>{v(this.#e,"alt",t()),v(this.#e,"crossorigin",i()),v(this.#e,"src",e())}),this.#e.parentNode!==this&&this.prepend(this.#e)}};var Mt=new xe({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Oo(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Oo(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Oo(s,e,t){let i=e-s,r=t-s;return i>0?r/i:0}var St=class extends F{#e;#t;constructor(e){super(),this.#e=e}onConnect(e){this.#t=new IntersectionObserver(t=>{this.#e.callback?.(t,this.#t)},this.#e),this.#t.observe(e),x(this.#i.bind(this))}#i(){this.#t?.disconnect(),this.#t=void 0}};function Ho(s,e,t,i){return Lt(s,X(t,$n(i)),e)}function No(s,e,t,i){let r=Lt(0,t,1),n=e-s,o=n*r,l=o/i,a=i*Math.round(l);return s+a}var Zs={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1},Xr=class extends F{#e;#t;#i;constructor(e,t){super(),this.#e=e,this.#t=t}onSetup(){Y(at)&&(this.#i=V(at))}onConnect(){u(this.#u.bind(this)),u(this.#p.bind(this)),this.#e.swipeGesture&&u(this.#r.bind(this))}#r(){let{pointer:e}=this.#t.$state;if(e()!=="coarse"||!this.#e.swipeGesture()){this.#s=null;return}this.#s=this.#t.player.el?.querySelector("media-provider,[data-media-provider]"),this.#s&&(y(this.#s,"touchstart",this.#a.bind(this),{passive:!0}),y(this.#s,"touchmove",this.#l.bind(this),{passive:!1}))}#s=null;#n=null;#o=null;#a(e){this.#n=e.touches[0]}#l(e){if(ke(this.#n)||fi(e))return;let t=e.touches[0],i=t.clientX-this.#n.clientX,r=t.clientY-this.#n.clientY,n=this.$state.dragging();!n&&Math.abs(r)>5||n||(e.preventDefault(),Math.abs(i)>20&&(this.#n=t,this.#o=this.$state.value(),this.#T(this.#o,e)))}#u(){let{hidden:e}=this.$props;this.listen("focus",this.#c.bind(this)),this.listen("keydown",this.#b.bind(this)),this.listen("keyup",this.#S.bind(this)),!(e()||this.#e.isDisabled())&&(this.listen("pointerenter",this.#g.bind(this)),this.listen("pointermove",this.#y.bind(this)),this.listen("pointerleave",this.#M.bind(this)),this.listen("pointerdown",this.#E.bind(this)))}#p(){this.#e.isDisabled()||!this.$state.dragging()||(y(document,"pointerup",this.#w.bind(this),{capture:!0}),y(document,"pointermove",this.#C.bind(this)),y(document,"touchmove",this.#$.bind(this),{passive:!1}))}#c(){this.#h(this.$state.value())}#d(e,t){let{value:i,min:r,max:n,dragging:o}=this.$state,l=Math.max(r(),Math.min(e,n()));i.set(l);let a=this.createEvent("value-change",{detail:l,trigger:t});if(this.dispatch(a),this.#e.onValueChange?.(a),o()){let d=this.createEvent("drag-value-change",{detail:l,trigger:t});this.dispatch(d),this.#e.onDragValueChange?.(d)}}#h(e,t){let{pointerValue:i,dragging:r}=this.$state;i.set(e),this.dispatch("pointer-value-change",{detail:e,trigger:t}),r()&&this.#d(e,t)}#f(e){let t,i=this.el.getBoundingClientRect(),{min:r,max:n}=this.$state;if(this.$props.orientation()==="vertical"){let{bottom:o,height:l}=i;t=(o-e.clientY)/l}else if(this.#n&&fe(this.#o)){let{width:o}=this.#s.getBoundingClientRect(),l=(e.clientX-this.#n.clientX)/o,a=n()-r(),d=a*Math.abs(l);t=(l<0?this.#o-d:this.#o+d)/a}else{let{left:o,width:l}=i;t=(e.clientX-o)/l}return Math.max(r(),Math.min(n(),this.#e.roundValue(No(r(),n(),t,this.#e.getStep()))))}#g(e){this.$state.pointing.set(!0)}#y(e){let{dragging:t}=this.$state;t()||this.#h(this.#f(e),e)}#M(e){this.$state.pointing.set(!1)}#E(e){if(e.button!==0)return;let t=this.#f(e);this.#T(t,e),this.#h(t,e)}#T(e,t){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.#t.remote.pauseControls(t);let r=this.createEvent("drag-start",{detail:e,trigger:t});this.dispatch(r),this.#e.onDragStart?.(r),this.#i?.onDragStart?.()}#v(e,t){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.#t.remote.resumeControls(t);let r=this.createEvent("drag-end",{detail:e,trigger:t});this.dispatch(r),this.#e.onDragEnd?.(r),this.#n=null,this.#o=null,this.#i?.onDragEnd?.()}#x;#m=!1;#b(e){if(!Object.keys(Zs).includes(e.key))return;let{key:i}=e,r=this.#P(e);if(!ke(r)){this.#h(r,e),this.#d(r,e);return}let n=this.#_(e);this.#m||(this.#m=i===this.#x,!this.$state.dragging()&&this.#m&&this.#T(n,e)),this.#h(n,e),this.#x=i}#S(e){if(!Object.keys(Zs).includes(e.key)||!ke(this.#P(e)))return;let i=this.#m?this.$state.pointerValue():this.#_(e);this.#d(i,e),this.#v(i,e),this.#x="",this.#m=!1}#P(e){let t=e.key,{min:i,max:r}=this.$state;return t==="Home"||t==="PageUp"?i():t==="End"||t==="PageDown"?r():!e.metaKey&&/^[0-9]$/.test(t)?(r()-i())/10*Number(t):null}#_(e){let{key:t,shiftKey:i}=e;e.preventDefault(),e.stopPropagation();let{shiftKeyMultiplier:r}=this.$props,{min:n,max:o,value:l,pointerValue:a}=this.$state,d=this.#e.getStep(),c=this.#e.getKeyStep(),p=i?c*r():c,h=Number(Zs[t]),f=p*h,M=this.#m?a():this.#e.getValue?.()??l(),L=(M+f)/d;return Math.max(n(),Math.min(o(),Number((d*L).toFixed(3))))}#w(e){if(e.button!==0)return;e.preventDefault(),e.stopImmediatePropagation();let t=this.#f(e);this.#h(t,e),this.#v(t,e)}#$(e){e.preventDefault()}#C=Re(e=>{this.#h(this.#f(e),e)},20,{leading:!0})};var qe=se(()=>({}));var _e=class extends F{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#e;#t;#i=S(!0);#r=S(!0);constructor(e){super(),this.#t=e}onSetup(){this.#e=g();let e=new te;e.attach(this),this.$state.focused=e.focused.bind(e),Y(qe)||z(qe,{default:"value"}),z(xt,{orientation:this.$props.orientation,disabled:this.#t.isDisabled,preview:S(null)}),u(this.#o.bind(this)),u(this.#a.bind(this)),u(this.#l.bind(this)),this.#p(),new Xr(this.#t,this.#e).attach(this),new St({callback:this.#s.bind(this)}).attach(this)}onAttach(e){w(e,"role","slider"),w(e,"tabindex","0"),w(e,"autocomplete","off"),u(this.#c.bind(this))}onConnect(e){x(hi(e,this.#i.set)),u(this.#n.bind(this))}#s(e){this.#r.set(e[0].isIntersecting)}#n(){let{hidden:e}=this.$props;this.$state.hidden.set(e()||!this.#i()||!this.#r.bind(this))}#o(){let{dragging:e,value:t,min:i,max:r}=this.$state;m(e)||t.set(Ho(i(),r(),t(),this.#t.getStep()))}#a(){this.$state.step.set(this.#t.getStep())}#l(){if(!this.#t.isDisabled())return;let{dragging:e,pointing:t}=this.$state;e.set(!1),t.set(!1)}#u(){return Ye(this.#t.isDisabled())}#p(){let{orientation:e}=this.$props,{dragging:t,active:i,pointing:r}=this.$state;this.setAttributes({"data-dragging":t,"data-pointing":r,"data-active":i,"aria-disabled":this.#u.bind(this),"aria-valuemin":this.#t.aria.valueMin??this.$state.min,"aria-valuemax":this.#t.aria.valueMax??this.$state.max,"aria-valuenow":this.#t.aria.valueNow,"aria-valuetext":this.#t.aria.valueText,"aria-orientation":e})}#c(){let{fillPercent:e,pointerPercent:t}=this.$state;this.#d(X(e(),3),X(t(),3))}#d=le((e,t)=>{this.el?.style.setProperty("--slider-fill",e+"%"),this.el?.style.setProperty("--slider-pointer",t+"%")})};var Ke=class extends b{static props={..._e.props,min:0,max:100,value:0};static state=Mt;constructor(){super(),new _e({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#e.bind(this),valueText:this.#t.bind(this)}})}onSetup(){u(this.#i.bind(this)),u(this.#r.bind(this))}#e(){let{value:e}=this.$state;return Math.round(e())}#t(){let{value:e,max:t}=this.$state;return X(e()/t()*100,2)+"%"}#i(){let{value:e}=this.$props;this.$state.value.set(e())}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}};var Jr=class extends b{static props={offset:0,noClamp:!1};#e;onSetup(){this.#e=V(xt);let{active:e}=dt(Ke.state);this.setAttributes({"data-visible":e})}onAttach(e){Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){let{preview:t}=this.#e;t.set(e),x(()=>t.set(null)),u(this.#t.bind(this));let i=new ResizeObserver(this.#t.bind(this));i.observe(e),x(()=>i.disconnect())}#t=le(()=>{let{disabled:e,orientation:t}=this.#e;if(e())return;let i=this.el,{offset:r,noClamp:n}=this.$props;i&&bl(i,{clamp:!n(),offset:r(),orientation:t()})})};function bl(s,{clamp:e,offset:t,orientation:i}){let r=getComputedStyle(s),n=parseFloat(r.width),o=parseFloat(r.height),l={top:null,right:null,bottom:null,left:null};if(l[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${t}px))`,i==="horizontal"){let a=n/2;if(!e)l.left=`calc(var(--slider-pointer) - ${a}px)`;else{let d=`max(0px, calc(var(--slider-pointer) - ${a}px))`,c=`calc(100% - ${n}px)`;l.left=`min(${d}, ${c})`}}else{let a=o/2;if(!e)l.bottom=`calc(var(--slider-pointer) - ${a}px)`;else{let d=`max(${a}px, calc(var(--slider-pointer) - ${a}px))`,c=`calc(100% - ${o}px)`;l.bottom=`min(${d}, ${c})`}}Object.assign(s.style,l)}var Zr=class extends T(HTMLElement,Jr){static tagName="media-slider-preview"};var Oe=new Map,es=new Map,El=void 0,ts=class s{#e;#t;#i;$images=S([]);static create(e,t){let i=g();return new s(e,t,i)}constructor(e,t,i){this.#t=e,this.#i=t,this.#e=i,u(this.#r.bind(this))}#r(){let{canLoad:e}=this.#e.$state;if(!e())return;let t=this.#t();if(t){if(E(t)&&Oe.has(t)){let i=Oe.get(t);if(Oe.delete(t),Oe.set(t,i),Oe.size>99){let r=Oe.keys().next().value;Oe.delete(r)}this.$images.set(Oe.get(t))}else if(E(t)){let i=this.#i(),r=t+"::"+i;if(!es.has(r)){let n=new Promise(async(o,l)=>{try{let a=await fetch(t,{credentials:ct(i)});if(a.headers.get("content-type")==="application/json"){let c=await a.json();if(W(c))if(c[0]&&"text"in c[0])o(this.#o(c));else{for(let p=0;p<c.length;p++){let h=c[p];we(ln(h),!1),we("url"in h&&E(h.url),!1),we("startTime"in h&&fe(h.startTime),!1)}o(c)}else o(this.#n(c));return}import("https://cdn.vidstack.io/captions").then(async({parseResponse:c})=>{try{let{cues:p}=await c(a);o(this.#o(p))}catch(p){l(p)}})}catch(a){l(a)}}).then(o=>(Oe.set(r,o),o)).catch(o=>{this.#p(t,o)}).finally(()=>{E(r)&&es.delete(r)});es.set(r,n)}es.get(r)?.then(n=>{this.$images.set(n||[])})}else if(W(t))try{this.$images.set(this.#s(t))}catch(i){this.#p(t,i)}else try{this.$images.set(this.#n(t))}catch(i){this.#p(t,i)}return()=>{this.$images.set([])}}}#s(e){let t=this.#a();return e.map((i,r)=>(we(i.url&&E(i.url),!1),we("startTime"in i&&fe(i.startTime),!1),{...i,url:E(i.url)?this.#l(i.url,t):i.url}))}#n(e){we(E(e.url),!1),we(W(e.tiles)&&e.tiles?.length,!1);let t=new URL(e.url),i=[],r="tile_width"in e?e.tile_width:e.tileWidth,n="tile_height"in e?e.tile_height:e.tileHeight;for(let o of e.tiles)i.push({url:t,startTime:"start"in o?o.start:o.startTime,width:r,height:n,coords:{x:o.x,y:o.y}});return i}#o(e){for(let r=0;r<e.length;r++){let n=e[r];we("startTime"in n&&fe(n.startTime),!1),we("text"in n&&E(n.text),!1)}let t=[],i=this.#a();for(let r of e){let[n,o]=r.text.split("#"),l=this.#u(o);t.push({url:this.#l(n,i),startTime:r.startTime,endTime:r.endTime,width:l?.w,height:l?.h,coords:l&&fe(l.x)&&fe(l.y)?{x:l.x,y:l.y}:void 0})}return t}#a(){let e=m(this.#t);return!E(e)||!/^https?:/.test(e)?location.href:e}#l(e,t){return/^https?:/.test(e)?new URL(e):new URL(e,t)}#u(e){if(!e)return{};let[t,i]=e.split("="),r=i?.split(","),n={};if(!t||!r)return null;for(let o=0;o<t.length;o++){let l=+r[o];isNaN(l)||(n[t[o]]=l)}return n}#p(e,t){}};var is=class extends b{static props={src:null,time:0,crossOrigin:null};static state=new xe({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#e;#t=[];onSetup(){this.media=g(),this.#e=ts.create(this.$props.src,this.$state.crossOrigin),this.#r(),this.setAttributes({"data-loading":this.#a.bind(this),"data-error":this.#l.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":j(this.$state.hidden)})}onConnect(e){u(this.#i.bind(this)),u(this.#u.bind(this)),u(this.#r.bind(this)),u(this.#s.bind(this)),u(this.#p.bind(this)),u(this.#c.bind(this))}#i(){let e=this.$state.img();e&&(y(e,"load",this.#n.bind(this)),y(e,"error",this.#o.bind(this)))}#r(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i}=this.media.$state,r=e()!==null?e():i();t.set(r===!0?"anonymous":r)}#s(){let{src:e,loading:t,error:i}=this.$state;return e()&&(t.set(!0),i.set(null)),()=>{this.#h(),t.set(!1),i.set(null)}}#n(){let{loading:e,error:t}=this.$state;this.#c(),e.set(!1),t.set(null)}#o(e){let{loading:t,error:i}=this.$state;t.set(!1),i.set(e)}#a(){let{loading:e,hidden:t}=this.$state;return!t()&&e()}#l(){let{error:e}=this.$state;return!ke(e())}#u(){let{hidden:e}=this.$state,{duration:t}=this.media.$state,i=this.#e.$images();e.set(this.#l()||!Number.isFinite(t())||i.length===0)}getTime(){return this.$props.time()}#p(){let e=this.#e.$images();if(!e.length)return;let t=this.getTime(),{src:i,activeThumbnail:r}=this.$state,n=-1,o=null;for(let l=e.length-1;l>=0;l--){let a=e[l];if(t>=a.startTime&&(!a.endTime||t<a.endTime)){n=l;break}}e[n]&&(o=e[n]),r.set(o),i.set(o?.url.href||"")}#c(){if(!this.scope||this.$state.hidden())return;let e=this.el,t=this.$state.img(),i=this.$state.activeThumbnail();if(!t||!i||!e)return;let r=i.width??t.naturalWidth,n=i?.height??t.naturalHeight,{maxWidth:o,maxHeight:l,minWidth:a,minHeight:d,width:c,height:p}=getComputedStyle(this.el);a==="100%"&&(a=parseFloat(c)+""),d==="100%"&&(d=parseFloat(p)+"");let h=Math.max(parseInt(a)/r,parseInt(d)/n),f=Math.min(Math.max(parseInt(a),parseInt(o))/r,Math.max(parseInt(d),parseInt(l))/n),M=!isNaN(f)&&f<1?f:h>1?h:1;this.#d(e,"--thumbnail-width",`${r*M}px`),this.#d(e,"--thumbnail-height",`${n*M}px`),this.#d(t,"width",`${t.naturalWidth*M}px`),this.#d(t,"height",`${t.naturalHeight*M}px`),this.#d(t,"transform",i.coords?`translate(-${i.coords.x*M}px, -${i.coords.y*M}px)`:""),this.#d(t,"max-width","none")}#d(e,t,i){e.style.setProperty(t,i),this.#t.push(()=>e.style.removeProperty(t))}#h(){for(let e of this.#t)e();this.#t=[]}};var Tl=Vn('<img loading="eager" decoding="async" aria-hidden="true">'),Pt=class extends T(HTMLElement,is){static tagName="media-thumbnail";static attrs={crossOrigin:"crossorigin"};#e;#t=this.#i();onSetup(){this.#e=g(),this.$state.img.set(this.#t)}onConnect(){let{src:e,crossOrigin:t}=this.$state;this.#t.parentNode!==this&&this.prepend(this.#t),u(()=>{v(this.#t,"src",e()),v(this.#t,"crossorigin",t())})}#i(){return Dn(Tl)}};var rs=class extends Pt{static tagName="media-slider-thumbnail";#e;#t;onSetup(){super.onSetup(),this.#e=g(),this.#t=dt(Ke.state)}onConnect(){super.onConnect(),u(this.#i.bind(this))}#i(){let{duration:e,clipStartTime:t}=this.#e.$state;this.time=t()+this.#t.pointerRate()*e()}};function en(s,e){let t=String(s),i=t.length;if(i<e){let n=e-i;return`${"0".repeat(n)}${s}`}return t}function Fo(s){let e=Math.trunc(s/3600),t=Math.trunc(s%3600/60),i=Math.trunc(s%60),r=Number((s-Math.trunc(s)).toPrecision(3));return{hours:e,minutes:t,seconds:i,fraction:r}}function _t(s,{padHrs:e=null,padMins:t=null,showHrs:i=!1,showMs:r=!1}={}){let{hours:n,minutes:o,seconds:l,fraction:a}=Fo(s),d=e?en(n,2):n,c=t||ke(t)&&s>=3600?en(o,2):o,p=en(l,2),h=r&&a>0?`.${String(a).replace(/^0?\./,"")}`:"",f=`${c}:${p}${h}`;return n>0||i?`${d}:${f}`:f}function tn(s){let e=[],{hours:t,minutes:i,seconds:r}=Fo(s);return t>0&&e.push(`${t} hour`),i>0&&e.push(`${i} min`),(r>0||e.length===0)&&e.push(`${r} sec`),e.join(" ")}var ss=class extends b{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#e;#t;#i;onSetup(){this.#i=dt(Ke.state),this.#e=V(qe),this.#t=re(this.getValueText.bind(this))}getValueText(){let{type:e,format:t,decimalPlaces:i,padHours:r,padMinutes:n,showHours:o,showMs:l}=this.$props,{value:a,pointerValue:d,min:c,max:p}=this.#i,h=t?.()??this.#e.default,f=e()==="current"?a():d();if(h==="percent"){let M=p()-c(),L=f/M*100;return(this.#e.percent??X)(L,i())+"%"}else return h==="time"?(this.#e.time??_t)(f,{padHrs:r(),padMins:n(),showHrs:o(),showMs:l()}):(this.#e.value?.(f)??f.toFixed(2))+""}};var ns=class extends T(HTMLElement,ss){static tagName="media-slider-value";static attrs={padMinutes:{converter:Ms}};onConnect(){u(()=>{this.textContent=this.getValueText()})}};var os=class extends b{static props={..._e.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=Mt;#e;#t;#i=S(null);constructor(){super();let{noSwipeGesture:e}=this.$props;new _e({swipeGesture:()=>!e(),getValue:this.#g.bind(this),getStep:this.#y.bind(this),getKeyStep:this.#M.bind(this),roundValue:this.#E,isDisabled:this.#T.bind(this),aria:{valueNow:this.#v.bind(this),valueText:this.#x.bind(this)},onDragStart:this.#c.bind(this),onDragValueChange:this.#d.bind(this),onDragEnd:this.#h.bind(this),onValueChange:this.#f.bind(this)})}onSetup(){this.#e=g(),z(qe,{default:"time",value:this.#S.bind(this),time:this.#P.bind(this)}),this.setAttributes({"data-chapters":this.#s.bind(this)}),this.setStyles({"--slider-progress":this.#r.bind(this)}),u(this.#o.bind(this)),u(this.#n.bind(this))}onAttach(e){e.setAttribute("data-media-time-slider",""),w(e,"aria-label","Seek")}onConnect(e){u(this.#a.bind(this)),wn(this.#e.textTracks,"chapters",this.#i.set)}#r(){let{bufferedEnd:e,duration:t}=this.#e.$state;return X(Math.min(e()/Math.max(t(),1),1)*100,3)+"%"}#s(){let{duration:e}=this.#e.$state;return this.#i()?.cues.length&&Number.isFinite(e())&&e()>0}#n(){this.#t=Re(this.#l.bind(this),this.$props.seekingRequestThrottle())}#o(){if(this.$state.hidden())return;let{value:e,dragging:t}=this.$state,i=this.#g();m(t)||(e.set(i),this.dispatch("value-change",{detail:i}))}#a(){let e=this.#e.player.el,{preview:t}=V(xt);e&&t()&&v(e,"data-preview",this.$state.active())}#l(e,t){this.#e.remote.seeking(e,t)}#u(e,t,i){this.#t.cancel();let{live:r}=this.#e.$state;if(r()&&t>=99){this.#e.remote.seekToLiveEdge(i);return}this.#e.remote.seek(e,i)}#p=!1;#c(e){let{pauseWhileDragging:t}=this.$props;if(t()){let{paused:i}=this.#e.$state;this.#p=!i(),this.#e.remote.pause(e)}}#d(e){this.#t(this.#m(e.detail),e)}#h(e){let{seeking:t}=this.#e.$state;m(t)||this.#l(this.#m(e.detail),e);let i=e.detail;this.#u(this.#m(i),i,e);let{pauseWhileDragging:r}=this.$props;r()&&this.#p&&(this.#e.remote.play(e),this.#p=!1)}#f(e){let{dragging:t}=this.$state;t()||!e.trigger||this.#h(e)}#g(){let{currentTime:e}=this.#e.$state;return this.#b(e())}#y(){let e=this.$props.step()/this.#e.$state.duration()*100;return Number.isFinite(e)?e:1}#M(){let e=this.$props.keyStep()/this.#e.$state.duration()*100;return Number.isFinite(e)?e:1}#E(e){return X(e,3)}#T(){let{disabled:e}=this.$props,{canSeek:t}=this.#e.$state;return e()||!t()}#v(){let{value:e}=this.$state;return Math.round(e())}#x(){let e=this.#m(this.$state.value()),{duration:t}=this.#e.$state;return Number.isFinite(e)?`${tn(e)} out of ${tn(t())}`:"live"}#m(e){let{duration:t}=this.#e.$state;return X(e/100*t(),5)}#b(e){let{liveEdge:t,duration:i}=this.#e.$state,r=Math.max(0,Math.min(1,t()?1:Math.min(e,i())/i()));return Number.isNaN(r)?0:Number.isFinite(r)?r*100:100}#S(e){let t=this.#m(e),{live:i,duration:r}=this.#e.$state;return Number.isFinite(t)?(i()?t-r():t).toFixed(0):"LIVE"}#P(e,t){let i=this.#m(e),{live:r,duration:n}=this.#e.$state,o=r()?i-n():i;return Number.isFinite(i)?`${o<0?"-":""}${_t(Math.abs(o),t)}`:"LIVE"}};var as=class extends T(HTMLElement,os){static tagName="media-time-slider"};var ls=class extends b{static props={..._e.props,keyStep:5,shiftKeyMultiplier:2};static state=Mt;#e;onSetup(){this.#e=g();let{audioGain:e}=this.#e.$state;z(qe,{default:"percent",value(t){return(t*(e()??1)).toFixed(2)},percent(t){return Math.round(t*(e()??1))}}),new _e({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#s.bind(this),aria:{valueMax:this.#r.bind(this),valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#l.bind(this)}).attach(this),u(this.#n.bind(this))}onAttach(e){e.setAttribute("data-media-volume-slider",""),w(e,"aria-label","Volume");let{canSetVolume:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":j(()=>!t())})}#t(){let{value:e}=this.$state,{audioGain:t}=this.#e.$state;return Math.round(e()*(t()??1))}#i(){let{value:e,max:t}=this.$state,{audioGain:i}=this.#e.$state;return X(e()/t()*(i()??1)*100,2)+"%"}#r(){let{audioGain:e}=this.#e.$state;return this.$state.max()*(e()??1)}#s(){let{disabled:e}=this.$props,{canSetVolume:t}=this.#e.$state;return e()||!t()}#n(){let{muted:e,volume:t}=this.#e.$state,i=e()?0:t()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#o=Re(this.#a.bind(this),25);#a(e){if(!e.trigger)return;let t=X(e.detail/100,3);this.#e.remote.changeVolume(t,e)}#l(e){this.#o(e)}#u(e){this.#o(e)}};var ds=class extends T(HTMLElement,ls){static tagName="media-volume-slider"};var us=class extends b{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new xe({timeText:"",hidden:!1});#e;#t=S(null);#i=S(!0);#r=S(!0);onSetup(){this.#e=g(),this.#a();let{type:e}=this.$props;this.setAttributes({"data-type":e,"data-remainder":this.#p.bind(this)}),new St({callback:this.#s.bind(this)}).attach(this)}onAttach(e){e.hasAttribute("role")||u(this.#l.bind(this)),u(this.#a.bind(this))}onConnect(e){x(hi(e,this.#i.set)),u(this.#n.bind(this)),u(this.#o.bind(this))}#s(e){this.#r.set(e[0].isIntersecting)}#n(){let{hidden:e}=this.$props;this.$state.hidden.set(e()||!this.#i()||!this.#r())}#o(){if(!this.$props.toggle()){this.#t.set(null);return}this.el&&ye(this.el,this.#c.bind(this))}#a(){let{hidden:e,timeText:t}=this.$state,{duration:i}=this.#e.$state;if(e())return;let{type:r,padHours:n,padMinutes:o,showHours:l}=this.$props,a=this.#u(r()),d=i(),c=this.#p();if(!Number.isFinite(a+d)){t.set("LIVE");return}let p=c?Math.max(0,d-a):a,h=_t(p,{padHrs:n(),padMins:o(),showHrs:l()});t.set((c?"-":"")+h)}#l(){if(!this.el)return;let{toggle:e}=this.$props;v(this.el,"role",e()?"timer":null),v(this.el,"tabindex",e()?0:null)}#u(e){let{bufferedEnd:t,duration:i,currentTime:r}=this.#e.$state;switch(e){case"buffered":return t();case"duration":return i();default:return r()}}#p(){return this.$props.remainder()&&this.#t()!==!1}#c(e){if(e.preventDefault(),this.#t()===null){this.#t.set(!this.$props.remainder());return}this.#t.set(t=>!t)}};var cs=class extends T(HTMLElement,us){static tagName="media-time";onConnect(){u(()=>{this.textContent=this.$state.timeText()})}};A(wr);A(jr);A(nr);A(tr);A(Yi);A(rr);A(Xi);A(ar);A(Wi);A(Zi);A(ds);A(as);A(Zr);A(rs);A(ns);A(Hr);A(Vr);A(Qr);A(Fr);A(Lr);A(Ar);A(zr);A(Ur);A(cs);A(Pt);var zt=null,De=At.record,xl=["playing","paused","ended","currentTime","seeking","duration","volume","muted","loop","poster"],Bo={ratechange:"rate-change",ready:"can-play",timeupdate:"time-update",volumechange:"volume-change"},Ml=["airplay","captions-off","captions-on","download","enter-fullscreen","exit-fullscreen","fast-forward","muted","pause","pip","play","restart","rewind","settings","volume"],rn=class s{constructor(e,t={}){this.target=e;this.config=t;if(E(e)?e=document.querySelector(e):$e(e)||(e=e[0]),!$e(e))throw Error(`[plyr] target must be of type \`HTMLElement\`, found \`${typeof e}\``);let i=e.getAttribute("data-plyr-config");if(i)try{t={...t,...JSON.parse(i)}}catch{}let{enabled:r=!0,debug:n="error",autoPause:o=!0,ratio:l=null,hideControls:a=!0,resetOnEnd:d=!1,disableContextMenu:c=!0,iconUrl:p=null,iconPrefix:h="plyr",keyboard:f={focused:!0,global:!1},i18n:M=null,...L}=t;if(this.player=document.createElement("media-player"),this.provider=document.createElement("media-provider"),this.layout=document.createElement("media-plyr-layout"),!r)return;for(let D of xl)Object.defineProperty(this,D,{get:()=>this.player[D],set:J=>void(this.player[D]=J)});if(E(n)?this.player.logLevel=n:n&&(this.player.logLevel="warn"),o&&this.#i.add(y(this.player,"play",this.#r.bind(this))),this.ratio=l,this.layout.translations=M,a||(this.player.controls.canIdle=!1),d&&this.#i.add(y(this.player,"ended",this.#s.bind(this))),p){this.layout.customIcons=!0;let D=`sprite-${h}`,J=document.getElementById(D),oe=()=>{for(let he of Ml){let Ee="http://www.w3.org/2000/svg",ie=document.createElementNS(Ee,"svg");v(ie,"fill","none"),v(ie,"slot",`${he}-icon`),v(ie,"aria-hidden","true"),v(ie,"viewBox","0 0 18 18");let Te=document.createElementNS(Ee,"use");Te.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${h}-${he}`),ie.append(Te),this.layout.append(ie)}};J?oe():fetch(p).then(he=>he.text()).then(he=>{let Ee=document.createElement("div");v(Ee,"id",D),v(Ee,"hidden",""),Ee.innerHTML=he,document.body.insertAdjacentElement("afterbegin",Ee),oe()}).catch(he=>{this.layout.customIcons=!1})}f.global?this.player.keyTarget="document":f.focused?this.player.keyTarget="player":this.player.keyDisabled=!0,e.removeAttribute("controls");let C=e.getAttribute("title");C&&this.player.setAttribute("title",C);let K=e.getAttribute("width"),ne=e.getAttribute("height");(K||ne)&&(K&&(this.player.style.width=K),ne&&(this.player.style.height=ne),this.player.style.aspectRatio="unset");for(let D of e.attributes){let J=D.name.replace("data-",""),oe=gn(J);oe in this.player?this.player.setAttribute(J,D.value):oe in this.layout&&this.layout.setAttribute(J,D.value)}for(let[D,J]of Object.entries(L))D in this.player?this.player[D]=J:D in this.layout&&(this.layout[D]=J);if(this.player.append(this.provider,this.layout),!Ss(e)&&!Ps(e)&&!Bn(e))e.append(this.player);else{for(let D of[...e.children])this.provider.append(D);e.replaceWith(this.player)}let U=e.getAttribute("data-plyr-provider"),pe=e.getAttribute("data-plyr-embed-id");U&&/youtube|vimeo/.test(U)&&pe&&(this.player.src=`${U}/${pe}`)}static setup(e,t){return E(e)&&(e=document.querySelectorAll(e)),[...e].map(i=>new s(i,t))}static supported(e,t){return!0}player;provider;layout;fullscreen=new sn(this);playing=De.playing;paused=De.paused;ended=De.ended;currentTime=De.currentTime;seeking=De.seeking;duration=De.duration;volume=De.volume;muted=De.muted;loop=De.loop;poster=De.poster;get type(){return this.player.provider?.type??""}get isHTML5(){return/audio|video|hls/.test(this.type)}get isEmbed(){return/youtube|vimeo/.test(this.type)}get buffered(){let{bufferedEnd:e,seekableEnd:t}=this.player.state;return t>0?e/t:0}get stopped(){return this.paused&&this.currentTime===0}get hasAudio(){if(!this.isHTML5)return!0;let e=this.player.provider.media;return!!(e.mozHasAudio||e.webkitAudioDecodedByteCount||e.audioTracks?.length||this.player.audioTracks.length)}get speed(){return this.player.playbackRate}set speed(e){this.player.remoteControl.changePlaybackRate(e)}get currentTrack(){return this.player.textTracks.selectedIndex}set currentTrack(e){this.player.remoteControl.changeTextTrackMode(e,"showing")}get pip(){return this.player.state.pictureInPicture}set pip(e){e?this.player.enterPictureInPicture():this.player.exitPictureInPicture()}get quality(){return this.player.state.quality?.height??null}set quality(e){let t=this.player.qualities,i=-1;if(e!==null){let r=1/0;for(let n=0;n<t.length;n++){let o=Math.abs(t[n].height-e);o<r&&(i=n,r=o)}}this.player.remoteControl.changeQuality(i)}#e=null;get source(){return this.#e}set source(e){let{type:t="video",sources:i="",title:r="",poster:n="",thumbnails:o="",tracks:l=[]}=e??{};this.player.src=i,this.player.viewType=t,this.player.title=r,this.player.poster=n,this.layout.thumbnails=o,this.player.textTracks.clear();for(let a of l)this.player.textTracks.add(a);this.#e=e}#t=null;get ratio(){return this.#t}set ratio(e){e&&(e=e.replace(/\s*:\s*/," / ")),Pe(this.player,"aspect-ratio",e??"unset"),this.#t=e}get download(){return this.layout.download}set download(e){this.layout.download=e}#i=ai();#r(){zt!==this&&zt?.pause(),zt=this}#s(){this.currentTime=0,this.paused=!0}play(){return this.player.play()}pause(){return this.player.pause()}togglePlay(e=this.paused){return e?this.player.play():this.player.pause()}toggleCaptions(e=!this.player.textTracks.selected){let t=this.player.remoteControl;e?t.showCaptions():t.disableCaptions()}toggleControls(e=!this.player.controls.showing){let t=this.player.controls;e?t.show():t.hide()}restart(){this.currentTime=0}stop(){this.pause(),this.player.currentTime=0}forward(e=this.config.seekTime??10){this.currentTime+=e}rewind(e=this.config.seekTime??10){this.currentTime-=e}increaseVolume(e=5){this.volume+=e}decreaseVolume(e=5){this.volume-=e}airplay(){return this.player.requestAirPlay()}on(e,t){this.#o(e,t)}once(e,t){this.#o(e,t,{once:!0})}off(e,t){this.#o(e,t,{remove:!0})}#n=[];#o(e,t,i={}){let r=e,n=null;switch(e){case"captionsenabled":case"captionsdisabled":r="text-track-change",n=e==="captionsenabled";break;case"controlsshown":case"controlshidden":r="controls-change",n=e==="controlsshown";break;case"enterfullscreen":case"exitfullscreen":r="fullscreen-change",n=e==="enterfullscreen";break;default:}let o=Bo[r]??r,l=a=>{if(!(dn(n)&&!!a.detail!==n)){if(o!==e){t(new R(e,{...a,trigger:a}));return}t(a)}};if(i.remove){let a=-1;do if(a=this.#n.findIndex(d=>d.type===e&&d.callback===t),a>=0){let{listener:d}=this.#n[a];this.player.removeEventListener(o,d),this.#n.splice(a,1)}while(a>=0)}else this.#n.push({type:e,callback:t,listener:l}),this.player.addEventListener(o,l,{once:i.once})}supports(e){return!!e&&ui(null,e)}destroy(){for(let{type:e,listener:t}of this.#n)this.player.removeEventListener(Bo[e]??e,t);this.#e=null,this.#n.length=0,zt===this&&(zt=null),this.#i.empty(),this.player.destroy()}},sn=class{#e;constructor(e){this.#e=e}get#t(){return this.#e.player}get enabled(){return this.#t.state.canFullscreen}get active(){return this.#t.state.fullscreen}enter(){return this.#t.requestFullscreen()}exit(){return this.#t.exitFullscreen()}toggle(){return this.active?this.exit():this.enter()}};window.Plyr=rn;var Go=class{constructor(e,t){this.loader=e;this.config=t}priority=1;#e=null;#t=null;#i=/(ssa|ass)$/;canRender(e,t){return!!t&&!!e.src&&(E(e.type)&&this.#i.test(e.type)||this.#i.test(e.src))}attach(e){e&&this.loader().then(async t=>{this.#e=new t.default({...this.config,video:e,subUrl:this.#t?.src||""}),y(this.#e,"ready",()=>{let i=this.#e?._canvas;i&&(i.style.pointerEvents="none")}),y(this.#e,"error",i=>{this.#t&&(this.#t[N.readyState]=3,this.#t.dispatchEvent(new R("error",{trigger:i,detail:i.error})))})})}changeTrack(e){!e||e.readyState===3?this.#r():this.#t!==e&&(this.#e?.setTrackByUrl(e.src),this.#t=e)}detach(){this.#r()}#r(){this.#e?.freeTrack(),this.#t=null}};export{Nt as ARIAKeyShortcuts,$i as AudioTrackList,Go as LibASSTextRenderer,Ot as LocalMediaStorage,_s as MEDIA_KEY_SHORTCUTS,It as MediaControls,Ht as MediaRemoteControl,rn as Plyr,sn as PlyrFullscreenAdapter,Ri as TextRenderers,Xe as TextTrack,Ai as TextTrackList,ut as TimeRange,Ei as VideoQualityList,Pl as findActiveCue,je as getTimeRangesEnd,Es as getTimeRangesStart,_l as isCueActive,B as isTrackCaptionKind,qt as isVideoQualitySrc,yi as mediaContext,At as mediaState,Sl as normalizeTimeIntervals,Cl as parseJSONCaptionsFile,ks as softResetMediaState,qo as sortVideoQualities,Sn as updateTimeIntervals,wn as watchActiveTextTrack,kl as watchCueTextChange};
