import{a as Ee}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-BPZGRAFK.js";import{a as Te,c as Ht,f as hi}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-ZENHJRQI.js";import"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-TLPGDEKL.js";import"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-NFLAUMDU.js";import{h as xi}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-26BNP4EZ.js";import{c as it,i as Ft,t as ve}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-2VHLSK4R.js";import"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-ONXR3WS4.js";import{b as de,c as Z,d as et,e as he}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-5WSKX3LK.js";import{a as ge}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-IMNMJXWE.js";import{c as Ot}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-KCALJS55.js";import{a as _}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-NTONOYHO.js";import{a as T,b as Q,c as M,d as Pi}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-YP5YT6OR.js";import{a as bi,b as ki,c as Mi,d as Si}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-KPDKTTLZ.js";import{a as p}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-WJVXB6YB.js";import{a as W,b as tt,c as H,d as Ti,e as Vt}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-GKPESNWD.js";import{b as I,d as ye}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-DHW3MMHQ.js";import{a as Lt,b as pe,c as _t,e as me,f as qt,g as Ct,k as Rt,l as fe,m as At,n as $t,o as It,p as ee,q as te,r as Dt}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-MZUA5TJ4.js";import{B as L,C as K,E as x,F,H as u,J as Mt,P as N,R as St,S as Pt,T as xt,U,V as ce,a as c,aa as Ze,b as O,c as V,ca as ue,da as wt,e as vt,f as b,h as Je,j as Et,m as J,n as y,q as $,r as v,s as Tt,t as g,x as bt,z as kt}from"https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-BQB2M2TQ.js";var be=Symbol(0),Qt=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"];function rt(o){return o instanceof HTMLAudioElement}function st(o){return o instanceof HTMLVideoElement}function Gt(o){return rt(o)||st(o)}function Kt(o){return o instanceof HTMLIFrameElement}var S=class extends N{};var at={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},ke=new Set(["Shift","Alt","Meta","Ctrl"]),pi='button, [role="button"]',Nt='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]',Me=class extends S{#t;constructor(e){super(),this.#t=e}onConnect(){u(this.#e.bind(this))}#e(){let{keyDisabled:e,keyTarget:t}=this.$props;if(e())return;let i=t()==="player"?this.el:document,r=x(!1);i===this.el?(this.listen("focusin",()=>r.set(!0)),this.listen("focusout",s=>{this.el.contains(s.target)||r.set(!1)})):(c(r)||r.set(document.querySelector("[data-media-player]")===this.el),g(document,"focusin",s=>{let a=s.composedPath().find(n=>n instanceof Element&&n.localName==="media-player");a!==void 0&&r.set(this.el===a)})),u(()=>{r()&&(g(i,"keyup",this.#i.bind(this)),g(i,"keydown",this.#r.bind(this)),g(i,"keydown",this.#s.bind(this),{capture:!0}))})}#i(e){let t=document.activeElement;if(!e.key||!this.$state.canSeek()||t?.matches(Nt))return;let{method:i,value:r}=this.#a(e);if(!y(r)&&!$(r)){r?.onKeyUp?.({event:e,player:this.#t.player,remote:this.#t.remote}),r?.callback?.(e,this.#t.remote);return}i?.startsWith("seek")&&(e.preventDefault(),e.stopPropagation(),this.#l?(this.#u(e,i==="seekForward"),this.#l=null):(this.#t.remote.seek(this.#o,e),this.#o=void 0)),i?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}))}#r(e){if(!e.key||ke.has(e.key))return;let t=document.activeElement;if(t?.matches(Nt)||kt(e)&&t?.matches(pi))return;let{method:i,value:r}=this.#a(e),s=!e.metaKey&&/^[0-9]$/.test(e.key);if(!y(r)&&!$(r)&&!s){r?.onKeyDown?.({event:e,player:this.#t.player,remote:this.#t.remote}),r?.callback?.(e,this.#t.remote);return}if(!i&&s){e.preventDefault(),e.stopPropagation(),this.#t.remote.seek(this.$state.duration()/10*Number(e.key),e);return}if(i){switch(e.preventDefault(),e.stopPropagation(),i){case"seekForward":case"seekBackward":this.#h(e,i,i==="seekForward");break;case"volumeUp":case"volumeDown":let a=this.el.querySelector("[data-media-volume-slider]");if(a)a.dispatchEvent(new KeyboardEvent("keydown",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}));else{let l=e.shiftKey?.1:.05;this.#t.remote.changeVolume(this.$state.volume()+(i==="volumeUp"?+l:-l),e)}break;case"toggleFullscreen":this.#t.remote.toggleFullscreen("prefer-media",e);break;case"speedUp":case"slowDown":let n=this.$state.playbackRate();this.#t.remote.changePlaybackRate(Math.max(.25,Math.min(2,n+(i==="speedUp"?.25:-.25))),e);break;default:this.#t.remote[i]?.(e)}this.$state.lastKeyboardAction.set({action:i,event:e})}}#s(e){Gt(e.target)&&this.#a(e).method&&e.preventDefault()}#a(e){let t={...this.$props.keyShortcuts(),...this.#t.ariaKeys},i=Object.keys(t).find(r=>{let s=t[r],a=$(s)?s.join(" "):y(s)?s:s?.keys;return($(a)?a:a?.split(" "))?.map(l=>fi(l).replace(/Control/g,"Ctrl").split("+"))?.some(l=>{let d=new Set(l.filter(h=>ke.has(h)));for(let h of ke){let E=h.toLowerCase()+"Key";if(!d.has(h)&&e[E])return!1}return l.every(h=>ke.has(h)?e[h.toLowerCase()+"Key"]:e.key===h.replace("Space"," "))})});return{method:i,value:i?t[i]:null}}#o;#d(e,t){let i=e.shiftKey?10:5;return this.#o=Math.max(0,Math.min((this.#o??this.$state.currentTime())+(t==="seekForward"?+i:-i),this.$state.duration()))}#l=null;#u(e,t){this.#l?.dispatchEvent(new KeyboardEvent(e.type,{key:t?"Right":"Left",shiftKey:e.shiftKey,trigger:e}))}#h(e,t,i){this.$state.canSeek()&&(this.#l||(this.#l=this.el.querySelector("[data-media-time-slider]")),this.#l?this.#u(e,i):this.#t.remote.seeking(this.#d(e,t),e))}},mi=["!","@","#","$","%","^","&","*","(",")"];function fi(o){return o.replace(/Shift\+(\d)/g,(e,t)=>mi[t-1])}var Ut={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:at,storage:null};var q={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Wt=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Bt=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Yt=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],w=typeof window<"u"&&typeof window.document<"u"?window.document:{},C="fullscreenEnabled"in w&&Object.keys(q)||Wt[0]in w&&Wt||Bt[0]in w&&Bt||Yt[0]in w&&Yt||[],yi={requestFullscreen:function(o){return o[C[q.requestFullscreen]]()},requestFullscreenFunction:function(o){return o[C[q.requestFullscreen]]},get exitFullscreen(){return w[C[q.exitFullscreen]].bind(w)},get fullscreenPseudoClass(){return":"+C[q.fullscreen]},addEventListener:function(o,e,t){return w.addEventListener(C[q[o]],e,t)},removeEventListener:function(o,e,t){return w.removeEventListener(C[q[o]],e,t)},get fullscreenEnabled(){return!!w[C[q.fullscreenEnabled]]},set fullscreenEnabled(o){},get fullscreenElement(){return w[C[q.fullscreenElement]]},set fullscreenElement(o){},get onfullscreenchange(){return w[("on"+C[q.fullscreenchange]).toLowerCase()]},set onfullscreenchange(o){return w[("on"+C[q.fullscreenchange]).toLowerCase()]=o},get onfullscreenerror(){return w[("on"+C[q.fullscreenerror]).toLowerCase()]},set onfullscreenerror(o){return w[("on"+C[q.fullscreenerror]).toLowerCase()]=o}},R=yi;var ot=new ce({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new W,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:me(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return pe&&this.mediaType==="video"&&(!this.playsInline||!R.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new W,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new W,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(M).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){let o=tt(this.buffered)??0;return Math.max(0,o-this.clipStartTime)},get bufferedEnd(){let o=H(this.buffered)??0;return Math.min(this.duration,Math.max(0,o-this.clipStartTime))},get seekableStart(){let o=tt(this.seekable)??0;return Math.max(0,o-this.clipStartTime)},get seekableEnd(){let o=this.canPlay?H(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,o-this.clipStartTime)):o},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,savedState:null}),zt=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),gi=new Set([...zt,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function nt(o,e=!1){let t=e?zt:gi;ot.reset(o,i=>t.has(i)),V()}var B=class extends Tt{items=[];[p.readonly]=!1;get length(){return this.items.length}get readonly(){return this[p.readonly]}indexOf(e){return this.items.indexOf(e)}getById(e){return e===""?null:this.items.find(t=>t.id===e)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[p.add](e,t){let i=this.items.length;""+i in this||Object.defineProperty(this,i,{get(){return this.items[i]}}),!this.items.includes(e)&&(this.items.push(e),this.dispatchEvent(new v("add",{detail:e,trigger:t})))}[p.remove](e,t){let i=this.items.indexOf(e);i>=0&&(this[p.onRemove]?.(e,t),this.items.splice(i,1),this.dispatchEvent(new v("remove",{detail:e,trigger:t})))}[p.reset](e){for(let t of[...this.items])this[p.remove](t,e);this.items=[],this[p.setReadonly](!1,e),this[p.onReset]?.()}[p.setReadonly](e,t){this[p.readonly]!==e&&(this[p.readonly]=e,this.dispatchEvent(new v("readonly-change",{detail:e,trigger:t})))}};var ie=Symbol(0),Y=class extends B{get selected(){return this.items.find(e=>e.selected)??null}get selectedIndex(){return this.items.findIndex(e=>e.selected)}[p.onRemove](e,t){this[p.select](e,!1,t)}[p.add](e,t){e[ie]=!1,Object.defineProperty(e,"selected",{get(){return this[ie]},set:i=>{this.readonly||(this[p.onUserSelect]?.(),this[p.select](e,i))}}),super[p.add](e,t)}[p.select](e,t,i){if(t===e?.[ie])return;let r=this.selected;e&&(e[ie]=t),(t?r!==e:r===e)&&(r&&(r[ie]=!1),this.dispatchEvent(new v("change",{detail:{prev:r,current:this.selected},trigger:i})))}};var Se=class extends Y{#t=!1;switch="current";get auto(){return this.#t||this.readonly}[_.enableAuto];[p.onUserSelect](){this[_.setAuto](!1)}[p.onReset](e){this[_.enableAuto]=void 0,this[_.setAuto](!1,e)}autoSelect(e){this.readonly||this.#t||!this[_.enableAuto]||(this[_.enableAuto]?.(e),this[_.setAuto](!0,e))}getBySrc(e){return this.items.find(t=>t.src===e)}[_.setAuto](e,t){this.#t!==e&&(this.#t=e,this.dispatchEvent(new v("auto-change",{detail:e,trigger:t})))}};var re=class extends S{#t;#e;constructor(e,t){super(),this.#t=e,this.#e=t}async onAttach(e){let t=this.$props[this.#t]();if(t==="eager")requestAnimationFrame(this.#e);else if(t==="idle")wt(this.#e);else if(t==="visible"){let i,r=new IntersectionObserver(s=>{this.scope&&s[0].isIntersecting&&(i?.(),i=void 0,this.#e())});r.observe(e),i=b(()=>r.disconnect())}}};var Pe=class{#t;#e;constructor(e,t){this.#t=e,this.#e=t}notify(e,...t){this.#t(new v(e,{detail:t?.[0],trigger:t?.[1]}))}async ready(e,t){return O(async()=>{let{logger:i}=this.#e,{autoPlay:r,canPlay:s,started:a,duration:n,seekable:l,buffered:d,remotePlaybackInfo:h,playsInline:E,savedState:m,source:f}=this.#e.$state;if(s())return;let k={duration:e?.duration??n(),seekable:e?.seekable??l(),buffered:e?.buffered??d(),provider:this.#e.$provider()};this.notify("can-play",k,t),V();let P=this.#e.$provider(),{storage:A,qualities:pt}=this.#e,{muted:oi,volume:ni,clipStartTime:li,playbackRate:di}=this.#e.$props;await A?.onLoad?.(f());let ci=m()?.currentTime,mt=m()?.paused,Xe=await A?.getTime(),ft=ci??Xe??li(),ui=mt||mt!==!1&&!a()&&r();if(P){P.setVolume(await A?.getVolume()??ni()),P.setMuted(oi()||!!await A?.getMuted());let G=await A?.getAudioGain()??1;G>1&&P.audioGain?.setGain?.(G),P.setPlaybackRate?.(await A?.getPlaybackRate()??di()),P.setPlaysInline?.(E()),ft>0&&P.setCurrentTime(ft)}let X=await A?.getVideoQuality();if(X&&pt.length){let G=null,yt=1/0;for(let le of pt){let gt=Math.abs(X.width-le.width)+Math.abs(X.height-le.height)+(X.bitrate?Math.abs(X.bitrate-(le.bitrate??0)):0);gt<yt&&(G=le,yt=gt)}G&&(G.selected=!0)}s()&&ui?await this.#i(t):Xe&&Xe>0&&this.notify("started",void 0,t),h.set(null)})}async#i(e){let{player:t,$state:{autoPlaying:i,muted:r}}=this.#e;i.set(!0);let s=new v("auto-play-attempt",{trigger:e});try{await t.play(s)}catch{}}};var dt=R.fullscreenEnabled,xe=class extends N{#t=!1;#e=!1;get active(){return this.#e}get supported(){return dt}onConnect(){g(R,"fullscreenchange",this.#r.bind(this)),g(R,"fullscreenerror",this.#s.bind(this)),b(this.#i.bind(this))}async#i(){dt&&await this.exit()}#r(e){let t=lt(this.el);t!==this.#e&&(t||(this.#t=!1),this.#e=t,this.dispatch("fullscreen-change",{detail:t,trigger:e}))}#s(e){this.#t&&(this.dispatch("fullscreen-error",{detail:null,trigger:e}),this.#t=!1)}async enter(){try{return this.#t=!0,!this.el||lt(this.el)?void 0:(jt(),R.requestFullscreen(this.el))}catch(e){throw this.#t=!1,e}}async exit(){if(!(!this.el||!lt(this.el)))return jt(),R.exitFullscreen()}};function lt(o){if(R.fullscreenElement===o)return!0;try{return o.matches(R.fullscreenPseudoClass)}catch{return!1}}function jt(){if(!dt)throw Error("[vidstack] no fullscreen API")}var z=class o extends N{#t=x(this.#o());#e=x(!1);#i;get type(){return this.#t()}get locked(){return this.#e()}get portrait(){return this.#t().startsWith("portrait")}get landscape(){return this.#t().startsWith("landscape")}static supported=me();get supported(){return o.supported}onConnect(){if(this.supported)g(screen.orientation,"change",this.#s.bind(this));else{let e=window.matchMedia("(orientation: landscape)");e.onchange=this.#s.bind(this),b(()=>e.onchange=null)}b(this.#r.bind(this))}async#r(){this.supported&&this.#e()&&await this.unlock()}#s(e){this.#t.set(this.#o()),this.dispatch("orientation-change",{detail:{orientation:c(this.#t),lock:this.#i},trigger:e})}async lock(e){c(this.#e)||this.#i===e||(this.#a(),await screen.orientation.lock(e),this.#e.set(!0),this.#i=e)}async unlock(){c(this.#e)&&(this.#a(),this.#i=void 0,await screen.orientation.unlock(),this.#e.set(!1))}#a(){if(!this.supported)throw Error("[vidstack] no orientation API")}#o(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};var we=class{#t=new Map;enqueue(e,t){this.#t.set(e,t)}serve(e){let t=this.peek(e);return this.#t.delete(e),t}peek(e){return this.#t.get(e)}delete(e){this.#t.delete(e)}clear(){this.#t.clear()}};var j=class{#t=!1;#e=Ze();#i=new Map;get size(){return this.#i.size}get isServing(){return this.#t}async waitForFlush(){this.#t||await this.#e.promise}enqueue(e,t){if(this.#t){t();return}this.#i.delete(e),this.#i.set(e,t)}serve(e){this.#i.get(e)?.(),this.#i.delete(e)}start(){this.#r(),this.#t=!0,this.#i.size>0&&this.#r()}stop(){this.#t=!1}reset(){this.stop(),this.#i.clear(),this.#s()}#r(){for(let e of this.#i.keys())this.serve(e);this.#s()}#s(){this.#e.resolve(),this.#e=Ze()}};var se=class extends S{#t=-2;#e=!1;#i=x(!1);#r=x(!1);#s=null;#a=x(!0);defaultDelay=2e3;get canIdle(){return this.#a()}set canIdle(e){this.#a.set(e)}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:e}=this.$props;return this.#i()||e()}set hideOnMouseLeave(e){this.#i.set(e)}get showing(){return this.$state.controlsVisible()}show(e=0,t){this.#p(),this.#e||this.#f(!0,e,t)}hide(e=this.defaultDelay,t){this.#p(),this.#e||this.#f(!1,e,t)}pause(e){this.#e=!0,this.#p(),this.#f(!0,0,e)}resume(e){this.#e=!1,!this.$state.paused()&&this.#f(!1,this.defaultDelay,e)}onConnect(){u(this.#o.bind(this))}#o(){let{viewType:e}=this.$state;if(!this.#a())return;if(e()==="audio"){this.show();return}u(this.#d.bind(this)),u(this.#l.bind(this));let t=this.#u.bind(this),i=this.#h.bind(this);this.listen("can-play",r=>this.show(0,r)),this.listen("play",t),this.listen("pause",i),this.listen("auto-play-fail",i)}#d(){let{started:e,pointer:t,paused:i}=this.$state;if(!e()||t()!=="fine")return;let r=this.hideOnMouseLeave;(!r||!this.#r())&&u(()=>{i()||this.listen("pointermove",this.#y.bind(this))}),r&&(this.listen("mouseenter",this.#c.bind(this)),this.listen("mouseleave",this.#n.bind(this)))}#l(){let{paused:e,started:t,autoPlayError:i}=this.$state;if(e()||i()&&!t())return;let r=this.#y.bind(this);u(()=>{let s=this.$state.pointer(),a=s==="coarse",n=[a?"touchend":"pointerup","keydown"];for(let l of n)this.listen(l,r,{passive:!1})})}#u(e){this.show(0,e),this.hide(void 0,e)}#h(e){this.show(0,e)}#c(e){this.#r.set(!1),this.show(0,e),this.hide(void 0,e)}#n(e){this.#r.set(!0),this.hide(0,e)}#p(){window.clearTimeout(this.#t),this.#t=-1}#y(e){e.MEDIA_GESTURE||this.#e||Ft(e)||(bt(e)&&(e.key==="Escape"?(this.el?.focus(),this.#s=null):this.#s&&(e.preventDefault(),requestAnimationFrame(()=>{this.#s?.focus(),this.#s=null}))),this.show(0,e),this.hide(this.defaultDelay,e))}#f(e,t,i){if(t===0){this.#m(e,i);return}this.#t=window.setTimeout(()=>{this.scope&&this.#m(e&&!this.#e,i)},t)}#m(e,t){this.$state.controlsVisible()!==e&&(this.$state.controlsVisible.set(e),!e&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#s=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:e,trigger:t}))}};var Le=class extends S{#t;#e;#i;controls;#r;#s;#a;#o=new j;constructor(e,t,i){super(),this.#t=e,this.#e=t,this.#i=i,this.#a=i.$provider,this.controls=new se,this.#r=new xe,this.#s=new z}onAttach(){this.listen("fullscreen-change",this.#M.bind(this))}onConnect(){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),t=this.#u.bind(this);for(let i of e)i.startsWith("media-")&&this.listen(i,t);this.#d(),u(this.#l.bind(this)),u(this.#y.bind(this)),u(this.#f.bind(this)),u(this.#m.bind(this)),u(this.#b.bind(this)),u(this.#E.bind(this)),u(this.#k.bind(this))}onDestroy(){try{let e=this.createEvent("destroy"),{pictureInPicture:t,fullscreen:i}=this.$state;i()&&this.exitFullscreen("prefer-media",e),t()&&this.exitPictureInPicture(e)}catch{}this.#o.reset()}#d(){let{load:e}=this.$props,{canLoad:t}=this.$state;if(e()!=="play"||t())return;let i=this.listen("media-play-request",r=>{this.#h(r),i()})}#l(){let e=this.#a(),t=this.$state.canPlay();return e&&t&&this.#o.start(),()=>{this.#o.stop()}}#u(e){e.stopPropagation(),!e.defaultPrevented&&this[e.type]&&(c(this.#a)?this[e.type](e):this.#o.enqueue(e.type,()=>{c(this.#a)&&this[e.type](e)}))}async play(e){let{canPlay:t,paused:i,autoPlaying:r}=this.$state;if(this.#h(e)||!c(i))return;e&&this.#e.queue.enqueue("media-play-request",e);let s=c(r);try{let a=c(this.#a);return ct(a,c(t)),await a.play()}catch(a){let n=this.createEvent("play-fail",{detail:ge(a),trigger:e});throw n.autoPlay=s,this.#t.handle(n),a}}#h(e){let{load:t}=this.$props,{canLoad:i}=this.$state;if(t()==="play"&&!i()){let r=this.createEvent("media-start-loading",{trigger:e});return this.dispatchEvent(r),this.#o.enqueue("media-play-request",async()=>{try{await this.play(r)}catch{}}),!0}return!1}async pause(e){let{canPlay:t,paused:i}=this.$state;if(!c(i)){e&&this.#e.queue.enqueue("media-pause-request",e);try{let r=c(this.#a);return ct(r,c(t)),await r.pause()}catch(r){throw this.#e.queue.delete("media-pause-request"),r}}}setAudioGain(e,t){let{audioGain:i,canSetAudioGain:r}=this.$state;if(i()===e)return;let s=this.#a();if(!s?.audioGain||!r())throw Error("[vidstack] audio gain api not available");t&&this.#e.queue.enqueue("media-audio-gain-change-request",t),s.audioGain.setGain(e)}seekToLiveEdge(e){let{canPlay:t,live:i,liveEdge:r,canSeek:s,liveSyncPosition:a,seekableEnd:n,userBehindLiveEdge:l}=this.$state;if(l.set(!1),c(()=>!i()||r()||!s()))return;let d=c(this.#a);ct(d,c(t)),e&&this.#e.queue.enqueue("media-seek-request",e);let h=n()-2;d.setCurrentTime(Math.min(h,a()??h))}#c=!1;async enterFullscreen(e="prefer-media",t){let i=this.#n(e);if(Xt(e,i),!i.active)return c(this.$state.pictureInPicture)&&(this.#c=!0,await this.exitPictureInPicture(t)),t&&this.#e.queue.enqueue("media-enter-fullscreen-request",t),i.enter()}async exitFullscreen(e="prefer-media",t){let i=this.#n(e);if(Xt(e,i),!!i.active){t&&this.#e.queue.enqueue("media-exit-fullscreen-request",t);try{let r=await i.exit();return this.#c&&c(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),r}finally{this.#c=!1}}}#n(e){let t=c(this.#a);return e==="prefer-media"&&this.#r.supported||e==="media"?this.#r:t?.fullscreen}async enterPictureInPicture(e){if(this.#p(),!this.$state.pictureInPicture())return e&&this.#e.queue.enqueue("media-enter-pip-request",e),await this.#a().pictureInPicture.enter()}async exitPictureInPicture(e){if(this.#p(),!!this.$state.pictureInPicture())return e&&this.#e.queue.enqueue("media-exit-pip-request",e),await this.#a().pictureInPicture.exit()}#p(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#y(){this.controls.defaultDelay=this.$props.controlsDelay()}#f(){let{canSetAudioGain:e}=this.$state,t=!!this.#a()?.audioGain?.supported;e.set(t)}#m(){let{canAirPlay:e}=this.$state,t=!!this.#a()?.airPlay?.supported;e.set(t)}#b(){let{canGoogleCast:e,source:t}=this.$state,i=_t&&!Lt&&Dt(t());e.set(i)}#E(){let{canFullscreen:e}=this.$state,t=this.#r.supported||!!this.#a()?.fullscreen?.supported;e.set(t)}#k(){let{canPictureInPicture:e}=this.$state,t=!!this.#a()?.pictureInPicture?.supported;e.set(t)}async"media-airplay-request"(e){try{await this.requestAirPlay(e)}catch{}}async requestAirPlay(e){try{let t=this.#a()?.airPlay;if(!t?.supported)throw Error("No AirPlay adapter.");return e&&this.#e.queue.enqueue("media-airplay-request",e),await t.prompt()}catch(t){throw this.#e.queue.delete("media-airplay-request"),t}}async"media-google-cast-request"(e){try{await this.requestGoogleCast(e)}catch{}}#g;async requestGoogleCast(e){try{let{canGoogleCast:t}=this.$state;if(!c(t)){let r=Error("Cast not available.");throw r.code="CAST_NOT_AVAILABLE",r}if(I("https://www.gstatic.com"),!this.#g){let r=await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-RYM2XYCR.js");this.#g=new r.GoogleCastLoader}await this.#g.prompt(this.#i),e&&this.#e.queue.enqueue("media-google-cast-request",e);let i=c(this.$state.remotePlaybackState)!=="disconnected";i&&this.$state.savedState.set({paused:c(this.$state.paused),currentTime:c(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(i?this.#g:null)}catch(t){throw this.#e.queue.delete("media-google-cast-request"),t}}"media-clip-start-change-request"(e){let{clipStartTime:t}=this.$state;t.set(e.detail)}"media-clip-end-change-request"(e){let{clipEndTime:t}=this.$state;t.set(e.detail),this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-duration-change-request"(e){let{providedDuration:t,clipEndTime:i}=this.$state;t.set(e.detail),i()<=0&&this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-audio-track-change-request"(e){let{logger:t,audioTracks:i}=this.#i;if(i.readonly)return;let r=e.detail,s=i[r];if(s){let a=e.type;this.#e.queue.enqueue(a,e),s.selected=!0}}async"media-enter-fullscreen-request"(e){try{await this.enterFullscreen(e.detail,e)}catch(t){this.#T(t,e)}}async"media-exit-fullscreen-request"(e){try{await this.exitFullscreen(e.detail,e)}catch(t){this.#T(t,e)}}async#M(e){let t=c(this.$props.fullscreenOrientation),i=e.detail;if(!(Et(t)||t==="none"||!this.#s.supported))if(i){if(this.#s.locked)return;this.dispatch("media-orientation-lock-request",{detail:t,trigger:e})}else this.#s.locked&&this.dispatch("media-orientation-unlock-request",{trigger:e})}#T(e,t){this.#t.handle(this.createEvent("fullscreen-error",{detail:ge(e)}))}async"media-orientation-lock-request"(e){let t=e.type;try{this.#e.queue.enqueue(t,e),await this.#s.lock(e.detail)}catch{this.#e.queue.delete(t)}}async"media-orientation-unlock-request"(e){let t=e.type;try{this.#e.queue.enqueue(t,e),await this.#s.unlock()}catch{this.#e.queue.delete(t)}}async"media-enter-pip-request"(e){try{await this.enterPictureInPicture(e)}catch(t){this.#v(t,e)}}async"media-exit-pip-request"(e){try{await this.exitPictureInPicture(e)}catch(t){this.#v(t,e)}}#v(e,t){this.#t.handle(this.createEvent("picture-in-picture-error",{detail:ge(e)}))}"media-live-edge-request"(e){let{live:t,liveEdge:i,canSeek:r}=this.$state;if(!(!t()||i()||!r())){this.#e.queue.enqueue("media-seek-request",e);try{this.seekToLiveEdge()}catch{this.#e.queue.delete("media-seek-request")}}}async"media-loop-request"(e){try{this.#e.looping=!0,this.#e.replaying=!0,await this.play(e)}catch{this.#e.looping=!1}}"media-user-loop-change-request"(e){this.$state.userPrefersLoop.set(e.detail)}async"media-pause-request"(e){if(!this.$state.paused())try{await this.pause(e)}catch{}}async"media-play-request"(e){if(this.$state.paused())try{await this.play(e)}catch{}}"media-rate-change-request"(e){let{playbackRate:t,canSetPlaybackRate:i}=this.$state;if(t()===e.detail||!i())return;let r=this.#a();r?.setPlaybackRate&&(this.#e.queue.enqueue("media-rate-change-request",e),r.setPlaybackRate(e.detail))}"media-audio-gain-change-request"(e){try{this.setAudioGain(e.detail,e)}catch{}}"media-quality-change-request"(e){let{qualities:t,storage:i,logger:r}=this.#i;if(t.readonly)return;this.#e.queue.enqueue("media-quality-change-request",e);let s=e.detail;if(s<0)t.autoSelect(e),e.isOriginTrusted&&i?.setVideoQuality?.(null);else{let a=t[s];a&&(a.selected=!0,e.isOriginTrusted&&i?.setVideoQuality?.({id:a.id,width:a.width,height:a.height,bitrate:a.bitrate}))}}"media-pause-controls-request"(e){let t=e.type;this.#e.queue.enqueue(t,e),this.controls.pause(e)}"media-resume-controls-request"(e){let t=e.type;this.#e.queue.enqueue(t,e),this.controls.resume(e)}"media-seek-request"(e){let{seekableStart:t,seekableEnd:i,ended:r,canSeek:s,live:a,userBehindLiveEdge:n,clipStartTime:l}=this.$state,d=e.detail;r()&&(this.#e.replaying=!0);let h=e.type;this.#e.seeking=!1,this.#e.queue.delete(h);let E=d+l(),m=Math.floor(E)===Math.floor(i()),f=m?i():Math.min(Math.max(t()+.1,E),i()-.1);!Number.isFinite(f)||!s()||(this.#e.queue.enqueue(h,e),this.#a().setCurrentTime(f),a()&&e.isOriginTrusted&&Math.abs(i()-f)>=2&&n.set(!0))}"media-seeking-request"(e){let t=e.type;this.#e.queue.enqueue(t,e),this.$state.seeking.set(!0),this.#e.seeking=!0}"media-start-loading"(e){if(this.$state.canLoad())return;let t=e.type;this.#e.queue.enqueue(t,e),this.#t.handle(this.createEvent("can-load"))}"media-poster-start-loading"(e){if(this.$state.canLoadPoster())return;let t=e.type;this.#e.queue.enqueue(t,e),this.#t.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(e){let{index:t,mode:i}=e.detail,r=this.#i.textTracks[t];if(r){let s=e.type;this.#e.queue.enqueue(s,e),r.setMode(i,e)}}"media-mute-request"(e){if(this.$state.muted())return;let t=e.type;this.#e.queue.enqueue(t,e),this.#a().setMuted(!0)}"media-unmute-request"(e){let{muted:t,volume:i}=this.$state;if(!t())return;let r=e.type;this.#e.queue.enqueue(r,e),this.#i.$provider().setMuted(!1),i()===0&&(this.#e.queue.enqueue(r,e),this.#a().setVolume(.25))}"media-volume-change-request"(e){let{muted:t,volume:i}=this.$state,r=e.detail;if(i()===r)return;let s=e.type;this.#e.queue.enqueue(s,e),this.#a().setVolume(r),r>0&&t()&&(this.#e.queue.enqueue(s,e),this.#a().setMuted(!1))}#S(e,t,i){}};function ct(o,e){if(!(o&&e))throw Error("[vidstack] media not ready")}function Xt(o,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}var _e=class{seeking=!1;looping=!1;replaying=!1;queue=new we};function ae(o){return!y(o)&&"width"in o&&"height"in o&&J(o.width)&&J(o.height)}var Jt=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);var qe=class extends S{#t;#e;#i=new Map;#r=!1;#s=[];#a=[-1,-1];#o=!1;#d;constructor(e,t){super(),this.#t=e,this.#e=t}onAttach(e){e.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(e){u(this.#A.bind(this)),this.#p(),this.#y(),this.#f(),this.#u(),b(this.#h.bind(this))}onDestroy(){let{audioTracks:e,qualities:t,textTracks:i}=this.#e;e[p.reset](),t[p.reset](),i[p.reset](),this.#P()}handle(e){if(!this.scope)return;let t=e.type;O(()=>this[e.type]?.(e)),Jt.has(t)&&this.#i.set(t,e),this.dispatch(e)}#l=!1;#u(){this.#l&&(requestAnimationFrame(()=>{this.scope&&this.#e.remote.play(new v("dom-connect"))}),this.#l=!1)}#h(){this.#l||(this.#l=!this.$state.paused(),this.#e.$provider()?.pause())}#c(){this.#R(),this.#r=!1,this.#t.replaying=!1,this.#t.looping=!1,this.#o=!1,this.#d=void 0,this.#i.clear()}#n(e,t){let i=this.#t.queue.serve(e);i&&(t.request=i,t.triggers.add(i))}#p(){this.#m(),this.#b();let e=this.#e.textTracks;g(e,"add",this.#m.bind(this)),g(e,"remove",this.#m.bind(this)),g(e,"mode-change",this.#b.bind(this))}#y(){let e=this.#e.qualities;g(e,"add",this.#g.bind(this)),g(e,"remove",this.#g.bind(this)),g(e,"change",this.#M.bind(this)),g(e,"auto-change",this.#T.bind(this)),g(e,"readonly-change",this.#x.bind(this))}#f(){let e=this.#e.audioTracks;g(e,"add",this.#E.bind(this)),g(e,"remove",this.#E.bind(this)),g(e,"change",this.#k.bind(this))}#m(e){let{textTracks:t}=this.$state;t.set(this.#e.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:t(),trigger:e})}#b(e){e&&this.#n("media-text-track-change-request",e);let t=this.#e.textTracks.selected,{textTrack:i}=this.$state;i()!==t&&(i.set(t),this.dispatch("text-track-change",{detail:t,trigger:e}))}#E(e){let{audioTracks:t}=this.$state;t.set(this.#e.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:t(),trigger:e})}#k(e){let{audioTrack:t}=this.$state;t.set(this.#e.audioTracks.selected),e&&this.#n("media-audio-track-change-request",e),this.dispatch("audio-track-change",{detail:t(),trigger:e})}#g(e){let{qualities:t}=this.$state;t.set(this.#e.qualities.toArray()),this.dispatch("qualities-change",{detail:t(),trigger:e})}#M(e){let{quality:t}=this.$state;t.set(this.#e.qualities.selected),e&&this.#n("media-quality-change-request",e),this.dispatch("quality-change",{detail:t(),trigger:e})}#T(){let{qualities:e}=this.#e,t=e.auto;this.$state.autoQuality.set(t),t||this.#P()}#v=null;#S(){this.#P(),this.#v=u(()=>{let{qualities:e}=this.#e,{mediaWidth:t,mediaHeight:i}=this.$state,r=t(),s=i();if(r===0||s===0)return;let a=null,n=1/0;for(let l of e){let d=Math.abs(l.width-r)+Math.abs(l.height-s);d<n&&(n=d,a=l)}a&&e[p.select](a,!0,new v("resize",{detail:{width:r,height:s}}))})}#P(){this.#v?.(),this.#v=null}#x(){this.$state.canSetQuality.set(!this.#e.qualities.readonly)}#A(){let{canSetVolume:e,isGoogleCastConnected:t}=this.$state;if(t()){e.set(!1);return}Rt().then(e.set)}"provider-change"(e){let t=this.#e.$provider(),i=e.detail;t?.type!==i?.type&&(t?.destroy?.(),t?.scope?.dispose(),this.#e.$provider.set(e.detail),t&&e.detail===null&&this.#L(e))}"provider-loader-change"(e){}"auto-play"(e){this.$state.autoPlayError.set(null)}"auto-play-fail"(e){this.$state.autoPlayError.set(e.detail),this.#c()}"can-load"(e){this.$state.canLoad.set(!0),this.#i.set("can-load",e),this.#e.textTracks[T.canLoad](),this.#n("media-start-loading",e)}"can-load-poster"(e){this.$state.canLoadPoster.set(!0),this.#i.set("can-load-poster",e),this.#n("media-poster-start-loading",e)}"media-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.$state.viewType();this.$state.mediaType.set(e.detail);let r=this.$state.providedViewType(),s=r==="unknown"?e.detail:r;i!==s&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(e.detail),this.dispatch("view-type-change",{detail:s,trigger:e}))})},0)}"stream-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let{streamType:i,inferredStreamType:r}=this.$state;r.set(e.detail),e.detail=i()}"rate-change"(e){let{storage:t}=this.#e,{canPlay:i}=this.$state;this.$state.playbackRate.set(e.detail),this.#n("media-rate-change-request",e),i()&&t?.setPlaybackRate?.(e.detail)}"remote-playback-change"(e){let{remotePlaybackState:t,remotePlaybackType:i}=this.$state,{type:r,state:s}=e.detail,a=s==="connected";i.set(r),t.set(s);let n=r==="airplay"?"media-airplay-request":"media-google-cast-request";if(a)this.#n(n,e);else{let l=this.#t.queue.peek(n);l&&(e.request=l,e.triggers.add(l))}}"sources-change"(e){let t=this.$state.sources(),i=e.detail;this.$state.sources.set(i),this.#V(t,i,e)}#V(e,t,i){let{qualities:r}=this.#e,s=!1,a=!1;for(let n of e){if(!ae(n))continue;if(!t.some(d=>d.src===n.src)){let d=r.getBySrc(n.src);d&&(r[p.remove](d,i),a=!0)}}a&&!r.length&&(this.$state.savedState.set(null),r[p.reset](i));for(let n of t){if(!ae(n)||r.getBySrc(n.src))continue;let l={id:n.id??n.height+"p",bitrate:null,codec:null,...n,selected:!1};r[p.add](l,i),s=!0}s&&!r[_.enableAuto]&&(this.#S(),r[_.enableAuto]=this.#S.bind(this),r[_.setAuto](!0,i))}"source-change"(e){e.isQualityChange=e.originEvent?.type==="quality-change";let t=e.detail;this.#L(e,e.isQualityChange),this.#i.set(e.type,e),this.$state.source.set(t),this.el?.setAttribute("aria-busy","true")}#L(e,t=!1){let{audioTracks:i,qualities:r}=this.#e;if(!t){this.#s=[],this.#a=[-1,-1],i[p.reset](e),r[p.reset](e),nt(this.$state,t),this.#c();return}nt(this.$state,t),this.#c()}abort(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.#i.get("can-load");i&&!e.triggers.hasType("can-load")&&e.triggers.add(i)}"load-start"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t)}error(e){this.$state.error.set(e.detail);let t=this.#i.get("abort");t&&e.triggers.add(t)}"loaded-metadata"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"loaded-data"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"can-play"(e){let t=this.#i.get("loaded-metadata");t&&e.triggers.add(t),this.#_(e.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(e){this.#_(e.detail);let t=this.#i.get("can-play");t&&e.triggers.add(t)}#_(e){let{seekable:t,buffered:i,intrinsicDuration:r,canPlay:s}=this.$state;s.set(!0),i.set(e.buffered),t.set(e.seekable);let a=H(e.seekable)??1/0;r.set(a)}"duration-change"(e){let{live:t,intrinsicDuration:i,providedDuration:r,clipEndTime:s,ended:a}=this.$state,n=e.detail;if(!t()){let l=Number.isNaN(n)?0:n;i.set(l),a()&&this.#C(e)}(r()>0||s()>0)&&e.stopImmediatePropagation()}progress(e){let{buffered:t,bufferedEnd:i,seekable:r,seekableEnd:s,live:a,intrinsicDuration:n}=this.$state,{buffered:l,seekable:d}=e.detail,h=H(l)??1/0,E=l.length!==t().length,m=h>i(),f=H(d)??1/0,k=d.length!==r().length,P=f>s();(E||m)&&t.set(l),(k||P)&&r.set(d),a()&&(n.set(f),this.dispatch("duration-change",{detail:f,trigger:e}))}play(e){let{paused:t,autoPlayError:i,ended:r,autoPlaying:s,playsInline:a,pointer:n,muted:l,viewType:d,live:h,userBehindLiveEdge:E}=this.$state;if(this.#q(),!t()){e.stopImmediatePropagation();return}e.autoPlay=s();let m=this.#i.get("waiting");m&&e.triggers.add(m),this.#n("media-play-request",e),this.#i.set("play",e),t.set(!1),i.set(null),e.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:l()},trigger:e})),s.set(!1)),(r()||this.#t.replaying)&&(this.#t.replaying=!1,r.set(!1),this.handle(this.createEvent("replay",{trigger:e}))),!a()&&d()==="video"&&n()==="coarse"&&this.#e.remote.enterFullscreen("prefer-media",e),h()&&!E()&&this.#e.remote.seekToLiveEdge(e)}#q(e){if(!c(this.#e.$provider))return;let{ended:i,seekableStart:r,clipStartTime:s,clipEndTime:a,realCurrentTime:n,duration:l}=this.$state,d=n()<s()||a()>0&&n()>=a()||Math.abs(n()-l())<.1||i();return d&&this.dispatch("media-seek-request",{detail:(s()>0?0:r())+.1,trigger:e}),d}"play-fail"(e){let{muted:t,autoPlaying:i}=this.$state,r=this.#i.get("play");r&&e.triggers.add(r),this.#n("media-play-request",e);let{paused:s,playing:a}=this.$state;s.set(!0),a.set(!1),this.#c(),this.#i.set("play-fail",e),e.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:t(),error:e.detail},trigger:e})),i.set(!1))}playing(e){let t=this.#i.get("play"),i=this.#i.get("seeked");t?e.triggers.add(t):i&&e.triggers.add(i),setTimeout(()=>this.#c(),0);let{paused:r,playing:s,live:a,liveSyncPosition:n,seekableEnd:l,started:d,currentTime:h,seeking:E,ended:m}=this.$state;if(r.set(!1),s.set(!0),E.set(!1),m.set(!1),this.#t.looping){this.#t.looping=!1;return}if(a()&&!d()&&h()===0){let f=n()??l()-2;Number.isFinite(f)&&this.#e.$provider().setCurrentTime(f)}this.started(e)}started(e){let{started:t}=this.$state;t()||(t.set(!0),this.handle(this.createEvent("started",{trigger:e})))}pause(e){this.el?.isConnected||(this.#l=!0),this.#n("media-pause-request",e);let t=this.#i.get("seeked");t&&e.triggers.add(t);let{paused:i,playing:r}=this.$state;i.set(!0),r.set(!1),this.#r&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:e})),this.#r=!1},0),this.#c()}"time-change"(e){if(this.#t.looping){e.stopImmediatePropagation();return}let{waiting:t,played:i,clipEndTime:r,realCurrentTime:s,currentTime:a}=this.$state,n=e.detail,l=r();s.set(n),this.#$(),t.set(!1);for(let d of this.#e.textTracks)d[T.updateActiveCues](n,e);l>0&&n>=l&&(this.#r=!0,this.dispatch("media-pause-request",{trigger:e})),this.#I(),this.dispatch("time-update",{detail:{currentTime:a(),played:i()},trigger:e})}#$(){let{currentTime:e,played:t,paused:i}=this.$state;i()||(this.#a=Vt(this.#s,this.#a,e()),t.set(new W(this.#s)))}#C(e){let{clipStartTime:t,clipEndTime:i,duration:r}=this.$state;t()>0||i()>0||this.handle(this.createEvent("time-change",{detail:r(),trigger:e}))}#I(){let{storage:e}=this.#e,{canPlay:t,realCurrentTime:i}=this.$state;t()&&e?.setTime?.(i())}"audio-gain-change"(e){let{storage:t}=this.#e,{canPlay:i,audioGain:r}=this.$state;r.set(e.detail),this.#n("media-audio-gain-change-request",e),i()&&t?.setAudioGain?.(r())}"volume-change"(e){let{storage:t}=this.#e,{volume:i,muted:r,canPlay:s}=this.$state,a=e.detail;i.set(a.volume),r.set(a.muted||a.volume===0),this.#n("media-volume-change-request",e),this.#n(a.muted?"media-mute-request":"media-unmute-request",e),s()&&(t?.setVolume?.(i()),t?.setMuted?.(r()))}seeking=Te(e=>{let{seeking:t,realCurrentTime:i,paused:r}=this.$state;t.set(!0),i.set(e.detail),this.#n("media-seeking-request",e),r()&&(this.#d=e,this.#w()),this.#a=[-1,-1]},150,{leading:!0});seeked(e){let{seeking:t,currentTime:i,realCurrentTime:r,paused:s,seekableEnd:a,ended:n}=this.$state;if(this.#t.seeking)t.set(!0),e.stopImmediatePropagation();else if(t()){let l=this.#i.get("waiting");l&&e.triggers.add(l);let d=this.#i.get("seeking");d&&!e.triggers.has(d)&&e.triggers.add(d),s()&&this.#R(),t.set(!1),r.set(e.detail),this.#n("media-seek-request",e);let h=e?.originEvent;h?.isTrusted&&!(h instanceof MessageEvent)&&!/seek/.test(h.type)&&this.started(e)}Math.floor(i())!==Math.floor(a())?n.set(!1):this.end(e)}waiting(e){this.#o||this.#t.seeking||(e.stopImmediatePropagation(),this.#d=e,this.#w())}#w=Ee(()=>{if(!this.#d)return;this.#o=!0;let{waiting:e,playing:t}=this.$state;e.set(!0),t.set(!1);let i=this.createEvent("waiting",{trigger:this.#d});this.#i.set("waiting",i),this.dispatch(i),this.#d=void 0,this.#o=!1},300);end(e){let{loop:t,ended:i}=this.$state;if(!(!t()&&i())){if(t()){setTimeout(()=>{requestAnimationFrame(()=>{this.#q(e),this.dispatch("media-loop-request",{trigger:e})})},10);return}setTimeout(()=>this.#D(e),0)}}#D(e){let{storage:t}=this.#e,{paused:i,seeking:r,ended:s,duration:a}=this.$state;this.#C(e),i()||this.dispatch("pause",{trigger:e}),r()&&this.dispatch("seeked",{detail:a(),trigger:e}),s.set(!0),this.#c(),t?.setTime?.(a(),!0),this.dispatch("ended",{trigger:e})}#R(){this.#w.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(e){let t=e.detail;this.$state.fullscreen.set(t),this.#n(t?"media-enter-fullscreen-request":"media-exit-fullscreen-request",e)}"fullscreen-error"(e){this.#n("media-enter-fullscreen-request",e),this.#n("media-exit-fullscreen-request",e)}"orientation-change"(e){let t=e.detail.lock;this.#n(t?"media-orientation-lock-request":"media-orientation-unlock-request",e)}"picture-in-picture-change"(e){let t=e.detail;this.$state.pictureInPicture.set(t),this.#n(t?"media-enter-pip-request":"media-exit-pip-request",e)}"picture-in-picture-error"(e){this.#n("media-enter-pip-request",e),this.#n("media-exit-pip-request",e)}"title-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredTitle.set(e.detail))}"poster-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredPoster.set(e.detail))}};var Ce=class extends S{onSetup(){this.#t();let e=[this.#r,this.#a,this.#n,this.#p,this.#d,this.#u,this.#h,this.#y,this.#m,this.#f,this.#o,this.#c,this.#l,this.#e,this.#s];for(let t of e)u(t.bind(this))}#t(){let e={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},t=new Set(["currentTime","paused","playbackRate","volume"]);for(let i of Object.keys(this.$props))t.has(i)||this.$state[e[i]??i]?.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}#e(){let{viewType:e,streamType:t,title:i,poster:r,loop:s}=this.$props,a=this.$state;a.providedPoster.set(r()),a.providedStreamType.set(t()),a.providedViewType.set(e()),a.providedTitle.set(i()),a.providedLoop.set(s())}#i(){}#r(){let{artist:e,artwork:t}=this.$props;this.$state.artist.set(e()),this.$state.artwork.set(t())}#s(){let{title:e}=this.$state;this.dispatch("title-change",{detail:e()})}#a(){let e=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(e),this.dispatch("auto-play-change",{detail:e})}#o(){let e=this.$state.loop();this.dispatch("loop-change",{detail:e})}#d(){let e=this.$props.controls();this.$state.controls.set(e)}#l(){let{poster:e}=this.$state;this.dispatch("poster-change",{detail:e()})}#u(){let e=this.$props.crossOrigin()??this.$props.crossorigin(),t=e===!0?"":e;this.$state.crossOrigin.set(t)}#h(){let{duration:e}=this.$props;this.dispatch("media-duration-change-request",{detail:e()})}#c(){let e=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(e),this.dispatch("plays-inline-change",{detail:e})}#n(){let{clipStartTime:e}=this.$props;this.dispatch("media-clip-start-change-request",{detail:e()})}#p(){let{clipEndTime:e}=this.$props;this.dispatch("media-clip-end-change-request",{detail:e()})}#y(){this.dispatch("live-change",{detail:this.$state.live()})}#f(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#m(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}};var oe=class{playerId="vds-player";mediaId=null;#t={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#t.volume}async setVolume(e){this.#t.volume=e,this.save()}async getMuted(){return this.#t.muted}async setMuted(e){this.#t.muted=e,this.save()}async getTime(){return this.#t.time}async setTime(e,t){let i=e<0;this.#t.time=i?null:e,i||t?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#t.lang}async setLang(e){this.#t.lang=e,this.save()}async getCaptions(){return this.#t.captions}async setCaptions(e){this.#t.captions=e,this.save()}async getPlaybackRate(){return this.#t.rate}async setPlaybackRate(e){this.#t.rate=e,this.save()}async getAudioGain(){return this.#t.audioGain}async setAudioGain(e){this.#t.audioGain=e,this.save()}async getVideoQuality(){return this.#t.quality}async setVideoQuality(e){this.#t.quality=e,this.save()}onChange(e,t,i="vds-player"){let r=i?localStorage.getItem(i):null,s=t?localStorage.getItem(t):null;this.playerId=i,this.mediaId=t,this.#t={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...r?JSON.parse(r):{},time:s?+s:null}}save(){if(!this.playerId)return;let e=JSON.stringify({...this.#t,time:void 0});localStorage.setItem(this.playerId,e)}saveTimeThrottled=Te(this.saveTime.bind(this),1e3);saveTime(){if(!this.mediaId)return;let e=(this.#t.time??0).toString();localStorage.setItem(this.mediaId,e)}};var Zt=["play","pause","seekforward","seekbackward","seekto"],Re=class extends S{onConnect(){u(this.#e.bind(this)),u(this.#i.bind(this));let e=this.#r.bind(this);for(let t of Zt)navigator.mediaSession.setActionHandler(t,e);b(this.#t.bind(this))}#t(){for(let e of Zt)navigator.mediaSession.setActionHandler(e,null)}#e(){let{title:e,artist:t,artwork:i,poster:r}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:e(),artist:t(),artwork:i()??[{src:r()}]})}#i(){let{canPlay:e,paused:t}=this.$state;navigator.mediaSession.playbackState=e()?t()?"paused":"playing":"none"}#r(e){let t=new v("media-session-action",{detail:e});switch(e.action){case"play":this.dispatch("media-play-request",{trigger:t});break;case"pause":this.dispatch("media-pause-request",{trigger:t});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:J(e.seekTime)?e.seekTime:this.$state.currentTime()+(e.seekOffset??10),trigger:t});break}}};var ne=class{#t=null;#e=null;#i=-1;#r;constructor(e=void 0){this.#r=e}setTarget(e){this.#t=e}getPlayer(e){return this.#e?this.#e:((e??this.#t)?.dispatchEvent(new v("find-media-player",{detail:t=>void(this.#e=t),bubbles:!0,composed:!0})),this.#e)}setPlayer(e){this.#e=e}startLoading(e){this.#s("media-start-loading",e)}startLoadingPoster(e){this.#s("media-poster-start-loading",e)}requestAirPlay(e){this.#s("media-airplay-request",e)}requestGoogleCast(e){this.#s("media-google-cast-request",e)}play(e){this.#s("media-play-request",e)}pause(e){this.#s("media-pause-request",e)}mute(e){this.#s("media-mute-request",e)}unmute(e){this.#s("media-unmute-request",e)}enterFullscreen(e,t){this.#s("media-enter-fullscreen-request",t,e)}exitFullscreen(e,t){this.#s("media-exit-fullscreen-request",t,e)}lockScreenOrientation(e,t){this.#s("media-orientation-lock-request",t,e)}unlockScreenOrientation(e){this.#s("media-orientation-unlock-request",e)}enterPictureInPicture(e){this.#s("media-enter-pip-request",e)}exitPictureInPicture(e){this.#s("media-exit-pip-request",e)}seeking(e,t){this.#s("media-seeking-request",t,e)}seek(e,t){this.#s("media-seek-request",t,e)}seekToLiveEdge(e){this.#s("media-live-edge-request",e)}changeDuration(e,t){this.#s("media-duration-change-request",t,e)}changeClipStart(e,t){this.#s("media-clip-start-change-request",t,e)}changeClipEnd(e,t){this.#s("media-clip-end-change-request",t,e)}changeVolume(e,t){this.#s("media-volume-change-request",t,Math.max(0,Math.min(1,e)))}changeAudioTrack(e,t){this.#s("media-audio-track-change-request",t,e)}changeQuality(e,t){this.#s("media-quality-change-request",t,e)}requestAutoQuality(e){this.changeQuality(-1,e)}changeTextTrackMode(e,t,i){this.#s("media-text-track-change-request",i,{index:e,mode:t})}changePlaybackRate(e,t){this.#s("media-rate-change-request",t,e)}changeAudioGain(e,t){this.#s("media-audio-gain-change-request",t,e)}resumeControls(e){this.#s("media-resume-controls-request",e)}pauseControls(e){this.#s("media-pause-controls-request",e)}togglePaused(e){let t=this.getPlayer(e?.target);t&&(t.state.paused?this.play(e):this.pause(e))}toggleControls(e){let t=this.getPlayer(e?.target);t&&(t.controls.showing?t.controls.hide(0,e):t.controls.show(0,e))}toggleMuted(e){let t=this.getPlayer(e?.target);t&&(t.state.muted?this.unmute(e):this.mute(e))}toggleFullscreen(e,t){let i=this.getPlayer(t?.target);i&&(i.state.fullscreen?this.exitFullscreen(e,t):this.enterFullscreen(e,t))}togglePictureInPicture(e){let t=this.getPlayer(e?.target);t&&(t.state.pictureInPicture?this.exitPictureInPicture(e):this.enterPictureInPicture(e))}showCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,r=this.#i;(!i[r]||!M(i[r]))&&(r=-1),r===-1&&(r=i.findIndex(s=>M(s)&&s.default)),r===-1&&(r=i.findIndex(s=>M(s))),r>=0&&this.changeTextTrackMode(r,"showing",e),this.#i=-1}disableCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,r=t.state.textTrack;if(r){let s=i.indexOf(r);this.changeTextTrackMode(s,"disabled",e),this.#i=s}}toggleCaptions(e){let t=this.getPlayer(e?.target);t&&(t.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(e,t){this.#s("media-user-loop-change-request",t,e)}#s(e,t,i){let r=new v(e,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:t}),s=t?.target||null;s&&s instanceof U&&(s=s.el),s=!s||s===document||s===window||s===document.body||this.#e?.el&&s instanceof Node&&!this.#e.el.contains(s)?this.#t??this.getPlayer()?.el:s??this.#t,this.#e?e==="media-play-request"&&!this.#e.state.canLoad?s?.dispatchEvent(r):this.#e.canPlayQueue.enqueue(e,()=>s?.dispatchEvent(r)):s?.dispatchEvent(r)}#a(e){}};var Ae=class extends Y{};var Ve=class{priority=0;#t=!0;#e=null;#i=null;#r=new Set;canRender(e,t){return!!t}attach(e){this.#e=e,e&&(e.textTracks.onchange=this.#d.bind(this))}addTrack(e){this.#r.add(e),this.#s(e)}removeTrack(e){e[T.native]?.remove?.(),e[T.native]=null,this.#r.delete(e)}changeTrack(e){let t=e?.[T.native];t&&t.track.mode!=="showing"&&(t.track.mode="showing"),this.#i=e}setDisplay(e){this.#t=e,this.#d()}detach(){this.#e&&(this.#e.textTracks.onchange=null);for(let e of this.#r)this.removeTrack(e);this.#r.clear(),this.#e=null,this.#i=null}#s(e){if(!this.#e)return;let t=e[T.native]??=this.#a(e);ve(t)&&(this.#e.append(t),t.track.mode=t.default?"showing":"disabled")}#a(e){let t=document.createElement("track"),i=e.default||e.mode==="showing",r=e.src&&e.type==="vtt";return t.id=e.id,t.src=r?e.src:"",t.label=e.label,t.kind=e.kind,t.default=i,e.language&&(t.srclang=e.language),i&&!r&&this.#o(e,t.track),t}#o(e,t){if(!(e.src&&e.type==="vtt"||t.cues?.length))for(let i of e.cues)t.addCue(i)}#d(e){for(let t of this.#r){let i=t[T.native];if(!i)continue;if(!this.#t){i.track.mode=i.managed?"hidden":"disabled";continue}let r=i.track.mode==="showing";r&&this.#o(t,i.track),t.setMode(r?"showing":"disabled",e)}}};var $e=class{#t=null;#e;#i=[];#r;#s=!1;#a=null;#o=null;constructor(e){this.#r=e;let t=e.textTracks;this.#e=t,u(this.#d.bind(this)),b(this.#p.bind(this)),g(t,"add",this.#h.bind(this)),g(t,"remove",this.#c.bind(this)),g(t,"mode-change",this.#n.bind(this))}#d(){let{nativeControls:e}=this.#r.$state;this.#s=e(),this.#n()}add(e){this.#i.push(e),O(this.#n.bind(this))}remove(e){e.detach(),this.#i.splice(this.#i.indexOf(e),1),O(this.#n.bind(this))}attachVideo(e){requestAnimationFrame(()=>{if(this.#t=e,e){this.#a=new Ve,this.#a.attach(e);for(let t of this.#e)this.#l(t)}this.#n()})}#l(e){M(e)&&this.#a?.addTrack(e)}#u(e){M(e)&&this.#a?.removeTrack(e)}#h(e){this.#l(e.detail)}#c(e){this.#u(e.detail)}#n(){let e=this.#e.selected;if(this.#t&&(this.#s||e?.[T.nativeHLS])){this.#o?.changeTrack(null),this.#a?.setDisplay(!0),this.#a?.changeTrack(e);return}if(this.#a?.setDisplay(!1),this.#a?.changeTrack(null),!e){this.#o?.changeTrack(null);return}let t=this.#i.sort((i,r)=>i.priority-r.priority).find(i=>i.canRender(e,this.#t));this.#o!==t&&(this.#o?.detach(),t?.attach(this.#t),this.#o=t??null),t?.changeTrack(e)}#p(){this.#a?.detach(),this.#a=null,this.#o?.detach(),this.#o=null}};var Ie=class extends B{#t=!1;#e={};#i=null;#r=null;[T.crossOrigin];constructor(){super()}get selected(){return this.items.find(t=>t.mode==="showing"&&M(t))??null}get selectedIndex(){let e=this.selected;return e?this.indexOf(e):-1}get preferredLang(){return this.#r}set preferredLang(e){this.#r=e,this.#u(e)}add(e,t){let i=e instanceof Q,r=i?e:new Q(e),s=e.kind==="captions"||e.kind==="subtitles"?"captions":e.kind;return this.#e[s]&&e.default&&delete e.default,r.addEventListener("mode-change",this.#o),this[p.add](r,t),r[T.crossOrigin]=this[T.crossOrigin],this.#t&&r[T.canLoad](),e.default&&(this.#e[s]=r),this.#s(),this}remove(e,t){if(this.#a=e,!!this.items.includes(e))return e===this.#e[e.kind]&&delete this.#e[e.kind],e.mode="disabled",e[T.onModeChange]=null,e.removeEventListener("mode-change",this.#o),this[p.remove](e,t),this.#a=null,this}clear(e){for(let t of[...this.items])this.remove(t,e);return this}getByKind(e){let t=Array.isArray(e)?e:[e];return this.items.filter(i=>t.includes(i.kind))}[T.canLoad](){if(!this.#t){for(let e of this.items)e[T.canLoad]();this.#t=!0,this.#s()}}#s=Ee(async()=>{if(!this.#t)return;!this.#r&&this.#i&&(this.#r=await this.#i.getLang());let e=await this.#i?.getCaptions(),t=[["captions","subtitles"],"chapters","descriptions","metadata"];for(let i of t){let r=this.getByKind(i);if(r.find(d=>d.mode==="showing"))continue;let s=this.#r?r.find(d=>d.language===this.#r):null,a=$(i)?this.#e[i.find(d=>this.#e[d])||""]:this.#e[i],n=s??a,l=n&&M(n);n&&(!l||e!==!1)&&(n.mode="showing",l&&this.#l(n))}},300);#a=null;#o=this.#d.bind(this);#d(e){let t=e.detail;if(this.#i&&M(t)&&t!==this.#a&&this.#l(t),t.mode==="showing"){let i=M(t)?["captions","subtitles"]:[t.kind];for(let r of this.items)r.mode==="showing"&&r!=t&&i.includes(r.kind)&&(r.mode="disabled")}this.dispatchEvent(new v("mode-change",{detail:e.detail,trigger:e}))}#l(e){e.mode!=="disabled"&&this.#u(e.language),this.#i?.setCaptions?.(e.mode==="showing")}#u(e){this.#i?.setLang?.(this.#r=e)}setStorage(e){this.#i=e}};var De=class o extends U{static props=Ut;static state=ot;#t;#e;#i;canPlayQueue=new j;remoteControl;get#r(){return this.#t.$provider()}get#s(){return this.$props}constructor(){super(),new Ce;let e={player:this,qualities:new Se,audioTracks:new Ae,storage:null,$provider:x(null),$providerSetup:x(!1),$props:this.$props,$state:this.$state};e.remote=this.remoteControl=new ne(void 0),e.remote.setPlayer(this),e.textTracks=new Ie,e.textTracks[T.crossOrigin]=this.$state.crossOrigin,e.textRenderers=new $e(e),e.ariaKeys={},this.#t=e,Mt(et,e),this.orientation=new z,new Ht,new Me(e);let t=new _e;this.#e=new qe(t,e),this.#i=new Le(this.#e,t,e),e.delegate=new Pe(this.#e.handle.bind(this.#e),e),e.notify=e.delegate.notify.bind(e.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new Re,new re("load",this.startLoading.bind(this)),new re("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){this.#u(),u(this.#l.bind(this)),u(this.#f.bind(this)),u(this.#p.bind(this)),u(this.#k.bind(this)),u(this.#b.bind(this)),u(this.#v.bind(this)),u(this.#M.bind(this))}onAttach(e){e.setAttribute("data-media-player",""),it(e,"tabindex","0"),it(e,"role","region"),u(this.#P.bind(this)),u(this.#o.bind(this)),u(this.#d.bind(this)),g(e,"find-media-player",this.#h.bind(this))}onConnect(e){pe&&L(e,"data-iphone","");let t=window.matchMedia("(pointer: coarse)");this.#n(t),t.onchange=this.#n.bind(this);let i=new ResizeObserver(ue(this.#c.bind(this)));i.observe(e),u(this.#c.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),b(()=>{i.disconnect(),t.onchange=null})}onDestroy(){this.#t.player=null,this.canPlayQueue.reset()}#a=!1;#o(){let e=this.$el,{title:t,live:i,viewType:r,providedTitle:s}=this.$state,a=i(),n=xt(r()),l=n!=="Unknown"?`${a?"Live ":""}${n}`:a?"Live":"Media",d=t();L(this.el,"aria-label",`${l} Player`+(d?` - ${d}`:"")),e?.hasAttribute("title")&&(this.#a=!0,e?.removeAttribute("title"))}#d(){let e=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(e),L(this.el,"data-orientation",e),this.#c()}#l(){this.$state.canPlay()&&this.#r?this.canPlayQueue.start():this.canPlayQueue.stop()}#u(){if(o[be]){this.setAttributes(o[be]);return}let e={"data-load":function(){return this.$props.load()},"data-captions":function(){let i=this.$state.textTrack();return!!i&&M(i)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:i,canPlay:r,waiting:s}=this.$state;return i()&&(!r()||s())},"data-error":function(){let{error:i}=this.$state;return!!i()},"data-autoplay-error":function(){let{autoPlayError:i}=this.$state;return!!i()}},t={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let i of Qt){let r="data-"+(t[i]??St(i));e[r]=function(){return this.$state[i]()}}delete e.title,o[be]=e,this.setAttributes(e)}#h(e){e.detail(this)}#c(){if(!this.el)return;let e=this.el.clientWidth,t=this.el.clientHeight;this.$state.width.set(e),this.$state.height.set(t),K(this.el,"--player-width",e+"px"),K(this.el,"--player-height",t+"px")}#n(e){let t=e.matches?"coarse":"fine";L(this.el,"data-pointer",t),this.$state.pointer.set(t),this.#c()}get provider(){return this.#r}get controls(){return this.#i.controls}set controls(e){this.#s.controls.set(e)}orientation;get title(){return c(this.$state.providedTitle)}set title(e){if(this.#a){this.#a=!1;return}this.$state.providedTitle.set(e)}get qualities(){return this.#t.qualities}get audioTracks(){return this.#t.audioTracks}get textTracks(){return this.#t.textTracks}get textRenderers(){return this.#t.textRenderers}get duration(){return this.$state.duration()}set duration(e){this.#s.duration.set(e)}get paused(){return c(this.$state.paused)}set paused(e){this.#y(e)}#p(){this.#y(this.$props.paused())}#y(e){e?this.canPlayQueue.enqueue("paused",()=>this.#i.pause()):this.canPlayQueue.enqueue("paused",()=>this.#i.play())}get muted(){return c(this.$state.muted)}set muted(e){this.#m(e)}#f(){this.#m(this.$props.muted())}#m(e){this.canPlayQueue.enqueue("muted",()=>{this.#r&&this.#r.setMuted(e)})}get currentTime(){return c(this.$state.currentTime)}set currentTime(e){this.#E(e)}#b(){this.#E(this.$props.currentTime())}#E(e){this.canPlayQueue.enqueue("currentTime",()=>{let{currentTime:t,clipStartTime:i,seekableStart:r,seekableEnd:s}=this.$state;e!==c(t)&&c(()=>{if(!this.#r)return;let a=e+i(),n=Math.floor(a)===Math.floor(s()),l=n?s():Math.min(Math.max(r()+.1,a),s()-.1);Number.isFinite(l)&&this.#r.setCurrentTime(l)})})}get volume(){return c(this.$state.volume)}set volume(e){this.#g(e)}#k(){this.#g(this.$props.volume())}#g(e){let t=Ot(0,e,1);this.canPlayQueue.enqueue("volume",()=>{this.#r&&this.#r.setVolume(t)})}get playbackRate(){return c(this.$state.playbackRate)}set playbackRate(e){this.#T(e)}#M(){this.#T(this.$props.playbackRate())}#T(e){this.canPlayQueue.enqueue("rate",()=>{this.#r&&this.#r.setPlaybackRate?.(e)})}#v(){this.#S(this.$props.playsInline())}#S(e){this.canPlayQueue.enqueue("playsinline",()=>{this.#r&&this.#r.setPlaysInline?.(e)})}#P(){let e=this.$props.storage(),t=y(e)?new oe:e;if(t?.onChange){let{source:i}=this.$state,r=y(e)?e:this.el?.id,s=F(this.#x.bind(this));u(()=>t.onChange(i(),s(),r||void 0))}this.#t.storage=t,this.#t.textTracks.setStorage(t),b(()=>{t?.onDestroy?.(),this.#t.storage=null,this.#t.textTracks.setStorage(null)})}#x(){let{clipStartTime:e,clipEndTime:t}=this.$props,{source:i}=this.$state,r=i();return r.src?`${r.src}:${e()}:${t()}`:null}async play(e){return this.#i.play(e)}async pause(e){return this.#i.pause(e)}async enterFullscreen(e,t){return this.#i.enterFullscreen(e,t)}async exitFullscreen(e,t){return this.#i.exitFullscreen(e,t)}enterPictureInPicture(e){return this.#i.enterPictureInPicture(e)}exitPictureInPicture(e){return this.#i.exitPictureInPicture(e)}seekToLiveEdge(e){this.#i.seekToLiveEdge(e)}startLoading(e){this.#t.notify("can-load",void 0,e)}startLoadingPoster(e){this.#t.notify("can-load-poster",void 0,e)}requestAirPlay(e){return this.#i.requestAirPlay(e)}requestGoogleCast(e){return this.#i.requestGoogleCast(e)}setAudioGain(e,t){return this.#i.setAudioGain(e,t)}destroy(){super.destroy(),this.#t.remote.setPlayer(null),this.dispatch("destroy")}};var Oe=class extends de(HTMLElement,De){static tagName="media-player";static attrs={autoPlay:"autoplay",crossOrigin:"crossorigin",playsInline:"playsinline",preferNativeHLS:"prefer-native-hls",minLiveDVRWindow:"min-live-dvr-window"}};var Fe=class{name="audio";target;canPlay(e){return $t(e)?!y(e.src)||e.type==="?"||qt(this.target,e.type):!1}mediaType(){return"audio"}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-audio.js")).AudioProvider(this.target,e)}};var D=class{name="video";target;canPlay(e){return It(e)?!y(e.src)||e.type==="?"||Ct(this.target,e.type):!1}mediaType(){return"video"}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-video.js")).VideoProvider(this.target,e)}};var He=class o extends D{static supported=At();name="dash";canPlay(e){return o.supported&&te(e)}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-dash.js")).DASHProvider(this.target,e)}};var Qe=class o extends D{static supported=fe();name="hls";canPlay(e){return o.supported&&ee(e)}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-hls.js")).HLSProvider(this.target,e)}};var Ge=class{name="vimeo";target;preconnect(){let e=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(let t of e)I(t)}canPlay(e){return y(e.src)&&e.type==="video/vimeo"}mediaType(){return"video"}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-vimeo.js")).VimeoProvider(this.target,e)}async loadPoster(e,t,i){let{resolveVimeoVideoId:r,getVimeoVideoInfo:s}=await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-JUYOWWVN.js");if(!y(e.src))return null;let{videoId:a,hash:n}=r(e.src);return a?s(a,i,n).then(l=>l?l.poster:null):null}};var Ke=class{name="youtube";target;preconnect(){let e=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(let t of e)I(t)}canPlay(e){return y(e.src)&&e.type==="video/youtube"}mediaType(){return"video"}async load(e){return new(await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/providers/vidstack-youtube.js")).YouTubeProvider(this.target,e)}async loadPoster(e,t,i){let{findYouTubePoster:r,resolveYouTubeVideoId:s}=await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-PK326JNQ.js"),a=y(e.src)&&s(e.src);return a?r(a,i):null}};function ei(o,e){return fetch(o,e).then(t=>t.text()).then(t=>/type="static"/.test(t)?"on-demand":"live")}function ut(o,e){return fetch(o,e).then(t=>t.text()).then(t=>{let i=vi(t);if(i)return ut(/^https?:/.test(i)?i:new URL(i,o).href,e);let r=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(t)?"on-demand":"live";return r==="live"&&Ei(t)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(t)||t.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":r})}function vi(o){let e=o.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split(`
`)[1].trim():null}function Ei(o){let e=o.split(`
`);for(let t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){let i=parseFloat(t.split(":")[1]);if(!isNaN(i))return i}return-1}var ht=new Map,Ne=class{#t=!1;#e;#i;#r;#s;constructor(e,t,i,r=[]){this.#i=e,this.#r=t,this.#s=i;let s=new He,a=new Qe,n=new D,l=new Fe,d=new Ke,h=new Ge,E=[d,h];this.#e=F(()=>{let f=t.$state.remotePlaybackLoader(),k=t.$props.preferNativeHLS()?[n,l,s,a,...E,...r]:[a,n,l,s,...E,...r];return f?[f,...k]:k});let{$state:m}=t;m.sources.set(ti(t.$props.src()));for(let f of m.sources()){let k=this.#e().find(A=>A.canPlay(f));if(!k)continue;let P=k.mediaType(f);t.$state.source.set(f),t.$state.mediaType.set(P),t.$state.inferredViewType.set(P),this.#s.set(k),this.#t=!0;break}}connect(){let e=this.#s();this.#t&&(this.#l(this.#r.$state.source(),e),this.#u(e),this.#t=!1),u(this.#a.bind(this)),u(this.#o.bind(this)),u(this.#h.bind(this)),u(this.#c.bind(this)),u(this.#n.bind(this))}#a(){this.#r.notify("sources-change",[...ti(this.#r.$props.src()),...this.#i()])}#o(){let{$state:e}=this.#r,t=e.sources(),i=c(e.source),r=this.#d(i,t);if(t[0]?.src&&!r.src&&!r.type){let{crossOrigin:a}=e,n=ye(a()),l=new AbortController;return Promise.all(t.map(d=>y(d.src)&&d.type==="?"?fetch(d.src,{method:"HEAD",credentials:n,signal:l.signal}).then(h=>(d.type=h.headers.get("content-type")||"??",ht.set(d.src,d.type),d)).catch(()=>d):d)).then(d=>{if(l.signal.aborted)return;let h=this.#d(c(e.source),d);V(),h.src||this.#r.notify("error",{message:"Failed to load resource.",code:4})}),()=>l.abort()}V()}#d(e,t){let i={src:"",type:""},r=null,s=new v("sources-change",{detail:{sources:t}}),a=this.#e(),{started:n,paused:l,currentTime:d,quality:h,savedState:E}=this.#r.$state;for(let m of t){let f=a.find(k=>k.canPlay(m));if(f){i=m,r=f;break}}if(ae(i)){let m=h(),f=t.find(k=>k.src===m?.src);c(n)?E.set({paused:c(l),currentTime:c(d)}):E.set(null),f&&(i=f,s=new v("quality-change",{detail:{quality:m}}))}return ri(e,i)||this.#l(i,r,s),r!==c(this.#s)&&this.#u(r,s),i}#l(e,t,i){this.#r.notify("source-change",e,i),this.#r.notify("media-type-change",t?.mediaType(e)||"unknown",i)}#u(e,t){this.#r.$providerSetup.set(!1),this.#r.notify("provider-change",null,t),e&&c(()=>e.preconnect?.(this.#r)),this.#s.set(e),this.#r.notify("provider-loader-change",e,t)}#h(){let e=this.#r.$provider();if(!(!e||c(this.#r.$providerSetup))){if(this.#r.$state.canLoad()){vt(()=>e.setup(),e.scope),this.#r.$providerSetup.set(!0);return}c(()=>e.preconnect?.())}}#c(){if(!this.#r.$providerSetup())return;let e=this.#r.$provider(),t=this.#r.$state.source(),i=c(this.#r.$state.crossOrigin),r=c(this.#r.$props.preferNativeHLS);if(!ri(e?.currentSrc,t)){if(this.#r.$state.canLoad()){let s=new AbortController;return ee(t)?(r||!fe())&&ut(t.src,{credentials:ye(i),signal:s.signal}).then(a=>{this.#r.notify("stream-type-change",a)}).catch(Je):te(t)?ei(t.src,{credentials:ye(i),signal:s.signal}).then(a=>{this.#r.notify("stream-type-change",a)}).catch(Je):this.#r.notify("stream-type-change","on-demand"),c(()=>{let a=c(this.#r.$state.preload);return e?.loadSource(t,a).catch(n=>{})}),()=>s.abort()}try{y(t.src)&&I(new URL(t.src).origin)}catch{}}}#n(){let e=this.#s(),{providedPoster:t,source:i,canLoadPoster:r}=this.#r.$state;if(!e||!e.loadPoster||!i()||!r()||t())return;let s=new AbortController,a=new v("source-change",{detail:i});return e.loadPoster(i(),this.#r,s).then(n=>{this.#r.notify("poster-change",n||"",a)}).catch(()=>{this.#r.notify("poster-change","",a)}),()=>{s.abort()}}};function ti(o){return($(o)?o:[o]).map(e=>y(e)?{src:e,type:ii(e)}:{...e,type:ii(e.src,e.type)})}function ii(o,e){return y(e)&&e.length?e:y(o)&&ht.has(o)?ht.get(o):!e&&ee({src:o,type:""})?"application/x-mpegurl":!e&&te({src:o,type:""})?"application/dash+xml":!y(o)||o.startsWith("blob:")?"video/object":o.includes("youtube")||o.includes("youtu.be")?"video/youtube":o.includes("vimeo")&&!o.includes("progressive_redirect")&&!o.includes(".m3u8")?"video/vimeo":"?"}function ri(o,e){return o?.src===e?.src&&o?.type===e?.type}var Ue=class{#t;#e;#i=[];constructor(e,t){this.#t=e,this.#e=t,u(this.#r.bind(this))}#r(){let e=this.#t();for(let t of this.#i)if(!e.some(i=>i.id===t.id)){let i=t.id&&this.#e.textTracks.getById(t.id);i&&this.#e.textTracks.remove(i)}for(let t of e){let i=t.id||Q.createId(t);this.#e.textTracks.getById(i)||(t.id=i,this.#e.textTracks.add(t))}this.#i=e}};var We=class extends U{static props={loaders:[]};static state=new ce({loader:null});#t;#e;#i=x([]);#r=x([]);#s=null;onSetup(){this.#t=he(),this.#e=new Ne(this.#i,this.#t,this.$state.loader,this.$props.loaders())}onAttach(e){e.setAttribute("data-media-provider","")}onConnect(e){this.#e.connect(),new Ue(this.#r,this.#t);let t=new ResizeObserver(ue(this.#l.bind(this)));t.observe(e);let i=new MutationObserver(this.#u.bind(this));i.observe(e,{attributes:!0,childList:!0}),this.#l(),this.#u(),b(()=>{t.disconnect(),i.disconnect()})}#a=-1;load(e){e?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(this.#a),this.#a=requestAnimationFrame(()=>this.#o(e)),b(()=>{window.cancelAnimationFrame(this.#a)})}#o(e){if(!this.scope)return;let t=this.$state.loader(),{$provider:i}=this.#t;this.#s===t&&t?.target===e&&c(i)||(this.#d(),this.#s=t,t&&(t.target=e||null),!(!t||!e)&&t.load(this.#t).then(r=>{this.scope&&c(this.$state.loader)===t&&this.#t.notify("provider-change",r)}))}onDestroy(){this.#s=null,this.#d()}#d(){this.#t?.notify("provider-change",null)}#l(){if(!this.el)return;let{player:e,$state:t}=this.#t,i=this.el.offsetWidth,r=this.el.offsetHeight;e&&(t.mediaWidth.set(i),t.mediaHeight.set(r),e.el&&(K(e.el,"--media-width",i+"px"),K(e.el,"--media-height",r+"px")))}#u(){let e=[],t=[],i=this.el.children;for(let r of i)if(!r.hasAttribute("data-vds")){if(r instanceof HTMLSourceElement){let s={id:r.id,src:r.src,type:r.type};for(let a of["id","src","width","height","bitrate","codec"]){let n=r.getAttribute(`data-${a}`);y(n)&&(s[a]=/id|src|codec/.test(a)?n:Number(n))}e.push(s)}else if(r instanceof HTMLTrackElement){let s={src:r.src,kind:r.track.kind,language:r.srclang,label:r.label,default:r.default,type:r.getAttribute("data-type")};t.push({id:r.id||Q.createId(s),...s})}}this.#i.set(e),this.#r.set(t),V()}};var Be=class extends de(HTMLElement,We){static tagName="media-provider";#t;#e=null;#i=null;onSetup(){this.#t=he(),this.setAttribute("keep-alive","")}onDestroy(){this.#i?.remove(),this.#i=null,this.#e?.remove(),this.#e=null}onConnect(){u(()=>{let e=this.$state.loader(),t=e?.name==="youtube",i=e?.name==="vimeo",r=t||i,s=e?.name==="google-cast",a=e?s?this.#o():r?this.#a():e.mediaType()==="audio"?this.#r():this.#s():null;if(this.#e!==a){let n=this.#e?.parentElement??this;this.#e?.remove(),this.#e=a,a&&n.prepend(a),r&&a&&u(()=>{let{nativeControls:l,viewType:d}=this.#t.$state,h=l(),E=d()==="audio";!h&&!E?(this.#i=this.querySelector(".vds-blocker"),this.#i||(this.#i=document.createElement("div"),this.#i.classList.add("vds-blocker"),a.after(this.#i))):(this.#i?.remove(),this.#i=null),L(a,"data-no-controls",!h)})}t?a?.classList.add("vds-youtube"):i&&a?.classList.add("vds-vimeo"),r||(this.#i?.remove(),this.#i=null),this.load(a)})}#r(){let e=this.#e instanceof HTMLAudioElement?this.#e:document.createElement("audio"),{controls:t,crossOrigin:i}=this.#t.$state;return u(()=>{L(e,"controls",t()),L(e,"crossorigin",i())}),e}#s(){let e=this.#e instanceof HTMLVideoElement?this.#e:document.createElement("video"),{crossOrigin:t,poster:i,nativeControls:r}=this.#t.$state,s=F(()=>r()?"true":null),a=F(()=>i()&&r()?i():null);return u(()=>{L(e,"controls",s()),L(e,"crossorigin",t()),L(e,"poster",a())}),e}#a(){let e=this.#e instanceof HTMLIFrameElement?this.#e:document.createElement("iframe"),{nativeControls:t}=this.#t.$state;return u(()=>L(e,"tabindex",t()?null:-1)),e}#o(){if(this.#e?.classList.contains("vds-google-cast"))return this.#e;let e=document.createElement("div");return e.classList.add("vds-google-cast"),import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-SBTOSCIA.js").then(({insertContent:t})=>{t(e,this.#t.$state)}),e}};Z(Oe);Z(Be);import"https://cdn.vidstack.io/icons";var Ye=class{constructor(e){this.props=e}name="vidstack";async load(){await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-7OTFSWKD.js"),await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-RDVS66G3.js")}create(){let e=[document.createElement("media-audio-layout"),document.createElement("media-video-layout")];if(this.props)for(let[t,i]of Object.entries(this.props))for(let r of e)r[t]=i;return e}};var ze=class{constructor(e){this.props=e}name="plyr";async load(){await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-5DZVZXPO.js")}create(){let e=document.createElement("media-plyr-layout");if(this.props)for(let[t,i]of Object.entries(this.props))e[t]=i;return[e]}};var si=Symbol(),je=class{static async create({target:e,layout:t,tracks:i,...r}){if(y(e)&&(e=document.querySelector(e)),!ve(e))throw Error(`[vidstack] target must be of type \`HTMLElement\`, found \`${typeof e}\``);let s=document.createElement("media-player"),a=document.createElement("media-provider"),n,l=!rt(e)&&!st(e)&&!Kt(e);if(s.setAttribute("keep-alive",""),r.poster&&t?.name!=="plyr"){if(!customElements.get("media-poster")){let{MediaPosterElement:f}=await import("https://cdn.jsdelivr.net/npm/@vidstack/cdn@1.11.30/chunks/vidstack-5XO4UT6Y.js");Z(f)}let m=document.createElement("media-poster");t?.name==="vidstack"&&m.classList.add("vds-poster"),a.append(m)}t&&(e.removeAttribute("controls"),t[si]||(await t.load(),t[si]=!0),n=await t.create());let d=e.getAttribute("title");d&&s.setAttribute("title",d);let h=e.getAttribute("width"),E=e.getAttribute("height");(h||E)&&(h&&(s.style.width=h),E&&(s.style.height=E),s.style.aspectRatio="unset");for(let m of e.attributes){let f=m.name.replace("data-",""),k=Pt(f);if(k in s)s.setAttribute(f,m.value);else if(n?.length)for(let P of n)k in P&&P.setAttribute(f,m.value)}for(let[m,f]of Object.entries(r))s[m]=f;if(i)for(let m of i)s.textTracks.add(m);if(s.append(a),n)for(let m of n)s.append(m);if(l)e.append(s);else{for(let m of[...e.children])a.append(m);e.replaceWith(s)}return s}};je.Layout={Default:Ye,Plyr:ze},window.VidstackPlayer=je;var ai=class{constructor(e,t){this.loader=e;this.config=t}priority=1;#t=null;#e=null;#i=/(ssa|ass)$/;canRender(e,t){return!!t&&!!e.src&&(y(e.type)&&this.#i.test(e.type)||this.#i.test(e.src))}attach(e){e&&this.loader().then(async t=>{this.#t=new t.default({...this.config,video:e,subUrl:this.#e?.src||""}),g(this.#t,"ready",()=>{let i=this.#t?._canvas;i&&(i.style.pointerEvents="none")}),g(this.#t,"error",i=>{this.#e&&(this.#e[T.readyState]=3,this.#e.dispatchEvent(new v("error",{trigger:i,detail:i.error})))})})}changeTrack(e){!e||e.readyState===3?this.#r():this.#e!==e&&(this.#t?.setTrackByUrl(e.src),this.#e=e)}detach(){this.#r()}#r(){this.#t?.freeTrack(),this.#e=null}};export{hi as ARIAKeyShortcuts,Ae as AudioTrackList,ai as LibASSTextRenderer,oe as LocalMediaStorage,at as MEDIA_KEY_SHORTCUTS,se as MediaControls,ne as MediaRemoteControl,ze as PlyrLayout,$e as TextRenderers,Q as TextTrack,Ie as TextTrackList,W as TimeRange,Se as VideoQualityList,je as VidstackPlayer,Ye as VidstackPlayerLayout,bi as findActiveCue,H as getTimeRangesEnd,tt as getTimeRangesStart,ki as isCueActive,M as isTrackCaptionKind,ae as isVideoQualitySrc,et as mediaContext,ot as mediaState,Ti as normalizeTimeIntervals,Pi as parseJSONCaptionsFile,nt as softResetMediaState,xi as sortVideoQualities,Vt as updateTimeIntervals,Mi as watchActiveTextTrack,Si as watchCueTextChange};
