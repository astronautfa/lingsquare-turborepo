import{b as ks,c as L,d as pe,e as Ho,f as Rr,g as Lr,h as be,i as ti,j as Lt,k as $r,l as Fo,m as tt}from"./vidstack-U3MKAWKX.js";import{a as Vr,b as ze}from"./vidstack-MDPL2QMH.js";import{a as K,b as Oo,c as Vi}from"./vidstack-YHRZY7KJ.js";import{a as we}from"./vidstack-5IOIYQ2Y.js";import{a as ee,d as wr,f as Rt,g as te}from"./vidstack-HN3GYGQE.js";import{a as I}from"./vidstack-X63HW5FO.js";import{a as Zt,b as Cs,c as wt,e as _o}from"./vidstack-XKIWRSNW.js";import{b as Ue,d as ei}from"./vidstack-5LA5YANY.js";import{A as Do,a as Ro,b as Cr,c as Lo,e as Ri,g as $o,h as Vo,l as Ps,m as kr,n as Ao,w as Io,x as qo,y as Li,z as $i}from"./vidstack-RMERH5DU.js";import{A as xo,B as y,C as Tr,D as Mr,E as To,F as wi,G as Mo,H as Ts,J as w,K as ye,M as ve,N as J,O as H,P as ne,Q as Z,R as f,S as _,T as Q,U as ce,V as We,W as Po,X as Co,Y as ko,a as m,b as Ct,c as ge,ca as kt,da as Pr,e as Jt,f as P,g as vo,ga as Ms,h as M,i as He,ia as Ae,j as bo,ja as wo,k as xs,l as Ve,m as Eo,ma as x,o as So,p as ke,q as A,t as he,u as d,v as F}from"./vidstack-YO4XO2QW.js";import{b as Y,c as j,d as G,e as E,f as B,g as n,h as g,i as T,j as h}from"./vidstack-IGJ6WVY6.js";function Ai(o){return!A(o)&&"width"in o&&"height"in o&&ke(o.width)&&ke(o.height)}var Re={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Go=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Bo=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Qo=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Me=typeof window<"u"&&typeof window.document<"u"?window.document:{},_e="fullscreenEnabled"in Me&&Object.keys(Re)||Go[0]in Me&&Go||Bo[0]in Me&&Bo||Qo[0]in Me&&Qo||[],gd={requestFullscreen:function(o){return o[_e[Re.requestFullscreen]]()},requestFullscreenFunction:function(o){return o[_e[Re.requestFullscreen]]},get exitFullscreen(){return Me[_e[Re.exitFullscreen]].bind(Me)},get fullscreenPseudoClass(){return":"+_e[Re.fullscreen]},addEventListener:function(o,e,t){return Me.addEventListener(_e[Re[o]],e,t)},removeEventListener:function(o,e,t){return Me.removeEventListener(_e[Re[o]],e,t)},get fullscreenEnabled(){return!!Me[_e[Re.fullscreenEnabled]]},set fullscreenEnabled(o){},get fullscreenElement(){return Me[_e[Re.fullscreenElement]]},set fullscreenElement(o){},get onfullscreenchange(){return Me[("on"+_e[Re.fullscreenchange]).toLowerCase()]},set onfullscreenchange(o){return Me[("on"+_e[Re.fullscreenchange]).toLowerCase()]=o},get onfullscreenerror(){return Me[("on"+_e[Re.fullscreenerror]).toLowerCase()]},set onfullscreenerror(o){return Me[("on"+_e[Re.fullscreenerror]).toLowerCase()]=o}},Ye=gd;var ws=new ce({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new Zt,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:Ri(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return Cr&&this.mediaType==="video"&&(!this.playsInline||!Ye.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new Zt,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new Zt,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(te).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){let o=Cs(this.buffered)??0;return Math.max(0,o-this.clipStartTime)},get bufferedEnd(){let o=wt(this.buffered)??0;return Math.min(this.duration,Math.max(0,o-this.clipStartTime))},get seekableStart(){let o=Cs(this.seekable)??0;return Math.max(0,o-this.clipStartTime)},get seekableEnd(){let o=this.canPlay?wt(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,o-this.clipStartTime)):o},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,savedState:null}),Ko=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),yd=new Set([...Ko,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function Rs(o,e=!1){let t=e?Ko:yd;ws.reset(o,i=>t.has(i)),ge()}var Ar=ve();function S(){return H(Ar)}var vd=Symbol(0),$t=class o{constructor(e,t,i,r,s){this.logger=e;this.level=t;this.title=i;this.root=r;this.parent=s}[vd]=!0;logs=[];log(...e){return this.logs.push({data:e}),this}labelledLog(e,...t){return this.logs.push({label:e,data:t}),this}groupStart(e){return new o(this.logger,this.level,e,this.root??this,this)}groupEnd(){return this.parent?.logs.push(this),this.parent??this}dispatch(){return this.logger.dispatch(this.level,this.root??this)}};var Ls=class{#e=null;error(...e){return this.dispatch("error",...e)}warn(...e){return this.dispatch("warn",...e)}info(...e){return this.dispatch("info",...e)}debug(...e){return this.dispatch("debug",...e)}errorGroup(e){return new $t(this,"error",e)}warnGroup(e){return new $t(this,"warn",e)}infoGroup(e){return new $t(this,"info",e)}debugGroup(e){return new $t(this,"debug",e)}setTarget(e){this.#e=e}dispatch(e,...t){return this.#e?.dispatchEvent(new F("vds-log",{bubbles:!0,composed:!0,detail:{level:e,data:t}}))||!1}};var _i=class{#e=null;#t=null;#i=-1;#r;constructor(e=void 0){this.#r=e}setTarget(e){this.#e=e}getPlayer(e){return this.#t?this.#t:((e??this.#e)?.dispatchEvent(new F("find-media-player",{detail:t=>void(this.#t=t),bubbles:!0,composed:!0})),this.#t)}setPlayer(e){this.#t=e}startLoading(e){this.#s("media-start-loading",e)}startLoadingPoster(e){this.#s("media-poster-start-loading",e)}requestAirPlay(e){this.#s("media-airplay-request",e)}requestGoogleCast(e){this.#s("media-google-cast-request",e)}play(e){this.#s("media-play-request",e)}pause(e){this.#s("media-pause-request",e)}mute(e){this.#s("media-mute-request",e)}unmute(e){this.#s("media-unmute-request",e)}enterFullscreen(e,t){this.#s("media-enter-fullscreen-request",t,e)}exitFullscreen(e,t){this.#s("media-exit-fullscreen-request",t,e)}lockScreenOrientation(e,t){this.#s("media-orientation-lock-request",t,e)}unlockScreenOrientation(e){this.#s("media-orientation-unlock-request",e)}enterPictureInPicture(e){this.#s("media-enter-pip-request",e)}exitPictureInPicture(e){this.#s("media-exit-pip-request",e)}seeking(e,t){this.#s("media-seeking-request",t,e)}seek(e,t){this.#s("media-seek-request",t,e)}seekToLiveEdge(e){this.#s("media-live-edge-request",e)}changeDuration(e,t){this.#s("media-duration-change-request",t,e)}changeClipStart(e,t){this.#s("media-clip-start-change-request",t,e)}changeClipEnd(e,t){this.#s("media-clip-end-change-request",t,e)}changeVolume(e,t){this.#s("media-volume-change-request",t,Math.max(0,Math.min(1,e)))}changeAudioTrack(e,t){this.#s("media-audio-track-change-request",t,e)}changeQuality(e,t){this.#s("media-quality-change-request",t,e)}requestAutoQuality(e){this.changeQuality(-1,e)}changeTextTrackMode(e,t,i){this.#s("media-text-track-change-request",i,{index:e,mode:t})}changePlaybackRate(e,t){this.#s("media-rate-change-request",t,e)}changeAudioGain(e,t){this.#s("media-audio-gain-change-request",t,e)}resumeControls(e){this.#s("media-resume-controls-request",e)}pauseControls(e){this.#s("media-pause-controls-request",e)}togglePaused(e){let t=this.getPlayer(e?.target);t&&(t.state.paused?this.play(e):this.pause(e))}toggleControls(e){let t=this.getPlayer(e?.target);t&&(t.controls.showing?t.controls.hide(0,e):t.controls.show(0,e))}toggleMuted(e){let t=this.getPlayer(e?.target);t&&(t.state.muted?this.unmute(e):this.mute(e))}toggleFullscreen(e,t){let i=this.getPlayer(t?.target);i&&(i.state.fullscreen?this.exitFullscreen(e,t):this.enterFullscreen(e,t))}togglePictureInPicture(e){let t=this.getPlayer(e?.target);t&&(t.state.pictureInPicture?this.exitPictureInPicture(e):this.enterPictureInPicture(e))}showCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,r=this.#i;(!i[r]||!te(i[r]))&&(r=-1),r===-1&&(r=i.findIndex(s=>te(s)&&s.default)),r===-1&&(r=i.findIndex(s=>te(s))),r>=0&&this.changeTextTrackMode(r,"showing",e),this.#i=-1}disableCaptions(e){let t=this.getPlayer(e?.target);if(!t)return;let i=t.state.textTracks,r=t.state.textTrack;if(r){let s=i.indexOf(r);this.changeTextTrackMode(s,"disabled",e),this.#i=s}}toggleCaptions(e){let t=this.getPlayer(e?.target);t&&(t.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(e,t){this.#s("media-user-loop-change-request",t,e)}#s(e,t,i){let r=new F(e,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:t}),s=t?.target||null;s&&s instanceof f&&(s=s.el),s=!s||s===document||s===window||s===document.body||this.#t?.el&&s instanceof Node&&!this.#t.el.contains(s)?this.#e??this.getPlayer()?.el:s??this.#e,this.#t?e==="media-play-request"&&!this.#t.state.canLoad?s?.dispatchEvent(r):this.#t.canPlayQueue.enqueue(e,()=>s?.dispatchEvent(r)):s?.dispatchEvent(r)}#o(e){}};var Pe=bd;function bd(o,e,t){var i=null,r=null,s=t&&t.leading,a=t&&t.trailing;s==null&&(s=!0),a==null&&(a=!s),s==!0&&(a=!1);var l=function(){i&&(clearTimeout(i),i=null)},u=function(){var p=r;l(),p&&p()},c=function(){var p=s&&!i,b=this,C=arguments;if(r=function(){return o.apply(b,C)},i||(i=setTimeout(function(){if(i=null,a)return r()},e)),p)return p=!1,r()};return c.cancel=l,c.flush=u,c}var Ii=class{playerId="vds-player";mediaId=null;#e={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#e.volume}async setVolume(e){this.#e.volume=e,this.save()}async getMuted(){return this.#e.muted}async setMuted(e){this.#e.muted=e,this.save()}async getTime(){return this.#e.time}async setTime(e,t){let i=e<0;this.#e.time=i?null:e,i||t?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#e.lang}async setLang(e){this.#e.lang=e,this.save()}async getCaptions(){return this.#e.captions}async setCaptions(e){this.#e.captions=e,this.save()}async getPlaybackRate(){return this.#e.rate}async setPlaybackRate(e){this.#e.rate=e,this.save()}async getAudioGain(){return this.#e.audioGain}async setAudioGain(e){this.#e.audioGain=e,this.save()}async getVideoQuality(){return this.#e.quality}async setVideoQuality(e){this.#e.quality=e,this.save()}onChange(e,t,i="vds-player"){let r=i?localStorage.getItem(i):null,s=t?localStorage.getItem(t):null;this.playerId=i,this.mediaId=t,this.#e={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...r?JSON.parse(r):{},time:s?+s:null}}save(){if(x||!this.playerId)return;let e=JSON.stringify({...this.#e,time:void 0});localStorage.setItem(this.playerId,e)}saveTimeThrottled=Pe(this.saveTime.bind(this),1e3);saveTime(){if(x||!this.mediaId)return;let e=(this.#e.time??0).toString();localStorage.setItem(this.mediaId,e)}};var _r=class{priority=0;#e=!0;#t=null;#i=null;#r=new Set;canRender(e,t){return!!t}attach(e){this.#t=e,e&&(e.textTracks.onchange=this.#a.bind(this))}addTrack(e){this.#r.add(e),this.#s(e)}removeTrack(e){e[ee.native]?.remove?.(),e[ee.native]=null,this.#r.delete(e)}changeTrack(e){let t=e?.[ee.native];t&&t.track.mode!=="showing"&&(t.track.mode="showing"),this.#i=e}setDisplay(e){this.#e=e,this.#a()}detach(){this.#t&&(this.#t.textTracks.onchange=null);for(let e of this.#r)this.removeTrack(e);this.#r.clear(),this.#t=null,this.#i=null}#s(e){if(!this.#t)return;let t=e[ee.native]??=this.#o(e);tt(t)&&(this.#t.append(t),t.track.mode=t.default?"showing":"disabled")}#o(e){let t=document.createElement("track"),i=e.default||e.mode==="showing",r=e.src&&e.type==="vtt";return t.id=e.id,t.src=r?e.src:"",t.label=e.label,t.kind=e.kind,t.default=i,e.language&&(t.srclang=e.language),i&&!r&&this.#n(e,t.track),t}#n(e,t){if(!(e.src&&e.type==="vtt"||t.cues?.length))for(let i of e.cues)t.addCue(i)}#a(e){for(let t of this.#r){let i=t[ee.native];if(!i)continue;if(!this.#e){i.track.mode=i.managed?"hidden":"disabled";continue}let r=i.track.mode==="showing";r&&this.#n(t,i.track),t.setMode(r?"showing":"disabled",e)}}};var Ir=class{#e=null;#t;#i=[];#r;#s=!1;#o=null;#n=null;constructor(e){this.#r=e;let t=e.textTracks;this.#t=t,d(this.#a.bind(this)),P(this.#p.bind(this)),y(t,"add",this.#u.bind(this)),y(t,"remove",this.#c.bind(this)),y(t,"mode-change",this.#d.bind(this))}#a(){let{nativeControls:e}=this.#r.$state;this.#s=e(),this.#d()}add(e){this.#i.push(e),Ct(this.#d.bind(this))}remove(e){e.detach(),this.#i.splice(this.#i.indexOf(e),1),Ct(this.#d.bind(this))}attachVideo(e){requestAnimationFrame(()=>{if(this.#e=e,e){this.#o=new _r,this.#o.attach(e);for(let t of this.#t)this.#l(t)}this.#d()})}#l(e){te(e)&&this.#o?.addTrack(e)}#h(e){te(e)&&this.#o?.removeTrack(e)}#u(e){this.#l(e.detail)}#c(e){this.#h(e.detail)}#d(){let e=this.#t.selected;if(this.#e&&(this.#s||e?.[ee.nativeHLS])){this.#n?.changeTrack(null),this.#o?.setDisplay(!0),this.#o?.changeTrack(e);return}if(this.#o?.setDisplay(!1),this.#o?.changeTrack(null),!e){this.#n?.changeTrack(null);return}let t=this.#i.sort((i,r)=>i.priority-r.priority).find(i=>i.canRender(e,this.#e));this.#n!==t&&(this.#n?.detach(),t?.attach(this.#e),this.#n=t??null),t?.changeTrack(e)}#p(){this.#o?.detach(),this.#o=null,this.#n?.detach(),this.#n=null}};var No=class{constructor(e,t){this.loader=e;this.config=t}priority=1;#e=null;#t=null;#i=/(ssa|ass)$/;canRender(e,t){return!!t&&!!e.src&&(A(e.type)&&this.#i.test(e.type)||this.#i.test(e.src))}attach(e){e&&this.loader().then(async t=>{this.#e=new t.default({...this.config,video:e,subUrl:this.#t?.src||""}),y(this.#e,"ready",()=>{let i=this.#e?._canvas;i&&(i.style.pointerEvents="none")}),y(this.#e,"error",i=>{this.#t&&(this.#t[ee.readyState]=3,this.#t.dispatchEvent(new F("error",{trigger:i,detail:i.error})))})})}changeTrack(e){!e||e.readyState===3?this.#r():this.#t!==e&&(this.#e?.setTrackByUrl(e.src),this.#t=e)}detach(){this.#r()}#r(){this.#e?.freeTrack(),this.#t=null}};var ii=class extends xo{items=[];[I.readonly]=!1;get length(){return this.items.length}get readonly(){return this[I.readonly]}indexOf(e){return this.items.indexOf(e)}getById(e){return e===""?null:this.items.find(t=>t.id===e)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[I.add](e,t){let i=this.items.length;""+i in this||Object.defineProperty(this,i,{get(){return this.items[i]}}),!this.items.includes(e)&&(this.items.push(e),this.dispatchEvent(new F("add",{detail:e,trigger:t})))}[I.remove](e,t){let i=this.items.indexOf(e);i>=0&&(this[I.onRemove]?.(e,t),this.items.splice(i,1),this.dispatchEvent(new F("remove",{detail:e,trigger:t})))}[I.reset](e){for(let t of[...this.items])this[I.remove](t,e);this.items=[],this[I.setReadonly](!1,e),this[I.onReset]?.()}[I.setReadonly](e,t){this[I.readonly]!==e&&(this[I.readonly]=e,this.dispatchEvent(new F("readonly-change",{detail:e,trigger:t})))}};var ri=Ed;function Ed(o,e,t){var i=null,r=null,s=function(){i&&(clearTimeout(i),r=null,i=null)},a=function(){var u=r;s(),u&&u()},l=function(){if(!e)return o.apply(this,arguments);var u=this,c=arguments,p=t&&!i;if(s(),r=function(){o.apply(u,c)},i=setTimeout(function(){if(i=null,!p){var b=r;return r=null,b()}},e),p)return r()};return l.cancel=s,l.flush=a,l}var qr=class extends ii{#e=!1;#t={};#i=null;#r=null;[ee.crossOrigin];constructor(){super()}get selected(){return this.items.find(t=>t.mode==="showing"&&te(t))??null}get selectedIndex(){let e=this.selected;return e?this.indexOf(e):-1}get preferredLang(){return this.#r}set preferredLang(e){this.#r=e,this.#h(e)}add(e,t){let i=e instanceof Rt,r=i?e:new Rt(e),s=e.kind==="captions"||e.kind==="subtitles"?"captions":e.kind;return this.#t[s]&&e.default&&delete e.default,r.addEventListener("mode-change",this.#n),this[I.add](r,t),r[ee.crossOrigin]=this[ee.crossOrigin],this.#e&&r[ee.canLoad](),e.default&&(this.#t[s]=r),this.#s(),this}remove(e,t){if(this.#o=e,!!this.items.includes(e))return e===this.#t[e.kind]&&delete this.#t[e.kind],e.mode="disabled",e[ee.onModeChange]=null,e.removeEventListener("mode-change",this.#n),this[I.remove](e,t),this.#o=null,this}clear(e){for(let t of[...this.items])this.remove(t,e);return this}getByKind(e){let t=Array.isArray(e)?e:[e];return this.items.filter(i=>t.includes(i.kind))}[ee.canLoad](){if(!this.#e){for(let e of this.items)e[ee.canLoad]();this.#e=!0,this.#s()}}#s=ri(async()=>{if(!this.#e)return;!this.#r&&this.#i&&(this.#r=await this.#i.getLang());let e=await this.#i?.getCaptions(),t=[["captions","subtitles"],"chapters","descriptions","metadata"];for(let i of t){let r=this.getByKind(i);if(r.find(c=>c.mode==="showing"))continue;let s=this.#r?r.find(c=>c.language===this.#r):null,a=he(i)?this.#t[i.find(c=>this.#t[c])||""]:this.#t[i],l=s??a,u=l&&te(l);l&&(!u||e!==!1)&&(l.mode="showing",u&&this.#l(l))}},300);#o=null;#n=this.#a.bind(this);#a(e){let t=e.detail;if(this.#i&&te(t)&&t!==this.#o&&this.#l(t),t.mode==="showing"){let i=te(t)?["captions","subtitles"]:[t.kind];for(let r of this.items)r.mode==="showing"&&r!=t&&i.includes(r.kind)&&(r.mode="disabled")}this.dispatchEvent(new F("mode-change",{detail:e.detail,trigger:e}))}#l(e){e.mode!=="disabled"&&this.#h(e.language),this.#i?.setCaptions?.(e.mode==="showing")}#h(e){this.#i?.setLang?.(this.#r=e)}setStorage(e){this.#i=e}};var qi=Symbol(0),si=class extends ii{get selected(){return this.items.find(e=>e.selected)??null}get selectedIndex(){return this.items.findIndex(e=>e.selected)}[I.onRemove](e,t){this[I.select](e,!1,t)}[I.add](e,t){e[qi]=!1,Object.defineProperty(e,"selected",{get(){return this[qi]},set:i=>{this.readonly||(this[I.onUserSelect]?.(),this[I.select](e,i))}}),super[I.add](e,t)}[I.select](e,t,i){if(t===e?.[qi])return;let r=this.selected;e&&(e[qi]=t),(t?r!==e:r===e)&&(r&&(r[qi]=!1),this.dispatchEvent(new F("change",{detail:{prev:r,current:this.selected},trigger:i})))}};var Dr=class extends si{};var Or=class extends si{#e=!1;switch="current";get auto(){return this.#e||this.readonly}[we.enableAuto];[I.onUserSelect](){this[we.setAuto](!1)}[I.onReset](e){this[we.enableAuto]=void 0,this[we.setAuto](!1,e)}autoSelect(e){this.readonly||this.#e||!this[we.enableAuto]||(this[we.enableAuto]?.(e),this[we.setAuto](!0,e))}getBySrc(e){return this.items.find(t=>t.src===e)}[we.setAuto](e,t){this.#e!==e&&(this.#e=e,this.dispatchEvent(new F("auto-change",{detail:e,trigger:t})))}};function Wo(o,e){return[...o].sort(e?xd:Sd)}function Sd(o,e){return o.height===e.height?(o.bitrate??0)-(e.bitrate??0):o.height-e.height}function xd(o,e){return e.height===o.height?(e.bitrate??0)-(o.bitrate??0):e.height-o.height}function Xu(o){return o?.$$PROVIDER_TYPE==="AUDIO"}function Ju(o){return o?.$$PROVIDER_TYPE==="VIDEO"}function Zu(o){return o?.$$PROVIDER_TYPE==="HLS"}function eh(o){return o?.$$PROVIDER_TYPE==="DASH"}function th(o){return o?.$$PROVIDER_TYPE==="YOUTUBE"}function ih(o){return o?.$$PROVIDER_TYPE==="VIMEO"}function rh(o){return o?.$$PROVIDER_TYPE==="GOOGLE_CAST"}function Td(o){return!x&&o instanceof HTMLAudioElement}function Md(o){return!x&&o instanceof HTMLVideoElement}function Uo(o){return Td(o)||Md(o)}function sh(o){return!x&&o instanceof HTMLIFrameElement}var me=class extends Z{};var $s={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},Hr=new Set(["Shift","Alt","Meta","Ctrl"]),Pd='button, [role="button"]',zo='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]',Fr=class extends me{#e;constructor(e){super(),this.#e=e}onConnect(){d(this.#t.bind(this))}#t(){let{keyDisabled:e,keyTarget:t}=this.$props;if(e())return;let i=t()==="player"?this.el:document,r=M(!1);i===this.el?(this.listen("focusin",()=>r.set(!0)),this.listen("focusout",s=>{this.el.contains(s.target)||r.set(!1)})):(m(r)||r.set(document.querySelector("[data-media-player]")===this.el),y(document,"focusin",s=>{let a=s.composedPath().find(l=>l instanceof Element&&l.localName==="media-player");a!==void 0&&r.set(this.el===a)})),d(()=>{r()&&(y(i,"keyup",this.#i.bind(this)),y(i,"keydown",this.#r.bind(this)),y(i,"keydown",this.#s.bind(this),{capture:!0}))})}#i(e){let t=document.activeElement;if(!e.key||!this.$state.canSeek()||t?.matches(zo))return;let{method:i,value:r}=this.#o(e);if(!A(r)&&!he(r)){r?.onKeyUp?.({event:e,player:this.#e.player,remote:this.#e.remote}),r?.callback?.(e,this.#e.remote);return}i?.startsWith("seek")&&(e.preventDefault(),e.stopPropagation(),this.#l?(this.#h(e,i==="seekForward"),this.#l=null):(this.#e.remote.seek(this.#n,e),this.#n=void 0)),i?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}))}#r(e){if(!e.key||Hr.has(e.key))return;let t=document.activeElement;if(t?.matches(zo)||Ts(e)&&t?.matches(Pd))return;let{method:i,value:r}=this.#o(e),s=!e.metaKey&&/^[0-9]$/.test(e.key);if(!A(r)&&!he(r)&&!s){r?.onKeyDown?.({event:e,player:this.#e.player,remote:this.#e.remote}),r?.callback?.(e,this.#e.remote);return}if(!i&&s){e.preventDefault(),e.stopPropagation(),this.#e.remote.seek(this.$state.duration()/10*Number(e.key),e);return}if(i){switch(e.preventDefault(),e.stopPropagation(),i){case"seekForward":case"seekBackward":this.#u(e,i,i==="seekForward");break;case"volumeUp":case"volumeDown":let a=this.el.querySelector("[data-media-volume-slider]");if(a)a.dispatchEvent(new KeyboardEvent("keydown",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}));else{let u=e.shiftKey?.1:.05;this.#e.remote.changeVolume(this.$state.volume()+(i==="volumeUp"?+u:-u),e)}break;case"toggleFullscreen":this.#e.remote.toggleFullscreen("prefer-media",e);break;case"speedUp":case"slowDown":let l=this.$state.playbackRate();this.#e.remote.changePlaybackRate(Math.max(.25,Math.min(2,l+(i==="speedUp"?.25:-.25))),e);break;default:this.#e.remote[i]?.(e)}this.$state.lastKeyboardAction.set({action:i,event:e})}}#s(e){Uo(e.target)&&this.#o(e).method&&e.preventDefault()}#o(e){let t={...this.$props.keyShortcuts(),...this.#e.ariaKeys},i=Object.keys(t).find(r=>{let s=t[r],a=he(s)?s.join(" "):A(s)?s:s?.keys;return(he(a)?a:a?.split(" "))?.map(u=>kd(u).replace(/Control/g,"Ctrl").split("+"))?.some(u=>{let c=new Set(u.filter(p=>Hr.has(p)));for(let p of Hr){let b=p.toLowerCase()+"Key";if(!c.has(p)&&e[b])return!1}return u.every(p=>Hr.has(p)?e[p.toLowerCase()+"Key"]:e.key===p.replace("Space"," "))})});return{method:i,value:i?t[i]:null}}#n;#a(e,t){let i=e.shiftKey?10:5;return this.#n=Math.max(0,Math.min((this.#n??this.$state.currentTime())+(t==="seekForward"?+i:-i),this.$state.duration()))}#l=null;#h(e,t){this.#l?.dispatchEvent(new KeyboardEvent(e.type,{key:t?"Right":"Left",shiftKey:e.shiftKey,trigger:e}))}#u(e,t,i){this.$state.canSeek()&&(this.#l||(this.#l=this.el.querySelector("[data-media-time-slider]")),this.#l?this.#h(e,i):this.#e.remote.seeking(this.#a(e,t),e))}},Cd=["!","@","#","$","%","^","&","*","(",")"];function kd(o){return o.replace(/Shift\+(\d)/g,(e,t)=>Cd[t-1])}var Di=class extends Z{#e;constructor(e){super(),this.#e=e}onAttach(e){let{$props:t,ariaKeys:i}=S(),r=e.getAttribute("aria-keyshortcuts");if(r){i[this.#e]=r,x||P(()=>{delete i[this.#e]});return}let s=t.keyShortcuts()[this.#e];if(s){let a=he(s)?s.join(" "):A(s)?s:s?.keys;e.setAttribute("aria-keyshortcuts",he(a)?a.join(" "):a)}}};var Oi=class extends me{#e=-2;#t=!1;#i=M(!1);#r=M(!1);#s=null;#o=M(!0);defaultDelay=2e3;get canIdle(){return this.#o()}set canIdle(e){this.#o.set(e)}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:e}=this.$props;return this.#i()||e()}set hideOnMouseLeave(e){this.#i.set(e)}get showing(){return this.$state.controlsVisible()}show(e=0,t){this.#p(),this.#t||this.#m(!0,e,t)}hide(e=this.defaultDelay,t){this.#p(),this.#t||this.#m(!1,e,t)}pause(e){this.#t=!0,this.#p(),this.#m(!0,0,e)}resume(e){this.#t=!1,!this.$state.paused()&&this.#m(!1,this.defaultDelay,e)}onConnect(){d(this.#n.bind(this))}#n(){let{viewType:e}=this.$state;if(!this.#o())return;if(e()==="audio"){this.show();return}d(this.#a.bind(this)),d(this.#l.bind(this));let t=this.#h.bind(this),i=this.#u.bind(this);this.listen("can-play",r=>this.show(0,r)),this.listen("play",t),this.listen("pause",i),this.listen("auto-play-fail",i)}#a(){let{started:e,pointer:t,paused:i}=this.$state;if(!e()||t()!=="fine")return;let r=this.hideOnMouseLeave;(!r||!this.#r())&&d(()=>{i()||this.listen("pointermove",this.#f.bind(this))}),r&&(this.listen("mouseenter",this.#c.bind(this)),this.listen("mouseleave",this.#d.bind(this)))}#l(){let{paused:e,started:t,autoPlayError:i}=this.$state;if(e()||i()&&!t())return;let r=this.#f.bind(this);d(()=>{let s=this.$state.pointer(),a=s==="coarse",l=[a?"touchend":"pointerup","keydown"];for(let u of l)this.listen(u,r,{passive:!1})})}#h(e){this.show(0,e),this.hide(void 0,e)}#u(e){this.show(0,e)}#c(e){this.#r.set(!1),this.show(0,e),this.hide(void 0,e)}#d(e){this.#r.set(!0),this.hide(0,e)}#p(){window.clearTimeout(this.#e),this.#e=-1}#f(e){e.MEDIA_GESTURE||this.#t||ti(e)||(wi(e)&&(e.key==="Escape"?(this.el?.focus(),this.#s=null):this.#s&&(e.preventDefault(),requestAnimationFrame(()=>{this.#s?.focus(),this.#s=null}))),this.show(0,e),this.hide(this.defaultDelay,e))}#m(e,t,i){if(t===0){this.#y(e,i);return}this.#e=window.setTimeout(()=>{this.scope&&this.#y(e&&!this.#t,i)},t)}#y(e,t){this.$state.controlsVisible()!==e&&(this.$state.controlsVisible.set(e),!e&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#s=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:e,trigger:t}))}};var Gr=Ye.fullscreenEnabled,Br=class extends Z{#e=!1;#t=!1;get active(){return this.#t}get supported(){return Gr}onConnect(){y(Ye,"fullscreenchange",this.#r.bind(this)),y(Ye,"fullscreenerror",this.#s.bind(this)),P(this.#i.bind(this))}async#i(){Gr&&await this.exit()}#r(e){let t=Vs(this.el);t!==this.#t&&(t||(this.#e=!1),this.#t=t,this.dispatch("fullscreen-change",{detail:t,trigger:e}))}#s(e){this.#e&&(this.dispatch("fullscreen-error",{detail:null,trigger:e}),this.#e=!1)}async enter(){try{return this.#e=!0,!this.el||Vs(this.el)?void 0:(Yo(),Ye.requestFullscreen(this.el))}catch(e){throw this.#e=!1,e}}async exit(){if(!(!this.el||!Vs(this.el)))return Yo(),Ye.exitFullscreen()}};function Nh(){return Gr}function Vs(o){if(Ye.fullscreenElement===o)return!0;try{return o.matches(Ye.fullscreenPseudoClass)}catch{return!1}}function Yo(){if(!Gr)throw Error("[vidstack] no fullscreen API")}var oi=class o extends Z{#e=M(this.#n());#t=M(!1);#i;get type(){return this.#e()}get locked(){return this.#t()}get portrait(){return this.#e().startsWith("portrait")}get landscape(){return this.#e().startsWith("landscape")}static supported=Ri();get supported(){return o.supported}onConnect(){if(this.supported)y(screen.orientation,"change",this.#s.bind(this));else{let e=window.matchMedia("(orientation: landscape)");e.onchange=this.#s.bind(this),P(()=>e.onchange=null)}P(this.#r.bind(this))}async#r(){this.supported&&this.#t()&&await this.unlock()}#s(e){this.#e.set(this.#n()),this.dispatch("orientation-change",{detail:{orientation:m(this.#e),lock:this.#i},trigger:e})}async lock(e){m(this.#t)||this.#i===e||(this.#o(),await screen.orientation.lock(e),this.#t.set(!0),this.#i=e)}async unlock(){m(this.#t)&&(this.#o(),this.#i=void 0,await screen.orientation.unlock(),this.#t.set(!1))}#o(){if(!this.supported)throw Error("[vidstack] no orientation API")}#n(){return x?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};var Hi=class{name="audio";target;canPlay(e){return Io(e)?x||!A(e.src)||e.type==="?"||$o(this.target,e.type):!1}mediaType(){return"audio"}async load(e){if(x)throw Error("[vidstack] can not load audio provider server-side");return new(await import("./vidstack-OBXFBQF7.js")).AudioProvider(this.target,e)}};var it=class{name="video";target;canPlay(e){return qo(e)?x||!A(e.src)||e.type==="?"||Vo(this.target,e.type):!1}mediaType(){return"video"}async load(e){if(x)throw Error("[vidstack] can not load video provider server-side");return new(await import("./vidstack-VUZOGWTJ.js")).VideoProvider(this.target,e)}};var Fi=class o extends it{static supported=kr();name="hls";canPlay(e){return o.supported&&Li(e)}async load(e){if(x)throw Error("[vidstack] can not load hls provider server-side");return new(await import("./vidstack-P3AOO7PO.js")).HLSProvider(this.target,e)}};var Gi=class o extends it{static supported=Ao();name="dash";canPlay(e){return o.supported&&$i(e)}async load(e){if(x)throw Error("[vidstack] can not load dash provider server-side");return new(await import("./vidstack-MWVLLTCY.js")).DASHProvider(this.target,e)}};var Bi=class{name="vimeo";target;preconnect(){let e=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(let t of e)Ue(t)}canPlay(e){return A(e.src)&&e.type==="video/vimeo"}mediaType(){return"video"}async load(e){if(x)throw Error("[vidstack] can not load vimeo provider server-side");return new(await import("./vidstack-RTHYKUB6.js")).VimeoProvider(this.target,e)}async loadPoster(e,t,i){let{resolveVimeoVideoId:r,getVimeoVideoInfo:s}=await import("./vidstack-KIYGEMXI.js");if(!A(e.src))return null;let{videoId:a,hash:l}=r(e.src);return a?s(a,i,l).then(u=>u?u.poster:null):null}};var Qi=class{name="youtube";target;preconnect(){let e=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(let t of e)Ue(t)}canPlay(e){return A(e.src)&&e.type==="video/youtube"}mediaType(){return"video"}async load(e){if(x)throw Error("[vidstack] can not load youtube provider server-side");return new(await import("./vidstack-DUEEBH6Z.js")).YouTubeProvider(this.target,e)}async loadPoster(e,t,i){let{findYouTubePoster:r,resolveYouTubeVideoId:s}=await import("./vidstack-HHQHEN6V.js"),a=A(e.src)&&s(e.src);return a?r(a,i):null}};function As(o,e){let t=String(o),i=t.length;if(i<e){let s=e-i;return`${"0".repeat(s)}${o}`}return t}function jo(o){let e=Math.trunc(o/3600),t=Math.trunc(o%3600/60),i=Math.trunc(o%60),r=Number((o-Math.trunc(o)).toPrecision(3));return{hours:e,minutes:t,seconds:i,fraction:r}}function Vt(o,{padHrs:e=null,padMins:t=null,showHrs:i=!1,showMs:r=!1}={}){let{hours:s,minutes:a,seconds:l,fraction:u}=jo(o),c=e?As(s,2):s,p=t||Ve(t)&&o>=3600?As(a,2):a,b=As(l,2),C=r&&u>0?`.${String(u).replace(/^0?\./,"")}`:"",$=`${p}:${b}${C}`;return s>0||i?`${c}:${$}`:$}function ni(o){let e=[],{hours:t,minutes:i,seconds:r}=jo(o);return t>0&&e.push(`${t} hour`),i>0&&e.push(`${i} min`),(r>0||e.length===0)&&e.push(`${r} sec`),e.join(" ")}var Ie=new ce({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Xo(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Xo(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Xo(o,e,t){let i=e-o,r=t-o;return i>0?r/i:0}var se=ve();var Ki=ve();var ft=class extends Z{#e=new Set;#t=M("");#i=null;onValueChange;get values(){return Array.from(this.#e).map(e=>e.value())}get value(){return this.#t()}set value(e){this.#n(e)}onSetup(){J(Ki,{add:this.#r.bind(this),remove:this.#s.bind(this)})}onAttach(e){ne(se)||L(e,"role","radiogroup"),this.setAttributes({value:this.#t})}onDestroy(){this.#e.clear()}#r(e){this.#e.has(e)||(this.#e.add(e),e.onCheck=this.#o,e.check(e.value()===this.#t()))}#s(e){e.onCheck=null,this.#e.delete(e)}#o=this.#n.bind(this);#n(e,t){let i=m(this.#t);if(!e||e===i)return;let r=this.#a(i),s=this.#a(e);r?.check(!1,t),s?.check(!0,t),this.#t.set(e),this.onValueChange?.(e,t)}#a(e){for(let t of this.#e)if(e===m(t.value))return t;return null}};var wd=[1,1.25,1.5,1.75,2,2.5,3,4],Jo,Zo,en,tn,gt,ai,_t,Ni,qe,rn,sn,on,nn,an,At=class extends(tn=f,en=[_],Zo=[_],Jo=[Q],tn){constructor(){super();G(Ni,5,this);g(this,qe);g(this,gt);g(this,ai);g(this,_t);T(this,_t,new ft),n(this,_t).onValueChange=h(this,qe,an).bind(this)}get value(){return n(this,_t).value}get disabled(){let{gains:t}=this.$props,{canSetAudioGain:i}=n(this,gt).$state;return!i()||t().length===0}onSetup(){T(this,gt,S()),ne(se)&&T(this,ai,H(se))}onConnect(t){d(h(this,qe,rn).bind(this)),d(h(this,qe,sn).bind(this)),d(h(this,qe,on).bind(this))}getOptions(){let{gains:t,normalLabel:i}=this.$props;return t().map(r=>({label:r===1||r===null?i:String(r*100)+"%",value:r.toString()}))}};Ni=Y(tn),gt=new WeakMap,ai=new WeakMap,_t=new WeakMap,qe=new WeakSet,rn=function(){n(this,_t).value=h(this,qe,nn).call(this)},sn=function(){let{normalLabel:t}=this.$props,{audioGain:i}=n(this,gt).$state,r=i();n(this,ai)?.hint.set(r===1||r==null?t():String(r*100)+"%")},on=function(){n(this,ai)?.disable(this.disabled)},nn=function(){let{audioGain:t}=n(this,gt).$state;return t()?.toString()??"1"},an=function(t,i){if(this.disabled)return;let r=+t;n(this,gt).remote.changeAudioGain(r,i),this.dispatch("change",{detail:r,trigger:i})},E(Ni,2,"value",en,At),E(Ni,2,"disabled",Zo,At),E(Ni,1,"getOptions",Jo,At),j(Ni,At),B(At,"props",{normalLabel:"Disabled",gains:wd});var Rd=[.25,.5,.75,1,1.25,1.5,1.75,2],ln,dn,un,hn,yt,li,qt,Wi,De,cn,pn,mn,fn,gn,It=class extends(hn=f,un=[_],dn=[_],ln=[Q],hn){constructor(){super();G(Wi,5,this);g(this,De);g(this,yt);g(this,li);g(this,qt);T(this,qt,new ft),n(this,qt).onValueChange=h(this,De,gn).bind(this)}get value(){return n(this,qt).value}get disabled(){let{rates:t}=this.$props,{canSetPlaybackRate:i}=n(this,yt).$state;return!i()||t().length===0}onSetup(){T(this,yt,S()),ne(se)&&T(this,li,H(se))}onConnect(t){d(h(this,De,cn).bind(this)),d(h(this,De,pn).bind(this)),d(h(this,De,mn).bind(this))}getOptions(){let{rates:t,normalLabel:i}=this.$props;return t().map(r=>({label:r===1?i:r+"\xD7",value:r.toString()}))}};Wi=Y(hn),yt=new WeakMap,li=new WeakMap,qt=new WeakMap,De=new WeakSet,cn=function(){n(this,qt).value=h(this,De,fn).call(this)},pn=function(){let{normalLabel:t}=this.$props,{playbackRate:i}=n(this,yt).$state,r=i();n(this,li)?.hint.set(r===1?t():r+"\xD7")},mn=function(){n(this,li)?.disable(this.disabled)},fn=function(){let{playbackRate:t}=n(this,yt).$state;return t().toString()},gn=function(t,i){if(this.disabled)return;let r=+t;n(this,yt).remote.changePlaybackRate(r,i),this.dispatch("change",{detail:r,trigger:i})},E(Wi,2,"value",un,It),E(Wi,2,"disabled",dn,It),E(Wi,1,"getOptions",ln,It),j(Wi,It),B(It,"props",{normalLabel:"Normal",rates:Rd});var Qr=Symbol(0),yn=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"];var vn={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:$s,storage:null};var Ui=class extends me{#e;#t;constructor(e,t){super(),this.#e=e,this.#t=t}async onAttach(e){if(x)return;let t=this.$props[this.#e]();if(t==="eager")requestAnimationFrame(this.#t);else if(t==="idle")wo(this.#t);else if(t==="visible"){let i,r=new IntersectionObserver(s=>{this.scope&&s[0].isIntersecting&&(i?.(),i=void 0,this.#t())});r.observe(e),i=P(()=>r.disconnect())}}};var Kr=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}notify(e,...t){x||this.#e(new F(e,{detail:t?.[0],trigger:t?.[1]}))}async ready(e,t){if(!x)return Ct(async()=>{let{logger:i}=this.#t,{autoPlay:r,canPlay:s,started:a,duration:l,seekable:u,buffered:c,remotePlaybackInfo:p,playsInline:b,savedState:C,source:$}=this.#t.$state;if(s())return;let V={duration:e?.duration??l(),seekable:e?.seekable??u(),buffered:e?.buffered??c(),provider:this.#t.$provider()};this.notify("can-play",V,t),ge();let U=this.#t.$provider(),{storage:re,qualities:Qe}=this.#t,{muted:Ke,volume:Oe,clipStartTime:fe,playbackRate:Ne}=this.#t.$props;await re?.onLoad?.($());let ut=C()?.currentTime,jt=C()?.paused,ht=await re?.getTime(),ki=ut??ht??fe(),hr=jt||jt!==!1&&!a()&&r();if(U){U.setVolume(await re?.getVolume()??Oe()),U.setMuted(Ke()||!!await re?.getMuted());let et=await re?.getAudioGain()??1;et>1&&U.audioGain?.setGain?.(et),U.setPlaybackRate?.(await re?.getPlaybackRate()??Ne()),U.setPlaysInline?.(b()),ki>0&&U.setCurrentTime(ki)}let ct=await re?.getVideoQuality();if(ct&&Qe.length){let et=null,Te=1/0;for(let ue of Qe){let Xt=Math.abs(ct.width-ue.width)+Math.abs(ct.height-ue.height)+(ct.bitrate?Math.abs(ct.bitrate-(ue.bitrate??0)):0);Xt<Te&&(et=ue,Te=Xt)}et&&(et.selected=!0)}s()&&hr?await this.#i(t):ht&&ht>0&&this.notify("started",void 0,t),p.set(null)})}async#i(e){let{player:t,$state:{autoPlaying:i,muted:r}}=this.#t;i.set(!0);let s=new F("auto-play-attempt",{trigger:e});try{await t.play(s)}catch{}}};var Nr=class{#e=new Map;enqueue(e,t){this.#e.set(e,t)}serve(e){let t=this.peek(e);return this.#e.delete(e),t}peek(e){return this.#e.get(e)}delete(e){this.#e.delete(e)}clear(){this.#e.clear()}};var di=class{#e=!1;#t=Ms();#i=new Map;get size(){return this.#i.size}get isServing(){return this.#e}async waitForFlush(){this.#e||await this.#t.promise}enqueue(e,t){if(this.#e){t();return}this.#i.delete(e),this.#i.set(e,t)}serve(e){this.#i.get(e)?.(),this.#i.delete(e)}start(){this.#r(),this.#e=!0,this.#i.size>0&&this.#r()}stop(){this.#e=!1}reset(){this.stop(),this.#i.clear(),this.#s()}#r(){for(let e of this.#i.keys())this.serve(e);this.#s()}#s(){this.#t.resolve(),this.#t=Ms()}};var Wr=class extends me{#e;#t;#i;controls;#r;#s;#o;#n=new di;constructor(e,t,i){super(),this.#e=e,this.#t=t,this.#i=i,this.#o=i.$provider,this.controls=new Oi,this.#r=new Br,this.#s=new oi}onAttach(){this.listen("fullscreen-change",this.#x.bind(this))}onConnect(){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),t=this.#h.bind(this);for(let i of e)i.startsWith("media-")&&this.listen(i,t);this.#a(),d(this.#l.bind(this)),d(this.#f.bind(this)),d(this.#m.bind(this)),d(this.#y.bind(this)),d(this.#b.bind(this)),d(this.#T.bind(this)),d(this.#S.bind(this))}onDestroy(){try{let e=this.createEvent("destroy"),{pictureInPicture:t,fullscreen:i}=this.$state;i()&&this.exitFullscreen("prefer-media",e),t()&&this.exitPictureInPicture(e)}catch{}this.#n.reset()}#a(){let{load:e}=this.$props,{canLoad:t}=this.$state;if(e()!=="play"||t())return;let i=this.listen("media-play-request",r=>{this.#u(r),i()})}#l(){let e=this.#o(),t=this.$state.canPlay();return e&&t&&this.#n.start(),()=>{this.#n.stop()}}#h(e){e.stopPropagation(),!e.defaultPrevented&&this[e.type]&&(m(this.#o)?this[e.type](e):this.#n.enqueue(e.type,()=>{m(this.#o)&&this[e.type](e)}))}async play(e){if(x)return;let{canPlay:t,paused:i,autoPlaying:r}=this.$state;if(this.#u(e)||!m(i))return;e&&this.#t.queue.enqueue("media-play-request",e);let s=m(r);try{let a=m(this.#o);return _s(a,m(t)),await a.play()}catch(a){let l=this.createEvent("play-fail",{detail:Vr(a),trigger:e});throw l.autoPlay=s,this.#e.handle(l),a}}#u(e){let{load:t}=this.$props,{canLoad:i}=this.$state;if(t()==="play"&&!i()){let r=this.createEvent("media-start-loading",{trigger:e});return this.dispatchEvent(r),this.#n.enqueue("media-play-request",async()=>{try{await this.play(r)}catch{}}),!0}return!1}async pause(e){if(x)return;let{canPlay:t,paused:i}=this.$state;if(!m(i)){e&&this.#t.queue.enqueue("media-pause-request",e);try{let r=m(this.#o);return _s(r,m(t)),await r.pause()}catch(r){throw this.#t.queue.delete("media-pause-request"),r}}}setAudioGain(e,t){let{audioGain:i,canSetAudioGain:r}=this.$state;if(i()===e)return;let s=this.#o();if(!s?.audioGain||!r())throw Error("[vidstack] audio gain api not available");t&&this.#t.queue.enqueue("media-audio-gain-change-request",t),s.audioGain.setGain(e)}seekToLiveEdge(e){if(x)return;let{canPlay:t,live:i,liveEdge:r,canSeek:s,liveSyncPosition:a,seekableEnd:l,userBehindLiveEdge:u}=this.$state;if(u.set(!1),m(()=>!i()||r()||!s()))return;let c=m(this.#o);_s(c,m(t)),e&&this.#t.queue.enqueue("media-seek-request",e);let p=l()-2;c.setCurrentTime(Math.min(p,a()??p))}#c=!1;async enterFullscreen(e="prefer-media",t){if(x)return;let i=this.#d(e);if(bn(e,i),!i.active)return m(this.$state.pictureInPicture)&&(this.#c=!0,await this.exitPictureInPicture(t)),t&&this.#t.queue.enqueue("media-enter-fullscreen-request",t),i.enter()}async exitFullscreen(e="prefer-media",t){if(x)return;let i=this.#d(e);if(bn(e,i),!!i.active){t&&this.#t.queue.enqueue("media-exit-fullscreen-request",t);try{let r=await i.exit();return this.#c&&m(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),r}finally{this.#c=!1}}}#d(e){let t=m(this.#o);return e==="prefer-media"&&this.#r.supported||e==="media"?this.#r:t?.fullscreen}async enterPictureInPicture(e){if(!x&&(this.#p(),!this.$state.pictureInPicture()))return e&&this.#t.queue.enqueue("media-enter-pip-request",e),await this.#o().pictureInPicture.enter()}async exitPictureInPicture(e){if(!x&&(this.#p(),!!this.$state.pictureInPicture()))return e&&this.#t.queue.enqueue("media-exit-pip-request",e),await this.#o().pictureInPicture.exit()}#p(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#f(){this.controls.defaultDelay=this.$props.controlsDelay()}#m(){let{canSetAudioGain:e}=this.$state,t=!!this.#o()?.audioGain?.supported;e.set(t)}#y(){let{canAirPlay:e}=this.$state,t=!!this.#o()?.airPlay?.supported;e.set(t)}#b(){let{canGoogleCast:e,source:t}=this.$state,i=Lo&&!Ro&&Do(t());e.set(i)}#T(){let{canFullscreen:e}=this.$state,t=this.#r.supported||!!this.#o()?.fullscreen?.supported;e.set(t)}#S(){let{canPictureInPicture:e}=this.$state,t=!!this.#o()?.pictureInPicture?.supported;e.set(t)}async"media-airplay-request"(e){try{await this.requestAirPlay(e)}catch{}}async requestAirPlay(e){try{let t=this.#o()?.airPlay;if(!t?.supported)throw Error("No AirPlay adapter.");return e&&this.#t.queue.enqueue("media-airplay-request",e),await t.prompt()}catch(t){throw this.#t.queue.delete("media-airplay-request"),t}}async"media-google-cast-request"(e){try{await this.requestGoogleCast(e)}catch{}}#v;async requestGoogleCast(e){try{let{canGoogleCast:t}=this.$state;if(!m(t)){let r=Error("Cast not available.");throw r.code="CAST_NOT_AVAILABLE",r}if(Ue("https://www.gstatic.com"),!this.#v){let r=await import("./vidstack-OSSYCOD7.js");this.#v=new r.GoogleCastLoader}await this.#v.prompt(this.#i),e&&this.#t.queue.enqueue("media-google-cast-request",e);let i=m(this.$state.remotePlaybackState)!=="disconnected";i&&this.$state.savedState.set({paused:m(this.$state.paused),currentTime:m(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(i?this.#v:null)}catch(t){throw this.#t.queue.delete("media-google-cast-request"),t}}"media-clip-start-change-request"(e){let{clipStartTime:t}=this.$state;t.set(e.detail)}"media-clip-end-change-request"(e){let{clipEndTime:t}=this.$state;t.set(e.detail),this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-duration-change-request"(e){let{providedDuration:t,clipEndTime:i}=this.$state;t.set(e.detail),i()<=0&&this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-audio-track-change-request"(e){let{logger:t,audioTracks:i}=this.#i;if(i.readonly)return;let r=e.detail,s=i[r];if(s){let a=e.type;this.#t.queue.enqueue(a,e),s.selected=!0}}async"media-enter-fullscreen-request"(e){try{await this.enterFullscreen(e.detail,e)}catch(t){this.#g(t,e)}}async"media-exit-fullscreen-request"(e){try{await this.exitFullscreen(e.detail,e)}catch(t){this.#g(t,e)}}async#x(e){let t=m(this.$props.fullscreenOrientation),i=e.detail;if(!(Eo(t)||t==="none"||!this.#s.supported))if(i){if(this.#s.locked)return;this.dispatch("media-orientation-lock-request",{detail:t,trigger:e})}else this.#s.locked&&this.dispatch("media-orientation-unlock-request",{trigger:e})}#g(e,t){this.#e.handle(this.createEvent("fullscreen-error",{detail:Vr(e)}))}async"media-orientation-lock-request"(e){let t=e.type;try{this.#t.queue.enqueue(t,e),await this.#s.lock(e.detail)}catch{this.#t.queue.delete(t)}}async"media-orientation-unlock-request"(e){let t=e.type;try{this.#t.queue.enqueue(t,e),await this.#s.unlock()}catch{this.#t.queue.delete(t)}}async"media-enter-pip-request"(e){try{await this.enterPictureInPicture(e)}catch(t){this.#E(t,e)}}async"media-exit-pip-request"(e){try{await this.exitPictureInPicture(e)}catch(t){this.#E(t,e)}}#E(e,t){this.#e.handle(this.createEvent("picture-in-picture-error",{detail:Vr(e)}))}"media-live-edge-request"(e){let{live:t,liveEdge:i,canSeek:r}=this.$state;if(!(!t()||i()||!r())){this.#t.queue.enqueue("media-seek-request",e);try{this.seekToLiveEdge()}catch{this.#t.queue.delete("media-seek-request")}}}async"media-loop-request"(e){try{this.#t.looping=!0,this.#t.replaying=!0,await this.play(e)}catch{this.#t.looping=!1}}"media-user-loop-change-request"(e){this.$state.userPrefersLoop.set(e.detail)}async"media-pause-request"(e){if(!this.$state.paused())try{await this.pause(e)}catch{}}async"media-play-request"(e){if(this.$state.paused())try{await this.play(e)}catch{}}"media-rate-change-request"(e){let{playbackRate:t,canSetPlaybackRate:i}=this.$state;if(t()===e.detail||!i())return;let r=this.#o();r?.setPlaybackRate&&(this.#t.queue.enqueue("media-rate-change-request",e),r.setPlaybackRate(e.detail))}"media-audio-gain-change-request"(e){try{this.setAudioGain(e.detail,e)}catch{}}"media-quality-change-request"(e){let{qualities:t,storage:i,logger:r}=this.#i;if(t.readonly)return;this.#t.queue.enqueue("media-quality-change-request",e);let s=e.detail;if(s<0)t.autoSelect(e),e.isOriginTrusted&&i?.setVideoQuality?.(null);else{let a=t[s];a&&(a.selected=!0,e.isOriginTrusted&&i?.setVideoQuality?.({id:a.id,width:a.width,height:a.height,bitrate:a.bitrate}))}}"media-pause-controls-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.controls.pause(e)}"media-resume-controls-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.controls.resume(e)}"media-seek-request"(e){let{seekableStart:t,seekableEnd:i,ended:r,canSeek:s,live:a,userBehindLiveEdge:l,clipStartTime:u}=this.$state,c=e.detail;r()&&(this.#t.replaying=!0);let p=e.type;this.#t.seeking=!1,this.#t.queue.delete(p);let b=c+u(),C=Math.floor(b)===Math.floor(i()),$=C?i():Math.min(Math.max(t()+.1,b),i()-.1);!Number.isFinite($)||!s()||(this.#t.queue.enqueue(p,e),this.#o().setCurrentTime($),a()&&e.isOriginTrusted&&Math.abs(i()-$)>=2&&l.set(!0))}"media-seeking-request"(e){let t=e.type;this.#t.queue.enqueue(t,e),this.$state.seeking.set(!0),this.#t.seeking=!0}"media-start-loading"(e){if(this.$state.canLoad())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#e.handle(this.createEvent("can-load"))}"media-poster-start-loading"(e){if(this.$state.canLoadPoster())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#e.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(e){let{index:t,mode:i}=e.detail,r=this.#i.textTracks[t];if(r){let s=e.type;this.#t.queue.enqueue(s,e),r.setMode(i,e)}}"media-mute-request"(e){if(this.$state.muted())return;let t=e.type;this.#t.queue.enqueue(t,e),this.#o().setMuted(!0)}"media-unmute-request"(e){let{muted:t,volume:i}=this.$state;if(!t())return;let r=e.type;this.#t.queue.enqueue(r,e),this.#i.$provider().setMuted(!1),i()===0&&(this.#t.queue.enqueue(r,e),this.#o().setVolume(.25))}"media-volume-change-request"(e){let{muted:t,volume:i}=this.$state,r=e.detail;if(i()===r)return;let s=e.type;this.#t.queue.enqueue(s,e),this.#o().setVolume(r),r>0&&t()&&(this.#t.queue.enqueue(s,e),this.#o().setMuted(!1))}#P(e,t,i){}};function _s(o,e){if(!(o&&e))throw Error("[vidstack] media not ready")}function bn(o,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}var Ur=class{seeking=!1;looping=!1;replaying=!1;queue=new Nr};var En=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);var zr=class extends me{#e;#t;#i=new Map;#r=!1;#s=[];#o=[-1,-1];#n=!1;#a;constructor(e,t){super(),this.#e=e,this.#t=t}onAttach(e){e.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(e){d(this.#w.bind(this)),this.#p(),this.#f(),this.#m(),this.#h(),P(this.#u.bind(this))}onDestroy(){let{audioTracks:e,qualities:t,textTracks:i}=this.#t;e[I.reset](),t[I.reset](),i[I.reset](),this.#M()}handle(e){if(!this.scope)return;let t=e.type;Ct(()=>this[e.type]?.(e)),x||(En.has(t)&&this.#i.set(t,e),this.dispatch(e))}#l=!1;#h(){this.#l&&(requestAnimationFrame(()=>{this.scope&&this.#t.remote.play(new F("dom-connect"))}),this.#l=!1)}#u(){this.#l||(this.#l=!this.$state.paused(),this.#t.$provider()?.pause())}#c(){this.#_(),this.#r=!1,this.#e.replaying=!1,this.#e.looping=!1,this.#n=!1,this.#a=void 0,this.#i.clear()}#d(e,t){let i=this.#e.queue.serve(e);i&&(t.request=i,t.triggers.add(i))}#p(){this.#y(),this.#b();let e=this.#t.textTracks;y(e,"add",this.#y.bind(this)),y(e,"remove",this.#y.bind(this)),y(e,"mode-change",this.#b.bind(this))}#f(){let e=this.#t.qualities;y(e,"add",this.#v.bind(this)),y(e,"remove",this.#v.bind(this)),y(e,"change",this.#x.bind(this)),y(e,"auto-change",this.#g.bind(this)),y(e,"readonly-change",this.#C.bind(this))}#m(){let e=this.#t.audioTracks;y(e,"add",this.#T.bind(this)),y(e,"remove",this.#T.bind(this)),y(e,"change",this.#S.bind(this))}#y(e){let{textTracks:t}=this.$state;t.set(this.#t.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:t(),trigger:e})}#b(e){e&&this.#d("media-text-track-change-request",e);let t=this.#t.textTracks.selected,{textTrack:i}=this.$state;i()!==t&&(i.set(t),this.dispatch("text-track-change",{detail:t,trigger:e}))}#T(e){let{audioTracks:t}=this.$state;t.set(this.#t.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:t(),trigger:e})}#S(e){let{audioTrack:t}=this.$state;t.set(this.#t.audioTracks.selected),e&&this.#d("media-audio-track-change-request",e),this.dispatch("audio-track-change",{detail:t(),trigger:e})}#v(e){let{qualities:t}=this.$state;t.set(this.#t.qualities.toArray()),this.dispatch("qualities-change",{detail:t(),trigger:e})}#x(e){let{quality:t}=this.$state;t.set(this.#t.qualities.selected),e&&this.#d("media-quality-change-request",e),this.dispatch("quality-change",{detail:t(),trigger:e})}#g(){let{qualities:e}=this.#t,t=e.auto;this.$state.autoQuality.set(t),t||this.#M()}#E=null;#P(){this.#M(),this.#E=d(()=>{let{qualities:e}=this.#t,{mediaWidth:t,mediaHeight:i}=this.$state,r=t(),s=i();if(r===0||s===0)return;let a=null,l=1/0;for(let u of e){let c=Math.abs(u.width-r)+Math.abs(u.height-s);c<l&&(l=c,a=u)}a&&e[I.select](a,!0,new F("resize",{detail:{width:r,height:s}}))})}#M(){this.#E?.(),this.#E=null}#C(){this.$state.canSetQuality.set(!this.#t.qualities.readonly)}#w(){let{canSetVolume:e,isGoogleCastConnected:t}=this.$state;if(t()){e.set(!1);return}Ps().then(e.set)}"provider-change"(e){let t=this.#t.$provider(),i=e.detail;t?.type!==i?.type&&(t?.destroy?.(),t?.scope?.dispose(),this.#t.$provider.set(e.detail),t&&e.detail===null&&this.#k(e))}"provider-loader-change"(e){}"auto-play"(e){this.$state.autoPlayError.set(null)}"auto-play-fail"(e){this.$state.autoPlayError.set(e.detail),this.#c()}"can-load"(e){this.$state.canLoad.set(!0),this.#i.set("can-load",e),this.#t.textTracks[ee.canLoad](),this.#d("media-start-loading",e)}"can-load-poster"(e){this.$state.canLoadPoster.set(!0),this.#i.set("can-load-poster",e),this.#d("media-poster-start-loading",e)}"media-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.$state.viewType();this.$state.mediaType.set(e.detail);let r=this.$state.providedViewType(),s=r==="unknown"?e.detail:r;i!==s&&(x?this.$state.inferredViewType.set(s):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(e.detail),this.dispatch("view-type-change",{detail:s,trigger:e}))})},0))}"stream-type-change"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let{streamType:i,inferredStreamType:r}=this.$state;r.set(e.detail),e.detail=i()}"rate-change"(e){let{storage:t}=this.#t,{canPlay:i}=this.$state;this.$state.playbackRate.set(e.detail),this.#d("media-rate-change-request",e),i()&&t?.setPlaybackRate?.(e.detail)}"remote-playback-change"(e){let{remotePlaybackState:t,remotePlaybackType:i}=this.$state,{type:r,state:s}=e.detail,a=s==="connected";i.set(r),t.set(s);let l=r==="airplay"?"media-airplay-request":"media-google-cast-request";if(a)this.#d(l,e);else{let u=this.#e.queue.peek(l);u&&(e.request=u,e.triggers.add(u))}}"sources-change"(e){let t=this.$state.sources(),i=e.detail;this.$state.sources.set(i),this.#R(t,i,e)}#R(e,t,i){let{qualities:r}=this.#t,s=!1,a=!1;for(let l of e){if(!Ai(l))continue;if(!t.some(c=>c.src===l.src)){let c=r.getBySrc(l.src);c&&(r[I.remove](c,i),a=!0)}}a&&!r.length&&(this.$state.savedState.set(null),r[I.reset](i));for(let l of t){if(!Ai(l)||r.getBySrc(l.src))continue;let u={id:l.id??l.height+"p",bitrate:null,codec:null,...l,selected:!1};r[I.add](u,i),s=!0}s&&!r[we.enableAuto]&&(this.#P(),r[we.enableAuto]=this.#P.bind(this),r[we.setAuto](!0,i))}"source-change"(e){e.isQualityChange=e.originEvent?.type==="quality-change";let t=e.detail;this.#k(e,e.isQualityChange),this.#i.set(e.type,e),this.$state.source.set(t),this.el?.setAttribute("aria-busy","true")}#k(e,t=!1){let{audioTracks:i,qualities:r}=this.#t;if(!t){this.#s=[],this.#o=[-1,-1],i[I.reset](e),r[I.reset](e),Rs(this.$state,t),this.#c();return}Rs(this.$state,t),this.#c()}abort(e){let t=this.#i.get("source-change");t&&e.triggers.add(t);let i=this.#i.get("can-load");i&&!e.triggers.hasType("can-load")&&e.triggers.add(i)}"load-start"(e){let t=this.#i.get("source-change");t&&e.triggers.add(t)}error(e){this.$state.error.set(e.detail);let t=this.#i.get("abort");t&&e.triggers.add(t)}"loaded-metadata"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"loaded-data"(e){let t=this.#i.get("load-start");t&&e.triggers.add(t)}"can-play"(e){let t=this.#i.get("loaded-metadata");t&&e.triggers.add(t),this.#$(e.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(e){this.#$(e.detail);let t=this.#i.get("can-play");t&&e.triggers.add(t)}#$(e){let{seekable:t,buffered:i,intrinsicDuration:r,canPlay:s}=this.$state;s.set(!0),i.set(e.buffered),t.set(e.seekable);let a=wt(e.seekable)??1/0;r.set(a)}"duration-change"(e){let{live:t,intrinsicDuration:i,providedDuration:r,clipEndTime:s,ended:a}=this.$state,l=e.detail;if(!t()){let u=Number.isNaN(l)?0:l;i.set(u),a()&&this.#A(e)}(r()>0||s()>0)&&e.stopImmediatePropagation()}progress(e){let{buffered:t,bufferedEnd:i,seekable:r,seekableEnd:s,live:a,intrinsicDuration:l}=this.$state,{buffered:u,seekable:c}=e.detail,p=wt(u)??1/0,b=u.length!==t().length,C=p>i(),$=wt(c)??1/0,V=c.length!==r().length,U=$>s();(b||C)&&t.set(u),(V||U)&&r.set(c),a()&&(l.set($),this.dispatch("duration-change",{detail:$,trigger:e}))}play(e){let{paused:t,autoPlayError:i,ended:r,autoPlaying:s,playsInline:a,pointer:l,muted:u,viewType:c,live:p,userBehindLiveEdge:b}=this.$state;if(this.#V(),!t()){e.stopImmediatePropagation();return}e.autoPlay=s();let C=this.#i.get("waiting");C&&e.triggers.add(C),this.#d("media-play-request",e),this.#i.set("play",e),t.set(!1),i.set(null),e.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:u()},trigger:e})),s.set(!1)),(r()||this.#e.replaying)&&(this.#e.replaying=!1,r.set(!1),this.handle(this.createEvent("replay",{trigger:e}))),!a()&&c()==="video"&&l()==="coarse"&&this.#t.remote.enterFullscreen("prefer-media",e),p()&&!b()&&this.#t.remote.seekToLiveEdge(e)}#V(e){if(!m(this.#t.$provider))return;let{ended:i,seekableStart:r,clipStartTime:s,clipEndTime:a,realCurrentTime:l,duration:u}=this.$state,c=l()<s()||a()>0&&l()>=a()||Math.abs(l()-u())<.1||i();return c&&this.dispatch("media-seek-request",{detail:(s()>0?0:r())+.1,trigger:e}),c}"play-fail"(e){let{muted:t,autoPlaying:i}=this.$state,r=this.#i.get("play");r&&e.triggers.add(r),this.#d("media-play-request",e);let{paused:s,playing:a}=this.$state;s.set(!0),a.set(!1),this.#c(),this.#i.set("play-fail",e),e.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:t(),error:e.detail},trigger:e})),i.set(!1))}playing(e){let t=this.#i.get("play"),i=this.#i.get("seeked");t?e.triggers.add(t):i&&e.triggers.add(i),setTimeout(()=>this.#c(),0);let{paused:r,playing:s,live:a,liveSyncPosition:l,seekableEnd:u,started:c,currentTime:p,seeking:b,ended:C}=this.$state;if(r.set(!1),s.set(!0),b.set(!1),C.set(!1),this.#e.looping){this.#e.looping=!1;return}if(a()&&!c()&&p()===0){let $=l()??u()-2;Number.isFinite($)&&this.#t.$provider().setCurrentTime($)}this.started(e)}started(e){let{started:t}=this.$state;t()||(t.set(!0),this.handle(this.createEvent("started",{trigger:e})))}pause(e){this.el?.isConnected||(this.#l=!0),this.#d("media-pause-request",e);let t=this.#i.get("seeked");t&&e.triggers.add(t);let{paused:i,playing:r}=this.$state;i.set(!0),r.set(!1),this.#r&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:e})),this.#r=!1},0),this.#c()}"time-change"(e){if(this.#e.looping){e.stopImmediatePropagation();return}let{waiting:t,played:i,clipEndTime:r,realCurrentTime:s,currentTime:a}=this.$state,l=e.detail,u=r();s.set(l),this.#I(),t.set(!1);for(let c of this.#t.textTracks)c[ee.updateActiveCues](l,e);u>0&&l>=u&&(this.#r=!0,this.dispatch("media-pause-request",{trigger:e})),this.#q(),this.dispatch("time-update",{detail:{currentTime:a(),played:i()},trigger:e})}#I(){let{currentTime:e,played:t,paused:i}=this.$state;i()||(this.#o=_o(this.#s,this.#o,e()),t.set(new Zt(this.#s)))}#A(e){let{clipStartTime:t,clipEndTime:i,duration:r}=this.$state;t()>0||i()>0||this.handle(this.createEvent("time-change",{detail:r(),trigger:e}))}#q(){let{storage:e}=this.#t,{canPlay:t,realCurrentTime:i}=this.$state;t()&&e?.setTime?.(i())}"audio-gain-change"(e){let{storage:t}=this.#t,{canPlay:i,audioGain:r}=this.$state;r.set(e.detail),this.#d("media-audio-gain-change-request",e),i()&&t?.setAudioGain?.(r())}"volume-change"(e){let{storage:t}=this.#t,{volume:i,muted:r,canPlay:s}=this.$state,a=e.detail;i.set(a.volume),r.set(a.muted||a.volume===0),this.#d("media-volume-change-request",e),this.#d(a.muted?"media-mute-request":"media-unmute-request",e),s()&&(t?.setVolume?.(i()),t?.setMuted?.(r()))}seeking=Pe(e=>{let{seeking:t,realCurrentTime:i,paused:r}=this.$state;t.set(!0),i.set(e.detail),this.#d("media-seeking-request",e),r()&&(this.#a=e,this.#L()),this.#o=[-1,-1]},150,{leading:!0});seeked(e){let{seeking:t,currentTime:i,realCurrentTime:r,paused:s,seekableEnd:a,ended:l}=this.$state;if(this.#e.seeking)t.set(!0),e.stopImmediatePropagation();else if(t()){let u=this.#i.get("waiting");u&&e.triggers.add(u);let c=this.#i.get("seeking");c&&!e.triggers.has(c)&&e.triggers.add(c),s()&&this.#_(),t.set(!1),r.set(e.detail),this.#d("media-seek-request",e);let p=e?.originEvent;p?.isTrusted&&!(p instanceof MessageEvent)&&!/seek/.test(p.type)&&this.started(e)}Math.floor(i())!==Math.floor(a())?l.set(!1):this.end(e)}waiting(e){this.#n||this.#e.seeking||(e.stopImmediatePropagation(),this.#a=e,this.#L())}#L=ri(()=>{if(!this.#a)return;this.#n=!0;let{waiting:e,playing:t}=this.$state;e.set(!0),t.set(!1);let i=this.createEvent("waiting",{trigger:this.#a});this.#i.set("waiting",i),this.dispatch(i),this.#a=void 0,this.#n=!1},300);end(e){let{loop:t,ended:i}=this.$state;if(!(!t()&&i())){if(t()){setTimeout(()=>{requestAnimationFrame(()=>{this.#V(e),this.dispatch("media-loop-request",{trigger:e})})},10);return}setTimeout(()=>this.#D(e),0)}}#D(e){let{storage:t}=this.#t,{paused:i,seeking:r,ended:s,duration:a}=this.$state;this.#A(e),i()||this.dispatch("pause",{trigger:e}),r()&&this.dispatch("seeked",{detail:a(),trigger:e}),s.set(!0),this.#c(),t?.setTime?.(a(),!0),this.dispatch("ended",{trigger:e})}#_(){this.#L.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(e){let t=e.detail;this.$state.fullscreen.set(t),this.#d(t?"media-enter-fullscreen-request":"media-exit-fullscreen-request",e)}"fullscreen-error"(e){this.#d("media-enter-fullscreen-request",e),this.#d("media-exit-fullscreen-request",e)}"orientation-change"(e){let t=e.detail.lock;this.#d(t?"media-orientation-lock-request":"media-orientation-unlock-request",e)}"picture-in-picture-change"(e){let t=e.detail;this.$state.pictureInPicture.set(t),this.#d(t?"media-enter-pip-request":"media-exit-pip-request",e)}"picture-in-picture-error"(e){this.#d("media-enter-pip-request",e),this.#d("media-exit-pip-request",e)}"title-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredTitle.set(e.detail))}"poster-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredPoster.set(e.detail))}};var Yr=class extends me{onSetup(){if(this.#e(),x)return;let e=[this.#r,this.#o,this.#d,this.#p,this.#a,this.#h,this.#u,this.#f,this.#y,this.#m,this.#n,this.#c,this.#l,this.#t,this.#s];for(let t of e)d(t.bind(this))}#e(){let e={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},t=new Set(["currentTime","paused","playbackRate","volume"]);for(let i of Object.keys(this.$props))t.has(i)||this.$state[e[i]??i]?.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}#t(){let{viewType:e,streamType:t,title:i,poster:r,loop:s}=this.$props,a=this.$state;a.providedPoster.set(r()),a.providedStreamType.set(t()),a.providedViewType.set(e()),a.providedTitle.set(i()),a.providedLoop.set(s())}#i(){}#r(){let{artist:e,artwork:t}=this.$props;this.$state.artist.set(e()),this.$state.artwork.set(t())}#s(){let{title:e}=this.$state;this.dispatch("title-change",{detail:e()})}#o(){let e=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(e),this.dispatch("auto-play-change",{detail:e})}#n(){let e=this.$state.loop();this.dispatch("loop-change",{detail:e})}#a(){let e=this.$props.controls();this.$state.controls.set(e)}#l(){let{poster:e}=this.$state;this.dispatch("poster-change",{detail:e()})}#h(){let e=this.$props.crossOrigin()??this.$props.crossorigin(),t=e===!0?"":e;this.$state.crossOrigin.set(t)}#u(){let{duration:e}=this.$props;this.dispatch("media-duration-change-request",{detail:e()})}#c(){let e=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(e),this.dispatch("plays-inline-change",{detail:e})}#d(){let{clipStartTime:e}=this.$props;this.dispatch("media-clip-start-change-request",{detail:e()})}#p(){let{clipEndTime:e}=this.$props;this.dispatch("media-clip-end-change-request",{detail:e()})}#f(){this.dispatch("live-change",{detail:this.$state.live()})}#m(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#y(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}};var Sn=["play","pause","seekforward","seekbackward","seekto"],jr=class extends me{onConnect(){d(this.#t.bind(this)),d(this.#i.bind(this));let e=this.#r.bind(this);for(let t of Sn)navigator.mediaSession.setActionHandler(t,e);P(this.#e.bind(this))}#e(){for(let e of Sn)navigator.mediaSession.setActionHandler(e,null)}#t(){let{title:e,artist:t,artwork:i,poster:r}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:e(),artist:t(),artwork:i()??[{src:r()}]})}#i(){let{canPlay:e,paused:t}=this.$state;navigator.mediaSession.playbackState=e()?t()?"paused":"playing":"none"}#r(e){let t=new F("media-session-action",{detail:e});switch(e.action){case"play":this.dispatch("media-play-request",{trigger:t});break;case"pause":this.dispatch("media-pause-request",{trigger:t});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:ke(e.seekTime)?e.seekTime:this.$state.currentTime()+(e.seekOffset??10),trigger:t});break}}};var zi=M(!1);x||(y(document,"pointerdown",()=>{zi.set(!1)}),y(document,"keydown",o=>{o.metaKey||o.altKey||o.ctrlKey||zi.set(!0)}));var X=class extends Z{#e=M(!1);onConnect(e){d(()=>{if(!zi()){this.#e.set(!1),Xr(e,!1),this.listen("pointerenter",this.#r.bind(this)),this.listen("pointerleave",this.#s.bind(this));return}let t=document.activeElement===e;this.#e.set(t),Xr(e,t),this.listen("focus",this.#t.bind(this)),this.listen("blur",this.#i.bind(this))})}focused(){return this.#e()}#t(){this.#e.set(!0),Xr(this.el,!0)}#i(){this.#e.set(!1),Xr(this.el,!1)}#r(){xn(this.el,!0)}#s(){xn(this.el,!1)}};function Xr(o,e){w(o,"data-focus",e),w(o,"data-hocus",e)}function xn(o,e){w(o,"data-hocus",e),w(o,"data-hover",e)}var Mn,Pn,Cn,kn,wn,Rn,Ln,$n,Vn,An,_n,In,qn,Dn,On,Hn,Fn,Gn,Bn,Qn,Kn,Nn,Wn,Un,zn,Yn,jn,Xn,Jn,ae,Dt,le,q,v,Le,Is,ui,qs,Ds,Zn,ea,ta,Yi,Os,ia,Hs,ra,Fs,sa,Gs,oa,Bs,na,Qs,aa,la,da,ua,D=class D extends(Jn=f,Xn=[_],jn=[_],Yn=[_],zn=[_],Un=[_],Wn=[_],Nn=[_],Kn=[_],Qn=[_],Bn=[_],Gn=[_],Fn=[_],Hn=[_],On=[_],Dn=[_],qn=[_],In=[Q],_n=[Q],An=[Q],Vn=[Q],$n=[Q],Ln=[Q],Rn=[Q],wn=[Q],kn=[Q],Cn=[Q],Pn=[Q],Mn=[Q],Jn){constructor(){super();G(q,5,this);g(this,v);g(this,ae);g(this,Dt);g(this,le);B(this,"canPlayQueue",G(q,8,this,new di)),G(q,11,this);B(this,"remoteControl",G(q,12,this)),G(q,15,this);g(this,ui,!1);B(this,"orientation",G(q,16,this)),G(q,19,this);new Yr;let t={player:this,qualities:new Or,audioTracks:new Dr,storage:null,$provider:M(null),$providerSetup:M(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new _i(void 0),t.remote.setPlayer(this),t.textTracks=new qr,t.textTracks[ee.crossOrigin]=this.$state.crossOrigin,t.textRenderers=new Ir(t),t.ariaKeys={},T(this,ae,t),J(Ar,t),this.orientation=new oi,new X,new Fr(t);let i=new Ur;T(this,Dt,new zr(i,t)),T(this,le,new Wr(n(this,Dt),i,t)),t.delegate=new Kr(n(this,Dt).handle.bind(n(this,Dt)),t),t.notify=t.delegate.notify.bind(t.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new jr,new Ui("load",this.startLoading.bind(this)),new Ui("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){h(this,v,ea).call(this),d(h(this,v,Zn).bind(this)),d(h(this,v,ra).bind(this)),d(h(this,v,ia).bind(this)),d(h(this,v,oa).bind(this)),d(h(this,v,sa).bind(this)),d(h(this,v,aa).bind(this)),d(h(this,v,na).bind(this))}onAttach(t){t.setAttribute("data-media-player",""),L(t,"tabindex","0"),L(t,"role","region"),d(h(this,v,da).bind(this)),x?h(this,v,qs).call(this):d(h(this,v,qs).bind(this)),x?h(this,v,Ds).call(this):d(h(this,v,Ds).bind(this)),y(t,"find-media-player",h(this,v,ta).bind(this))}onConnect(t){Cr&&w(t,"data-iphone","");let i=window.matchMedia("(pointer: coarse)");h(this,v,Os).call(this,i),i.onchange=h(this,v,Os).bind(this);let r=new ResizeObserver(Ae(h(this,v,Yi).bind(this)));r.observe(t),d(h(this,v,Yi).bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),P(()=>{r.disconnect(),i.onchange=null})}onDestroy(){n(this,ae).player=null,this.canPlayQueue.reset()}get provider(){return n(this,v,Le)}get controls(){return n(this,le).controls}set controls(t){n(this,v,Is).controls.set(t)}get title(){return m(this.$state.providedTitle)}set title(t){if(n(this,ui)){T(this,ui,!1);return}this.$state.providedTitle.set(t)}get qualities(){return n(this,ae).qualities}get audioTracks(){return n(this,ae).audioTracks}get textTracks(){return n(this,ae).textTracks}get textRenderers(){return n(this,ae).textRenderers}get duration(){return this.$state.duration()}set duration(t){n(this,v,Is).duration.set(t)}get paused(){return m(this.$state.paused)}set paused(t){h(this,v,Hs).call(this,t)}get muted(){return m(this.$state.muted)}set muted(t){h(this,v,Fs).call(this,t)}get currentTime(){return m(this.$state.currentTime)}set currentTime(t){h(this,v,Gs).call(this,t)}get volume(){return m(this.$state.volume)}set volume(t){h(this,v,Bs).call(this,t)}get playbackRate(){return m(this.$state.playbackRate)}set playbackRate(t){h(this,v,Qs).call(this,t)}async play(t){return n(this,le).play(t)}async pause(t){return n(this,le).pause(t)}async enterFullscreen(t,i){return n(this,le).enterFullscreen(t,i)}async exitFullscreen(t,i){return n(this,le).exitFullscreen(t,i)}enterPictureInPicture(t){return n(this,le).enterPictureInPicture(t)}exitPictureInPicture(t){return n(this,le).exitPictureInPicture(t)}seekToLiveEdge(t){n(this,le).seekToLiveEdge(t)}startLoading(t){n(this,ae).notify("can-load",void 0,t)}startLoadingPoster(t){n(this,ae).notify("can-load-poster",void 0,t)}requestAirPlay(t){return n(this,le).requestAirPlay(t)}requestGoogleCast(t){return n(this,le).requestGoogleCast(t)}setAudioGain(t,i){return n(this,le).setAudioGain(t,i)}destroy(){super.destroy(),n(this,ae).remote.setPlayer(null),this.dispatch("destroy")}};q=Y(Jn),ae=new WeakMap,Dt=new WeakMap,le=new WeakMap,v=new WeakSet,Le=function(){return n(this,ae).$provider()},Is=function(){return this.$props},ui=new WeakMap,qs=function(){let t=this.$el,{title:i,live:r,viewType:s,providedTitle:a}=this.$state,l=r(),u=ko(s()),c=u!=="Unknown"?`${l?"Live ":""}${u}`:l?"Live":"Media",p=i();w(this.el,"aria-label",`${c} Player`+(p?` - ${p}`:"")),!x&&t?.hasAttribute("title")&&(T(this,ui,!0),t?.removeAttribute("title"))},Ds=function(){let t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),w(this.el,"data-orientation",t),h(this,v,Yi).call(this)},Zn=function(){this.$state.canPlay()&&n(this,v,Le)?this.canPlayQueue.start():this.canPlayQueue.stop()},ea=function(){if(D[Qr]){this.setAttributes(D[Qr]);return}let t={"data-load":function(){return this.$props.load()},"data-captions":function(){let r=this.$state.textTrack();return!!r&&te(r)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:r,canPlay:s,waiting:a}=this.$state;return r()&&(!s()||a())},"data-error":function(){let{error:r}=this.$state;return!!r()},"data-autoplay-error":function(){let{autoPlayError:r}=this.$state;return!!r()}},i={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let r of yn){let s="data-"+(i[r]??Po(r));t[s]=function(){return this.$state[r]()}}delete t.title,D[Qr]=t,this.setAttributes(t)},ta=function(t){t.detail(this)},Yi=function(){if(x||!this.el)return;let t=this.el.clientWidth,i=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(i),ye(this.el,"--player-width",t+"px"),ye(this.el,"--player-height",i+"px")},Os=function(t){if(x)return;let i=t.matches?"coarse":"fine";w(this.el,"data-pointer",i),this.$state.pointer.set(i),h(this,v,Yi).call(this)},ia=function(){h(this,v,Hs).call(this,this.$props.paused())},Hs=function(t){t?this.canPlayQueue.enqueue("paused",()=>n(this,le).pause()):this.canPlayQueue.enqueue("paused",()=>n(this,le).play())},ra=function(){h(this,v,Fs).call(this,this.$props.muted())},Fs=function(t){this.canPlayQueue.enqueue("muted",()=>{n(this,v,Le)&&n(this,v,Le).setMuted(t)})},sa=function(){h(this,v,Gs).call(this,this.$props.currentTime())},Gs=function(t){this.canPlayQueue.enqueue("currentTime",()=>{let{currentTime:i,clipStartTime:r,seekableStart:s,seekableEnd:a}=this.$state;t!==m(i)&&m(()=>{if(!n(this,v,Le))return;let l=t+r(),u=Math.floor(l)===Math.floor(a()),c=u?a():Math.min(Math.max(s()+.1,l),a()-.1);Number.isFinite(c)&&n(this,v,Le).setCurrentTime(c)})})},oa=function(){h(this,v,Bs).call(this,this.$props.volume())},Bs=function(t){let i=Vi(0,t,1);this.canPlayQueue.enqueue("volume",()=>{n(this,v,Le)&&n(this,v,Le).setVolume(i)})},na=function(){h(this,v,Qs).call(this,this.$props.playbackRate())},Qs=function(t){this.canPlayQueue.enqueue("rate",()=>{n(this,v,Le)&&n(this,v,Le).setPlaybackRate?.(t)})},aa=function(){h(this,v,la).call(this,this.$props.playsInline())},la=function(t){this.canPlayQueue.enqueue("playsinline",()=>{n(this,v,Le)&&n(this,v,Le).setPlaysInline?.(t)})},da=function(){let t=this.$props.storage(),i=A(t)?new Ii:t;if(i?.onChange){let{source:r}=this.$state,s=A(t)?t:this.el?.id,a=He(h(this,v,ua).bind(this));d(()=>i.onChange(r(),a(),s||void 0))}n(this,ae).storage=i,n(this,ae).textTracks.setStorage(i),P(()=>{i?.onDestroy?.(),n(this,ae).storage=null,n(this,ae).textTracks.setStorage(null)})},ua=function(){let{clipStartTime:t,clipEndTime:i}=this.$props,{source:r}=this.$state,s=r();return s.src?`${s.src}:${t()}:${i()}`:null},E(q,2,"provider",Yn,D),E(q,2,"controls",zn,D),E(q,2,"title",Wn,D),E(q,2,"qualities",Nn,D),E(q,2,"audioTracks",Kn,D),E(q,2,"textTracks",Qn,D),E(q,2,"textRenderers",Bn,D),E(q,2,"duration",Gn,D),E(q,2,"paused",Fn,D),E(q,2,"muted",Hn,D),E(q,2,"currentTime",On,D),E(q,2,"volume",Dn,D),E(q,2,"playbackRate",qn,D),E(q,1,"play",In,D),E(q,1,"pause",_n,D),E(q,1,"enterFullscreen",An,D),E(q,1,"exitFullscreen",Vn,D),E(q,1,"enterPictureInPicture",$n,D),E(q,1,"exitPictureInPicture",Ln,D),E(q,1,"seekToLiveEdge",Rn,D),E(q,1,"startLoading",wn,D),E(q,1,"startLoadingPoster",kn,D),E(q,1,"requestAirPlay",Cn,D),E(q,1,"requestGoogleCast",Pn,D),E(q,1,"setAudioGain",Mn,D),E(q,5,"canPlayQueue",Xn,D),E(q,5,"remoteControl",jn,D),E(q,5,"orientation",Un,D),j(q,D),B(D,"props",vn),B(D,"state",ws);var Tn=D;function ha(o,e){return fetch(o,e).then(t=>t.text()).then(t=>/type="static"/.test(t)?"on-demand":"live")}function Ks(o,e){return fetch(o,e).then(t=>t.text()).then(t=>{let i=Ld(t);if(i)return Ks(/^https?:/.test(i)?i:new URL(i,o).href,e);let r=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(t)?"on-demand":"live";return r==="live"&&$d(t)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(t)||t.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":r})}function Ld(o){let e=o.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split(`
`)[1].trim():null}function $d(o){let e=o.split(`
`);for(let t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){let i=parseFloat(t.split(":")[1]);if(!isNaN(i))return i}return-1}var Ns=new Map,Jr=class{#e=!1;#t;#i;#r;#s;constructor(e,t,i,r=[]){this.#i=e,this.#r=t,this.#s=i;let s=new Gi,a=new Fi,l=new it,u=new Hi,c=new Qi,p=new Bi,b=[c,p];this.#t=He(()=>{let $=t.$state.remotePlaybackLoader(),V=t.$props.preferNativeHLS()?[l,u,s,a,...b,...r]:[a,l,u,s,...b,...r];return $?[$,...V]:V});let{$state:C}=t;C.sources.set(ca(t.$props.src()));for(let $ of C.sources()){let V=this.#t().find(re=>re.canPlay($));if(!V)continue;let U=V.mediaType($);t.$state.source.set($),t.$state.mediaType.set(U),t.$state.inferredViewType.set(U),this.#s.set(V),this.#e=!0;break}}connect(){let e=this.#s();this.#e&&(this.#l(this.#r.$state.source(),e),this.#h(e),this.#e=!1),d(this.#o.bind(this)),d(this.#n.bind(this)),d(this.#u.bind(this)),d(this.#c.bind(this)),d(this.#d.bind(this))}#o(){this.#r.notify("sources-change",[...ca(this.#r.$props.src()),...this.#i()])}#n(){let{$state:e}=this.#r,t=e.sources(),i=m(e.source),r=this.#a(i,t);if(t[0]?.src&&!r.src&&!r.type){let{crossOrigin:a}=e,l=ei(a()),u=new AbortController;return Promise.all(t.map(c=>A(c.src)&&c.type==="?"?fetch(c.src,{method:"HEAD",credentials:l,signal:u.signal}).then(p=>(c.type=p.headers.get("content-type")||"??",Ns.set(c.src,c.type),c)).catch(()=>c):c)).then(c=>{if(u.signal.aborted)return;let p=this.#a(m(e.source),c);ge(),p.src||this.#r.notify("error",{message:"Failed to load resource.",code:4})}),()=>u.abort()}ge()}#a(e,t){let i={src:"",type:""},r=null,s=new F("sources-change",{detail:{sources:t}}),a=this.#t(),{started:l,paused:u,currentTime:c,quality:p,savedState:b}=this.#r.$state;for(let C of t){let $=a.find(V=>V.canPlay(C));if($){i=C,r=$;break}}if(Ai(i)){let C=p(),$=t.find(V=>V.src===C?.src);m(l)?b.set({paused:m(u),currentTime:m(c)}):b.set(null),$&&(i=$,s=new F("quality-change",{detail:{quality:C}}))}return ma(e,i)||this.#l(i,r,s),r!==m(this.#s)&&this.#h(r,s),i}#l(e,t,i){this.#r.notify("source-change",e,i),this.#r.notify("media-type-change",t?.mediaType(e)||"unknown",i)}#h(e,t){this.#r.$providerSetup.set(!1),this.#r.notify("provider-change",null,t),e&&m(()=>e.preconnect?.(this.#r)),this.#s.set(e),this.#r.notify("provider-loader-change",e,t)}#u(){let e=this.#r.$provider();if(!(!e||m(this.#r.$providerSetup))){if(this.#r.$state.canLoad()){Jt(()=>e.setup(),e.scope),this.#r.$providerSetup.set(!0);return}m(()=>e.preconnect?.())}}#c(){if(!this.#r.$providerSetup())return;let e=this.#r.$provider(),t=this.#r.$state.source(),i=m(this.#r.$state.crossOrigin),r=m(this.#r.$props.preferNativeHLS);if(!ma(e?.currentSrc,t)){if(this.#r.$state.canLoad()){let s=new AbortController;return Li(t)?(r||!kr())&&Ks(t.src,{credentials:ei(i),signal:s.signal}).then(a=>{this.#r.notify("stream-type-change",a)}).catch(xs):$i(t)?ha(t.src,{credentials:ei(i),signal:s.signal}).then(a=>{this.#r.notify("stream-type-change",a)}).catch(xs):this.#r.notify("stream-type-change","on-demand"),m(()=>{let a=m(this.#r.$state.preload);return e?.loadSource(t,a).catch(l=>{})}),()=>s.abort()}try{A(t.src)&&Ue(new URL(t.src).origin)}catch{}}}#d(){let e=this.#s(),{providedPoster:t,source:i,canLoadPoster:r}=this.#r.$state;if(!e||!e.loadPoster||!i()||!r()||t())return;let s=new AbortController,a=new F("source-change",{detail:i});return e.loadPoster(i(),this.#r,s).then(l=>{this.#r.notify("poster-change",l||"",a)}).catch(()=>{this.#r.notify("poster-change","",a)}),()=>{s.abort()}}};function ca(o){return(he(o)?o:[o]).map(e=>A(e)?{src:e,type:pa(e)}:{...e,type:pa(e.src,e.type)})}function pa(o,e){return A(e)&&e.length?e:A(o)&&Ns.has(o)?Ns.get(o):!e&&Li({src:o,type:""})?"application/x-mpegurl":!e&&$i({src:o,type:""})?"application/dash+xml":!A(o)||o.startsWith("blob:")?"video/object":o.includes("youtube")||o.includes("youtu.be")?"video/youtube":o.includes("vimeo")&&!o.includes("progressive_redirect")&&!o.includes(".m3u8")?"video/vimeo":"?"}function ma(o,e){return o?.src===e?.src&&o?.type===e?.type}var Zr=class{#e;#t;#i=[];constructor(e,t){this.#e=e,this.#t=t,d(this.#r.bind(this))}#r(){let e=this.#e();for(let t of this.#i)if(!e.some(i=>i.id===t.id)){let i=t.id&&this.#t.textTracks.getById(t.id);i&&this.#t.textTracks.remove(i)}for(let t of e){let i=t.id||Rt.createId(t);this.#t.textTracks.getById(i)||(t.id=i,this.#t.textTracks.add(t))}this.#i=e}};var fa,ga,Fe,ji,Xi,Ji,ci,pi,Ws,$e,ya,Us,zs,Ys,hi=class extends(ga=f,fa=[Q],ga){constructor(){super(...arguments);G(Ws,5,this);g(this,$e);g(this,Fe);g(this,ji);g(this,Xi,M([]));g(this,Ji,M([]));g(this,ci,null);g(this,pi,-1)}onSetup(){T(this,Fe,S()),T(this,ji,new Jr(n(this,Xi),n(this,Fe),this.$state.loader,this.$props.loaders()))}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){n(this,ji).connect(),new Zr(n(this,Ji),n(this,Fe));let i=new ResizeObserver(Ae(h(this,$e,zs).bind(this)));i.observe(t);let r=new MutationObserver(h(this,$e,Ys).bind(this));r.observe(t,{attributes:!0,childList:!0}),h(this,$e,zs).call(this),h(this,$e,Ys).call(this),P(()=>{i.disconnect(),r.disconnect()})}load(t){t?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(n(this,pi)),T(this,pi,requestAnimationFrame(()=>h(this,$e,ya).call(this,t))),P(()=>{window.cancelAnimationFrame(n(this,pi))})}onDestroy(){T(this,ci,null),h(this,$e,Us).call(this)}};Ws=Y(ga),Fe=new WeakMap,ji=new WeakMap,Xi=new WeakMap,Ji=new WeakMap,ci=new WeakMap,pi=new WeakMap,$e=new WeakSet,ya=function(t){if(!this.scope)return;let i=this.$state.loader(),{$provider:r}=n(this,Fe);n(this,ci)===i&&i?.target===t&&m(r)||(h(this,$e,Us).call(this),T(this,ci,i),i&&(i.target=t||null),!(!i||!t)&&i.load(n(this,Fe)).then(s=>{this.scope&&m(this.$state.loader)===i&&n(this,Fe).notify("provider-change",s)}))},Us=function(){n(this,Fe)?.notify("provider-change",null)},zs=function(){if(!this.el)return;let{player:t,$state:i}=n(this,Fe),r=this.el.offsetWidth,s=this.el.offsetHeight;t&&(i.mediaWidth.set(r),i.mediaHeight.set(s),t.el&&(ye(t.el,"--media-width",r+"px"),ye(t.el,"--media-height",s+"px")))},Ys=function(){let t=[],i=[],r=this.el.children;for(let s of r)if(!s.hasAttribute("data-vds")){if(s instanceof HTMLSourceElement){let a={id:s.id,src:s.src,type:s.type};for(let l of["id","src","width","height","bitrate","codec"]){let u=s.getAttribute(`data-${l}`);A(u)&&(a[l]=/id|src|codec/.test(l)?u:Number(u))}t.push(a)}else if(s instanceof HTMLTrackElement){let a={src:s.src,kind:s.track.kind,language:s.srclang,label:s.label,default:s.default,type:s.getAttribute("data-type")};i.push({id:s.id||Rt.createId(a),...a})}}n(this,Xi).set(t),n(this,Ji).set(i),ge()},E(Ws,1,"load",fa,hi),j(Ws,hi),B(hi,"props",{loaders:[]}),B(hi,"state",new ce({loader:null}));var va=class extends f{static props={translations:null};static state=new ce({label:null,busy:!1});#e;#t=!1;onSetup(){this.#e=S()}onAttach(e){e.style.display="contents"}onConnect(e){e.setAttribute("data-media-announcer",""),L(e,"role","status"),L(e,"aria-live","polite");let{busy:t}=this.$state;this.setAttributes({"aria-busy":()=>t()?"true":null}),this.#t=!0,d(this.#i.bind(this)),d(this.#n.bind(this)),d(this.#o.bind(this)),d(this.#r.bind(this)),d(this.#s.bind(this)),d(this.#h.bind(this)),d(this.#c.bind(this)),ge(),this.#t=!1}#i(){let{paused:e}=this.#e.$state;this.#d(e()?"Pause":"Play")}#r(){let{fullscreen:e}=this.#e.$state;this.#d(e()?"Enter Fullscreen":"Exit Fullscreen")}#s(){let{pictureInPicture:e}=this.#e.$state;this.#d(e()?"Enter PiP":"Exit PiP")}#o(){let{textTrack:e}=this.#e.$state;this.#d(e()?"Closed-Captions On":"Closed-Captions Off")}#n(){let{muted:e,volume:t,audioGain:i}=this.#e.$state;this.#d(e()||t()===0?"Mute":`${Math.round(t()*(i()??1)*100)}% ${this.#u("Volume")}`)}#a=-1;#l=-1;#h(){let{seeking:e,currentTime:t}=this.#e.$state,i=e();this.#a>0?(window.clearTimeout(this.#l),this.#l=window.setTimeout(()=>{if(!this.scope)return;let r=m(t),s=Math.abs(r-this.#a);if(s>=1){let a=r>=this.#a,l=ni(s);this.#d(`${this.#u(a?"Seek Forward":"Seek Backward")} ${l}`)}this.#a=-1,this.#l=-1},300)):i&&(this.#a=m(t))}#u(e){let{translations:t}=this.$props;return t?.()?.[e||""]??e}#c(){let{label:e,busy:t}=this.$state,i=this.#u(e());if(this.#t)return;t.set(!0);let r=window.setTimeout(()=>void t.set(!1),150);return this.el&&w(this.el,"aria-label",i),A(i)&&this.dispatch("change",{detail:i}),()=>window.clearTimeout(r)}#d(e){let{label:t}=this.$state;t.set(e)}};var ba=class extends f{static props={hideDelay:2e3,hideOnMouseLeave:!1};#e;onSetup(){this.#e=S(),d(this.#i.bind(this))}onAttach(e){let{pictureInPicture:t,fullscreen:i}=this.#e.$state;ye(e,"pointer-events","none"),L(e,"role","group"),this.setAttributes({"data-visible":this.#r.bind(this),"data-fullscreen":i,"data-pip":t}),d(()=>{this.dispatch("change",{detail:this.#r()})}),d(this.#t.bind(this)),d(()=>{let r=i();for(let s of["top","right","bottom","left"])ye(e,`padding-${s}`,r&&`env(safe-area-inset-${s})`)})}#t(){if(!this.el)return;let{nativeControls:e}=this.#e.$state,t=e();w(this.el,"aria-hidden",t?"true":null),ye(this.el,"display",t?"none":null)}#i(){let{controls:e}=this.#e.player,{hideDelay:t,hideOnMouseLeave:i}=this.$props;e.defaultDelay=t()===2e3?this.#e.$props.controlsDelay():t(),e.hideOnMouseLeave=i()}#r(){let{controlsVisible:e}=this.#e.$state;return e()}};var Ea=class extends f{onAttach(e){e.style.pointerEvents||ye(e,"pointer-events","auto")}};var mi=class extends Z{#e;constructor(e){super(),this.#e=e,d(this.#t.bind(this))}onDestroy(){this.#s?.(),this.#s=null}#t(){let e=this.#e.trigger();if(!e){this.hide();return}let t=this.show.bind(this),i=this.hide.bind(this);this.#e.listen(e,t,i)}#i=-1;#r=-1;#s=null;show(e){this.#o(),window.cancelAnimationFrame(this.#r),this.#r=-1,this.#s?.(),this.#s=null,this.#i=window.setTimeout(()=>{this.#i=-1;let t=this.#e.content();t&&t.style.removeProperty("display"),m(()=>this.#e.onChange(!0,e))},this.#e.showDelay?.()??0)}hide(e){this.#o(),m(()=>this.#e.onChange(!1,e)),this.#r=requestAnimationFrame(()=>{this.#o(),this.#r=-1;let t=this.#e.content();if(t){let i=()=>{t.style.display="none",this.#s=null};if(Fo(t)){this.#s?.();let s=y(t,"animationend",i,{once:!0});this.#s=s}else i()}})}#o(){window.clearTimeout(this.#i),this.#i=-1}};var rt=ve();var Vd=0,Sa=class extends f{static props={showDelay:700};#e=`media-tooltip-${++Vd}`;#t=M(null);#i=M(null);constructor(){super(),new X;let{showDelay:e}=this.$props;new mi({trigger:this.#t,content:this.#i,showDelay:e,listen(t,i,r){y(t,"touchstart",s=>s.preventDefault(),{passive:!1}),d(()=>{zi()&&y(t,"focus",i),y(t,"blur",r)}),y(t,"mouseenter",i),y(t,"mouseleave",r)},onChange:this.#a.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onSetup(){J(rt,{trigger:this.#t,content:this.#i,attachTrigger:this.#r.bind(this),detachTrigger:this.#s.bind(this),attachContent:this.#o.bind(this),detachContent:this.#n.bind(this)})}#r(e){this.#t.set(e);let t=e.getAttribute("data-media-tooltip");t&&this.el?.setAttribute(`data-media-${t}-tooltip`,""),w(e,"data-describedby",this.#e)}#s(e){e.removeAttribute("data-describedby"),e.removeAttribute("aria-describedby"),this.#t.set(null)}#o(e){e.setAttribute("id",this.#e),e.style.display="none",L(e,"role","tooltip"),this.#i.set(e)}#n(e){e.removeAttribute("id"),e.removeAttribute("role"),this.#i.set(null)}#a(e){let t=this.#t(),i=this.#i();t&&w(t,"aria-describedby",e?this.#e:null);for(let r of[this.el,t,i])r&&w(r,"data-visible",e)}};var xa=class extends f{constructor(){super(),new X}onConnect(e){P(Lt(()=>{if(!this.connectScope)return;this.#e();let t=H(rt);P(()=>{let i=this.#t();i&&t.detachTrigger(i)})}))}#e(){let e=this.#t(),t=H(rt);e&&t.attachTrigger(e)}#t(){let e=this.el.firstElementChild;return e?.localName==="button"||e?.getAttribute("role")==="button"?e:this.el}};var Ta=class extends f{static props={placement:"top center",offset:0,alignOffset:0};constructor(){super(),new X;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){this.#e(e),Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){this.#e(e);let t=H(rt);P(()=>t.detachContent(e)),P(Lt(()=>{this.connectScope&&d(this.#t.bind(this))}))}#e(e){H(rt).attachContent(e)}#t(){let{placement:e,offset:t,alignOffset:i}=this.$props;return $r(this.el,this.#i(),e(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:t()})}#i(){return H(rt).trigger()}};var N=class extends Z{static props={disabled:!1};#e;constructor(e){super(),this.#e=e,new X,e.keyShortcut&&new Di(e.keyShortcut)}onSetup(){let{disabled:e}=this.$props;this.setAttributes({"data-pressed":this.#e.isPresssed,"aria-pressed":this.#t.bind(this),"aria-disabled":()=>e()?"true":null})}onAttach(e){L(e,"tabindex","0"),L(e,"role","button"),L(e,"type","button")}onConnect(e){be(e,this.#r.bind(this));for(let t of["click","touchstart"])this.listen(t,this.#s.bind(this),{passive:!0})}#t(){return kt(this.#e.isPresssed())}#i(e){bo(this.#e.isPresssed)&&this.#e.isPresssed.set(t=>!t)}#r(e){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){e.preventDefault(),e.stopImmediatePropagation();return}e.preventDefault(),(this.#e.onPress??this.#i).call(this,e)}#s(e){this.$props.disabled()&&(e.preventDefault(),e.stopImmediatePropagation())}};var Ma,Pa,er,js,Zi=class extends(Pa=f,Ma=[_],Pa){constructor(){super();G(js,5,this);g(this,er,M(!1));new N({isPresssed:n(this,er)})}get pressed(){return n(this,er).call(this)}};js=Y(Pa),er=new WeakMap,E(js,2,"pressed",Ma,Zi),j(js,Zi),B(Zi,"props",{disabled:!1,defaultPressed:!1});function Ad(o){return o?"true":"false"}function O(o){return()=>Ad(o())}var Ca=class extends f{static props=N.props;#e;constructor(){super(),new N({isPresssed:this.#i.bind(this),onPress:this.#t.bind(this)})}onSetup(){this.#e=S();let{canAirPlay:e,isAirPlayConnected:t}=this.#e.$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":this.#r.bind(this),"aria-hidden":O(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","airplay"),pe(e,this.#s.bind(this))}#t(e){this.#e.remote.requestAirPlay(e)}#i(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="airplay"&&t()!=="disconnected"}#r(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="airplay"&&t()}#s(){let{remotePlaybackState:e}=this.#e.$state;return`AirPlay ${e()}`}};var ka=class extends f{static props=N.props;#e;constructor(){super(),new N({isPresssed:this.#i.bind(this),onPress:this.#t.bind(this)})}onSetup(){this.#e=S();let{canGoogleCast:e,isGoogleCastConnected:t}=this.#e.$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":this.#r.bind(this),"aria-hidden":O(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","google-cast"),pe(e,this.#s.bind(this))}#t(e){this.#e.remote.requestGoogleCast(e)}#i(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="google-cast"&&t()!=="disconnected"}#r(){let{remotePlaybackType:e,remotePlaybackState:t}=this.#e.$state;return e()==="google-cast"&&t()}#s(){let{remotePlaybackState:e}=this.#e.$state;return`Google Cast ${e()}`}};var wa=class extends f{static props=N.props;#e;constructor(){super(),new N({isPresssed:this.#i.bind(this),keyShortcut:"togglePaused",onPress:this.#t.bind(this)})}onSetup(){this.#e=S();let{paused:e,ended:t}=this.#e.$state;this.setAttributes({"data-paused":e,"data-ended":t})}onAttach(e){e.setAttribute("data-media-tooltip","play"),pe(e,"Play")}#t(e){let t=this.#e.remote;this.#i()?t.pause(e):t.play(e)}#i(){let{paused:e}=this.#e.$state;return!e()}};var Ra=class extends f{static props=N.props;#e;constructor(){super(),new N({isPresssed:this.#i.bind(this),keyShortcut:"toggleCaptions",onPress:this.#t.bind(this)})}onSetup(){this.#e=S(),this.setAttributes({"data-active":this.#i.bind(this),"data-supported":()=>!this.#r(),"aria-hidden":O(this.#r.bind(this))})}onAttach(e){e.setAttribute("data-media-tooltip","caption"),pe(e,"Captions")}#t(e){this.#e.remote.toggleCaptions(e)}#i(){let{textTrack:e}=this.#e.$state,t=e();return!!t&&te(t)}#r(){let{hasCaptions:e}=this.#e.$state;return!e()}};var La=class extends f{static props={...N.props,target:"prefer-media"};#e;constructor(){super(),new N({isPresssed:this.#i.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#t.bind(this)})}onSetup(){this.#e=S();let{fullscreen:e}=this.#e.$state,t=this.#r.bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":O(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","fullscreen"),pe(e,"Fullscreen")}#t(e){let t=this.#e.remote,i=this.$props.target();this.#i()?t.exitFullscreen(i,e):t.enterFullscreen(i,e)}#i(){let{fullscreen:e}=this.#e.$state;return e()}#r(){let{canFullscreen:e}=this.#e.$state;return e()}};var $a=class extends f{static props=N.props;#e;constructor(){super(),new N({isPresssed:this.#i.bind(this),keyShortcut:"toggleMuted",onPress:this.#t.bind(this)})}onSetup(){this.#e=S(),this.setAttributes({"data-muted":this.#i.bind(this),"data-state":this.#r.bind(this)})}onAttach(e){e.setAttribute("data-media-mute-button",""),e.setAttribute("data-media-tooltip","mute"),pe(e,"Mute")}#t(e){let t=this.#e.remote;this.#i()?t.unmute(e):t.mute(e)}#i(){let{muted:e,volume:t}=this.#e.$state;return e()||t()===0}#r(){let{muted:e,volume:t}=this.#e.$state,i=t();if(e()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}};var Va=class extends f{static props=N.props;#e;constructor(){super(),new N({isPresssed:this.#i.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#t.bind(this)})}onSetup(){this.#e=S();let{pictureInPicture:e}=this.#e.$state,t=this.#r.bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":O(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","pip"),pe(e,"PiP")}#t(e){let t=this.#e.remote;this.#i()?t.exitPictureInPicture(e):t.enterPictureInPicture(e)}#i(){let{pictureInPicture:e}=this.#e.$state;return e()}#r(){let{canPictureInPicture:e}=this.#e.$state;return e()}};var Aa=class extends f{static props={disabled:!1,seconds:30};#e;constructor(){super(),new X}onSetup(){this.#e=S();let{seeking:e}=this.#e.$state,{seconds:t}=this.$props,i=this.#t.bind(this);this.setAttributes({seconds:t,"data-seeking":e,"data-supported":i,"aria-hidden":O(()=>!i())})}onAttach(e){L(e,"tabindex","0"),L(e,"role","button"),L(e,"type","button"),e.setAttribute("data-media-tooltip","seek"),pe(e,this.#i.bind(this))}onConnect(e){be(e,this.#r.bind(this))}#t(){let{canSeek:e}=this.#e.$state;return e()}#i(){let{seconds:e}=this.$props;return`Seek ${e()>0?"forward":"backward"} ${e()} seconds`}#r(e){let{seconds:t,disabled:i}=this.$props;if(i())return;let{currentTime:r}=this.#e.$state,s=r()+t();this.#e.remote.seek(s,e)}};var _a=class extends f{static props={disabled:!1};#e;constructor(){super(),new X}onSetup(){this.#e=S();let{disabled:e}=this.$props,{live:t,liveEdge:i}=this.#e.$state,r=()=>!t();this.setAttributes({"data-edge":i,"data-hidden":r,"aria-disabled":O(()=>e()||i()),"aria-hidden":O(r)})}onAttach(e){L(e,"tabindex","0"),L(e,"role","button"),L(e,"type","button"),e.setAttribute("data-media-tooltip","live")}onConnect(e){be(e,this.#t.bind(this))}#t(e){let{disabled:t}=this.$props,{liveEdge:i}=this.#e.$state;t()||i()||this.#e.remote.seekToLiveEdge(e)}};var fi=class extends Z{#e;#t;constructor(e){super(),this.#e=e}onConnect(e){this.#t=new IntersectionObserver(t=>{this.#e.callback?.(t,this.#t)},this.#e),this.#t.observe(e),P(this.#i.bind(this))}#i(){this.#t?.disconnect(),this.#t=void 0}};var gi=ve(),Ot=ve();function Ia(o,e,t,i){return Vi(o,K(t,Oo(i)),e)}function qa(o,e,t,i){let r=Vi(0,t,1),s=e-o,a=s*r,l=a/i,u=i*Math.round(l);return o+u}var Xs={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1},es=class extends Z{#e;#t;#i;constructor(e,t){super(),this.#e=e,this.#t=t}onSetup(){ne(Ot)&&(this.#i=H(Ot))}onConnect(){d(this.#h.bind(this)),d(this.#u.bind(this)),this.#e.swipeGesture&&d(this.#r.bind(this))}#r(){let{pointer:e}=this.#t.$state;if(e()!=="coarse"||!this.#e.swipeGesture()){this.#s=null;return}this.#s=this.#t.player.el?.querySelector("media-provider,[data-media-provider]"),this.#s&&(y(this.#s,"touchstart",this.#a.bind(this),{passive:!0}),y(this.#s,"touchmove",this.#l.bind(this),{passive:!1}))}#s=null;#o=null;#n=null;#a(e){this.#o=e.touches[0]}#l(e){if(Ve(this.#o)||ti(e))return;let t=e.touches[0],i=t.clientX-this.#o.clientX,r=t.clientY-this.#o.clientY,s=this.$state.dragging();!s&&Math.abs(r)>5||s||(e.preventDefault(),Math.abs(i)>20&&(this.#o=t,this.#n=this.$state.value(),this.#S(this.#n,e)))}#h(){let{hidden:e}=this.$props;this.listen("focus",this.#c.bind(this)),this.listen("keydown",this.#E.bind(this)),this.listen("keyup",this.#P.bind(this)),!(e()||this.#e.isDisabled())&&(this.listen("pointerenter",this.#m.bind(this)),this.listen("pointermove",this.#y.bind(this)),this.listen("pointerleave",this.#b.bind(this)),this.listen("pointerdown",this.#T.bind(this)))}#u(){this.#e.isDisabled()||!this.$state.dragging()||(y(document,"pointerup",this.#w.bind(this),{capture:!0}),y(document,"pointermove",this.#k.bind(this)),y(document,"touchmove",this.#R.bind(this),{passive:!1}))}#c(){this.#p(this.$state.value())}#d(e,t){let{value:i,min:r,max:s,dragging:a}=this.$state,l=Math.max(r(),Math.min(e,s()));i.set(l);let u=this.createEvent("value-change",{detail:l,trigger:t});if(this.dispatch(u),this.#e.onValueChange?.(u),a()){let c=this.createEvent("drag-value-change",{detail:l,trigger:t});this.dispatch(c),this.#e.onDragValueChange?.(c)}}#p(e,t){let{pointerValue:i,dragging:r}=this.$state;i.set(e),this.dispatch("pointer-value-change",{detail:e,trigger:t}),r()&&this.#d(e,t)}#f(e){let t,i=this.el.getBoundingClientRect(),{min:r,max:s}=this.$state;if(this.$props.orientation()==="vertical"){let{bottom:a,height:l}=i;t=(a-e.clientY)/l}else if(this.#o&&ke(this.#n)){let{width:a}=this.#s.getBoundingClientRect(),l=(e.clientX-this.#o.clientX)/a,u=s()-r(),c=u*Math.abs(l);t=(l<0?this.#n-c:this.#n+c)/u}else{let{left:a,width:l}=i;t=(e.clientX-a)/l}return Math.max(r(),Math.min(s(),this.#e.roundValue(qa(r(),s(),t,this.#e.getStep()))))}#m(e){this.$state.pointing.set(!0)}#y(e){let{dragging:t}=this.$state;t()||this.#p(this.#f(e),e)}#b(e){this.$state.pointing.set(!1)}#T(e){if(e.button!==0)return;let t=this.#f(e);this.#S(t,e),this.#p(t,e)}#S(e,t){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.#t.remote.pauseControls(t);let r=this.createEvent("drag-start",{detail:e,trigger:t});this.dispatch(r),this.#e.onDragStart?.(r),this.#i?.onDragStart?.()}#v(e,t){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.#t.remote.resumeControls(t);let r=this.createEvent("drag-end",{detail:e,trigger:t});this.dispatch(r),this.#e.onDragEnd?.(r),this.#o=null,this.#n=null,this.#i?.onDragEnd?.()}#x;#g=!1;#E(e){if(!Object.keys(Xs).includes(e.key))return;let{key:i}=e,r=this.#M(e);if(!Ve(r)){this.#p(r,e),this.#d(r,e);return}let s=this.#C(e);this.#g||(this.#g=i===this.#x,!this.$state.dragging()&&this.#g&&this.#S(s,e)),this.#p(s,e),this.#x=i}#P(e){if(!Object.keys(Xs).includes(e.key)||!Ve(this.#M(e)))return;let i=this.#g?this.$state.pointerValue():this.#C(e);this.#d(i,e),this.#v(i,e),this.#x="",this.#g=!1}#M(e){let t=e.key,{min:i,max:r}=this.$state;return t==="Home"||t==="PageUp"?i():t==="End"||t==="PageDown"?r():!e.metaKey&&/^[0-9]$/.test(t)?(r()-i())/10*Number(t):null}#C(e){let{key:t,shiftKey:i}=e;e.preventDefault(),e.stopPropagation();let{shiftKeyMultiplier:r}=this.$props,{min:s,max:a,value:l,pointerValue:u}=this.$state,c=this.#e.getStep(),p=this.#e.getKeyStep(),b=i?p*r():p,C=Number(Xs[t]),$=b*C,V=this.#g?u():this.#e.getValue?.()??l(),U=(V+$)/c;return Math.max(s(),Math.min(a(),Number((c*U).toFixed(3))))}#w(e){if(e.button!==0)return;e.preventDefault(),e.stopImmediatePropagation();let t=this.#f(e);this.#p(t,e),this.#v(t,e)}#R(e){e.preventDefault()}#k=Pe(e=>{this.#p(this.#f(e),e)},20,{leading:!0})};var Ge=ve(()=>({}));var ie=class extends Z{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#e;#t;#i=M(!0);#r=M(!0);constructor(e){super(),this.#t=e}onSetup(){this.#e=S();let e=new X;e.attach(this),this.$state.focused=e.focused.bind(e),ne(Ge)||J(Ge,{default:"value"}),J(gi,{orientation:this.$props.orientation,disabled:this.#t.isDisabled,preview:M(null)}),d(this.#n.bind(this)),d(this.#a.bind(this)),d(this.#l.bind(this)),this.#u(),new es(this.#t,this.#e).attach(this),new fi({callback:this.#s.bind(this)}).attach(this)}onAttach(e){L(e,"role","slider"),L(e,"tabindex","0"),L(e,"autocomplete","off"),x?this.#c():d(this.#c.bind(this))}onConnect(e){P(Rr(e,this.#i.set)),d(this.#o.bind(this))}#s(e){this.#r.set(e[0].isIntersecting)}#o(){let{hidden:e}=this.$props;this.$state.hidden.set(e()||!this.#i()||!this.#r.bind(this))}#n(){let{dragging:e,value:t,min:i,max:r}=this.$state;m(e)||t.set(Ia(i(),r(),t(),this.#t.getStep()))}#a(){this.$state.step.set(this.#t.getStep())}#l(){if(!this.#t.isDisabled())return;let{dragging:e,pointing:t}=this.$state;e.set(!1),t.set(!1)}#h(){return kt(this.#t.isDisabled())}#u(){let{orientation:e}=this.$props,{dragging:t,active:i,pointing:r}=this.$state;this.setAttributes({"data-dragging":t,"data-pointing":r,"data-active":i,"aria-disabled":this.#h.bind(this),"aria-valuemin":this.#t.aria.valueMin??this.$state.min,"aria-valuemax":this.#t.aria.valueMax??this.$state.max,"aria-valuenow":this.#t.aria.valueNow,"aria-valuetext":this.#t.aria.valueText,"aria-orientation":e})}#c(){let{fillPercent:e,pointerPercent:t}=this.$state;this.#d(K(e(),3),K(t(),3))}#d=Ae((e,t)=>{this.el?.style.setProperty("--slider-fill",e+"%"),this.el?.style.setProperty("--slider-pointer",t+"%")})};var je=class extends f{static props={...ie.props,min:0,max:100,value:0};static state=Ie;constructor(){super(),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#e.bind(this),valueText:this.#t.bind(this)}})}onSetup(){d(this.#i.bind(this)),d(this.#r.bind(this))}#e(){let{value:e}=this.$state;return Math.round(e())}#t(){let{value:e,max:t}=this.$state;return K(e()/t()*100,2)+"%"}#i(){let{value:e}=this.$props;this.$state.value.set(e())}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}};var st=new Map,ts=new Map,_d=void 0,is=class o{#e;#t;#i;$images=M([]);static create(e,t){let i=S();return new o(e,t,i)}constructor(e,t,i){this.#t=e,this.#i=t,this.#e=i,d(this.#r.bind(this))}#r(){let{canLoad:e}=this.#e.$state;if(!e())return;let t=this.#t();if(t){if(A(t)&&st.has(t)){let i=st.get(t);if(st.delete(t),st.set(t,i),st.size>99){let r=st.keys().next().value;st.delete(r)}this.$images.set(st.get(t))}else if(A(t)){let i=this.#i(),r=t+"::"+i;if(!ts.has(r)){let s=new Promise(async(a,l)=>{try{let u=await fetch(t,{credentials:ei(i)});if(u.headers.get("content-type")==="application/json"){let p=await u.json();if(he(p))if(p[0]&&"text"in p[0])a(this.#n(p));else{for(let b=0;b<p.length;b++){let C=p[b];ze(So(C),!1),ze("url"in C&&A(C.url),!1),ze("startTime"in C&&ke(C.startTime),!1)}a(p)}else a(this.#o(p));return}import("media-captions").then(async({parseResponse:p})=>{try{let{cues:b}=await p(u);a(this.#n(b))}catch(b){l(b)}})}catch(u){l(u)}}).then(a=>(st.set(r,a),a)).catch(a=>{this.#u(t,a)}).finally(()=>{A(r)&&ts.delete(r)});ts.set(r,s)}ts.get(r)?.then(s=>{this.$images.set(s||[])})}else if(he(t))try{this.$images.set(this.#s(t))}catch(i){this.#u(t,i)}else try{this.$images.set(this.#o(t))}catch(i){this.#u(t,i)}return()=>{this.$images.set([])}}}#s(e){let t=this.#a();return e.map((i,r)=>(ze(i.url&&A(i.url),!1),ze("startTime"in i&&ke(i.startTime),!1),{...i,url:A(i.url)?this.#l(i.url,t):i.url}))}#o(e){ze(A(e.url),!1),ze(he(e.tiles)&&e.tiles?.length,!1);let t=new URL(e.url),i=[],r="tile_width"in e?e.tile_width:e.tileWidth,s="tile_height"in e?e.tile_height:e.tileHeight;for(let a of e.tiles)i.push({url:t,startTime:"start"in a?a.start:a.startTime,width:r,height:s,coords:{x:a.x,y:a.y}});return i}#n(e){for(let r=0;r<e.length;r++){let s=e[r];ze("startTime"in s&&ke(s.startTime),!1),ze("text"in s&&A(s.text),!1)}let t=[],i=this.#a();for(let r of e){let[s,a]=r.text.split("#"),l=this.#h(a);t.push({url:this.#l(s,i),startTime:r.startTime,endTime:r.endTime,width:l?.w,height:l?.h,coords:l&&ke(l.x)&&ke(l.y)?{x:l.x,y:l.y}:void 0})}return t}#a(){let e=m(this.#t);return!A(e)||!/^https?:/.test(e)?location.href:e}#l(e,t){return/^https?:/.test(e)?new URL(e):new URL(e,t)}#h(e){if(!e)return{};let[t,i]=e.split("="),r=i?.split(","),s={};if(!t||!r)return null;for(let a=0;a<t.length;a++){let l=+r[a];isNaN(l)||(s[t[a]]=l)}return s}#u(e,t){}};var rs=class extends f{static props={src:null,time:0,crossOrigin:null};static state=new ce({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#e;#t=[];onSetup(){this.media=S(),this.#e=is.create(this.$props.src,this.$state.crossOrigin),this.#r(),this.setAttributes({"data-loading":this.#a.bind(this),"data-error":this.#l.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":O(this.$state.hidden)})}onConnect(e){d(this.#i.bind(this)),d(this.#h.bind(this)),d(this.#r.bind(this)),d(this.#s.bind(this)),d(this.#u.bind(this)),d(this.#c.bind(this))}#i(){let e=this.$state.img();e&&(y(e,"load",this.#o.bind(this)),y(e,"error",this.#n.bind(this)))}#r(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i}=this.media.$state,r=e()!==null?e():i();t.set(r===!0?"anonymous":r)}#s(){let{src:e,loading:t,error:i}=this.$state;return e()&&(t.set(!0),i.set(null)),()=>{this.#p(),t.set(!1),i.set(null)}}#o(){let{loading:e,error:t}=this.$state;this.#c(),e.set(!1),t.set(null)}#n(e){let{loading:t,error:i}=this.$state;t.set(!1),i.set(e)}#a(){let{loading:e,hidden:t}=this.$state;return!t()&&e()}#l(){let{error:e}=this.$state;return!Ve(e())}#h(){let{hidden:e}=this.$state,{duration:t}=this.media.$state,i=this.#e.$images();e.set(this.#l()||!Number.isFinite(t())||i.length===0)}getTime(){return this.$props.time()}#u(){let e=this.#e.$images();if(!e.length)return;let t=this.getTime(),{src:i,activeThumbnail:r}=this.$state,s=-1,a=null;for(let l=e.length-1;l>=0;l--){let u=e[l];if(t>=u.startTime&&(!u.endTime||t<u.endTime)){s=l;break}}e[s]&&(a=e[s]),r.set(a),i.set(a?.url.href||"")}#c(){if(!this.scope||this.$state.hidden())return;let e=this.el,t=this.$state.img(),i=this.$state.activeThumbnail();if(!t||!i||!e)return;let r=i.width??t.naturalWidth,s=i?.height??t.naturalHeight,{maxWidth:a,maxHeight:l,minWidth:u,minHeight:c,width:p,height:b}=getComputedStyle(this.el);u==="100%"&&(u=parseFloat(p)+""),c==="100%"&&(c=parseFloat(b)+"");let C=Math.max(parseInt(u)/r,parseInt(c)/s),$=Math.min(Math.max(parseInt(u),parseInt(a))/r,Math.max(parseInt(c),parseInt(l))/s),V=!isNaN($)&&$<1?$:C>1?C:1;this.#d(e,"--thumbnail-width",`${r*V}px`),this.#d(e,"--thumbnail-height",`${s*V}px`),this.#d(t,"width",`${t.naturalWidth*V}px`),this.#d(t,"height",`${t.naturalHeight*V}px`),this.#d(t,"transform",i.coords?`translate(-${i.coords.x*V}px, -${i.coords.y*V}px)`:""),this.#d(t,"max-width","none")}#d(e,t,i){e.style.setProperty(t,i),this.#t.push(()=>e.style.removeProperty(t))}#p(){for(let e of this.#t)e();this.#t=[]}};var Da=class extends rs{#e;onAttach(e){this.#e=We(je.state)}getTime(){let{duration:e,clipStartTime:t}=this.media.$state;return t()+this.#e.pointerRate()*e()}};var Oa,Ha,vt,tr,Js,W,Fa,Ga,Zs,Ba,eo,Qa,Ka,to,Na,Wa,yi=class extends(Ha=f,Oa=[_],Ha){constructor(){super(...arguments);G(Js,5,this);g(this,W);g(this,vt);g(this,tr)}get video(){return this.$state.video()}onSetup(){T(this,vt,S()),T(this,tr,We(je.state)),h(this,W,Zs).call(this),this.setAttributes({"data-loading":h(this,W,Ba).bind(this),"data-hidden":this.$state.hidden,"data-error":h(this,W,eo).bind(this),"aria-hidden":O(this.$state.hidden)})}onAttach(t){d(h(this,W,Fa).bind(this)),d(h(this,W,Ga).bind(this)),d(h(this,W,Zs).bind(this)),d(h(this,W,Qa).bind(this)),d(h(this,W,Ka).bind(this)),d(h(this,W,Wa).bind(this))}};Js=Y(Ha),vt=new WeakMap,tr=new WeakMap,W=new WeakSet,Fa=function(){let t=this.$state.video();t&&(t.readyState>=2&&h(this,W,to).call(this),y(t,"canplay",h(this,W,to).bind(this)),y(t,"error",h(this,W,Na).bind(this)))},Ga=function(){let{src:t}=this.$state,{canLoad:i}=n(this,vt).$state;t.set(i()?this.$props.src():null)},Zs=function(){let{crossOrigin:t}=this.$props,{crossOrigin:i}=this.$state,{crossOrigin:r}=n(this,vt).$state,s=t()!==null?t():r();i.set(s===!0?"anonymous":s)},Ba=function(){let{canPlay:t,hidden:i}=this.$state;return!t()&&!i()},eo=function(){let{error:t}=this.$state;return!Ve(t)},Qa=function(){let{src:t,hidden:i}=this.$state,{canLoad:r,duration:s}=n(this,vt).$state;i.set(r()&&(!t()||h(this,W,eo).call(this)||!Number.isFinite(s())))},Ka=function(){let{src:t,canPlay:i,error:r}=this.$state;t(),i.set(!1),r.set(null)},to=function(t){let{canPlay:i,error:r}=this.$state;i.set(!0),r.set(null),this.dispatch("can-play",{trigger:t})},Na=function(t){let{canPlay:i,error:r}=this.$state;i.set(!1),r.set(t),this.dispatch("error",{trigger:t})},Wa=function(){let{video:t,canPlay:i}=this.$state,{duration:r}=n(this,vt).$state,{pointerRate:s}=n(this,tr),a=t();i()&&a&&Number.isFinite(r())&&Number.isFinite(s())&&(a.currentTime=s()*r())},E(Js,2,"video",Oa,yi),j(Js,yi),B(yi,"props",{src:null,crossOrigin:null}),B(yi,"state",new ce({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1}));var Ua,za,bt,ss,rr,io,ir=class extends(za=f,Ua=[Q],za){constructor(){super(...arguments);G(io,5,this);g(this,bt);g(this,ss);g(this,rr)}onSetup(){T(this,rr,We(je.state)),T(this,bt,H(Ge)),T(this,ss,He(this.getValueText.bind(this)))}getValueText(){let{type:t,format:i,decimalPlaces:r,padHours:s,padMinutes:a,showHours:l,showMs:u}=this.$props,{value:c,pointerValue:p,min:b,max:C}=n(this,rr),$=i?.()??n(this,bt).default,V=t()==="current"?c():p();if($==="percent"){let U=C()-b(),re=V/U*100;return(n(this,bt).percent??K)(re,r())+"%"}else return $==="time"?(n(this,bt).time??Vt)(V,{padHrs:s(),padMins:a(),showHrs:l(),showMs:u()}):(n(this,bt).value?.(V)??V.toFixed(2))+""}};io=Y(za),bt=new WeakMap,ss=new WeakMap,rr=new WeakMap,E(io,1,"getValueText",Ua,ir),j(io,ir),B(ir,"props",{type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2});var Ya=class extends f{static props={offset:0,noClamp:!1};#e;onSetup(){this.#e=H(gi);let{active:e}=We(je.state);this.setAttributes({"data-visible":e})}onAttach(e){Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){let{preview:t}=this.#e;t.set(e),P(()=>t.set(null)),d(this.#t.bind(this));let i=new ResizeObserver(this.#t.bind(this));i.observe(e),P(()=>i.disconnect())}#t=Ae(()=>{let{disabled:e,orientation:t}=this.#e;if(e())return;let i=this.el,{offset:r,noClamp:s}=this.$props;i&&Id(i,{clamp:!s(),offset:r(),orientation:t()})})};function Id(o,{clamp:e,offset:t,orientation:i}){let r=getComputedStyle(o),s=parseFloat(r.width),a=parseFloat(r.height),l={top:null,right:null,bottom:null,left:null};if(l[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${t}px))`,i==="horizontal"){let u=s/2;if(!e)l.left=`calc(var(--slider-pointer) - ${u}px)`;else{let c=`max(0px, calc(var(--slider-pointer) - ${u}px))`,p=`calc(100% - ${s}px)`;l.left=`min(${c}, ${p})`}}else{let u=a/2;if(!e)l.bottom=`calc(var(--slider-pointer) - ${u}px)`;else{let c=`max(${u}px, calc(var(--slider-pointer) - ${u}px))`,p=`calc(100% - ${a}px)`;l.bottom=`min(${c}, ${p})`}}Object.assign(o.style,l)}var ja=class extends f{static props={...ie.props,keyStep:5,shiftKeyMultiplier:2};static state=Ie;#e;onSetup(){this.#e=S();let{audioGain:e}=this.#e.$state;J(Ge,{default:"percent",value(t){return(t*(e()??1)).toFixed(2)},percent(t){return Math.round(t*(e()??1))}}),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#s.bind(this),aria:{valueMax:this.#r.bind(this),valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#h.bind(this),onValueChange:this.#l.bind(this)}).attach(this),d(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-volume-slider",""),L(e,"aria-label","Volume");let{canSetVolume:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":O(()=>!t())})}#t(){let{value:e}=this.$state,{audioGain:t}=this.#e.$state;return Math.round(e()*(t()??1))}#i(){let{value:e,max:t}=this.$state,{audioGain:i}=this.#e.$state;return K(e()/t()*(i()??1)*100,2)+"%"}#r(){let{audioGain:e}=this.#e.$state;return this.$state.max()*(e()??1)}#s(){let{disabled:e}=this.$props,{canSetVolume:t}=this.#e.$state;return e()||!t()}#o(){let{muted:e,volume:t}=this.#e.$state,i=e()?0:t()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#n=Pe(this.#a.bind(this),25);#a(e){if(!e.trigger)return;let t=K(e.detail/100,3);this.#e.remote.changeVolume(t,e)}#l(e){this.#n(e)}#h(e){this.#n(e)}};var Xa=class extends f{static props={...ie.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300};static state=Ie;#e;onSetup(){this.#e=S(),J(Ge,{default:"percent",percent:(e,t)=>K(this.$state.value(),t)+"%"}),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#o.bind(this),aria:{valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#l.bind(this),onValueChange:this.#a.bind(this)}).attach(this),d(this.#r.bind(this)),d(this.#s.bind(this))}onAttach(e){e.setAttribute("data-media-audio-gain-slider",""),L(e,"aria-label","Audio Boost");let{canSetAudioGain:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":O(()=>!t())})}#t(){let{value:e}=this.$state;return Math.round(e())}#i(){let{value:e}=this.$state;return e()+"%"}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}#s(){let{audioGain:e}=this.#e.$state,t=((e()??1)-1)*100;this.$state.value.set(t),this.dispatch("value-change",{detail:t})}#o(){let{disabled:e}=this.$props,{canSetAudioGain:t}=this.#e.$state;return e()||!t()}#n(e){if(!e.trigger)return;let t=K(1+e.detail/100,2);this.#e.remote.changeAudioGain(t,e)}#a(e){this.#n(e)}#l(e){this.#n(e)}};var Ja=class extends f{static props={...ie.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2};static state=Ie;#e;onSetup(){this.#e=S(),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:this.#o,isDisabled:this.#n.bind(this),aria:{valueNow:this.#t.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#h.bind(this)}).attach(this),d(this.#r.bind(this)),d(this.#s.bind(this))}onAttach(e){e.setAttribute("data-media-speed-slider",""),L(e,"aria-label","Speed");let{canSetPlaybackRate:t}=this.#e.$state;this.setAttributes({"data-supported":t,"aria-hidden":O(()=>!t())})}#t(){let{value:e}=this.$state;return e()}#i(){let{value:e}=this.$state;return e()+"x"}#r(){let{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())}#s(){let{playbackRate:e}=this.#e.$state,t=e();this.$state.value.set(t),this.dispatch("value-change",{detail:t})}#o(e){return K(e,2)}#n(){let{disabled:e}=this.$props,{canSetPlaybackRate:t}=this.#e.$state;return e()||!t()}#a=Pe(this.#l.bind(this),25);#l(e){if(!e.trigger)return;let t=e.detail;this.#e.remote.changePlaybackRate(t,e)}#h(e){this.#a(e)}#u(e){this.#a(e)}};var Za=class extends f{static props={...ie.props,step:1,keyStep:1,shiftKeyMultiplier:1};static state=Ie;#e;#t=He(()=>{let{qualities:e}=this.#e.$state;return Wo(e())});onSetup(){this.#e=S(),new ie({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#n.bind(this),aria:{valueNow:this.#i.bind(this),valueText:this.#r.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#h.bind(this)}).attach(this),d(this.#s.bind(this)),d(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-quality-slider",""),L(e,"aria-label","Video Quality");let{qualities:t,canSetQuality:i}=this.#e.$state,r=He(()=>i()&&t().length>0);this.setAttributes({"data-supported":r,"aria-hidden":O(()=>!r())})}#i(){let{value:e}=this.$state;return e()}#r(){let{quality:e}=this.#e.$state;if(!e())return"";let{height:t,bitrate:i}=e(),r=i&&i>0?`${(i/1e6).toFixed(2)} Mbps`:null;return t?`${t}p${r?` (${r})`:""}`:"Auto"}#s(){let e=this.#t();this.$state.max.set(Math.max(0,e.length-1))}#o(){let{quality:e}=this.#e.$state,t=this.#t(),i=Math.max(0,t.indexOf(e()));this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#n(){let{disabled:e}=this.$props,{canSetQuality:t,qualities:i}=this.#e.$state;return e()||i().length<=1||!t()}#a=Pe(this.#l.bind(this),25);#l(e){if(!e.trigger)return;let{qualities:t}=this.#e,i=m(this.#t)[e.detail];this.#e.remote.changeQuality(t.indexOf(i),e)}#h(e){this.#a(e)}#u(e){this.#a(e)}};var os=class extends f{static props={...ie.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=Ie;#e;#t;#i=M(null);constructor(){super();let{noSwipeGesture:e}=this.$props;new ie({swipeGesture:()=>!e(),getValue:this.#m.bind(this),getStep:this.#y.bind(this),getKeyStep:this.#b.bind(this),roundValue:this.#T,isDisabled:this.#S.bind(this),aria:{valueNow:this.#v.bind(this),valueText:this.#x.bind(this)},onDragStart:this.#c.bind(this),onDragValueChange:this.#d.bind(this),onDragEnd:this.#p.bind(this),onValueChange:this.#f.bind(this)})}onSetup(){this.#e=S(),J(Ge,{default:"time",value:this.#P.bind(this),time:this.#M.bind(this)}),this.setAttributes({"data-chapters":this.#s.bind(this)}),this.setStyles({"--slider-progress":this.#r.bind(this)}),d(this.#n.bind(this)),d(this.#o.bind(this))}onAttach(e){e.setAttribute("data-media-time-slider",""),L(e,"aria-label","Seek")}onConnect(e){d(this.#a.bind(this)),wr(this.#e.textTracks,"chapters",this.#i.set)}#r(){let{bufferedEnd:e,duration:t}=this.#e.$state;return K(Math.min(e()/Math.max(t(),1),1)*100,3)+"%"}#s(){let{duration:e}=this.#e.$state;return this.#i()?.cues.length&&Number.isFinite(e())&&e()>0}#o(){this.#t=Pe(this.#l.bind(this),this.$props.seekingRequestThrottle())}#n(){if(this.$state.hidden())return;let{value:e,dragging:t}=this.$state,i=this.#m();m(t)||(e.set(i),this.dispatch("value-change",{detail:i}))}#a(){let e=this.#e.player.el,{preview:t}=H(gi);e&&t()&&w(e,"data-preview",this.$state.active())}#l(e,t){this.#e.remote.seeking(e,t)}#h(e,t,i){this.#t.cancel();let{live:r}=this.#e.$state;if(r()&&t>=99){this.#e.remote.seekToLiveEdge(i);return}this.#e.remote.seek(e,i)}#u=!1;#c(e){let{pauseWhileDragging:t}=this.$props;if(t()){let{paused:i}=this.#e.$state;this.#u=!i(),this.#e.remote.pause(e)}}#d(e){this.#t(this.#g(e.detail),e)}#p(e){let{seeking:t}=this.#e.$state;m(t)||this.#l(this.#g(e.detail),e);let i=e.detail;this.#h(this.#g(i),i,e);let{pauseWhileDragging:r}=this.$props;r()&&this.#u&&(this.#e.remote.play(e),this.#u=!1)}#f(e){let{dragging:t}=this.$state;t()||!e.trigger||this.#p(e)}#m(){let{currentTime:e}=this.#e.$state;return this.#E(e())}#y(){let e=this.$props.step()/this.#e.$state.duration()*100;return Number.isFinite(e)?e:1}#b(){let e=this.$props.keyStep()/this.#e.$state.duration()*100;return Number.isFinite(e)?e:1}#T(e){return K(e,3)}#S(){let{disabled:e}=this.$props,{canSeek:t}=this.#e.$state;return e()||!t()}#v(){let{value:e}=this.$state;return Math.round(e())}#x(){let e=this.#g(this.$state.value()),{duration:t}=this.#e.$state;return Number.isFinite(e)?`${ni(e)} out of ${ni(t())}`:"live"}#g(e){let{duration:t}=this.#e.$state;return K(e/100*t(),5)}#E(e){let{liveEdge:t,duration:i}=this.#e.$state,r=Math.max(0,Math.min(1,t()?1:Math.min(e,i())/i()));return Number.isNaN(r)?0:Number.isFinite(r)?r*100:100}#P(e){let t=this.#g(e),{live:i,duration:r}=this.#e.$state;return Number.isFinite(t)?(i()?t-r():t).toFixed(0):"LIVE"}#M(e,t){let i=this.#g(e),{live:r,duration:s}=this.#e.$state,a=r()?i-s():i;return Number.isFinite(i)?`${a<0?"-":""}${Vt(Math.abs(a),t)}`:"LIVE"}};var el,tl,il,rl,sl,Ce,Ht,bi,Xe,Ee,Ft,Se,ot,Gt,St,vi,k,ro,so,ol,nl,al,ll,dl,ns,oo,no,ul,ds,us,hl,as,ls,cl,pl,ml,fl,sr,gl,yl,vl,Et=class extends(sl=f,rl=[_],il=[_],tl=[_],el=[Q],sl){constructor(){super(...arguments);G(vi,5,this);g(this,k);g(this,Ce);g(this,Ht);g(this,bi);g(this,Xe,null);g(this,Ee,[]);g(this,Ft,M(null));g(this,Se,M([]));g(this,ot,M(-1));g(this,Gt,M(-1));g(this,St,0);g(this,ds,Ae(t=>{let i,r=n(this,Se).call(this),{clipStartTime:s}=n(this,Ce).$state,a=s(),l=h(this,k,as).call(this,r);for(let u=n(this,St);u<n(this,Ee).length;u++)if(i=h(this,k,ls).call(this,r[u],t,a,l),n(this,Ee)[u]?.style.setProperty("--chapter-progress",i+"%"),i<100){T(this,St,u);break}}));g(this,us,He(h(this,k,hl).bind(this)));g(this,sr,ri(()=>{let t=m(n(this,Ft));!this.scope||!t||!t.cues.length||(n(this,Se).set(h(this,k,cl).call(this,t.cues)),n(this,ot).set(0),T(this,St,0))},150,!0))}get cues(){return n(this,Se).call(this)}get activeCue(){return n(this,Se).call(this)[n(this,ot).call(this)]||null}get activePointerCue(){return n(this,Se).call(this)[n(this,Gt).call(this)]||null}onSetup(){T(this,Ce,S()),T(this,Ht,We(os.state))}onAttach(t){wr(n(this,Ce).textTracks,"chapters",h(this,k,ro).bind(this)),d(h(this,k,pl).bind(this))}onConnect(){P(()=>h(this,k,so).bind(this))}onDestroy(){h(this,k,ro).call(this,null)}setRefs(t){if(T(this,Ee,t),n(this,bi)?.dispose(),n(this,Ee).length===1){let i=n(this,Ee)[0];i.style.width="100%",i.style.setProperty("--chapter-fill","var(--slider-fill)"),i.style.setProperty("--chapter-progress","var(--slider-progress)")}else n(this,Ee).length>0&&Jt(()=>h(this,k,ol).call(this),T(this,bi,vo()))}};vi=Y(sl),Ce=new WeakMap,Ht=new WeakMap,bi=new WeakMap,Xe=new WeakMap,Ee=new WeakMap,Ft=new WeakMap,Se=new WeakMap,ot=new WeakMap,Gt=new WeakMap,St=new WeakMap,k=new WeakSet,ro=function(t){m(n(this,Ft))!==t&&(h(this,k,so).call(this),n(this,Ft).set(t))},so=function(){T(this,Ee,[]),n(this,Se).set([]),n(this,ot).set(-1),n(this,Gt).set(-1),T(this,St,0),n(this,bi)?.dispose()},ol=function(){n(this,Ee).length&&d(h(this,k,nl).bind(this))},nl=function(){let{hidden:t}=n(this,Ht);t()||(d(h(this,k,al).bind(this)),d(h(this,k,ll).bind(this)),d(h(this,k,dl).bind(this)),d(h(this,k,ul).bind(this)))},al=function(){let t=n(this,Se).call(this);if(!t.length)return;let i,{clipStartTime:r,clipEndTime:s}=n(this,Ce).$state,a=r(),l=s()||t[t.length-1].endTime,u=l-a,c=100;for(let p=0;p<t.length;p++)if(i=t[p],n(this,Ee)[p]){let b=p===t.length-1?c:K((i.endTime-Math.max(a,i.startTime))/u*100,3);n(this,Ee)[p].style.width=b+"%",c-=b}},ll=function(){let{liveEdge:t,clipStartTime:i,duration:r}=n(this,Ce).$state,{fillPercent:s,value:a}=n(this,Ht),l=n(this,Se).call(this),u=t(),c=m(n(this,ot)),p=l[c],b=u?n(this,Se).length-1:h(this,k,no).call(this,p&&p.startTime/r()*100<=m(a)?c:0,s());u||!p?h(this,k,ns).call(this,0,l.length,100):b>c?h(this,k,ns).call(this,c,b,100):b<c&&h(this,k,ns).call(this,b+1,c+1,0);let C=u?100:h(this,k,ls).call(this,l[b],s(),i(),h(this,k,as).call(this,l));h(this,k,oo).call(this,n(this,Ee)[b],C),n(this,ot).set(b)},dl=function(){let{pointing:t,pointerPercent:i}=n(this,Ht);if(!t()){n(this,Gt).set(-1);return}let r=h(this,k,no).call(this,0,i());n(this,Gt).set(r)},ns=function(t,i,r){for(let s=t;s<i;s++)h(this,k,oo).call(this,n(this,Ee)[s],r)},oo=function(t,i){t&&(t.style.setProperty("--chapter-fill",i+"%"),w(t,"data-active",i>0&&i<100),w(t,"data-ended",i===100))},no=function(t,i){let r=0,s=n(this,Se).call(this);if(i===0)return 0;if(i===100)return s.length-1;let{clipStartTime:a}=n(this,Ce).$state,l=a(),u=h(this,k,as).call(this,s);for(let c=t;c<s.length;c++)if(r=h(this,k,ls).call(this,s[c],i,l,u),r>=0&&r<100)return c;return 0},ul=function(){n(this,ds).call(this,n(this,us).call(this))},ds=new WeakMap,us=new WeakMap,hl=function(){let{bufferedEnd:t,duration:i}=n(this,Ce).$state;return K(Math.min(t()/Math.max(i(),1),1),3)*100},as=function(t){let{clipEndTime:i}=n(this,Ce).$state,r=i();return r>0?r:t[t.length-1]?.endTime||0},ls=function(t,i,r,s){if(n(this,Se).call(this).length===0)return 0;let l=s-r,u=Math.max(0,t.startTime-r),c=Math.min(s,t.endTime)-r,p=u/l,b=p*100,C=Math.min(1,p+(c-u)/l)*100;return Math.max(0,K(i>=C?100:(i-b)/(C-b)*100,3))},cl=function(t){let i=[],{clipStartTime:r,clipEndTime:s,duration:a}=n(this,Ce).$state,l=r(),u=s()||1/0;t=t.filter(b=>b.startTime<=u&&b.endTime>=l);let c=t[0];c&&c.startTime>l&&i.push(new window.VTTCue(l,c.startTime,""));for(let b=0;b<t.length-1;b++){let C=t[b],$=t[b+1];if(i.push(C),$){let V=$.startTime-C.endTime;V>0&&i.push(new window.VTTCue(C.endTime,C.endTime+V,""))}}let p=t[t.length-1];if(p){i.push(p);let b=a();b>=0&&b-p.endTime>1&&i.push(new window.VTTCue(p.endTime,a(),""))}return i},pl=function(){let{source:t}=n(this,Ce).$state;t(),h(this,k,ml).call(this)},ml=function(){if(!this.scope)return;let{disabled:t}=this.$props;if(t()){n(this,Se).set([]),n(this,ot).set(0),T(this,St,0);return}let i=n(this,Ft).call(this);if(i){let r=n(this,sr).bind(this);r(),P(y(i,"add-cue",r)),P(y(i,"remove-cue",r)),d(h(this,k,fl).bind(this))}return T(this,Xe,h(this,k,vl).call(this)),n(this,Xe)&&d(h(this,k,gl).bind(this)),()=>{n(this,Xe)&&(n(this,Xe).textContent="",T(this,Xe,null))}},fl=function(){n(this,Ce).$state.duration(),n(this,sr).call(this)},sr=new WeakMap,gl=function(){let t=this.activePointerCue||this.activeCue;n(this,Xe)&&(n(this,Xe).textContent=t?.text||"")},yl=function(){let t=this.el;for(;t&&t.getAttribute("role")!=="slider";)t=t.parentElement;return t},vl=function(){let t=h(this,k,yl).call(this);return t?t.querySelector('[data-part="chapter-title"]'):null},E(vi,2,"cues",rl,Et),E(vi,2,"activeCue",il,Et),E(vi,2,"activePointerCue",tl,Et),E(vi,1,"setRefs",el,Et),j(vi,Et),B(Et,"props",{disabled:!1});var bl=o=>typeof o=="object"&&o!=null&&o.nodeType===1,El=(o,e)=>(!e||o!=="hidden")&&o!=="visible"&&o!=="clip",ao=(o,e)=>{if(o.clientHeight<o.scrollHeight||o.clientWidth<o.scrollWidth){let t=getComputedStyle(o,null);return El(t.overflowY,e)||El(t.overflowX,e)||(i=>{let r=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(o)}return!1},hs=(o,e,t,i,r,s,a,l)=>s<o&&a>e||s>o&&a<e?0:s<=o&&l<=t||a>=e&&l>=t?s-o-i:a>e&&l<t||s<o&&l>t?a-e+r:0,qd=o=>{let e=o.parentElement;return e??(o.getRootNode().host||null)},Sl=(o,e)=>{var t,i,r,s;if(typeof document>"u")return[];let{scrollMode:a,block:l,inline:u,boundary:c,skipOverflowHiddenElements:p}=e,b=typeof c=="function"?c:Pt=>Pt!==c;if(!bl(o))throw new TypeError("Invalid target");let C=document.scrollingElement||document.documentElement,$=[],V=o;for(;bl(V)&&b(V);){if(V=qd(V),V===C){$.push(V);break}V!=null&&V===document.body&&ao(V)&&!ao(document.documentElement)||V!=null&&ao(V,p)&&$.push(V)}let U=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,re=(s=(r=window.visualViewport)==null?void 0:r.height)!=null?s:innerHeight,{scrollX:Qe,scrollY:Ke}=window,{height:Oe,width:fe,top:Ne,right:ut,bottom:jt,left:ht}=o.getBoundingClientRect(),{top:ki,right:hr,bottom:ct,left:et}=(Pt=>{let z=window.getComputedStyle(Pt);return{top:parseFloat(z.scrollMarginTop)||0,right:parseFloat(z.scrollMarginRight)||0,bottom:parseFloat(z.scrollMarginBottom)||0,left:parseFloat(z.scrollMarginLeft)||0}})(o),Te=l==="start"||l==="nearest"?Ne-ki:l==="end"?jt+ct:Ne+Oe/2-ki+ct,ue=u==="center"?ht+fe/2-et+hr:u==="end"?ut+hr:ht-et,Xt=[];for(let Pt=0;Pt<$.length;Pt++){let z=$[Pt],{height:cr,width:pr,top:mr,right:vs,bottom:bs,left:fr}=z.getBoundingClientRect();if(a==="if-needed"&&Ne>=0&&ht>=0&&jt<=re&&ut<=U&&Ne>=mr&&jt<=bs&&ht>=fr&&ut<=vs)return Xt;let gr=getComputedStyle(z),yr=parseInt(gr.borderLeftWidth,10),vr=parseInt(gr.borderTopWidth,10),br=parseInt(gr.borderRightWidth,10),Er=parseInt(gr.borderBottomWidth,10),pt=0,mt=0,Sr="offsetWidth"in z?z.offsetWidth-z.clientWidth-yr-br:0,xr="offsetHeight"in z?z.offsetHeight-z.clientHeight-vr-Er:0,Es="offsetWidth"in z?z.offsetWidth===0?0:pr/z.offsetWidth:0,Ss="offsetHeight"in z?z.offsetHeight===0?0:cr/z.offsetHeight:0;if(C===z)pt=l==="start"?Te:l==="end"?Te-re:l==="nearest"?hs(Ke,Ke+re,re,vr,Er,Ke+Te,Ke+Te+Oe,Oe):Te-re/2,mt=u==="start"?ue:u==="center"?ue-U/2:u==="end"?ue-U:hs(Qe,Qe+U,U,yr,br,Qe+ue,Qe+ue+fe,fe),pt=Math.max(0,pt+Ke),mt=Math.max(0,mt+Qe);else{pt=l==="start"?Te-mr-vr:l==="end"?Te-bs+Er+xr:l==="nearest"?hs(mr,bs,cr,vr,Er+xr,Te,Te+Oe,Oe):Te-(mr+cr/2)+xr/2,mt=u==="start"?ue-fr-yr:u==="center"?ue-(fr+pr/2)+Sr/2:u==="end"?ue-vs+br+Sr:hs(fr,vs,pr,yr,br+Sr,ue,ue+fe,fe);let{scrollLeft:go,scrollTop:yo}=z;pt=Ss===0?0:Math.max(0,Math.min(yo+pt/Ss,z.scrollHeight-cr/Ss+xr)),mt=Es===0?0:Math.max(0,Math.min(go+mt/Es,z.scrollWidth-pr/Es+Sr)),Te+=yo-pt,ue+=go-mt}Xt.push({el:z,top:pt,left:mt})}return Xt};function Dd(o,e){let t=Sl(o,e);for(let{el:i,top:r,left:s}of t)i.scroll({top:r,left:s,behavior:e.behavior})}function xl(o,e={}){Dd(o,{scrollMode:"if-needed",block:"center",inline:"center",...e})}var Od=["a[href]","[tabindex]","input","select","button"].map(o=>`${o}:not([aria-hidden='true'])`).join(","),Hd=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]),cs=class{#e=-1;#t=null;#i=[];#r;get items(){return this.#i}constructor(e){this.#r=e}attachMenu(e){y(e,"focus",this.#n.bind(this)),this.#t=e,P(()=>{this.#t=null})}listen(){this.#t&&(this.update(),y(this.#t,"keyup",this.#l.bind(this)),y(this.#t,"keydown",this.#h.bind(this)),P(()=>{this.#e=-1,this.#i=[]}))}update(){this.#e=0,this.#i=this.#c()}scroll(e=this.#o()){let t=this.#i[e];t&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{xl(t,{behavior:"smooth",boundary:i=>!i.hasAttribute("data-root")})})})}focusActive(e=!0){let t=this.#o();this.#s(t>=0?t:0,e)}#s(e,t=!0){this.#e=e,this.#i[e]?(this.#i[e].focus({preventScroll:!0}),t&&this.scroll(e)):this.#t?.focus({preventScroll:!0})}#o(){return this.#i.findIndex(e=>document.activeElement===e||e.getAttribute("role")==="menuitemradio"&&e.getAttribute("aria-checked")==="true")}#n(){this.#e>=0||(this.update(),this.focusActive())}#a(e){let t=e.target;if(Mo(e)&&t instanceof Element){let i=t.getAttribute("role");return!/a|input|select|button/.test(t.localName)&&!i}return Hd.has(e.key)}#l(e){this.#a(e)&&(e.stopPropagation(),e.preventDefault())}#h(e){if(this.#a(e))switch(e.stopPropagation(),e.preventDefault(),e.key){case"Escape":this.#r.closeMenu(e);break;case"Tab":this.#s(this.#u(e.shiftKey?-1:1));break;case"ArrowUp":this.#s(this.#u(-1));break;case"ArrowDown":this.#s(this.#u(1));break;case"Home":case"PageUp":this.#s(0);break;case"End":case"PageDown":this.#s(this.#i.length-1);break}}#u(e){let t=this.#e;do t=(t+e+this.#i.length)%this.#i.length;while(this.#i[t]?.offsetParent===null);return t}#c(){if(!this.#t)return[];let e=this.#t.querySelectorAll(Od),t=[],i=r=>r.getAttribute("role")==="menu";for(let r of e)tt(r)&&r.offsetParent!==null&&Lr(this.#t,r,i)&&t.push(r);return t}};var Fd=0,Tl,Ml,Pl,Cl,kl,wl,Be,Ei,Si,xe,nr,Je,oe,xt,Tt,Qt,Kt,at,Nt,ar,Wt,Bt,R,Rl,Ll,$l,Vl,Al,lo,_l,xi,Il,uo,ql,or,Dl,Ol,Hl,Fl,Gl,Bl,ps,Ql,Ti,ms,Kl,fs,Nl,Mi,Pi,Wl,nt=class extends(wl=f,kl=[_],Cl=[_],Pl=[_],Ml=[Q],Tl=[Q],wl){constructor(){super();G(Bt,5,this);g(this,R);g(this,Be);g(this,Ei);g(this,Si);g(this,xe,M(!1));g(this,nr,M(!1));g(this,Je,M(null));g(this,oe,M(null));g(this,xt);g(this,Tt,new Set);g(this,Qt,null);g(this,Kt);g(this,at);g(this,Nt,!1);g(this,ar,M(!1));g(this,Wt,new Set);g(this,xi,!1);g(this,ps,h(this,R,Ql).bind(this));g(this,Ti,!1);g(this,ms,h(this,R,Kl).bind(this));g(this,fs,h(this,R,Nl).bind(this));g(this,Mi,Ae(()=>{let t=m(n(this,oe));if(!t||x)return;let i=0,r=getComputedStyle(t),s=[...t.children];for(let a of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])i+=parseFloat(r[a])||0;for(let a of s)if(tt(a)&&a.style.display==="contents")s.push(...a.children);else if(a.nodeType===3)i+=parseFloat(getComputedStyle(a).fontSize);else if(tt(a)){if(!Ho(a))continue;let l=getComputedStyle(a);i+=a.offsetHeight+(parseFloat(l.marginTop)||0)+(parseFloat(l.marginBottom)||0)}ye(t,"--menu-height",i+"px")}));g(this,Pi,!1);let{showDelay:t}=this.$props;T(this,Kt,new mi({trigger:n(this,Je),content:n(this,oe),showDelay:t,listen:(i,r,s)=>{be(i,l=>{n(this,xe).call(this)?s(l):r(l)});let a=h(this,R,Fl).call(this);a&&be(a,l=>{l.stopPropagation(),s(l)})},onChange:h(this,R,Il).bind(this)}))}get triggerElement(){return n(this,Je).call(this)}get contentElement(){return n(this,oe).call(this)}get isSubmenu(){return!!n(this,xt)}onSetup(){T(this,Be,S());let t=++Fd;T(this,Ei,`media-menu-${t}`),T(this,Si,`media-menu-button-${t}`),T(this,at,new cs({closeMenu:this.close.bind(this)})),ne(se)&&T(this,xt,H(se)),h(this,R,Rl).call(this),this.setAttributes({"data-open":n(this,xe),"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":h(this,R,or).bind(this)}),J(se,{button:n(this,Je),content:n(this,oe),expanded:n(this,xe),hint:M(""),submenu:!!n(this,xt),disable:h(this,R,Dl).bind(this),attachMenuButton:h(this,R,$l).bind(this),attachMenuItems:h(this,R,Vl).bind(this),attachObserver:h(this,R,Al).bind(this),disableMenuButton:h(this,R,_l).bind(this),addSubmenu:h(this,R,Bl).bind(this),onTransitionEvent:i=>{n(this,Wt).add(i),P(()=>{n(this,Wt).delete(i)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){d(h(this,R,Ll).bind(this)),this.isSubmenu&&n(this,xt)?.addSubmenu(this)}onDestroy(){n(this,Je).set(null),n(this,oe).set(null),T(this,Qt,null),n(this,Wt).clear()}open(t){m(n(this,xe))||(n(this,Kt).show(t),ge())}close(t){m(n(this,xe))&&(n(this,Kt).hide(t),ge())}};Bt=Y(wl),Be=new WeakMap,Ei=new WeakMap,Si=new WeakMap,xe=new WeakMap,nr=new WeakMap,Je=new WeakMap,oe=new WeakMap,xt=new WeakMap,Tt=new WeakMap,Qt=new WeakMap,Kt=new WeakMap,at=new WeakMap,Nt=new WeakMap,ar=new WeakMap,Wt=new WeakMap,R=new WeakSet,Rl=function(){let t=-1,i=ne(Ot)?H(Ot):null;J(Ot,{onDragStart:()=>{i?.onDragStart?.(),window.clearTimeout(t),t=-1,T(this,Nt,!0)},onDragEnd:()=>{i?.onDragEnd?.(),t=window.setTimeout(()=>{T(this,Nt,!1),t=-1},300)}})},Ll=function(){let t=h(this,R,ql).call(this);this.isSubmenu||n(this,Mi).call(this),h(this,R,lo).call(this,t),t&&(d(()=>{let{height:i}=n(this,Be).$state,r=n(this,oe).call(this);r&&ye(r,"--player-height",i()+"px")}),n(this,at).listen(),this.listen("pointerup",h(this,R,Ol).bind(this)),y(window,"pointerup",h(this,R,Hl).bind(this)))},$l=function(t){let i=t.el,r=this.isSubmenu,s=O(h(this,R,or).bind(this));L(i,"tabindex",r?"-1":"0"),L(i,"role",r?"menuitem":"button"),w(i,"id",n(this,Si)),w(i,"aria-haspopup","menu"),w(i,"aria-expanded","false"),w(i,"data-root",!this.isSubmenu),w(i,"data-submenu",this.isSubmenu);let a=()=>{w(i,"data-open",n(this,xe).call(this)),w(i,"aria-disabled",s())};x?a():d(a),n(this,Je).set(i),P(()=>{n(this,Je).set(null)})},Vl=function(t){let i=t.el;i.style.setProperty("display","none"),w(i,"id",n(this,Ei)),L(i,"role","menu"),L(i,"tabindex","-1"),w(i,"data-root",!this.isSubmenu),w(i,"data-submenu",this.isSubmenu),n(this,oe).set(i),P(()=>n(this,oe).set(null));let r=()=>w(i,"data-open",n(this,xe).call(this));x?r():d(r),n(this,at).attachMenu(i),h(this,R,lo).call(this,!1);let s=h(this,R,Wl).bind(this);this.isSubmenu?n(this,xt)?.onTransitionEvent(s):(t.listen("transitionstart",s),t.listen("transitionend",s),t.listen("animationend",n(this,Mi)),t.listen("vds-menu-resize",n(this,Mi)))},Al=function(t){T(this,Qt,t)},lo=function(t){let i=m(n(this,oe));i&&w(i,"aria-hidden",kt(!t))},_l=function(t){n(this,ar).set(t)},xi=new WeakMap,Il=function(t,i){if(T(this,xi,wi(i)),i?.stopPropagation(),n(this,xe).call(this)===t)return;if(h(this,R,or).call(this)){t&&n(this,Kt).hide(i);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let r=n(this,Je).call(this),s=n(this,oe).call(this);if(r&&(w(r,"aria-controls",t&&n(this,Ei)),w(r,"aria-expanded",kt(t))),s&&w(s,"aria-labelledby",t&&n(this,Si)),n(this,xe).set(t),h(this,R,Gl).call(this,i),ge(),n(this,xi)){t?s?.focus():r?.focus();for(let a of[this.el,s])a&&a.setAttribute("data-keyboard","")}else for(let a of[this.el,s])a&&a.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:i}),t)!this.isSubmenu&&n(this,Be).activeMenu!==this&&(n(this,Be).activeMenu?.close(i),n(this,Be).activeMenu=this),n(this,Qt)?.onOpen?.(i);else{if(this.isSubmenu)for(let a of n(this,Tt))a.close(i);else n(this,Be).activeMenu=null;n(this,Qt)?.onClose?.(i)}t&&requestAnimationFrame(h(this,R,uo).bind(this))},uo=function(){n(this,Pi)||n(this,Ti)||(n(this,at).update(),requestAnimationFrame(()=>{n(this,xi)?n(this,at).focusActive():n(this,at).scroll()}))},ql=function(){return!h(this,R,or).call(this)&&n(this,xe).call(this)},or=function(){return n(this,nr).call(this)||n(this,ar).call(this)},Dl=function(t){n(this,nr).set(t)},Ol=function(t){let i=n(this,oe).call(this);n(this,Nt)||i&&ks(i,t)||t.stopPropagation()},Hl=function(t){let i=n(this,oe).call(this);n(this,Nt)||i&&ks(i,t)||this.close(t)},Fl=function(){let t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&Lr(this.el,t,i=>i.getAttribute("role")==="menu")?t:null},Gl=function(t){this.isSubmenu||(n(this,xe).call(this)?n(this,Be).remote.pauseControls(t):n(this,Be).remote.resumeControls(t))},Bl=function(t){n(this,Tt).add(t),y(t,"open",n(this,ms)),y(t,"close",n(this,fs)),P(n(this,ps))},ps=new WeakMap,Ql=function(t){n(this,Tt).delete(t)},Ti=new WeakMap,ms=new WeakMap,Kl=function(t){T(this,Ti,!0);let i=n(this,oe).call(this);this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(let r of n(this,Tt))if(r!==t.target)for(let s of[r.el,r.triggerElement])s?.setAttribute("aria-hidden","true");if(i){let r=t.target.el;for(let s of i.children)s.contains(r)?s.setAttribute("data-open",""):s!==r&&s.setAttribute("data-hidden","")}},fs=new WeakMap,Nl=function(t){T(this,Ti,!1);let i=n(this,oe).call(this);this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(let r of n(this,Tt))for(let s of[r.el,r.triggerElement])s?.setAttribute("aria-hidden","false");if(i)for(let r of i.children)r.removeAttribute("data-open"),r.removeAttribute("data-hidden")},Mi=new WeakMap,Pi=new WeakMap,Wl=function(t){let i=n(this,oe).call(this);i&&t.propertyName==="height"&&(T(this,Pi,t.type==="transitionstart"),w(i,"data-transition",n(this,Pi)?"height":null),n(this,xe).call(this)&&h(this,R,uo).call(this));for(let r of n(this,Wt))r(t)},E(Bt,2,"triggerElement",kl,nt),E(Bt,2,"contentElement",Cl,nt),E(Bt,2,"isSubmenu",Pl,nt),E(Bt,1,"open",Ml,nt),E(Bt,1,"close",Tl,nt),j(Bt,nt),B(nt,"props",{showDelay:0});var Ul,zl,Mt,lr,ho,lt,Yl,jl,co,Ut=class extends(zl=f,Ul=[_],zl){constructor(){super();G(ho,5,this);g(this,lt);g(this,Mt);g(this,lr,M(null));new X}get expanded(){return n(this,Mt)?.expanded()??!1}onSetup(){T(this,Mt,H(se))}onAttach(t){n(this,Mt).attachMenuButton(this),d(h(this,lt,Yl).bind(this)),L(t,"type","button")}onConnect(t){d(h(this,lt,jl).bind(this)),h(this,lt,co).call(this);let i=new MutationObserver(h(this,lt,co).bind(this));i.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),P(()=>i.disconnect()),be(t,r=>{this.dispatch("select",{trigger:r})})}};ho=Y(zl),Mt=new WeakMap,lr=new WeakMap,lt=new WeakSet,Yl=function(){n(this,Mt).disableMenuButton(this.$props.disabled())},jl=function(){let t=n(this,lr).call(this);t&&d(()=>{let i=n(this,Mt).hint();i&&(t.textContent=i)})},co=function(){let t=this.el?.querySelector('[data-part="hint"]');n(this,lr).set(t??null)},E(ho,2,"expanded",Ul,Ut),j(ho,Ut),B(Ut,"props",{disabled:!1});var Xl=class extends Ut{};var Jl=class extends f{static props={container:null,disabled:!1};#e=null;#t;onSetup(){this.#t=S(),J(dr,{attach:this.#i.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){}onDestroy(){this.#e?.remove(),this.#e=null}#i(e){this.#s(!1),this.#e=e,Lt(()=>{Lt(()=>{this.connectScope&&d(this.#r.bind(this))})})}#r(){let{fullscreen:e}=this.#t.$state,{disabled:t}=this.$props;this.#s(t()==="fullscreen"?!e():!t())}#s(e){if(!this.#e)return;let t=this.#o(this.$props.container());if(!t)return;let i=this.#e.parentElement===t;w(this.#e,"data-portal",e),e?i||(this.#e.remove(),t.append(this.#e)):i&&this.#e.parentElement===t&&(this.#e.remove(),this.el?.append(this.#e))}#o(e){return tt(e)?e:e?document.querySelector(e):document.body}},dr=ve();var Zl=class extends f{static props={placement:null,offset:0,alignOffset:0};#e;constructor(){super(),new X;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){if(this.#e=H(se),this.#e.attachMenuItems(this),ne(dr)){let t=H(dr);t&&(J(dr,null),t.attach(e),P(()=>t.attach(null)))}}onConnect(e){d(this.#t.bind(this))}#t(){if(!this.el)return;let e=this.$props.placement();if(e){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:t,alignOffset:i}=this.$props;return $r(this.el,this.#i(),e,{offsetVarName:"media-menu",xOffset:i(),yOffset:t()})}else this.el.removeAttribute("style"),this.el.style.display="none"}#i(){return this.#e.button()}};var ed,td,id,dt,gs,zt,po,rd,Ci=class extends(id=f,td=[_],ed=[_],id){constructor(){super();G(gs,5,this);g(this,zt);g(this,dt);T(this,dt,new ft),n(this,dt).onValueChange=h(this,zt,rd).bind(this)}get values(){return n(this,dt).values}get value(){return n(this,dt).value}set value(t){n(this,dt).value=t}onSetup(){x?h(this,zt,po).call(this):d(h(this,zt,po).bind(this))}};gs=Y(id),dt=new WeakMap,zt=new WeakSet,po=function(){n(this,dt).value=this.$props.value()},rd=function(t,i){let r=this.createEvent("change",{detail:t,trigger:i});this.dispatch(r)},E(gs,2,"values",td,Ci),E(gs,2,"value",ed,Ci),j(gs,Ci),B(Ci,"props",{value:""});var sd,od,Ze,Yt,mo,de,nd,ad,ld,dd,ud,fo,hd,ur=class extends(od=f,sd=[_],od){constructor(){super();G(mo,5,this);g(this,de);g(this,Ze,M(!1));g(this,Yt,{value:this.$props.value,check:h(this,de,ud).bind(this),onCheck:null});new X}get checked(){return n(this,Ze).call(this)}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":n(this,Ze),"aria-checked":O(n(this,Ze))})}onAttach(t){let i=ne(se);L(t,"tabindex",i?"-1":"0"),L(t,"role",i?"menuitemradio":"radio"),d(h(this,de,ld).bind(this))}onConnect(t){h(this,de,ad).call(this),be(t,h(this,de,dd).bind(this)),P(h(this,de,nd).bind(this))}};mo=Y(od),Ze=new WeakMap,Yt=new WeakMap,de=new WeakSet,nd=function(){Jt(()=>{H(Ki).remove(n(this,Yt))},this.connectScope)},ad=function(){H(Ki).add(n(this,Yt))},ld=function(){let{value:t}=this.$props,i=t();m(n(this,Ze))&&n(this,Yt).onCheck?.(i)},dd=function(t){m(n(this,Ze))||(h(this,de,fo).call(this,!0,t),h(this,de,hd).call(this,t),n(this,Yt).onCheck?.(m(this.$props.value),t))},ud=function(t,i){m(n(this,Ze))!==t&&h(this,de,fo).call(this,t,i)},fo=function(t,i){n(this,Ze).set(t),this.dispatch("change",{detail:t,trigger:i})},hd=function(t){this.dispatch("select",{trigger:t})},E(mo,2,"checked",sd,ur),j(mo,ur),B(ur,"props",{value:""});var cd=class extends f{static props={disabled:!1,event:void 0,action:void 0};#e;#t=null;onSetup(){this.#e=S();let{event:e,action:t}=this.$props;this.setAttributes({event:e,action:t})}onAttach(e){e.setAttribute("data-media-gesture",""),e.style.setProperty("pointer-events","none")}onConnect(e){this.#t=this.#e.player.el?.querySelector("[data-media-provider]"),d(this.#i.bind(this))}#i(){let e=this.$props.event(),t=this.$props.disabled();!this.#t||!e||t||(/^dbl/.test(e)&&(e=e.split(/^dbl/)[1]),(e==="pointerup"||e==="pointerdown")&&this.#e.$state.pointer()==="coarse"&&(e=e==="pointerup"?"touchend":"touchstart"),y(this.#t,e,this.#o.bind(this),{passive:!1}))}#r=0;#s=-1;#o(e){if(this.$props.disabled()||Tr(e)&&(e.button!==0||this.#e.activeMenu)||Mr(e)&&this.#e.activeMenu||ti(e)||!this.#a(e))return;if(e.MEDIA_GESTURE=!0,e.preventDefault(),!m(this.$props.event)?.startsWith("dbl"))this.#r===0&&setTimeout(()=>{this.#r===1&&this.#n(e)},250);else if(this.#r===1){queueMicrotask(()=>this.#n(e)),clearTimeout(this.#s),this.#r=0;return}this.#r===0&&(this.#s=window.setTimeout(()=>{this.#r=0},275)),this.#r++}#n(e){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.#l()&&this.#h(m(this.$props.action),e),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}#a(e){if(!this.el)return!1;if(Tr(e)||To(e)||Mr(e)){let t=Mr(e)?e.changedTouches[0]??e.touches[0]:void 0,i=t?.clientX??e.clientX,r=t?.clientY??e.clientY,s=this.el.getBoundingClientRect(),a=r>=s.top&&r<=s.bottom&&i>=s.left&&i<=s.right;return e.type.includes("leave")?!a:a}return!0}#l(){let e=this.#e.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(e).sort((t,i)=>+getComputedStyle(i).zIndex-+getComputedStyle(t).zIndex)[0]===this.el}#h(e,t){if(!e)return;let i=new F("will-trigger",{detail:e,cancelable:!0,trigger:t});if(this.dispatchEvent(i),i.defaultPrevented)return;let[r,s]=e.replace(/:([a-z])/,"-$1").split(":");e.includes(":fullscreen")?this.#e.remote.toggleFullscreen("prefer-media",t):e.includes("seek:")?this.#e.remote.seek(m(this.#e.$state.currentTime)+(+s||0),t):this.#e.remote[Co(r)](t),this.dispatch("trigger",{detail:e,trigger:t})}};var ys=class{priority=10;#e=null;#t=Pr();#i;constructor(e){this.#i=e}attach(){}canRender(){return!0}detach(){this.#t.empty(),this.#i.reset(),this.#e=null}changeTrack(e){!e||this.#e===e||(this.#t.empty(),e.readyState<2?(this.#i.reset(),this.#t.add(y(e,"load",()=>this.#r(e),{once:!0}))):this.#r(e),this.#t.add(y(e,"add-cue",t=>{this.#i.addCue(t.detail)}),y(e,"remove-cue",t=>{this.#i.removeCue(t.detail)})),this.#e=e)}#r(e){this.#i.changeTrack({cues:[...e.cues],regions:[...e.regions]})}};var pd=class o extends f{static props={textDir:"ltr",exampleText:"Captions look like this."};#e;static lib=M(null);onSetup(){this.#e=S(),this.setAttributes({"aria-hidden":O(this.#t.bind(this))})}onAttach(e){e.style.setProperty("pointer-events","none")}onConnect(e){o.lib()||import("media-captions").then(t=>o.lib.set(t)),d(this.#i.bind(this))}#t(){let{textTrack:e,remotePlaybackState:t,iOSControls:i}=this.#e.$state,r=e();return i()||t()==="connected"||!r||!te(r)}#i(){if(!o.lib())return;let{viewType:e}=this.#e.$state;return e()==="audio"?this.#r():this.#a()}#r(){return d(this.#s.bind(this)),this.#u(null),()=>{this.el.textContent=""}}#s(){if(this.#t())return;this.#o();let{textTrack:e}=this.#e.$state;y(e(),"cue-change",this.#o.bind(this)),d(this.#n.bind(this))}#o(){this.el.textContent="",this.#p>=0&&this.#m();let{realCurrentTime:e,textTrack:t}=this.#e.$state,{renderVTTCueString:i}=o.lib(),r=m(e),s=m(t).activeCues;for(let a of s){let l=this.#y(),u=this.#b();u.innerHTML=i(a,r),l.append(u),this.el.append(u)}}#n(){let{realCurrentTime:e}=this.#e.$state,{updateTimedVTTCueNodes:t}=o.lib();t(this.el,e())}#a(){let{CaptionsRenderer:e}=o.lib(),t=new e(this.el),i=new ys(t);return this.#e.textRenderers.add(i),d(this.#l.bind(this,t)),d(this.#h.bind(this,t)),this.#u(t),()=>{this.el.textContent="",this.#e.textRenderers.remove(i),t.destroy()}}#l(e){e.dir=this.$props.textDir()}#h(e){if(this.#t())return;let{realCurrentTime:t,textTrack:i}=this.#e.$state;e.currentTime=t(),this.#p>=0&&i()?.activeCues[0]&&this.#m()}#u(e){let t=this.#e.player;if(!t)return;let i=this.#c.bind(this,e);y(t,"vds-font-change",i)}#c(e){if(this.#p>=0){this.#f();return}let{textTrack:t}=this.#e.$state;t()?.activeCues[0]?e?.update(!0):this.#d()}#d(){let e=this.#y();w(e,"data-example","");let t=this.#b();w(t,"data-example",""),t.textContent=this.$props.exampleText(),e?.append(t),this.el?.append(e),this.el?.setAttribute("data-example",""),this.#f()}#p=-1;#f(){window.clearTimeout(this.#p),this.#p=window.setTimeout(this.#m.bind(this),2500)}#m(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.#p=-1}#y(){let e=document.createElement("div");return w(e,"data-part","cue-display"),e}#b(){let e=document.createElement("div");return w(e,"data-part","cue"),e}};var md=class extends f{static props={src:null,alt:null,crossOrigin:null};static state=new ce({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#e;onSetup(){this.#e=S(),this.#a(),this.#l(),this.#h(),this.#r()}onAttach(e){e.style.setProperty("pointer-events","none"),d(this.#o.bind(this)),d(this.#a.bind(this)),d(this.#l.bind(this)),d(this.#h.bind(this)),d(this.#r.bind(this));let{started:t}=this.#e.$state;this.setAttributes({"data-visible":()=>!t()&&!this.$state.hidden(),"data-loading":this.#s.bind(this),"data-error":this.#t.bind(this),"data-hidden":this.$state.hidden})}onConnect(e){d(this.#i.bind(this)),d(this.#u.bind(this))}#t(){let{error:e}=this.$state;return!Ve(e())}#i(){let{canLoadPoster:e,poster:t}=this.#e.$state;!e()&&t()&&Ue(t(),"preconnect")}#r(){let{src:e}=this.$props,{poster:t,nativeControls:i}=this.#e.$state;this.el&&w(this.el,"display",i()?"none":null),this.$state.hidden.set(this.#t()||!(e()||t())||i())}#s(){let{loading:e,hidden:t}=this.$state;return!t()&&e()}#o(){let e=this.$state.img();e&&(y(e,"load",this.#c.bind(this)),y(e,"error",this.#d.bind(this)),e.complete&&this.#c())}#n="";#a(){let{poster:e}=this.#e.$props,{canLoadPoster:t,providedPoster:i,inferredPoster:r}=this.#e.$state,s=this.$props.src()||"",a=s||e()||r();this.#n===i()&&i.set(s),this.$state.src.set(t()&&a.length?a:null),this.#n=s}#l(){let{src:e}=this.$props,{alt:t}=this.$state,{poster:i}=this.#e.$state;t.set(e()||i()?this.$props.alt():null)}#h(){let{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:i,poster:r}=this.#e.$state,s=e()!==null?e():i();t.set(/ytimg\.com|vimeo/.test(r()||"")?null:s===!0?"anonymous":s)}#u(){let{loading:e,error:t}=this.$state,{canLoadPoster:i,poster:r}=this.#e.$state;e.set(i()&&!!r()),t.set(null)}#c(){let{loading:e,error:t}=this.$state;e.set(!1),t.set(null)}#d(e){let{loading:t,error:i}=this.$state;t.set(!1),i.set(e)}};var fd=class extends f{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new ce({timeText:"",hidden:!1});#e;#t=M(null);#i=M(!0);#r=M(!0);onSetup(){this.#e=S(),this.#a();let{type:e}=this.$props;this.setAttributes({"data-type":e,"data-remainder":this.#u.bind(this)}),new fi({callback:this.#s.bind(this)}).attach(this)}onAttach(e){e.hasAttribute("role")||d(this.#l.bind(this)),d(this.#a.bind(this))}onConnect(e){P(Rr(e,this.#i.set)),d(this.#o.bind(this)),d(this.#n.bind(this))}#s(e){this.#r.set(e[0].isIntersecting)}#o(){let{hidden:e}=this.$props;this.$state.hidden.set(e()||!this.#i()||!this.#r())}#n(){if(!this.$props.toggle()){this.#t.set(null);return}this.el&&be(this.el,this.#c.bind(this))}#a(){let{hidden:e,timeText:t}=this.$state,{duration:i}=this.#e.$state;if(e())return;let{type:r,padHours:s,padMinutes:a,showHours:l}=this.$props,u=this.#h(r()),c=i(),p=this.#u();if(!Number.isFinite(u+c)){t.set("LIVE");return}let b=p?Math.max(0,c-u):u,C=Vt(b,{padHrs:s(),padMins:a(),showHrs:l()});t.set((p?"-":"")+C)}#l(){if(!this.el)return;let{toggle:e}=this.$props;w(this.el,"role",e()?"timer":null),w(this.el,"tabindex",e()?0:null)}#h(e){let{bufferedEnd:t,duration:i,currentTime:r}=this.#e.$state;switch(e){case"buffered":return t();case"duration":return i();default:return r()}}#u(){return this.$props.remainder()&&this.#t()!==!1}#c(e){if(e.preventDefault(),this.#t()===null){this.#t.set(!this.$props.remainder());return}this.#t.set(t=>!t)}};function Gd(o,e){let{canAirPlay:t,canFullscreen:i,canPictureInPicture:r,controlsHidden:s,currentTime:a,fullscreen:l,hasCaptions:u,isAirPlayConnected:c,paused:p,pictureInPicture:b,playing:C,pointer:$,poster:V,textTrack:U,viewType:re,waiting:Qe}=e.$state;o.classList.add("plyr"),o.classList.add("plyr--full-ui");let Ke={"plyr--airplay-active":c,"plyr--airplay-supported":t,"plyr--fullscreen-active":l,"plyr--fullscreen-enabled":i,"plyr--hide-controls":s,"plyr--is-touch":()=>$()==="coarse","plyr--loading":Qe,"plyr--paused":p,"plyr--pip-active":b,"plyr--pip-enabled":r,"plyr--playing":C,"plyr__poster-enabled":V,"plyr--stopped":()=>p()&&a()===0,"plyr--captions-active":U,"plyr--captions-enabled":u},Oe=Pr();for(let fe of Object.keys(Ke))Oe.add(d(()=>void o.classList.toggle(fe,!!Ke[fe]())));return Oe.add(d(()=>{let fe=`plyr--${re()}`;return o.classList.add(fe),()=>o.classList.remove(fe)}),d(()=>{let{$provider:fe}=e,Ne=fe()?.type,ut=`plyr--${Bd(Ne)?"html5":Ne}`;return o.classList.toggle(ut,!!Ne),()=>o.classList.remove(ut)})),()=>Oe.empty()}function Bd(o){return o==="audio"||o==="video"}function Rx(o){return o?.$$PROVIDER_TYPE==="REMOTION"}function Lx(o){return o?.type==="video/remotion"}export{Ai as a,ws as b,Rs as c,Ar as d,S as e,Ls as f,_i as g,Ii as h,Ir as i,No as j,ii as k,qr as l,Dr as m,Or as n,Wo as o,Xu as p,Ju as q,Zu as r,eh as s,th as t,ih as u,rh as v,Td as w,Md as x,Uo as y,sh as z,$s as A,Di as B,Oi as C,Br as D,Nh as E,oi as F,Hi as G,it as H,Fi as I,Gi as J,Bi as K,Qi as L,Vt as M,ni as N,Tn as O,hi as P,va as Q,ba as R,Ea as S,Sa as T,xa as U,Ta as V,Zi as W,Ca as X,ka as Y,wa as Z,Ra as _,La as $,$a as aa,Va as ba,Aa as ca,_a as da,Ie as ea,je as fa,is as ga,rs as ha,Da as ia,yi as ja,ir as ka,Ya as la,Id as ma,ja as na,Xa as oa,Ja as pa,Za as qa,os as ra,Et as sa,nt as ta,Ut as ua,Xl as va,Jl as wa,Zl as xa,Ci as ya,ur as za,wd as Aa,Rd as Ba,cd as Ca,pd as Da,md as Ea,fd as Fa,Gd as Ga,Rx as Ha,Lx as Ia};
