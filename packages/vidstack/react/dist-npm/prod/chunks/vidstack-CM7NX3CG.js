import{a as d}from"./vidstack-UWNWDLQA.js";import{a as O}from"./vidstack-22WVJGJM.js";import{Ba as R,g as f,o as g}from"./vidstack-JWEPUGMK.js";import{ba as u,q as b}from"./vidstack-YO4XO2QW.js";import*as p from"react";function v(e){let l=d(),r=p.useRef();return r.current||(r.current=new f),p.useEffect(()=>{let n=e&&"current"in e?e.current:e,o=n instanceof O,a=o?n:l?.player;r.current.setPlayer(a??null),r.current.setTarget(n??null)},[l,e&&"current"in e?e.current:e]),r.current}import*as V from"react";function A({auto:e=!0,sort:l="descending"}={}){let r=d(),{qualities:n,quality:o,autoQuality:a,canSetQuality:i}=r.$state,y=u(n);return u(o),u(a),u(i),V.useMemo(()=>{let c=g(y,l==="descending"),s=c.map(t=>({quality:t,label:t.height+"p",value:Q(t),bitrateText:t.bitrate&&t.bitrate>0?`${(t.bitrate/1e6).toFixed(2)} Mbps`:null,get selected(){return t===o()},get autoSelected(){return a()},select(x){let m=n().indexOf(t);m>=0&&r.remote.changeQuality(m,x)}}));return e&&s.unshift({quality:null,label:b(e)?e:"Auto",value:"auto",bitrateText:null,get selected(){return a()},get autoSelected(){return a()},select(t){r.remote.requestAutoQuality(t)}}),Object.defineProperty(s,"disabled",{get(){return!i()||y.length<=1}}),Object.defineProperty(s,"selectedQuality",{get(){return o()}}),Object.defineProperty(s,"selectedValue",{get(){let t=o();return!a()&&t?Q(t):"auto"}}),s},[y,l])}function Q(e){return e.height+"_"+e.bitrate}import*as P from"react";function F({rates:e=R,normalLabel:l="Normal"}={}){let r=d(),{playbackRate:n,canSetPlaybackRate:o}=r.$state;return u(n),u(o),P.useMemo(()=>{let a=e.map(i=>{let y=typeof i=="number"?i===1&&l?l:i+"x":i.label,c=typeof i=="number"?i:i.rate;return{label:y,value:c.toString(),rate:c,get selected(){return n()===c},select(s){r.remote.changePlaybackRate(c,s)}}});return Object.defineProperty(a,"disabled",{get(){return!o()||!a.length}}),Object.defineProperty(a,"selectedValue",{get(){return n().toString()}}),a},[e])}export{v as a,A as b,F as c};
