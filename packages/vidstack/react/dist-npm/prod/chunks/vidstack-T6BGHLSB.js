var p=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:(?:\?hash=|\?h=|\/)(.*))?/,r=new Map,n=new Map;function u(e){let t=e.match(p);return{videoId:t?.[1],hash:t?.[2]}}async function f(e,t,m){if(r.has(e))return r.get(e);if(n.has(e))return n.get(e);let i=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${e}`;m&&(i=i.concat(`?h=${m}`));let s=window.fetch(i,{mode:"cors",signal:t.signal}).then(o=>o.json()).then(o=>{let h=/vimeocdn.com\/video\/(.*)?_/,c=o?.thumbnail_url?.match(h)?.[1],l=c?`https://i.vimeocdn.com/video/${c}_1920x1080.webp`:"",a={title:o?.title??"",duration:o?.duration??0,poster:l,pro:o.account_type!=="basic"};return r.set(e,a),a}).finally(()=>n.delete(e));return n.set(e,s),s}export{u as a,f as b};
