import{a as d}from"./vidstack-N64GZPYM.js";import{a as O}from"./vidstack-T3YB2P2M.js";import{Ba as R,g as f,o as g}from"./vidstack-7EEF72GH.js";import{ba as u,q as m}from"./vidstack-DK4Y24W7.js";import*as p from"react";function S(e){let l=d(),a=p.useRef();return a.current||(a.current=new f),p.useEffect(()=>{let n=e&&"current"in e?e.current:e,o=n instanceof O,r=o?n:l?.player;a.current.setPlayer(r??null),a.current.setTarget(n??null)},[l,e&&"current"in e?e.current:e]),a.current}import*as P from"react";function A({auto:e=!0,sort:l="descending"}={}){let a=d(),{qualities:n,quality:o,autoQuality:r,canSetQuality:i}=a.$state,y=u(n);return u(o),u(r),u(i),P.useMemo(()=>{let c=g(y,l==="descending"),s=c.map(t=>({quality:t,label:t.height+"p",value:Q(t),bitrateText:t.bitrate&&t.bitrate>0?`${(t.bitrate/1e6).toFixed(2)} Mbps`:null,get selected(){return t===o()},get autoSelected(){return r()},select(V){let b=n().indexOf(t);b>=0&&a.remote.changeQuality(b,V)}}));return e&&s.unshift({quality:null,label:m(e)?e:"Auto",value:"auto",bitrateText:null,get selected(){return r()},get autoSelected(){return r()},select(t){a.remote.requestAutoQuality(t)}}),Object.defineProperty(s,"disabled",{get(){return!i()||y.length<=1}}),Object.defineProperty(s,"selectedQuality",{get(){return o()}}),Object.defineProperty(s,"selectedValue",{get(){let t=o();return!r()&&t?Q(t):"auto"}}),s},[y,l])}function Q(e){return e.height+"_"+e.bitrate}import*as x from"react";function L({rates:e=R,normalLabel:l="Normal"}={}){let a=d(),{playbackRate:n,canSetPlaybackRate:o}=a.$state;return u(n),u(o),x.useMemo(()=>{let r=e.map(i=>{let y=typeof i=="number"?i===1&&l?l:i+"x":i.label,c=typeof i=="number"?i:i.rate;return{label:y,value:c.toString(),rate:c,get selected(){return n()===c},select(s){a.remote.changePlaybackRate(c,s)}}});return Object.defineProperty(r,"disabled",{get(){return!o()||!r.length}}),Object.defineProperty(r,"selectedValue",{get(){return n().toString()}}),r},[e])}export{S as a,A as b,L as c};
